{"version":3,"file":"kendo.editable.min.js","sources":["kendo.editable.js"],"sourcesContent":["(function(f, define) {\n    define('kendo.editable',[ \"kendo.checkbox\", \"kendo.dropdownlist\", \"kendo.datepicker\", \"kendo.numerictextbox\", \"kendo.validator\", \"kendo.binder\" ], f);\n})(function() {\n\nvar __meta__ = { // jshint ignore:line\n    id: \"editable\",\n    name: \"Editable\",\n    category: \"framework\",\n    depends: [ \"checkbox\", \"dropdownlist\", \"datepicker\", \"numerictextbox\", \"validator\", \"binder\" ],\n    hidden: true\n};\n\n/* jshint eqnull: true */\n(function($, undefined) {\n    var kendo = window.kendo,\n        ui = kendo.ui,\n        Widget = ui.Widget,\n        extend = $.extend,\n        isFunction = kendo.isFunction,\n        isPlainObject = $.isPlainObject,\n        inArray = $.inArray,\n        POINT = \".\",\n        AUTOCOMPLETEVALUE = \"off\",\n        nameSpecialCharRegExp = /(\"|\\%|'|\\[|\\]|\\$|\\.|\\,|\\:|\\;|\\+|\\*|\\&|\\!|\\#|\\(|\\)|<|>|\\=|\\?|\\@|\\^|\\{|\\}|\\~|\\/|\\||`)/g,\n        ERRORTEMPLATE = '<div class=\"k-tooltip k-tooltip-error k-validator-tooltip\">' +\n            '<span class=\"k-tooltip-icon k-icon k-i-warning\"></span>' +\n            '<span class=\"k-tooltip-content\">#= message #</span>' +\n            '<span class=\"k-callout k-callout-n\"></span>' +\n        '</div>',\n        CHANGE = \"change\";\n    var EQUAL_SET = \"equalSet\";\n    var specialRules = [\"url\", \"email\", \"number\", \"date\", \"boolean\"];\n\n    function fieldType(field) {\n        field = field != null ? field : \"\";\n        return field.type || kendo.type(field) || \"string\";\n    }\n\n    function convertToValueBinding(container) {\n        container.find(\":input:not(:button, .k-combobox .k-input, .k-checkbox-list .k-checkbox, .k-radio-list .k-radio, [\" + kendo.attr(\"role\") + \"=listbox], [\" + kendo.attr(\"role\") + \"=upload], [\" + kendo.attr(\"skip\") + \"], [type=file])\").each(function() {\n            var bindAttr = kendo.attr(\"bind\"),\n                binding = this.getAttribute(bindAttr) || \"\",\n                bindingName = this.type === \"checkbox\" || this.type === \"radio\" ? \"checked:\" : \"value:\",\n                isAntiForgeryToken = this.getAttribute(\"name\") === Editable.antiForgeryTokenName,\n                fieldName = this.name;\n\n            if (binding.indexOf(bindingName) === -1 && fieldName && !isAntiForgeryToken) {\n                binding += (binding.length ? \",\" : \"\") + bindingName + fieldName;\n\n                $(this).attr(bindAttr, binding);\n            }\n        });\n    }\n\n    function createAttributes(options) {\n        var field = (options.model.fields || options.model)[options.field],\n            type = fieldType(field),\n            validation = field ? field.validation : {},\n            attributes = field ? field.attributes : {},\n            ruleName,\n            DATATYPE = kendo.attr(\"type\"),\n            BINDING = kendo.attr(\"bind\"),\n            rule,\n            attr = {\n                id: options.id || options.field,\n                name: options.field,\n                title: options.title ? options.title : options.field\n            };\n\n        for (ruleName in validation) {\n            rule = validation[ruleName];\n\n            if (inArray(ruleName, specialRules) >= 0) {\n                attr[DATATYPE] = ruleName;\n            } else if (!isFunction(rule)) {\n                var culture = kendo.getCulture();\n\n                if (typeof rule === \"number\" && culture.name.length) {\n                    var numberFormat = culture.numberFormat;\n                    var stringRule = rule.toString()\n                        .replace(POINT, numberFormat[POINT]);\n\n                    attr[ruleName] = stringRule;\n                } else {\n                    attr[ruleName] = isPlainObject(rule) ? rule.value || ruleName : rule;\n                }\n            }\n\n            attr[kendo.attr(ruleName + \"-msg\")] = rule.message;\n\n            attr.autocomplete = AUTOCOMPLETEVALUE;\n        }\n\n        for (var attributeName in attributes) {\n            attr[attributeName] = attributes[attributeName];\n        }\n\n        if (inArray(type, specialRules) >= 0) {\n            attr[DATATYPE] = type;\n        }\n\n        attr[BINDING] = (type === \"boolean\" ? \"checked:\" : \"value:\") + options.field;\n\n        return attr;\n    }\n\n    function addIdAttribute(container, attr) {\n        var id = container.attr(\"id\");\n\n        if (id) {\n            attr.id = id;\n            container.removeAttr(\"id\");\n        }\n\n        return attr;\n    }\n\n    function convertItems(items) {\n        var idx,\n            length,\n            item,\n            value,\n            text,\n            result;\n\n        if (items && items.length) {\n            result = [];\n            for (idx = 0, length = items.length; idx < length; idx++) {\n                item = items[idx];\n                text = item.text || item.value || item;\n                value = item.value == null ? (item.text || item) : item.value;\n\n                result[idx] = { text: text, value: value };\n            }\n        }\n        return result;\n    }\n\n    function getEditorTag(type, options) {\n        var tag;\n\n        if (!type.length) { return; }\n\n        if ((type === \"DropDownTree\" && options && options.checkboxes) || type === \"MultiSelect\") {\n            tag = \"<select />\";\n        } else if (type === \"RadioGroup\" || type === \"CheckBoxGroup\") {\n            tag = \"<ul />\";\n        } else {\n            tag = type === \"Editor\" || type === \"TextArea\" ? \"<textarea />\" : \"<input />\";\n        }\n\n        return tag;\n    }\n\n    var kendoEditors = [\n        \"AutoComplete\", \"CheckBox\", \"CheckBoxGroup\", \"ColorPicker\", \"ComboBox\", \"DateInput\",\n        \"DatePicker\", \"DateTimePicker\", \"DropDownTree\",\n        \"Editor\", \"MaskedTextBox\", \"MultiColumnComboBox\",\"MultiSelect\",\n        \"NumericTextBox\", \"RadioGroup\", \"Rating\", \"Slider\", \"Switch\", \"TimePicker\", \"DropDownList\",\n        \"TextBox\", \"TextArea\", \"Captcha\"\n    ];\n\n    var editors = {\n        \"hidden\": function(container, options) {\n            var attr = createAttributes(options);\n            $('<input type=\"hidden\"/>').attr(attr).appendTo(container);\n        },\n        \"number\": function(container, options) {\n            var attr = createAttributes(options);\n            $('<input type=\"text\"/>').attr(attr).appendTo(container).kendoNumericTextBox({ format: options.format });\n            $('<span ' + kendo.attr(\"for\") + '=\"' + options.field + '\" class=\"k-invalid-msg k-hidden\"/>').appendTo(container);\n        },\n        \"date\": function(container, options) {\n            var attr = createAttributes(options),\n                format = options.format;\n\n            if (format) {\n                format = kendo._extractFormat(format);\n            }\n\n            attr[kendo.attr(\"format\")] = format;\n\n            $('<input type=\"text\"/>').attr(attr).appendTo(container).kendoDatePicker({ format: options.format });\n            $('<span ' + kendo.attr(\"for\") + '=\"' + options.field + '\" class=\"k-invalid-msg k-hidden\"/>').appendTo(container);\n        },\n        \"string\": function(container, options) {\n            var attr = createAttributes(options);\n\n            $('<input type=\"text\"/>').attr(attr).appendTo(container).kendoTextBox();\n        },\n        \"boolean\": function(container, options) {\n            var attr = createAttributes(options);\n            var element = $('<input type=\"checkbox\" />').attr(attr).kendoCheckBox().appendTo(container);\n\n            renderHiddenForMvcCheckbox(element, container, options);\n        },\n        \"values\": function(container, options) {\n            var attr = createAttributes(options);\n            var items = kendo.stringify(convertItems(options.values));\n            $('<select ' + kendo.attr(\"text-field\") + '=\"text\"' + kendo.attr(\"value-field\") + '=\"value\"' +\n                kendo.attr(\"source\") + \"=\\'\" + (items ? items.replace(/\\'/g,\"&apos;\") : items) +\n                \"\\'\" + kendo.attr(\"role\") + '=\"dropdownlist\"/>') .attr(attr).appendTo(container);\n            $('<span ' + kendo.attr(\"for\") + '=\"' + options.field + '\" class=\"k-invalid-msg  k-hidden\"/>').appendTo(container);\n        },\n        \"kendoEditor\": function(container, options) {\n            var attr = createAttributes(options);\n            var type = options.editor;\n            var editor = \"kendo\" + type;\n            var editorOptions = options.editorOptions;\n            var tagElement = getEditorTag(type, editorOptions);\n\n            var element = $(tagElement)\n                .attr(attr)\n                .appendTo(container)\n                [editor](editorOptions);\n\n            renderHiddenForMvcCheckbox(element, container, options);\n        }\n    };\n\n    var mobileEditors = {\n        \"number\": function(container, options) {\n            var attr = createAttributes(options);\n            attr = addIdAttribute(container, attr);\n\n            $('<input type=\"number\"/>').attr(attr).appendTo(container);\n        },\n        \"date\": function(container, options) {\n            var attr = createAttributes(options);\n            attr = addIdAttribute(container, attr);\n\n            $('<input type=\"date\"/>').attr(attr).appendTo(container);\n        },\n        \"string\": function(container, options) {\n            var attr = createAttributes(options);\n            attr = addIdAttribute(container, attr);\n\n            $('<input type=\"text\" />').attr(attr).appendTo(container);\n        },\n        \"boolean\": function(container, options) {\n            var attr = createAttributes(options);\n            attr = addIdAttribute(container, attr);\n\n            $('<input type=\"checkbox\" />').attr(attr).appendTo(container);\n        },\n        \"values\": function(container, options) {\n            var attr = createAttributes(options);\n            var items = options.values;\n            var select = $('<select />');\n\n            attr = addIdAttribute(container, attr);\n\n            for (var index in items) {\n                $('<option value=\"' + items[index].value + '\">' + items[index].text + '</option>').appendTo(select);\n            }\n\n            select.attr(attr).appendTo(container);\n        }\n    };\n\n    function addValidationRules(modelField, rules) {\n        var validation = modelField ? (modelField.validation || {}) : {},\n            rule,\n            descriptor;\n\n        for (rule in validation) {\n            descriptor = validation[rule];\n\n            if (isPlainObject(descriptor) && descriptor.value) {\n                descriptor = descriptor.value;\n            }\n\n            if (isFunction(descriptor)) {\n                rules[rule] = descriptor;\n            }\n        }\n    }\n\n    function renderHiddenForMvcCheckbox(tag, container, field) {\n        var addHidden = field ? (field.shouldRenderHidden || false) : false;\n\n        if (addHidden) {\n            tag.val(true);\n            container.append($(\"<input type='hidden' name='\" + field.field + \"' value='false' data-skip='true' data-validate='false'/>\"));\n        }\n    }\n\n    var Editable = Widget.extend({\n        init: function(element, options) {\n            var that = this;\n\n            if (options.target) {\n                options.$angular = options.target.options.$angular;\n\n                if (options.target.pane) {\n                    that._isMobile = true;\n                }\n            }\n            Widget.fn.init.call(that, element, options);\n            that._validateProxy = that._validate.bind(that);\n            that.refresh();\n        },\n\n        events: [CHANGE],\n\n        options: {\n            name: \"Editable\",\n            editors: editors,\n            mobileEditors: mobileEditors,\n            clearContainer: true,\n            validateOnBlur: true,\n            validationSummary: false,\n            errorTemplate: ERRORTEMPLATE,\n            skipFocus: false\n        },\n\n        editor: function(field, modelField) {\n            var that = this,\n                editors = that._isMobile ? mobileEditors : that.options.editors,\n                isObject = isPlainObject(field),\n                fieldName = isObject ? field.field : field,\n                model = that.options.model || {},\n                isValuesEditor = isObject && field.values,\n                type = isValuesEditor ? \"values\" : fieldType(modelField),\n                isHidden = isObject && typeof field.editor === \"string\" && field.editor === \"hidden\",\n                isCustomEditor = isObject && !isHidden && field.editor,\n                isKendoEditor = isObject && $.inArray(field.editor, kendoEditors) !== -1,\n                editor = isCustomEditor ? field.editor : editors[isHidden ? \"hidden\" : type],\n                container = that.element.find(\"[\" + kendo.attr(\"container-for\") + \"=\" + fieldName.replace(nameSpecialCharRegExp, \"\\\\$1\") + \"]\");\n\n            editor = editor ? editor : editors.string;\n\n            if (isKendoEditor) {\n                editor = editors.kendoEditor;\n            } else if (isCustomEditor && typeof field.editor === \"string\") {\n                editor = function(container) {\n                    container.append(field.editor);\n                };\n            }\n\n            container = container.length ? container : that.element;\n            editor(container, extend(true, {}, isObject ? field : { field: fieldName }, { model: model }));\n        },\n\n        _validate: function(e) {\n            var that = this,\n                input,\n                value = e.value,\n                preventChangeTrigger = that._validationEventInProgress,\n                values = {},\n                bindAttribute = kendo.attr(\"bind\"),\n                fieldName = e.field.replace(nameSpecialCharRegExp, \"\\\\$1\"),\n                bindingRegex = new RegExp(\"(value|checked)\\\\s*:\\\\s*\" + fieldName + \"\\\\s*(,|$)\");\n\n            values[e.field] = e.value;\n\n            input = $(':input[' + bindAttribute + '*=\"' + fieldName + '\"]', that.element)\n                .filter(\"[\" + kendo.attr(\"validate\") + \"!='false']\").filter(function() {\n                   return bindingRegex.test($(this).attr(bindAttribute));\n                });\n            if (input.length > 1) {\n                input = input.filter(function() {\n                    var element = $(this);\n                    return !element.is(\":radio\") || element.val() == value;\n                });\n            }\n\n            try {\n                that._validationEventInProgress = true;\n\n                if (!that.validatable.validateInput(input) || (!preventChangeTrigger && that.trigger(CHANGE, { values: values }))) {\n                    e.preventDefault();\n                }\n\n            } finally {\n                that._validationEventInProgress = false;\n            }\n        },\n\n        end: function() {\n            return this.validatable.validate();\n        },\n\n        destroy: function() {\n            var that = this;\n\n            that.angular(\"cleanup\", function() {\n                return { elements: that.element };\n            });\n\n            Widget.fn.destroy.call(that);\n\n            that.options.model.unbind(\"set\", that._validateProxy);\n            that.options.model.unbind(EQUAL_SET, that._validateProxy);\n\n            kendo.unbind(that.element);\n\n            if (that.validatable) {\n                that.validatable.destroy();\n            }\n            kendo.destroy(that.element);\n\n            that.element.removeData(\"kendoValidator\");\n\n            if (that.element.is(\"[\" + kendo.attr(\"role\") + \"=editable]\")) {\n                that.element.removeAttr(kendo.attr(\"role\"));\n            }\n        },\n\n        refresh: function() {\n            var that = this,\n                idx,\n                length,\n                fields = that.options.fields || [],\n                container = that.options.clearContainer ? that.element.empty() : that.element,\n                model = that.options.model || {},\n                rules = {},\n                field,\n                isObject,\n                fieldName,\n                modelField,\n                modelFields;\n\n            if (!Array.isArray(fields)) {\n                fields = [fields];\n            }\n\n            for (idx = 0, length = fields.length; idx < length; idx++) {\n                 field = fields[idx];\n                 isObject = isPlainObject(field);\n                 fieldName = isObject ? field.field : field;\n                 modelField = (model.fields || model)[fieldName];\n\n                 addValidationRules(modelField, rules);\n\n                 that.editor(field, modelField);\n            }\n\n            if (that.options.target) {\n                that.angular(\"compile\", function() {\n                    return {\n                        elements: container,\n                        data: container.map(function() { return { dataItem: model }; })\n                    };\n                });\n            }\n\n            if (!length) {\n                modelFields = model.fields || model;\n                for (fieldName in modelFields) {\n                    addValidationRules(modelFields[fieldName], rules);\n               }\n            }\n\n            convertToValueBinding(container);\n\n            if (that.validatable) {\n                that.validatable.destroy();\n            }\n\n            kendo.bind(container, that.options.model);\n\n            if (that.options.validateOnBlur) {\n                that.options.model\n                    .unbind(\"set\", that._validateProxy)\n                    .bind(\"set\", that._validateProxy);\n\n                that.options.model\n                    .unbind(EQUAL_SET, that._validateProxy)\n                    .bind(EQUAL_SET, that._validateProxy);\n            }\n\n            that.validatable = new kendo.ui.Validator(container, {\n                validateOnBlur: that.options.validateOnBlur,\n                validationSummary: that.options.validationSummary,\n                errorTemplate: that.options.errorTemplate || undefined,\n                rules: rules });\n\n            if (!that.options.skipFocus) {\n                container.find(\":kendoFocusable\").eq(0).trigger(\"focus\");\n            }\n        }\n   });\n\n   Editable.antiForgeryTokenName = \"__RequestVerificationToken\";\n\n   ui.plugin(Editable);\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) { (a3 || a2)(); });\n\n"],"names":["define","__meta__","id","name","category","depends","hidden","$","window","kendo","jQuery","undefined","ui","Widget","extend","isFunction","isPlainObject","inArray","POINT","AUTOCOMPLETEVALUE","nameSpecialCharRegExp","ERRORTEMPLATE","CHANGE","EQUAL_SET","specialRules","fieldType","field","type","convertToValueBinding","container","find","attr","each","bindAttr","binding","this","getAttribute","bindingName","isAntiForgeryToken","Editable","antiForgeryTokenName","fieldName","indexOf","length","createAttributes","options","model","fields","validation","attributes","ruleName","DATATYPE","BINDING","rule","title","culture","getCulture","numberFormat","stringRule","toString","replace","value","message","autocomplete","attributeName","addIdAttribute","removeAttr","convertItems","items","idx","item","text","result","getEditorTag","tag","checkboxes","kendoEditors","editors","mobileEditors","number","appendTo","date","string","boolean","values","select","index","addValidationRules","modelField","rules","descriptor","renderHiddenForMvcCheckbox","addHidden","shouldRenderHidden","val","append","init","element","that","target","$angular","pane","_isMobile","fn","call","_validateProxy","_validate","bind","refresh","events","kendoNumericTextBox","format","_extractFormat","kendoDatePicker","kendoTextBox","kendoCheckBox","stringify","kendoEditor","editor","editorOptions","tagElement","clearContainer","validateOnBlur","validationSummary","errorTemplate","skipFocus","isObject","isValuesEditor","isHidden","isCustomEditor","isKendoEditor","e","input","preventChangeTrigger","_validationEventInProgress","bindAttribute","bindingRegex","RegExp","filter","test","is","validatable","validateInput","trigger","preventDefault","end","validate","destroy","angular","elements","unbind","removeData","empty","modelFields","Array","isArray","data","map","dataItem","Validator","eq","plugin","amd","a1","a2","a3"],"mappings":"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"}