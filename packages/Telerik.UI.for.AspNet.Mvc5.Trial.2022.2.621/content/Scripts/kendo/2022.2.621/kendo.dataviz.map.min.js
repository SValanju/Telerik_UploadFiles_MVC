/**
 * Kendo UI v2022.2.621 (http://www.telerik.com/kendo-ui)
 * Copyright 2022 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.
 *
 * Kendo UI commercial licenses may be obtained at
 * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete
 * If you do not own a commercial license, this file shall be governed by the trial license terms.
 */
!function(define){define("util/main.min",["kendo.core.min"],function(){var a=window.kendo,h;function t(t){return t*t}var e=Date.now;if(!e)e=function(){return(new Date).getTime()};function i(t){if(typeof t!=="string")t+="px";return t}function n(t){var e=[];if(t){var i=a.toHyphens(t).split("-");for(var n=0;n<i.length;n++)e.push("k-pos-"+i[n])}return e.join(" ")}function o(t){var e={1:"i",10:"x",100:"c",2:"ii",20:"xx",200:"cc",3:"iii",30:"xxx",300:"ccc",4:"iv",40:"xl",400:"cd",5:"v",50:"l",500:"d",6:"vi",60:"lx",600:"dc",7:"vii",70:"lxx",700:"dcc",8:"viii",80:"lxxx",800:"dccc",9:"ix",90:"xc",900:"cm",1e3:"m"};var i=[1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1];var n="";while(t>0)if(t<i[0])i.shift();else{n+=e[i[0]];t-=i[0]}return n}function r(t){t=t.toLowerCase();var e={i:1,v:5,x:10,l:50,c:100,d:500,m:1e3};var i=0,n=0;for(var a=0;a<t.length;++a){var o=e[t.charAt(a)];if(!o)return null;i+=o;if(o>n)i-=2*n;n=o}return i}function s(i){var n=Object.create(null);return function(){var t="";for(var e=arguments.length;--e>=0;)t+=":"+arguments[e];return t in n?n[t]:n[t]=i.apply(this,arguments)}}function u(t){return c.test(t)}function l(t,e){try{return t.call(e,function(t){throw new i(t)})}catch(t){if(t instanceof i)return t.value;throw t}function i(t){this.value=t}}(0,a.deepExtend)(a,{util:{now:e,renderPos:n,renderSize:i,sqr:t,romanToArabic:r,arabicToRoman:o,memoize:s,isUnicodeLetter:u,withExit:l}});var c=new RegExp("[\\u0041-\\u005A\\u0061-\\u007A\\u00AA\\u00B5\\u00BA\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");return window.kendo})}("function"==typeof define&&define.amd?define:function(t,e,i){(i||e)()}),function(define){define("dataviz/map/location.min",["kendo.drawing.min","../../util/main.min"],function(){var e=window.kendo.jQuery,n=void 0,T=Math,N=T.abs,j=T.atan,S=T.atan2,L=T.cos,o=T.max,r=T.min,M=T.sin,R=T.tan,u=window.kendo,a=u.Class,V=u.dataviz,s=u.deepExtend,t=u.drawing.util,l=t.defined,Z=t.deg,O=t.rad,G=t.round,h=t.valueOrDefault,P=u.util.sqr,I=a.extend({init:function(t,e){if(arguments.length===1){this.lat=t[0];this.lng=t[1]}else{this.lat=t;this.lng=e}},DISTANCE_ITERATIONS:100,DISTANCE_CONVERGENCE:1e-12,DISTANCE_PRECISION:2,FORMAT:"{0:N6},{1:N6}",toArray:function(){return[this.lat,this.lng]},equals:function(t){return t&&t.lat===this.lat&&t.lng===this.lng},clone:function(){return new I(this.lat,this.lng)},round:function(t){this.lng=G(this.lng,t);this.lat=G(this.lat,t);return this},wrap:function(){this.lng=this.lng%180;this.lat=this.lat%90;return this},distanceTo:function(t,e){return this.greatCircleTo(t,e).distance},destination:function(t,e,i){e=O(e);i=i||V.map.datums.WGS84;var n=O(this.lat);var a=O(this.lng);var o=t/u.dataviz.map.datums.WGS84.a;var r=T.asin(M(n)*L(o)+L(n)*M(o)*L(e));var s=a+S(M(e)*M(o)*L(n),L(o)-M(n)*M(r));return new I(Z(r),Z(s))},greatCircleTo:function(t,e){t=I.create(t);e=e||V.map.datums.WGS84;if(!t||this.clone().round(8).equals(t.clone().round(8)))return{distance:0,azimuthFrom:0,azimuthTo:0};var h=e.a;var c=e.b;var i=e.f;var d=O(t.lng-this.lng);var f=j((1-i)*R(O(this.lat)));var n=M(f);var a=L(f);var p=j((1-i)*R(O(t.lat)));var v=M(p);var o=L(p);var m=d;var _;var g=this.DISTANCE_ITERATIONS;var y=false;var A;var w;var r;var s;var b;var u;var C;while(!y&&g-- >0){A=M(m);w=L(m);r=T.sqrt(P(o*A)+P(a*v-n*o*w));b=n*v+a*o*w;C=S(r,b);var E=a*o*A/r;s=1-P(E);u=0;if(s!==0)u=b-2*n*v/s;_=m;var k=i/16*s*(4+i*(4-3*s));m=d+(1-k)*i*E*(C+k*r*(u+k*b*(-1+2*P(u))));y=N(m-_)<=this.DISTANCE_CONVERGENCE}var l=s*(P(h)-P(c))/P(c);var F=1+l/16384*(4096+l*(-768+l*(320-175*l)));var x=l/1024*(256+l*(-128+l*(74-47*l)));var D=x*r*(u+x/4*(b*(-1+2*P(u))-x/6*u*(-3+4*P(r))*(-3+4*P(u))));var z=S(o*A,a*v-n*o*w);var B=S(a*A,-n*o+a*v*w);return{distance:G(c*F*(C-D),this.DISTANCE_PRECISION),azimuthFrom:Z(z),azimuthTo:Z(B)}}}),i=(I.fn.toString=function(){return u.format(this.FORMAT,this.lat,this.lng)},I.fromLngLat=function(t){return new I(t[1],t[0])},I.fromLatLng=function(t){return new I(t[0],t[1])},I.create=function(t,e){if(l(t))if(t instanceof I)return t.clone();else if(arguments.length===1&&t.length===2)return I.fromLatLng(t);else return new I(t,e)},a.extend({init:function(t,e){t=I.create(t);e=I.create(e);if(t.lng+180>e.lng+180&&t.lat+90<e.lat+90){this.se=t;this.nw=e}else{this.se=e;this.nw=t}},contains:function(t){var e=this.nw,i=this.se,n=h(t.lng,t[1]),a=h(t.lat,t[0]);return t&&n+180>=e.lng+180&&n+180<=i.lng+180&&a+90>=i.lat+90&&a+90<=e.lat+90},center:function(){var t=this.nw;var e=this.se;var i=t.lng+(e.lng-t.lng)/2;var n=t.lat+(e.lat-t.lat)/2;return new I(n,i)},containsAny:function(t){var e=false;for(var i=0;i<t.length;i++)e=e||this.contains(t[i]);return e},include:function(t){var e=this.nw,i=this.se,n=h(t.lng,t[1]),a=h(t.lat,t[0]);e.lng=r(e.lng,n);e.lat=o(e.lat,a);i.lng=o(i.lng,n);i.lat=r(i.lat,a)},includeAll:function(t){for(var e=0;e<t.length;e++)this.include(t[e])},edges:function(){var t=this.nw,e=this.se;return{nw:this.nw,ne:new I(t.lat,e.lng),se:this.se,sw:new I(e.lat,t.lng)}},toArray:function(){var t=this.nw,e=this.se;return[t,new I(t.lat,e.lng),e,new I(e.lat,t.lng)]},overlaps:function(t){return this.containsAny(t.toArray())||t.containsAny(this.toArray())}}));i.World=new i([90,-180],[-90,180]),i.create=function(t,e){if(t instanceof i)return t;else if(t&&e)return new i(t,e);else if(t&&t.length===4&&!e)return new i([t[0],t[1]],[t[2],t[3]])},s(V,{map:{Extent:i,Location:I}})})}("function"==typeof define&&define.amd?define:function(t,e,i){(i||e)()}),function(define){define("dataviz/map/attribution.min",["kendo.drawing.min"],function(){window.kendo.jQuery;var t=window.kendo,i=t.ui.Widget,o=t.template,e=t.drawing.util,n=e.valueOrDefault,a=e.defined,r=i.extend({init:function(t,e){i.fn.init.call(this,t,e);this._initOptions(e);this.items=[];this.element.addClass("k-widget k-attribution")},options:{name:"Attribution",separator:"&nbsp;|&nbsp;",itemTemplate:"#= text #"},filter:function(t,e){this._extent=t;this._zoom=e;this._render()},add:function(t){if(a(t)){if(typeof t==="string")t={text:t};this.items.push(t);this._render()}},remove:function(t){var e=[];for(var i=0;i<this.items.length;i++){var n=this.items[i];if(n.text!==t)e.push(n)}this.items=e;this._render()},clear:function(){this.items=[];this.element.empty()},_render:function(){var t=[];var e=o(this.options.itemTemplate);for(var i=0;i<this.items.length;i++){var n=this.items[i];var a=this._itemText(n);if(a!=="")t.push(e({text:a}))}if(t.length>0)this.element.empty().append(t.join(this.options.separator)).show();else this.element.hide()},_itemText:function(t){var e="";var i=this._inZoomLevel(t.minZoom,t.maxZoom);var n=this._inArea(t.extent);if(i&&n)e+=t.text;return e},_inZoomLevel:function(t,e){var i=true;t=n(t,-Number.MAX_VALUE);e=n(e,Number.MAX_VALUE);i=this._zoom>t&&this._zoom<e;return i},_inArea:function(t){var e=true;if(t)e=t.contains(this._extent);return e}});t.dataviz.ui.plugin(r)})}("function"==typeof define&&define.amd?define:function(t,e,i){(i||e)()}),function(define){define("dataviz/map/navigator.min",["kendo.core.min"],function(){var a=window.kendo.jQuery,n=window.kendo,o=n.ui.Widget,e=n.keys,r=".kendoNavigator";function t(t){return n.format('<button class="k-button k-rounded-full k-button-flat k-button-flat-base k-icon-button k-navigator-{0}" aria-label="move {0}">'+'<span class="k-button-icon k-icon k-i-arrow-60-{0}"></span>'+"</button>",t)}var s=t("up")+t("right")+t("down")+t("left"),i=o.extend({init:function(t,e){o.fn.init.call(this,t,e);this._initOptions(e);this.element.addClass("k-widget k-navigator").append(s).on("click"+r,".k-button",this._click.bind(this));var i=this.element.parent().closest("["+n.attr("role")+"]");this._keyroot=i.length>0?i:this.element;this._tabindex(this._keyroot);this._keydown=this._keydown.bind(this);this._keyroot.on("keydown",this._keydown)},options:{name:"Navigator",panStep:1},events:["pan"],dispose:function(){this._keyroot.off("keydown",this._keydown)},_pan:function(t,e){var i=this.options.panStep;this.trigger("pan",{x:t*i,y:e*i})},_click:function(t){var e=0;var i=0;var n=a(t.currentTarget);if(n.is(".k-navigator-up"))i=1;else if(n.is(".k-navigator-down"))i=-1;else if(n.is(".k-navigator-right"))e=1;else if(n.is(".k-navigator-left"))e=-1;this._pan(e,i);t.preventDefault()},_keydown:function(t){switch(t.which){case e.UP:this._pan(0,1);t.preventDefault();break;case e.DOWN:this._pan(0,-1);t.preventDefault();break;case e.RIGHT:this._pan(1,0);t.preventDefault();break;case e.LEFT:this._pan(-1,0);t.preventDefault();break}}});n.dataviz.ui.plugin(i)})}("function"==typeof define&&define.amd?define:function(t,e,i){(i||e)()}),function(define){define("dataviz/map/zoom.min",["kendo.core.min"],function(){var n=window.kendo.jQuery,a=window.kendo,o=a.ui.Widget,e=a.keys;function t(t,e){return a.format('<button class="k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button k-zoom-{0}" title="zoom-{0}" aria-label="zoom-{0}"><span class="k-button-icon k-icon {1}"></span></button>',t,e)}var r=".kendoZoomControl",s=t("in","k-i-plus")+t("out","k-i-minus"),i=187,u=189,l=61,h=173,c=o.extend({init:function(t,e){o.fn.init.call(this,t,e);this._initOptions(e);this.element.addClass("k-widget k-zoom-control k-button-group k-group-horizontal").append(s).on("click"+r,".k-button",this._click.bind(this));var i=this.element.parent().closest("["+a.attr("role")+"]");this._keyroot=i.length>0?i:this.element;this._tabindex(this._keyroot);this._keydown=this._keydown.bind(this);this._keyroot.on("keydown",this._keydown)},options:{name:"ZoomControl",zoomStep:1},events:["change"],_change:function(t){var e=this.options.zoomStep;this.trigger("change",{delta:t*e})},_click:function(t){var e=n(t.currentTarget);var i=1;if(e.is(".k-zoom-out"))i=-1;this._change(i);t.preventDefault()},_keydown:function(t){switch(t.which){case e.NUMPAD_PLUS:case i:case l:this._change(1);break;case e.NUMPAD_MINUS:case u:case h:this._change(-1);break}}});a.dataviz.ui.plugin(c)})}("function"==typeof define&&define.amd?define:function(t,e,i){(i||e)()}),function(define){define("dataviz/map/crs.min",["./location.min","kendo.drawing.min"],function(){var o=window.kendo.jQuery,r=void 0,d=Math,f=d.atan,m=d.exp,_=d.pow,g=d.sin,u=d.log,l=d.tan,t=window.kendo,e=t.Class,s=t.dataviz,h=t.deepExtend,n=t.geometry,y=n.Point,A,w=s.map.Location,i=t.drawing.util,c=i.rad,b=i.deg,p=i.limitValue,a=d.PI,v=a/2,C=a/4,E=a/180,k={a:6378137,b:6356752.314245179,f:.0033528106647474805,e:.08181919084262149},F=e.extend({init:function(t){this._initOptions(t)},MAX_LNG:180,MAX_LAT:85.0840590501,INVERSE_ITERATIONS:15,INVERSE_CONVERGENCE:1e-12,options:{centralMeridian:0,datum:k},forward:function(t,e){var i=this,n=i.options,a=n.datum,o=a.a,r=n.centralMeridian,s=p(t.lat,-i.MAX_LAT,i.MAX_LAT),u=e?p(t.lng,-i.MAX_LNG,i.MAX_LNG):t.lng,l=c(u-r)*o,h=i._projectLat(s);return new y(l,h)},_projectLat:function(t){var e=this.options.datum,i=e.e,n=e.a,a=c(t),o=l(C+a/2),r=i*g(a),s=_((1-r)/(1+r),i/2);return n*u(o*s)},inverse:function(t,e){var i=this,n=i.options,a=n.datum,o=a.a,r=n.centralMeridian,s=t.x/(E*o)+r,u=p(i._inverseY(t.y),-i.MAX_LAT,i.MAX_LAT);if(e)s=p(s,-i.MAX_LNG,i.MAX_LNG);return new w(u,s)},_inverseY:function(t){var e=this,i=e.options.datum,n=i.a,a=i.e,h=a/2,o=m(-t/n),r=v-2*f(o),s;for(s=0;s<=e.INVERSE_ITERATIONS;s++){var u=a*g(r),c=_((1-u)/(1+u),h),l=v-2*f(o*c)-r;r+=l;if(d.abs(l)<=e.INVERSE_CONVERGENCE)break}return b(r)}}),x=F.extend({MAX_LAT:85.0511287798,_projectLat:function(t){var e=this.options.datum.a,i=c(t),n=l(C+i/2);return e*u(n)},_inverseY:function(t){var e=this.options.datum.a,i=m(-t/e);return b(v-2*f(i))}}),D=e.extend({forward:function(t){return new y(t.lng,t.lat)},inverse:function(t){return new w(t.y,t.x)}}),z=e.extend({init:function(){var t=this,e=t._proj=new x;var i=this.c=2*a*e.options.datum.a;this._tm=n.transform().translate(.5,.5).scale(1/i,-1/i);this._itm=n.transform().scale(i,-i).translate(-.5,-.5)},toPoint:function(t,e,i){var n=this._proj.forward(t,i);return n.transform(this._tm).scale(e||1)},toLocation:function(t,e,i){t=t.clone().scale(1/(e||1)).transform(this._itm);return this._proj.inverse(t,i)}}),B=e.extend({init:function(){this._proj=new F},toPoint:function(t){return this._proj.forward(t)},toLocation:function(t){return this._proj.inverse(t)}}),T=e.extend({init:function(){this._proj=new D},toPoint:function(t){return this._proj.forward(t)},toLocation:function(t){return this._proj.inverse(t)}});h(s,{map:{crs:{EPSG3395:B,EPSG3857:z,EPSG4326:T},datums:{WGS84:k},projections:{Equirectangular:D,Mercator:F,SphericalMercator:x}}})})}("function"==typeof define&&define.amd?define:function(t,e,i){(i||e)()}),function(define){define("dataviz/map/layers/base.min",["kendo.core.min","../location.min"],function(){var i=window.kendo.jQuery,t=void 0,e=window.kendo,n=e.Class,a=e.dataviz,o=e.deepExtend,r=a.map.Extent,l,s=e.drawing.util.defined,u=n.extend({init:function(t,e){this._initOptions(e);this.map=t;this.element=i("<div class='k-layer'></div>").css({zIndex:this.options.zIndex,opacity:this.options.opacity}).appendTo(t.scrollElement);this._beforeReset=this._beforeReset.bind(this);this._reset=this._reset.bind(this);this._resize=this._resize.bind(this);this._panEnd=this._panEnd.bind(this);this._activate();this._updateAttribution()},destroy:function(){this._deactivate()},show:function(){this.reset();this._activate();this._applyExtent(true)},hide:function(){this._deactivate();this._setVisibility(false)},reset:function(){this._beforeReset();this._reset()},_reset:function(){this._applyExtent()},_beforeReset:i.noop,_resize:i.noop,_panEnd:function(){this._applyExtent()},_applyExtent:function(){var t=this.options;var e=this.map.zoom();var i=!s(t.minZoom)||e>=t.minZoom;var n=!s(t.maxZoom)||e<=t.maxZoom;var a=r.create(t.extent);var o=!a||a.overlaps(this.map.extent());this._setVisibility(i&&n&&o)},_setVisibility:function(t){this.element.css("display",t?"":"none")},_activate:function(){var t=this.map;this._deactivate();t.bind("beforeReset",this._beforeReset);t.bind("reset",this._reset);t.bind("resize",this._resize);t.bind("panEnd",this._panEnd)},_deactivate:function(){var t=this.map;t.unbind("beforeReset",this._beforeReset);t.unbind("reset",this._reset);t.unbind("resize",this._resize);t.unbind("panEnd",this._panEnd)},_updateAttribution:function(){var t=this.map.attribution;if(t)t.add(this.options.attribution)}});o(a,{map:{layers:{Layer:u}}})})}("function"==typeof define&&define.amd?define:function(t,e,i){(i||e)()}),function(define){define("dataviz/map/layers/shape.min",["./base.min","../location.min"],function(){var h=window.kendo.jQuery,c=void 0,i=window.kendo,d=i.Class,f=i.data.DataSource,t=i.dataviz,e=i.deepExtend,p=i.geometry,s=i.drawing,a=s.Group,v=s.util.last,m=s.util.defined,n=t.map,u=n.Location,o=n.layers.Layer,r=o.extend({init:function(t,e){this._pan=this._pan.bind(this);o.fn.init.call(this,t,e);this.surface=s.Surface.create(this.element,{width:t.scrollElement.width(),height:t.scrollElement.height()});this._initRoot();this.movable=new i.ui.Movable(this.surface.element);this._markers=[];this._click=this._handler("shapeClick");this.surface.bind("click",this._click);this._mouseenter=this._handler("shapeMouseEnter");this.surface.bind("mouseenter",this._mouseenter);this._mouseleave=this._handler("shapeMouseLeave");this.surface.bind("mouseleave",this._mouseleave);this._initDataSource()},options:{autoBind:true},destroy:function(){o.fn.destroy.call(this);this.surface.destroy();this.dataSource.unbind("change",this._dataChange)},setDataSource:function(t){if(this.dataSource)this.dataSource.unbind("change",this._dataChange);this.dataSource=i.data.DataSource.create(t);this.dataSource.bind("change",this._dataChange);if(this.options.autoBind)this.dataSource.fetch()},_reset:function(){o.fn._reset.call(this);this._translateSurface();if(this._data)this._load(this._data)},_initRoot:function(){this._root=new a;this.surface.draw(this._root)},_beforeReset:function(){this.surface.clear();this._initRoot()},_resize:function(){this.surface.size(this.map.size())},_initDataSource:function(){var t=this.options.dataSource;this._dataChange=this._dataChange.bind(this);this.dataSource=f.create(t).bind("change",this._dataChange);if(t&&this.options.autoBind)this.dataSource.fetch()},_dataChange:function(t){this._data=t.sender.view();this._load(this._data)},_load:function(t){this._clearMarkers();if(!this._loader)this._loader=new l(this.map,this.options.style,this);var e=new a;for(var i=0;i<t.length;i++){var n=this._loader.parse(t[i]);if(n)e.append(n)}this._root.clear();this._root.append(e)},shapeCreated:function(t){var e=false;if(t instanceof s.Circle)e=m(this._createMarker(t));if(!e){var i={layer:this,shape:t};e=this.map.trigger("shapeCreated",i)}return e},featureCreated:function(t){t.layer=this;this.map.trigger("shapeFeatureCreated",t)},_createMarker:function(t){var e=this.map.markers.bind({location:t.location},t.dataItem);if(e)this._markers.push(e);return e},_clearMarkers:function(){for(var t=0;t<this._markers.length;t++)this.map.markers.remove(this._markers[t]);this._markers=[]},_pan:function(){if(!this._panning){this._panning=true;this.surface.suspendTracking()}},_panEnd:function(t){o.fn._panEnd.call(this,t);this._translateSurface();this.surface.resumeTracking();this._panning=false},_translateSurface:function(){var t=this.map;var e=t.locationToView(t.extent().nw);if(this.surface.translate){this.surface.translate(e);this.movable.moveTo({x:e.x,y:e.y})}},_handler:function(i){var n=this;return function(t){if(t.element){var e={layer:n,shape:t.element,originalEvent:t.originalEvent};n.map.trigger(i,e)}}},_activate:function(){o.fn._activate.call(this);this.map.bind("pan",this._pan)},_deactivate:function(){o.fn._deactivate.call(this);this.map.unbind("pan",this._pan)}}),l=d.extend({init:function(t,e,i){this.observer=i;this.locator=t;this.style=e},parse:function(t){var e=new a;var i=true;if(t.type==="Feature"){i=false;this._loadGeometryTo(e,t.geometry,t);this._featureCreated(e,t)}else this._loadGeometryTo(e,t,t);if(i&&e.children.length<2)e=e.children[0];return e},_shapeCreated:function(t){var e=false;if(this.observer&&this.observer.shapeCreated)e=this.observer.shapeCreated(t);return e},_featureCreated:function(t,e){if(this.observer&&this.observer.featureCreated)this.observer.featureCreated({group:t,dataItem:e,properties:e.properties})},_loadGeometryTo:function(t,e,i){var n=e.coordinates;var a;var o;switch(e.type){case"LineString":o=this._loadPolygon(t,[n],i);this._setLineFill(o);break;case"MultiLineString":for(a=0;a<n.length;a++){o=this._loadPolygon(t,[n[a]],i);this._setLineFill(o)}break;case"Polygon":this._loadPolygon(t,n,i);break;case"MultiPolygon":for(a=0;a<n.length;a++)this._loadPolygon(t,n[a],i);break;case"Point":this._loadPoint(t,n,i);break;case"MultiPoint":for(a=0;a<n.length;a++)this._loadPoint(t,n[a],i);break}},_setLineFill:function(t){var e=t.segments;if(e.length<4||!e[0].anchor().equals(v(e).anchor()))t.options.fill=null},_loadShape:function(t,e){if(!this._shapeCreated(e))t.append(e);return e},_loadPolygon:function(t,e,i){var n=this._buildPolygon(e);n.dataItem=i;return this._loadShape(t,n)},_buildPolygon:function(t){var e=t.length>1?s.MultiPath:s.Path;var i=new e(this.style);for(var n=0;n<t.length;n++)for(var a=0;a<t[n].length;a++){var o=this.locator.locationToView(u.fromLngLat(t[n][a]));if(a===0)i.moveTo(o.x,o.y);else i.lineTo(o.x,o.y)}return i},_loadPoint:function(t,e,i){var n=u.fromLngLat(e);var a=this.locator.locationToView(n);var o=new p.Circle(a,10);var r=new s.Circle(o,this.style);r.dataItem=i;r.location=n;return this._loadShape(t,r)}});e(i.data,{schemas:{geojson:{type:"json",data:function(t){if(t.type==="FeatureCollection")return t.features;if(t.type==="GeometryCollection")return t.geometries;return t}}},transports:{geojson:{read:{dataType:"json"}}}}),e(t,{map:{layers:{shape:r,ShapeLayer:r},GeoJSONLoader:l}})})}("function"==typeof define&&define.amd?define:function(t,e,i){(i||e)()}),function(define){define("dataviz/map/layers/bubble.min",["./shape.min"],function(){var s=window.kendo.jQuery,u=void 0,i=window.kendo,d=i.getter,n=i.dataviz,t=i.deepExtend,a=i.geometry,o=i.drawing,l,f=o.util.defined,e=n.map,p=e.Location,h,r=e.layers.ShapeLayer.extend({options:{autoBind:true,locationField:"location",valueField:"value",minSize:0,maxSize:100,scale:"sqrt",symbol:"circle"},_load:function(t){this.surface.clear();if(t.length===0)return;var e=this.options;var i=d(e.valueField);t=t.slice(0);t.sort(function(t,e){return i(e)-i(t)});var n=this._scaleType();var a;for(var o=0;o<t.length;o++){var r=t[o];var s=d(e.locationField)(r);var u=d(e.valueField)(r);if(f(s)&&f(u)){if(!a)a=new n([0,u],[e.minSize,e.maxSize]);s=p.create(s);var h=this.map.locationToView(s);var c=a.map(u);var l=this._createSymbol({center:h,size:c,style:e.style,dataItem:r,location:s});l.dataItem=r;l.location=s;l.value=u;this._drawSymbol(l)}}},_scaleType:function(){var t=this.options.scale;if(i.isFunction(t))return t;return n.map.scales[t]},_createSymbol:function(t){var e=this.options.symbol;if(!i.isFunction(e))e=n.map.symbols[e];return e(t)},_drawSymbol:function(t){var e={layer:this,shape:t};var i=this.map.trigger("shapeCreated",e);if(!i)this.surface.draw(t)}}),c=i.Class.extend({init:function(t,e){this._domain=t;this._range=e;var i=Math.sqrt(t[1])-Math.sqrt(t[0]);var n=e[1]-e[0];this._ratio=n/i},map:function(t){var e=(Math.sqrt(t)-Math.sqrt(this._domain[0]))*this._ratio;return this._range[0]+e}}),v;t(n,{map:{layers:{bubble:r,BubbleLayer:r},scales:{sqrt:c},symbols:{circle:function(t){var e=new a.Circle(t.center,t.size/2);return new o.Circle(e,t.style)},square:function(t){var e=new o.Path(t.style);var i=t.size/2;var n=t.center;e.moveTo(n.x-i,n.y-i).lineTo(n.x+i,n.y-i).lineTo(n.x+i,n.y+i).lineTo(n.x-i,n.y+i).close();return e}}}})})}("function"==typeof define&&define.amd?define:function(t,e,i){(i||e)()}),function(define){define("dataviz/map/layers/tile.min",["./base.min","../location.min"],function(){var h=window.kendo.jQuery,c=void 0,a=Math,t=window.kendo,e=t.Class,i=t.template,n=t.dataviz,d=t.deepExtend,f,o=t.geometry.Point,r=n.map.layers.Layer,s=t.util,u=s.renderSize,l=t.drawing.util,p=l.round,v=l.limitValue,m=r.extend({init:function(t,e){r.fn.init.call(this,t,e);if(typeof this.options.subdomains==="string")this.options.subdomains=this.options.subdomains.split("");var i=this._viewType();this._view=new i(this.element,this.options)},destroy:function(){r.fn.destroy.call(this);this._view.destroy();this._view=null},_beforeReset:function(){var t=this.map;var e=t.locationToLayer(t.extent().nw).round();this._view.viewOrigin(e)},_reset:function(t){var e;if(t)e=t.tileTitle;else e="";r.fn._reset.call(this);this._updateView();this._view.reset(e)},_viewType:function(){return _},_activate:function(){r.fn._activate.call(this);if(!t.support.mobileOS){if(!this._pan)this._pan=t.throttle(this._render.bind(this),100);this.map.bind("pan",this._pan)}},_deactivate:function(){r.fn._deactivate.call(this);if(this._pan)this.map.unbind("pan",this._pan)},_updateView:function(){var t=this._view,e=this.map,i=e.extent(),n={nw:e.locationToLayer(i.nw).round(),se:e.locationToLayer(i.se).round()};t.center(e.locationToLayer(e.center()));t.extent(n);t.zoom(e.zoom())},_resize:function(){this._render()},_panEnd:function(t){r.fn._panEnd.call(this,t);this._render()},_render:function(){this._updateView();this._view.render()}}),_=e.extend({init:function(t,e){this.element=t;this._initOptions(e);this.pool=new y},options:{tileSize:256,subdomains:["a","b","c"],urlTemplate:""},center:function(t){this._center=t},extent:function(t){this._extent=t},viewOrigin:function(t){this._viewOrigin=t},zoom:function(t){this._zoom=t},pointToTileIndex:function(t){return new o(a.floor(t.x/this.options.tileSize),a.floor(t.y/this.options.tileSize))},tileCount:function(){var t=this.size(),e=this.pointToTileIndex(this._extent.nw),i=this._extent.nw,n=this.indexToPoint(e).translate(-i.x,-i.y);return{x:a.ceil((a.abs(n.x)+t.width)/this.options.tileSize),y:a.ceil((a.abs(n.y)+t.height)/this.options.tileSize)}},size:function(){var t=this._extent.nw,e=this._extent.se,i=e.clone().translate(-t.x,-t.y);return{width:i.x,height:i.y}},indexToPoint:function(t){var e=t.x,i=t.y;return new o(e*this.options.tileSize,i*this.options.tileSize)},subdomainText:function(){var t=this.options.subdomains;return t[this.subdomainIndex++%t.length]},destroy:function(){this.element.empty();this.pool.empty()},reset:function(t){this._tileTitle=t;this.pool.reset();this.subdomainIndex=0;this.render()},render:function(){var t=this.tileCount(),e=this.pointToTileIndex(this._extent.nw),i,n,a;for(n=0;n<t.x;n++)for(a=0;a<t.y;a++){i=this.createTile({x:e.x+n,y:e.y+a});if(!i.visible)i.show()}},createTile:function(t){var e=this.tileOptions(t);var i=this.pool.get(this._center,e);if(i.element.parent().length===0)this.element.append(i.element);return i},tileOptions:function(t){var e=this.wrapIndex(t),i=this.indexToPoint(t),n=this._viewOrigin,a=i.clone().translate(-n.x,-n.y);return{index:e,currentIndex:t,point:i,offset:A(a),zoom:this._zoom,size:this.options.tileSize,subdomain:this.subdomainText(),urlTemplate:this.options.urlTemplate,errorUrlTemplate:this.options.errorUrlTemplate,tileTitle:this._tileTitle}},wrapIndex:function(t){var e=a.pow(2,this._zoom);return{x:this.wrapValue(t.x,e),y:v(t.y,0,e-1)}},wrapValue:function(t,e){var i=a.abs(t)%e;if(t>=0)t=i;else t=e-(i===0?e:i);return t}}),g=e.extend({init:function(t,e){this.id=t;this.visible=true;this._initOptions(e);this.createElement();this.show()},options:{urlTemplate:"",errorUrlTemplate:""},createElement:function(){this.element=h("<img style='position: absolute; display: block;' alt='"+this.options.tileTitle+"' />").css({width:this.options.size,height:this.options.size}).on("error",function(t){if(this.errorUrl())t.target.setAttribute("src",this.errorUrl());else t.target.removeAttribute("src")}.bind(this))},show:function(){var t=this.element[0];t.style.top=u(this.options.offset.y);t.style.left=u(this.options.offset.x);var e=this.url();if(e)t.setAttribute("src",e);t.style.visibility="visible";this.visible=true},hide:function(){this.element[0].style.visibility="hidden";this.visible=false},url:function(){var t=i(this.options.urlTemplate);return t(this.urlOptions())},errorUrl:function(){var t=i(this.options.errorUrlTemplate);return t(this.urlOptions())},urlOptions:function(){var t=this.options;return{zoom:t.zoom,subdomain:t.subdomain,z:t.zoom,x:t.index.x,y:t.index.y,s:t.subdomain,quadkey:t.quadkey,q:t.quadkey,culture:t.culture,c:t.culture}},destroy:function(){if(this.element){this.element.remove();this.element=null}}}),y=e.extend({init:function(){this._items=[]},options:{maxSize:100},get:function(t,e){if(this._items.length>=this.options.maxSize)this._remove(t);return this._create(e)},empty:function(){var t=this._items;for(var e=0;e<t.length;e++)t[e].destroy();this._items=[]},reset:function(){var t=this._items;for(var e=0;e<t.length;e++)t[e].hide()},_create:function(t){var e=this._items;var i;var n=s.hashKey(t.point.toString()+t.offset.toString()+t.zoom+t.urlTemplate);for(var a=0;a<e.length;a++)if(e[a].id===n){i=e[a];break}if(i)i.show();else{i=new g(n,t);this._items.push(i)}return i},_remove:function(t){var e=this._items;var i=-1;var n=-1;for(var a=0;a<e.length;a++){var o=e[a].options.point.distanceTo(t);if(o>i&&!e[a].visible){n=a;i=o}}if(n!==-1){e[n].destroy();e.splice(n,1)}}});function A(t){return new o(p(t.x),p(t.y))}d(n,{map:{layers:{tile:m,TileLayer:m,ImageTile:g,TilePool:y,TileView:_}}})})}("function"==typeof define&&define.amd?define:function(t,e,i){(i||e)()}),function(define){define("dataviz/map/layers/bing.min",["./tile.min"],function(){var e=window.kendo.jQuery,h=void 0,t=window.kendo,i=t.dataviz,n=t.deepExtend,a=t.drawing.util.defined,c=i.map.Extent,r=i.map.Location,o=i.map.layers.TileLayer,s=i.map.layers.TileView,u=o.extend({init:function(t,e){this.options.baseUrl=this._scheme()+"://dev.virtualearth.net/REST/v1/Imagery/Metadata/";o.fn.init.call(this,t,e);this._onMetadata=this._onMetadata.bind(this);this._fetchMetadata()},options:{imagerySet:"road"},_fetchMetadata:function(){var t=this.options;if(!t.key)throw new Error("Bing tile layer: API key is required");e.ajax({url:t.baseUrl+t.imagerySet,data:{output:"json",include:"ImageryProviders",key:t.key,uriScheme:this._scheme()},type:"get",dataType:"jsonp",jsonp:"jsonp",success:this._onMetadata})},_scheme:function(t){t=t||window.location.protocol;return t.replace(":","")==="https"?"https":"http"},_onMetadata:function(t){if(t&&t.resourceSets.length){var e=this.resource=t.resourceSets[0].resources[0];n(this._view.options,{urlTemplate:e.imageUrl.replace("{subdomain}","#= subdomain #").replace("{quadkey}","#= quadkey #").replace("{culture}","#= culture #"),subdomains:e.imageUrlSubdomains});var i=this.options;if(!a(i.minZoom))i.minZoom=e.zoomMin;if(!a(i.maxZoom))i.maxZoom=e.zoomMax;this._addAttribution();if(this.element.css("display")!=="none")this._reset()}},_viewType:function(){return l},_addAttribution:function(){var t=this.map.attribution;if(t){var e=this.resource.imageryProviders;if(e)for(var i=0;i<e.length;i++){var n=e[i];for(var a=0;a<n.coverageAreas.length;a++){var o=n.coverageAreas[a];t.add({text:n.attribution,minZoom:o.zoomMin,maxZoom:o.zoomMax,extent:new c(new r(o.bbox[2],o.bbox[1]),new r(o.bbox[0],o.bbox[3]))})}}}},imagerySet:function(t){if(t){this.options.imagerySet=t;this.map.attribution.clear();this._fetchMetadata()}else return this.options.imagerySet}}),l=s.extend({options:{culture:"en-US"},tileOptions:function(t){var e=s.fn.tileOptions.call(this,t);e.culture=this.options.culture;e.quadkey=this.tileQuadKey(this.wrapIndex(t));return e},tileQuadKey:function(t){var e="",i,n,a;for(a=this._zoom;a>0;a--){i=0;n=1<<a-1;if((t.x&n)!==0)i++;if((t.y&n)!==0)i+=2;e+=i}return e}});n(i,{map:{layers:{bing:u,BingLayer:u,BingView:l}}})})}("function"==typeof define&&define.amd?define:function(t,e,i){(i||e)()}),function(define){define("dataviz/map/layers/marker.min",["./base.min","../location.min","kendo.data.min","kendo.tooltip.min"],function(){var i=window.kendo.jQuery,h=void 0,c=document,e=Math,d=i.inArray,o=window.kendo,f=o.Class,p=o.data.DataSource,r=o.ui.Tooltip,t=o.dataviz,n=o.deepExtend,s=t.map,a=s.Location,u=s.layers.Layer,v=u.extend({init:function(t,e){u.fn.init.call(this,t,e);this._markerClick=this._markerClick.bind(this);this.element.on("click",".k-marker",this._markerClick);this.items=[];this._initDataSource()},destroy:function(){u.fn.destroy.call(this);this.element.off("click",".k-marker",this._markerClick);this.dataSource.unbind("change",this._dataChange);this.clear()},options:{zIndex:1e3,autoBind:true,dataSource:{},locationField:"location",titleField:"title"},add:function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this._addOne(t[e]);else return this._addOne(t)},remove:function(t){t.destroy();var e=d(t,this.items);if(e>-1)this.items.splice(e,1)},clear:function(){for(var t=0;t<this.items.length;t++)this.items[t].destroy();this.items=[]},update:function(t){var e=t.location();if(e){t.showAt(this.map.locationToView(e));var i={marker:t,layer:this};this.map.trigger("markerActivate",i)}},_reset:function(){u.fn._reset.call(this);var t=this.items;for(var e=0;e<t.length;e++)this.update(t[e])},bind:function(t,e){var i=s.Marker.create(t,this.options);i.dataItem=e;var n={marker:i,layer:this};var a=this.map.trigger("markerCreated",n);if(!a){this.add(i);return i}},setDataSource:function(t){if(this.dataSource)this.dataSource.unbind("change",this._dataChange);this.dataSource=o.data.DataSource.create(t);this.dataSource.bind("change",this._dataChange);if(this.options.autoBind)this.dataSource.fetch()},_addOne:function(t){var e=l.create(t,this.options);e.addTo(this);return e},_initDataSource:function(){var t=this.options.dataSource;this._dataChange=this._dataChange.bind(this);this.dataSource=p.create(t).bind("change",this._dataChange);if(t&&this.options.autoBind)this.dataSource.fetch()},_dataChange:function(t){this._load(t.sender.view())},_load:function(t){this._data=t;this.clear();var e=o.getter(this.options.locationField);var i=o.getter(this.options.titleField);for(var n=0;n<t.length;n++){var a=t[n];this.bind({location:e(a),title:i(a)},a)}},_markerClick:function(t){var e={marker:i(t.target).data("kendoMarker"),layer:this};this.map.trigger("markerClick",e)}}),l=f.extend({init:function(t){this.options=t||{}},addTo:function(t){this.layer=t.markers||t;this.layer.items.push(this);this.layer.update(this)},location:function(t){if(t){this.options.location=a.create(t).toArray();if(this.layer)this.layer.update(this);return this}else return a.create(this.options.location)},showAt:function(t){this.render();this.element.css({left:e.round(t.x),top:e.round(t.y)});if(this.tooltip&&this.tooltip.popup)this.tooltip.popup._position()},hide:function(){if(this.element){this.element.remove();this.element=null}if(this.tooltip){this.tooltip.destroy();this.tooltip=null}},destroy:function(){this.layer=null;this.hide()},render:function(){if(!this.element){var t=this.options;var e=this.layer;this.element=i(c.createElement("span")).addClass("k-marker k-icon k-i-marker-"+o.toHyphens(t.shape||"pin")).attr("title",t.title).attr(t.attributes||{}).data("kendoMarker",this).css("zIndex",t.zIndex);if(e)e.element.append(this.element);this.renderTooltip()}},renderTooltip:function(){var e=this;var t=e.options.title;var i=e.options.tooltip||{};if(i&&r){var n=i.template;if(n){var a=o.template(n);i.content=function(t){t.location=e.location();t.marker=e;return a(t)}}if(t||i.content||i.contentUrl){this.tooltip=new r(this.element,i);this.tooltip.marker=this}}}});l.create=function(t,e){if(t instanceof l)return t;return new l(n({},e,t))},n(t,{map:{layers:{marker:v,MarkerLayer:v},Marker:l}})})}("function"==typeof define&&define.amd?define:function(t,e,i){(i||e)()}),function(define){define("dataviz/map/main.min",["./crs.min","./location.min"],function(){var o=window.kendo.jQuery,e=void 0,u=document,h=Math,d=h.min,f=h.pow,n=window.kendo,i=n.ui.Widget,p=n.deepExtend,l=n.dataviz,a=l.ui,s=n.geometry,v=s.Point,t=l.map,m=t.Extent,r=t.Location,_=t.crs.EPSG3857,g,y=n.util.renderPos,A=n.drawing.util,w=A.defined,c=A.limitValue,b=A.valueOrDefault,C="k-",E=.9,k=.93,F="DOMMouseScroll mousewheel",x=5,D=1,z=i.extend({init:function(t,e){n.destroy(t);i.fn.init.call(this,t);this._initOptions(e);this.bind(this.events,e);this.crs=new _;this.element.addClass(C+this.options.name.toLowerCase()).css("position","relative").empty().append(u.createElement("div"));this._viewOrigin=this._getOrigin();this._initScroller();this._initMarkers();this._initControls();this._initLayers();this._reset();this._mousewheel=this._mousewheel.bind(this);this.element.on(F,this._mousewheel)},options:{name:"Map",controls:{attribution:true,navigator:{panStep:100},zoom:true},layers:[],layerDefaults:{shape:{style:{fill:{color:"#fff"},stroke:{color:"#aaa",width:.5}}},bubble:{style:{fill:{color:"#fff",opacity:.5},stroke:{color:"#aaa",width:.5}}},marker:{shape:"pinTarget",tooltip:{position:"top"}}},center:[0,0],zoom:3,minSize:256,minZoom:1,maxZoom:19,markers:[],markerDefaults:{shape:"pinTarget",tooltip:{position:"top"}},wraparound:true,messages:{tileTitle:"Map tile"}},events:["beforeReset","click","markerActivate","markerClick","markerCreated","pan","panEnd","reset","shapeClick","shapeCreated","shapeFeatureCreated","shapeMouseEnter","shapeMouseLeave","zoomEnd","zoomStart"],destroy:function(){this.scroller.destroy();if(this.navigator)this.navigator.destroy();if(this.attribution)this.attribution.destroy();if(this.zoomControl)this.zoomControl.destroy();this.markers.destroy();for(var t=0;t<this.layers.length;t++)this.layers[t].destroy();i.fn.destroy.call(this)},zoom:function(t){var e=this.options;if(w(t)){t=h.round(c(t,e.minZoom,e.maxZoom));if(e.zoom!==t){e.zoom=t;this._reset()}return this}else return e.zoom},center:function(t){if(t){this.options.center=r.create(t).toArray();this._reset();return this}else return r.create(this.options.center)},extent:function(t){if(t){this._setExtent(t);return this}else return this._getExtent()},setOptions:function(t){i.fn.setOptions.call(this,t);this._reset()},locationToLayer:function(t,e){var i=!this.options.wraparound;t=r.create(t);return this.crs.toPoint(t,this._layerSize(e),i)},layerToLocation:function(t,e){var i=!this.options.wraparound;t=v.create(t);return this.crs.toLocation(t,this._layerSize(e),i)},locationToView:function(t){t=r.create(t);var e=this.locationToLayer(this._viewOrigin);var i=this.locationToLayer(t);return i.translateWith(e.scale(-1))},viewToLocation:function(t,e){var i=this.locationToLayer(this._getOrigin(),e);t=v.create(t);t=t.clone().translateWith(i);return this.layerToLocation(t,e)},eventOffset:function(t){var e;var i;var n;var a=this.element.offset();if(t.x||t.y){var o="location";i=t.x[o]-a.left;n=t.y[o]-a.top;e=new s.Point(i,n)}else{var r=t.originalEvent||t;i=b(r.pageX,r.clientX)-a.left;n=b(r.pageY,r.clientY)-a.top;e=new s.Point(i,n)}return e},eventToView:function(t){var e=this.eventOffset(t);return this.locationToView(this.viewToLocation(e))},eventToLayer:function(t){return this.locationToLayer(this.eventToLocation(t))},eventToLocation:function(t){var e=this.eventOffset(t);return this.viewToLocation(e)},viewSize:function(){var t=this.element;var e=this._layerSize();var i=t.width();if(!this.options.wraparound)i=d(e,i);return{width:i,height:d(e,t.height())}},exportVisual:function(){this._reset();return false},_setOrigin:function(t,e){var i=this.viewSize(),n;t=this._origin=r.create(t);n=this.locationToLayer(t,e);n.x+=i.width/2;n.y+=i.height/2;this.options.center=this.layerToLocation(n,e).toArray();return this},_getOrigin:function(t){var e=this.viewSize(),i;if(t||!this._origin){i=this.locationToLayer(this.center());i.x-=e.width/2;i.y-=e.height/2;this._origin=this.layerToLocation(i)}return this._origin},_setExtent:function(t){var e=m.create(t);var i=e.se.clone();if(this.options.wraparound&&i.lng<0&&t.nw.lng>0)i.lng=180+(180+i.lng);t=new m(e.nw,i);this.center(t.center());var n=this.element.width();var a=this.element.height();for(var o=this.options.maxZoom;o>=this.options.minZoom;o--){var r=this.locationToLayer(t.nw,o);var s=this.locationToLayer(t.se,o);var u=h.abs(s.x-r.x);var l=h.abs(s.y-r.y);if(u<=n&&l<=a)break}this.zoom(o)},_getExtent:function(){var t=this._getOrigin();var e=this.locationToLayer(t);var i=this.viewSize();e.x+=i.width;e.y+=i.height;var n=this.layerToLocation(e);return new m(t,n)},_zoomAround:function(t,e){this._setOrigin(this.layerToLocation(t,e),e);this.zoom(e)},_initControls:function(){var t=this.options.controls;if(a.Attribution&&t.attribution)this._createAttribution(t.attribution);if(!n.support.mobileOS){if(a.Navigator&&t.navigator)this._createNavigator(t.navigator);if(a.ZoomControl&&t.zoom)this._createZoomControl(t.zoom)}},_createControlElement:function(t,e){var i=t.position||e;var n="."+y(i).replace(" ",".");var a=o(".k-map-controls"+n,this.element);if(a.length===0)a=o("<div>").addClass("k-map-controls "+y(i)).appendTo(this.element);return o("<div>").appendTo(a)},_createAttribution:function(t){var e=this._createControlElement(t,"bottomRight");this.attribution=new a.Attribution(e,t)},_createNavigator:function(t){var e=this._createControlElement(t,"topLeft");var i=this.navigator=new a.Navigator(e,t);this._navigatorPan=this._navigatorPan.bind(this);i.bind("pan",this._navigatorPan);this._navigatorCenter=this._navigatorCenter.bind(this);i.bind("center",this._navigatorCenter)},_navigatorPan:function(t){var e=this;var i=e.scroller;var n=i.scrollLeft+t.x;var a=i.scrollTop-t.y;var o=this._virtualSize;var r=this.element.height();var s=this.element.width();n=c(n,o.x.min,o.x.max-s);a=c(a,o.y.min,o.y.max-r);e.scroller.one("scroll",function(t){e._scrollEnd(t)});e.scroller.scrollTo(-n,-a)},_navigatorCenter:function(){this.center(this.options.center)},_createZoomControl:function(t){var e=this._createControlElement(t,"topLeft");var i=this.zoomControl=new a.ZoomControl(e,t);this._zoomControlChange=this._zoomControlChange.bind(this);i.bind("change",this._zoomControlChange)},_zoomControlChange:function(t){if(!this.trigger("zoomStart",{originalEvent:t})){this.zoom(this.zoom()+t.delta);this.trigger("zoomEnd",{originalEvent:t})}},_initScroller:function(){var t=n.support.mobileOS?k:E;var e=this.options.zoomable!==false;var i=this.scroller=new n.mobile.ui.Scroller(this.element.children(0),{friction:t,velocityMultiplier:x,zoom:e,mousewheelScrolling:false,supportDoubleTap:true});i.bind("scroll",this._scroll.bind(this));i.bind("scrollEnd",this._scrollEnd.bind(this));i.userEvents.bind("gesturestart",this._scaleStart.bind(this));i.userEvents.bind("gestureend",this._scale.bind(this));i.userEvents.bind("doubleTap",this._doubleTap.bind(this));i.userEvents.bind("tap",this._tap.bind(this));this.scrollElement=i.scrollElement},_initLayers:function(){var t=this.options.layers,e=this.layers=[];for(var i=0;i<t.length;i++){var n=t[i];var a=n.type||"shape";var o=this.options.layerDefaults[a];var r=l.map.layers[a];e.push(new r(this,p({},o,n)))}},_initMarkers:function(){this.markers=new t.layers.MarkerLayer(this,this.options.markerDefaults);this.markers.add(this.options.markers)},_scroll:function(t){var e=this.locationToLayer(this._viewOrigin).round();var i=t.sender.movable;var n=new s.Point(i.x,i.y).scale(-1).scale(1/i.scale);e.x+=n.x;e.y+=n.y;this._scrollOffset=n;this._setOrigin(this.layerToLocation(e));this.trigger("pan",{originalEvent:t,origin:this._getOrigin(),center:this.center()})},_scrollEnd:function(t){if(!this._scrollOffset||!this._panComplete())return;this._scrollOffset=null;this._panEndTS=new Date;this.trigger("panEnd",{originalEvent:t,origin:this._getOrigin(),center:this.center()})},_panComplete:function(){return new Date-(this._panEndTS||0)>50},_scaleStart:function(t){if(this.trigger("zoomStart",{originalEvent:t})){var e=t.touches[1];if(e)e.cancel()}},_scale:function(t){var e=this.scroller.movable.scale;var i=this._scaleToZoom(e);var n=new s.Point(t.center.x,t.center.y);var a=this.viewToLocation(n,i);var o=this.locationToLayer(a,i);var r=o.translate(-n.x,-n.y);this._zoomAround(r,i);this.trigger("zoomEnd",{originalEvent:t})},_scaleToZoom:function(t){var e=this._layerSize()*t;var i=e/this.options.minSize;var n=h.log(i)/h.log(2);return h.round(n)},_reset:function(){if(this.attribution)this.attribution.filter(this.center(),this.zoom());this._viewOrigin=this._getOrigin(true);this._resetScroller();this.trigger("beforeReset");this.trigger("reset",{tileTitle:this.options.messages.tileTitle})},_resetScroller:function(){var t=this.scroller;var e=t.dimensions.x;var i=t.dimensions.y;var n=this._layerSize();var a=this.extent().nw;var o=this.locationToLayer(a).round();t.movable.round=true;t.reset();t.userEvents.cancel();var r=this.zoom();t.dimensions.forcedMinScale=f(2,this.options.minZoom-r);t.dimensions.maxScale=f(2,this.options.maxZoom-r);var s={min:-o.x,max:n-o.x};var u={min:-o.y,max:n-o.y};if(this.options.wraparound){s.max=20*n;s.min=-s.max}if(this.options.pannable===false){var l=this.viewSize();s.min=u.min=0;s.max=l.width;u.max=l.height}e.makeVirtual();i.makeVirtual();e.virtualSize(s.min,s.max);i.virtualSize(u.min,u.max);this._virtualSize={x:s,y:u}},_renderLayers:function(){var t=this.options.layers,e=this.layers=[],i=this.scrollWrap;i.empty();for(var n=0;n<t.length;n++){var a=t[n];var o=a.type||"shape";var r=this.options.layerDefaults[o];var s=l.map.layers[o];e.push(new s(this,p({},r,a)))}},_layerSize:function(t){t=b(t,this.options.zoom);return this.options.minSize*f(2,t)},_tap:function(t){if(!this._panComplete())return;var e=this.eventOffset(t);this.trigger("click",{originalEvent:t,location:this.viewToLocation(e)})},_doubleTap:function(t){var e=this.options;if(e.zoomable!==false)if(!this.trigger("zoomStart",{originalEvent:t})){var i=this.zoom()+D;var n=this.eventOffset(t);var a=this.viewToLocation(n);var o=this.locationToLayer(a,i);var r=o.translate(-n.x,-n.y);this._zoomAround(r,i);this.trigger("zoomEnd",{originalEvent:t})}},_mousewheel:function(t){t.preventDefault();var e=l.mwDelta(t)>0?-1:1;var i=this.options;var n=this.zoom();var a=c(n+e,i.minZoom,i.maxZoom);if(i.zoomable!==false&&a!==n)if(!this.trigger("zoomStart",{originalEvent:t})){var o=this.eventOffset(t);var r=this.viewToLocation(o);var s=this.locationToLayer(r,a);var u=s.translate(-o.x,-o.y);this._zoomAround(u,a);this.trigger("zoomEnd",{originalEvent:t})}}});l.ui.plugin(z)})}("function"==typeof define&&define.amd?define:function(t,e,i){(i||e)()}),function(define){define("kendo.dataviz.map.min",["kendo.data.min","kendo.userevents.min","kendo.tooltip.min","kendo.mobile.scroller.min","kendo.draganddrop.min","kendo.dataviz.core.min","./dataviz/map/location.min","./dataviz/map/attribution.min","./dataviz/map/navigator.min","./dataviz/map/zoom.min","./dataviz/map/crs.min","./dataviz/map/layers/base.min","./dataviz/map/layers/shape.min","./dataviz/map/layers/bubble.min","./dataviz/map/layers/tile.min","./dataviz/map/layers/bing.min","./dataviz/map/layers/marker.min","./dataviz/map/main.min"],function(){var t={id:"dataviz.map",name:"Map",category:"dataviz",description:"The Kendo DataViz Map displays spatial data",depends:["data","userevents","tooltip","dataviz.core","drawing","mobile.scroller"]};return window.kendo})}("function"==typeof define&&define.amd?define:function(t,e,i){(i||e)()});
//# sourceMappingURL=kendo.dataviz.map.min.js.map
