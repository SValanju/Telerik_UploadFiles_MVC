{"version":3,"file":"kendo.drawer.min.js","sources":["kendo.drawer.js"],"sourcesContent":["(function(f, define) {\n    define('kendo.drawer',[ \"kendo.userevents\" ], f);\n})(function() {\n\nvar __meta__ = { // jshint ignore:line\n    id: \"drawer\",\n    name: \"Drawer\",\n    category: \"web\",\n    description: \"The Kendo Drawer widget provides slide to reveal sidebar\",\n    depends: [ \"userevents\" ]\n};\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        ui = kendo.ui,\n        Widget = ui.Widget,\n        SHOW = \"show\",\n        HIDE = \"hide\",\n        NS = \".kendoDrawer\",\n        FOCUSED = \"k-state-focused\",\n        keys = kendo.keys,\n        ITEMCLICK = \"itemClick\",\n        TABINDEX = \"tabIndex\",\n        PUSH = \"push\",\n        OVERLAY = \"overlay\",\n        LEFT = \"left\",\n        RIGHT = \"right\";\n\n    var Drawer = kendo.ui.Widget.extend({\n        init: function(element, options) {\n            var that = this;\n            var userEvents;\n\n            Widget.fn.init.call(this, element, options);\n\n            options = that.options;\n\n            that._element(element);\n\n            that._wrapper(element);\n\n            that._navigatable();\n\n            that.position();\n\n            that._mode();\n\n            if (options.mini) {\n                that._miniMode();\n            }\n\n            that._initDrawerItems();\n\n            if (options.mini && options.mode != PUSH) {\n                that._setBodyOffset();\n            }\n\n            userEvents = this.userEvents = new kendo.UserEvents(options.mode != PUSH ? $(document.body) : this.drawerContainer, { fastTap: true, allowSelection: true });\n\n            that.tap = function(e) {\n                if ($.contains(that.drawerItemsWrapper[0], e.event.target)) {\n                    that._itemClick(e);\n                }\n                if (options.autoCollapse && that.visible && !that.trigger(\"hide\", { sender: this })) {\n                    that.hide();\n                    e.preventDefault();\n                }\n            };\n\n            if (this.options.swipeToOpen) {\n                userEvents.bind(\"start\", function(e) { that._start(e); });\n                userEvents.bind(\"move\", function(e) { that._update(e); });\n                userEvents.bind(\"end\", function(e) { that._end(e); });\n                userEvents.bind(\"tap\", that.tap);\n            } else {\n                userEvents.bind(\"press\", that.tap);\n            }\n\n            if (options.minHeight && options.mode == PUSH) {\n                that.drawerContainer.css(\"min-height\", options.minHeight);\n            }\n        },\n\n        _element: function() {\n            var that = this;\n\n            var element = that.element;\n            var options = that.options;\n            var contentElement = that.contentElement = element.children().first();\n            that.drawerElement = $(options.template);\n\n            contentElement.addClass(\"k-drawer-content\");\n            element.addClass(\"k-widget k-drawer\");\n        },\n\n        _navigatable: function() {\n\n            if (!this.options.navigatable) {\n                return;\n            }\n\n            var that = this;\n            var element = that.element;\n            var drawerItems = element.find(\"[data-role='drawer-item']\");\n\n            element.find(\"[data-role='drawer-separator']\").attr(\"aria-hidden\", true);\n\n            drawerItems.attr(\"role\",\"tab\");\n\n            drawerItems.first().parent()\n                .attr(\"role\", \"tablist\")\n                .attr(\"aria-orientation\", \"vertical\");\n\n            element\n                .attr(TABINDEX, 0)\n                .on(\"focus\" + NS, that._focus.bind(that))\n                .on(\"focusout\" + NS, that._blur.bind(that))\n                .on(\"keydown\" + NS, that, that._keyDown.bind(that));\n        },\n\n        _blur: function() {\n            var that = this;\n\n            if (that._current) {\n                that._current.removeClass(FOCUSED);\n            }\n        },\n\n        _focus: function() {\n            var that = this;\n\n            that._setCurrent(that._current ? that._current : that.drawerItemsWrapper.find(\"[data-role='drawer-item']\").eq(0));\n        },\n\n        _setCurrent: function(current) {\n            var that = this;\n            var id = kendo.guid();\n            var next = $(current);\n\n            if (that._current) {\n                $(that._current)\n                    .removeClass(FOCUSED)\n                    .removeAttr(\"id\");\n\n                that.element.removeAttr(\"aria-activedescendant\");\n            }\n\n            next\n                .attr(\"id\", id)\n                .addClass(FOCUSED);\n\n            that.element.attr(\"aria-activedescendant\", id);\n\n            that._current = next;\n        },\n\n        _keyDown: function(e) {\n            var that = this;\n            var handled = false;\n            var current = that._current;\n            var next;\n\n            if (e.keyCode == keys.UP) {\n                handled = true;\n                next = current.prevAll(\"[data-role='drawer-item']\").first();\n\n                if (next.length) {\n                    that._setCurrent(next);\n                } else {\n                    that._setCurrent(current.parent().find(\"[data-role='drawer-item']\").last());\n                }\n\n            }\n\n            if (e.keyCode == keys.DOWN) {\n                handled = true;\n                next = current.nextAll(\"[data-role='drawer-item']\").first();\n\n                if (next.length) {\n                    that._setCurrent(next);\n                } else {\n                    that._setCurrent(current.parent().find(\"[data-role='drawer-item']\").first());\n                }\n            }\n\n            if (e.keyCode == keys.HOME) {\n                handled = true;\n                that._setCurrent(that.drawerItemsWrapper.find(\"[data-role='drawer-item']\").eq(0));\n            }\n\n            if (e.keyCode == keys.END) {\n                handled = true;\n                that._setCurrent(that.drawerItemsWrapper.find(\"[data-role='drawer-item']\").last());\n            }\n\n            if (e.keyCode == keys.SPACEBAR || e.keyCode == keys.ENTER) {\n                handled = true;\n                that.tap({\n                    event: { target: current[0] },\n                    preventDefault: $.noop\n                });\n            }\n\n            if (e.keyCode == keys.ESC) {\n                handled = true;\n                that.hide();\n            }\n\n            if (handled) {\n                //prevent scrolling while pressing the keys\n                e.preventDefault();\n            }\n        },\n\n        _wrapper: function() {\n            var options = this.options;\n            var drawerElement = this.drawerElement;\n            var element = this.element;\n            var contentElement = this.contentElement;\n            var drawerItemsWrapper = this.drawerItemsWrapper = drawerElement.wrapAll(\"<div class='k-drawer-items'></div>\").parent();\n            var drawerWrapper = this.drawerWrapper = drawerItemsWrapper.wrap(\"<div class='k-drawer-wrapper'></div>\").parent();\n            var drawerContainer = this.drawerContainer = element.wrap(\"<div class='k-drawer-container'></div>\").parent();\n\n            if (options.mini) {\n                if (options.mini.width) {\n                    drawerWrapper.width(options.mini.width);\n                }\n            } else {\n                drawerWrapper.width(0);\n            }\n\n\n            if (options.mode === PUSH) {\n                drawerContainer.append(contentElement);\n            }\n            else if (options.mode === OVERLAY) {\n                drawerContainer.after(contentElement);\n                $(document.body).prepend(drawerContainer);\n            }\n\n            element.append( drawerWrapper );\n        },\n\n        _setBodyOffset: function() {\n            var overlayMiniOffset = this.element.outerWidth();\n\n            if (this.leftPositioned) {\n                $(document.body).css(\"padding-left\", overlayMiniOffset);\n            }\n            else {\n                $(document.body).css(\"padding-right\", overlayMiniOffset);\n            }\n        },\n\n        _initDrawerItems: function() {\n            var drawerItemsWrapper = this.drawerItemsWrapper;\n            var drawerItems = drawerItemsWrapper.find(\"[data-role='drawer-item']\");\n            var separatorItems = drawerItemsWrapper.find(\"[data-role='drawer-separator']\");\n\n            drawerItems.addClass(\"k-drawer-item\");\n            separatorItems.addClass(\"k-drawer-item k-drawer-separator\");\n\n            if (this._selectedItemIndex >= 0) {\n                drawerItems.removeClass(\"k-state-selected\");\n                drawerItems.eq(this._selectedItemIndex).addClass(\"k-state-selected\");\n            }\n\n            if (this.options.navigatable) {\n                drawerItems.attr(\"aria-selected\", false);\n            }\n\n        },\n\n        _mode: function() {\n            var options = this.options;\n            var drawerContainer = this.drawerContainer;\n            var overlayContainer;\n\n            if (options.mode == PUSH) {\n                drawerContainer.addClass('k-drawer-' + PUSH);\n            }\n            else {\n                drawerContainer.addClass('k-drawer-' + OVERLAY);\n                overlayContainer = this.overlayContainer = $('<div class=\"k-overlay\"></div>');\n                overlayContainer.hide();\n                drawerContainer.prepend(overlayContainer);\n            }\n        },\n\n        _miniMode: function() {\n            var options = this.options;\n            var drawerContainer = this.drawerContainer;\n            var miniWidth = options.mini.width;\n            var miniTemplate = this._miniTemplate = options.mini.template && $(options.mini.template);\n            var drawerItemsWrapper = this.drawerItemsWrapper;\n            var drawerWrapper = this.drawerWrapper;\n\n            drawerContainer.addClass(\"k-drawer-mini\");\n\n            if (miniTemplate) {\n                drawerItemsWrapper.html(miniTemplate);\n            }\n\n            if (miniWidth) {\n                drawerWrapper.width(miniWidth);\n            }\n\n            this.minWidth = options.mini.width || this.drawerWrapper.width();\n        },\n\n        show: function() {\n            var drawerWrapper = this.drawerWrapper;\n            var drawerContainer = this.drawerContainer;\n            var options = this.options;\n            var isExpanded = drawerContainer.hasClass(\"k-drawer-expanded\");\n            var miniTemplate = this._miniTemplate;\n            var drawerElement = this.drawerElement;\n            var drawerItemsWrapper = this.drawerItemsWrapper;\n\n            if (!isExpanded) {\n                drawerContainer.addClass('k-drawer-expanded');\n                this.visible = true;\n            }\n\n            if (miniTemplate) {\n                drawerItemsWrapper.html(drawerElement);\n                this._initDrawerItems();\n                this._selectItem();\n            }\n\n            drawerWrapper.width(options.width);\n\n            if (options.mode === OVERLAY) {\n                this.overlayContainer.show();\n                this.visible = true;\n            }\n        },\n\n        hide: function() {\n            var that = this;\n            var drawerWrapper = that.drawerWrapper;\n            var drawerContainer = that.drawerContainer;\n            var options = this.options;\n            var drawerItemsWrapper = this.drawerItemsWrapper;\n            var miniTemplate = this._miniTemplate;\n            var miniWidth = options.mini && options.mini.width;\n\n            if (this._miniTemplate) {\n                drawerItemsWrapper.html(miniTemplate);\n                that._initDrawerItems();\n                this._selectItem();\n            }\n\n            if (options.mini) {\n                if (miniWidth) {\n                    drawerWrapper.width(miniWidth);\n                } else {\n                    drawerWrapper.width(\"\");\n                }\n            } else {\n                drawerWrapper.width(0);\n            }\n\n            if (this.visible) {\n                drawerContainer.removeClass('k-drawer-expanded');\n                this.visible = false;\n            }\n\n            if (options.mode === OVERLAY) {\n                this.overlayContainer.hide();\n            }\n        },\n\n        position: function(value) {\n            var that = this;\n            var options = that.options;\n            var position = value || options.position;\n            var drawerContainer = that.drawerContainer;\n\n            if (position == RIGHT) {\n                drawerContainer.removeClass('k-drawer-' + LEFT);\n                drawerContainer.addClass('k-drawer-' + RIGHT);\n            }\n            else {\n                drawerContainer.removeClass('k-drawer-' + RIGHT);\n                drawerContainer.addClass('k-drawer-' + LEFT);\n            }\n\n            this.leftPositioned = position === LEFT;\n        },\n\n        _start: function(e) {\n            var that = this;\n            var options = this.options;\n            var drawerWrapper = this.drawerWrapper;\n            var drawerItemsWrapper = this.drawerItemsWrapper;\n            var userEvents = e.sender;\n\n\n            // ignore non-horizontal swipes\n            if (Math.abs(e.x.velocity) < Math.abs(e.y.velocity) || kendo.triggeredByInput(e.event)) {\n                userEvents.cancel();\n                return;\n            }\n\n\n            if (this.drawerMini) {\n                drawerItemsWrapper.html(that.drawerElement);\n            }\n\n            drawerWrapper.css(\"transition\", \"none\");\n\n            if (options.mode != PUSH) {\n                this.overlayContainer.show();\n            }\n        },\n\n        _update: function(e) {\n            var options = this.options;\n            var mode = options.mode;\n\n                if (mode == PUSH) {\n                    this._push(e);\n                }\n                else {\n                    this._overlay(e);\n                }\n        },\n\n        _end: function(e) {\n            var velocity = e.x.velocity;\n            var options = this.options;\n            var drawerWrapper = this.drawerWrapper;\n            var elementWidth = drawerWrapper.width();\n            var pastHalf = elementWidth > options.width / 2;\n            var velocityThreshold = 0.8;\n            var shouldShow;\n\n            drawerWrapper.css(\"transition\", \"all .3s ease-out\");\n\n            if (this.leftPositioned) {\n                shouldShow = velocity > -velocityThreshold && (velocity > velocityThreshold || pastHalf);\n            }\n             else {\n                shouldShow = velocity < velocityThreshold && (velocity < -velocityThreshold || pastHalf);\n            }\n\n            if (shouldShow) {\n                if (this.trigger(\"show\", { sender: this })) {\n                    e.preventDefault();\n                    this.hide();\n                } else {\n                    this.show();\n                }\n            } else {\n                if (this.trigger(\"hide\", { sender: this })) {\n                    e.preventDefault();\n                    this.show();\n                } else {\n                    this.hide();\n                }\n            }\n        },\n\n        _overlay: function(moveEventArgs) {\n            var options = this.options;\n            var minWidth = (options.mini && options.mini.width) || this.minWidth || 0;\n            var drawerWrapper = this.drawerWrapper;\n            var elementWidth = drawerWrapper.width();\n            var limitedPosition;\n            var updatedPosition;\n\n            updatedPosition = elementWidth + (this.leftPositioned ? moveEventArgs.x.delta : -moveEventArgs.x.delta);\n\n            limitedPosition = Math.min(Math.max(updatedPosition, minWidth), options.width);\n\n            moveEventArgs.event.preventDefault();\n            moveEventArgs.event.stopPropagation();\n\n            drawerWrapper.width(limitedPosition);\n        },\n\n        _push: function(moveEventArgs) {\n            var options = this.options;\n            var minWidth = (options.mini && options.mini.width) || this.minWidth || 0;\n            var drawerWrapper = this.drawerWrapper;\n            var elementWidth = drawerWrapper.width();\n            var limitedPosition;\n            var updatedPosition;\n\n            updatedPosition = elementWidth + (this.leftPositioned ? moveEventArgs.x.delta : -moveEventArgs.x.delta);\n\n            limitedPosition = Math.min(Math.max(updatedPosition, minWidth), options.width);\n\n            moveEventArgs.event.preventDefault();\n            moveEventArgs.event.stopPropagation();\n\n            drawerWrapper.width(limitedPosition);\n        },\n\n        _selectItem: function(item) {\n            var selectedItemIndex;\n\n            if (item) {\n                item.addClass(\"k-state-selected\");\n                this.trigger(\"itemClick\", { item: item, sender: this });\n                this._selectedItemIndex = item.index();\n                return;\n            }\n\n            selectedItemIndex = this._selectedItemIndex;\n\n            if (selectedItemIndex) {\n                this.drawerItemsWrapper.find(\"[data-role='drawer-item']\").eq(selectedItemIndex).addClass(\"k-state-selected\");\n            }\n        },\n\n        _itemClick: function(e) {\n            var that = this;\n            var item;\n            var items;\n\n            if ($(e.event.target).find(\".k-drawer-item\").length > 0) {\n                item = $(e.event.target).find(\".k-drawer-item\");\n            }\n            else if ($(e.event.target).closest(\".k-drawer-item\").length > 0) {\n                item = $(e.event.target).closest(\".k-drawer-item\");\n            }\n            else if ($(e.event.target).hasClass(\".k-drawer-item\")) {\n                item = $(e.event.target);\n            }\n            items = that.drawerItemsWrapper.find(\".k-drawer-item\").removeClass(\"k-state-selected\");\n            that._selectItem(item);\n\n            if (that.options.navigatable) {\n                items.attr(\"aria-selected\", false);\n                item.attr(\"aria-selected\", true);\n                that._setCurrent(item);\n            }\n        },\n\n        destroy: function() {\n            var options = this.options;\n\n            if (options.mode != PUSH) {\n                if (this.leftPositioned) {\n                    $(document.body).css(\"padding-left\", 0);\n                }\n                else {\n                    $(document.body).css(\"padding-right\", 0);\n                }\n            }\n\n            Widget.fn.destroy.call(this);\n\n            this.userEvents.destroy();\n\n            kendo.destroy(this.element);\n            this.element = this.drawerWrapper = this.drawerElement = this.drawerContainer = this.drawerItemsWrapper = this._miniTemplate = null;\n        },\n\n        options: {\n            name: \"Drawer\",\n            autoCollapse: true,\n            position: LEFT,\n            mode: \"overlay\",\n            swipeToOpen: true,\n            width: 280,\n            mini: false,\n            navigatable: false,\n            template: \"\"\n        },\n\n        events: [\n            HIDE,\n            SHOW,\n            ITEMCLICK\n        ]\n\n    });\n    kendo.ui.plugin(Drawer);\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) { (a3 || a2)(); });\n\n"],"names":["define","__meta__","id","name","category","description","depends","$","window","kendo","jQuery","undefined","ui","Widget","SHOW","HIDE","NS","FOCUSED","keys","ITEMCLICK","TABINDEX","PUSH","OVERLAY","LEFT","RIGHT","Drawer","extend","init","element","options","that","this","userEvents","fn","call","_element","_wrapper","_navigatable","position","_mode","mini","_miniMode","_initDrawerItems","mode","_setBodyOffset","UserEvents","document","body","drawerContainer","fastTap","allowSelection","tap","e","contains","drawerItemsWrapper","event","target","_itemClick","autoCollapse","visible","trigger","sender","hide","preventDefault","swipeToOpen","bind","_start","_update","_end","minHeight","css","contentElement","children","first","drawerElement","template","addClass","navigatable","drawerItems","find","attr","parent","on","_focus","_blur","_keyDown","_current","removeClass","_setCurrent","eq","current","guid","next","removeAttr","handled","keyCode","UP","prevAll","length","last","DOWN","nextAll","HOME","END","SPACEBAR","ENTER","noop","ESC","wrapAll","drawerWrapper","wrap","width","append","after","prepend","overlayMiniOffset","outerWidth","leftPositioned","separatorItems","_selectedItemIndex","overlayContainer","miniWidth","miniTemplate","_miniTemplate","html","minWidth","show","isExpanded","hasClass","_selectItem","value","Math","abs","x","velocity","y","triggeredByInput","cancel","drawerMini","_push","_overlay","elementWidth","pastHalf","velocityThreshold","shouldShow","moveEventArgs","limitedPosition","updatedPosition","delta","min","max","stopPropagation","item","selectedItemIndex","index","items","closest","destroy","events","plugin","amd","a1","a2","a3"],"mappings":"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"}