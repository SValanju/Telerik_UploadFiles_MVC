{"version":3,"file":"kendo.actionsheet.min.js","sources":["kendo.actionsheet.js"],"sourcesContent":["(function(f, define) {\n    define('kendo.actionsheet',[\"kendo.core\", \"kendo.popup\"], f);\n})(function() {\n\nvar __meta__ = { // jshint ignore:line\n    id: \"ActionSheet\",\n    name: \"ActionSheet\",\n    category: \"web\", // suite\n    description: \"The ActionSheet widget displays a set of choices related to a task the user initiates.\",\n    depends: [\"core\", \"popup\"] // dependencies\n};\n\n(function($, undefined) {\n    var kendo = window.kendo;\n    var Widget = kendo.ui.Widget;\n    var ui = kendo.ui;\n    var ns = \".kendoActionSheet\";\n    var Popup = ui.Popup;\n    var DOCUMENT_ELEMENT = $(document.documentElement);\n    var MOUSEDOWN = \"down\";\n    var OPEN = \"open\";\n    var CLOSE = \"close\";\n    var ACTIVATE = \"activate\";\n    var ACTION_SHEET_CONTAINER = \"k-actionsheet-container\";\n    var OVERLAY = \"k-overlay\";\n    var ACTION_SHEET = \"k-actionsheet\";\n    var ACTION_SHEET_BOTTOM = \"k-actionsheet-bottom\";\n    var STATEDISABLED = \"k-state-disabled\";\n    var HIDDEN = \"k-hidden\";\n    var extend = $.extend;\n    var template = kendo.template;\n    var CLICK = \"click\";\n    var KEYDOWN = \"keydown\";\n    var hexColor = /^#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/;\n    var HEADER_TEMPLATE = '<div class=\"k-actionsheet-header\">' +\n                                \"#=title#\" +\n                            '</div>';\n    var ITEM_TEMPLATE = '<li role=\"none\" class=\"k-actionsheet-item #= disabled ? \"' + STATEDISABLED + '\" : \"\" #\">' +\n                            '<a href=\"\\\\#\" class=\"k-actionsheet-action\">' +\n                                '#if(icon){# #=icon# #}#' +\n                                '<span class=\"k-actionsheet-item-text\">' +\n                                    '<span class=\"k-actionsheet-item-title\">#:text#</span>' +\n                                    '#if(description){#<span class=\"k-actionsheet-item-description\">#:description#</span>#}#' +\n                                '</span>' +\n                            '</a>' +\n                        '</li>';\n    var SEPARATOR = '<hr class=\"k-hr\" />';\n    var defaultItem = {\n        text: \"\",\n        description: \"\",\n        iconClass: \"\",\n        iconSize: 0,\n        iconColor: \"\",\n        click: $.noop,\n        group: \"top\",\n        disabled: false\n    };\n\n    function contains(container, target) {\n        if (!container || !target) {\n            return false;\n        }\n        return container === target || $.contains(container, target);\n    }\n\n    function createIcon(data) {\n        var result = $('<span></span>');\n        var inlineStyles = {};\n\n        if (!data.iconClass) {\n            return '';\n        }\n\n        result.addClass(data.iconClass + \" k-actionsheet-item-icon\");\n\n        if (data.iconColor && hexColor.test(data.iconColor)) {\n            inlineStyles.color = data.iconColor;\n        } else if (data.iconColor) {\n            result.addClass(\"k-text-\" + data.iconColor);\n        }\n\n        if (data.iconSize) {\n            inlineStyles.fontSize = data.iconSize;\n        }\n\n        if (Object.keys(inlineStyles).length) {\n            result.css(inlineStyles);\n        }\n\n        return result;\n    }\n\n    var ActionSheet = Widget.extend({\n        init: function(element, options) {\n            var that = this;\n\n            Widget.fn.init.call(that, element, options);\n\n            that._hasItems = options.items && options.items.length;\n            that._mapItems();\n            that._wrapper();\n            that._popup();\n            that._header();\n            that._items();\n            that._footer();\n\n            that.downEvent = kendo.applyEventMap(MOUSEDOWN, kendo.guid());\n            that._mousedownProxy = that._mousedown.bind(that);\n            that.wrapper.on(KEYDOWN + ns, that, that._keydown.bind(that));\n        },\n\n        events: [\n            OPEN,\n            CLOSE\n        ],\n\n        options: {\n            name: \"ActionSheet\",\n            title: \"\",\n            items: [],\n            popup: null\n        },\n\n        _mapItems: function() {\n            var that = this;\n\n            if (!that._hasItems) {\n                return;\n            }\n\n            that.options.items = that.options.items.map(defaultItemsMapper);\n        },\n\n        _wrapper: function() {\n            var that = this;\n            var element = that.element;\n            var wrapper;\n\n            element.addClass(ACTION_SHEET + \" \" + ACTION_SHEET_BOTTOM + \" k-popup\");\n            that.wrapper = wrapper = element.wrap(\"<div class='\" + ACTION_SHEET_CONTAINER + \" \" + HIDDEN + \"'></div>\").parent();\n            wrapper.prepend($('<div></div>').addClass(OVERLAY));\n        },\n\n        _popup: function() {\n            var that = this;\n            var options = that.options;\n\n            that.popup = new Popup(that.element, extend(options.popup,\n                options,\n                {\n                    name: \"Popup\",\n                    isRtl: kendo.support.isRtl(options.anchor),\n                    omitOriginOffsets: true,\n                    appendTo: that.wrapper,\n                    modal: true,\n                    animation: false,\n                    anchor: that.wrapper\n                }));\n\n            that.popup.bind(ACTIVATE, that._openHandler.bind(that));\n        },\n\n        _header: function() {\n            var that = this;\n            var options = that.options;\n\n            if (!options.title) {\n                return;\n            }\n\n            that.element.append(template(HEADER_TEMPLATE)(options));\n        },\n\n        _items: function() {\n            var that = this;\n\n            if (!that._hasItems) {\n                return;\n            }\n\n            that._createItems(topGroupFilter);\n        },\n\n        _createItems: function(itemsFilter) {\n            var that = this;\n            var items = that.options.items.filter(itemsFilter);\n            var idx;\n            var item;\n            var itemTemplate;\n            var itemElement;\n            var container = $(\"<ul class='k-actionsheet-items' role='group'></ul>\");\n            var icon;\n\n            if (!items.length) {\n                return;\n            }\n\n            that.element.append(container);\n            itemTemplate = template(ITEM_TEMPLATE);\n\n            for (idx = 0; idx < items.length; idx++) {\n                item = items[idx];\n                icon = createIcon(item);\n                itemElement = $(itemTemplate(extend({}, item, { icon: icon && icon.prop('outerHTML') })));\n                container.append(itemElement);\n\n                if (item.click) {\n                    itemElement.on(CLICK + ns, item.click.bind(that));\n                }\n            }\n        },\n\n        _footer: function() {\n            var that = this;\n\n            if (!that._hasItems) {\n                return;\n            }\n            that.element.append(SEPARATOR);\n            that._createItems(bottomGroupFilter);\n        },\n\n        destroy: function() {\n            var that = this;\n\n            Widget.fn.destroy.call(that);\n            that.element.off(ns);\n            that.wrapper.off(ns);\n            that.popup.destroy();\n        },\n\n        open: function() {\n            var that = this;\n\n            that.wrapper.removeClass(HIDDEN);\n            that._elementHeight = that._elementHeight || that.element.outerHeight();\n            that.popup.open((that.wrapper.outerWidth() - that.element.outerWidth()) / 2, that.wrapper.outerHeight() - that._elementHeight);\n            DOCUMENT_ELEMENT.off(that.downEvent, that._mousedownProxy)\n                .on(that.downEvent, that._mousedownProxy);\n        },\n\n        close: function() {\n            var that = this;\n\n            that.popup.close();\n            that.wrapper.addClass(HIDDEN);\n            DOCUMENT_ELEMENT.off(that.downEvent, that._mousedownProxy);\n        },\n\n        _keydown: function(e) {\n            var that = this;\n            var keys = kendo.keys;\n            var keyCode = e.keyCode;\n\n            if (keyCode == keys.ESC) {\n                e.stopPropagation();\n                that.close();\n            }\n        },\n\n        _openHandler: function() {\n            var that = this;\n\n            that.element.find('li.k-actionsheet-item').eq(0).find(\"a\").trigger(\"focus\");\n        },\n\n        _mousedown: function(e) {\n            var that = this;\n            var container = that.element[0];\n            var target = kendo.eventTarget(e);\n\n            if (!contains(container, target)) {\n                that.close();\n            }\n        }\n    });\n\n    function topGroupFilter(item) {\n        return item.group === \"top\";\n    }\n\n    function bottomGroupFilter(item) {\n        return item.group !== \"top\";\n    }\n\n    function defaultItemsMapper(item) {\n        return extend({}, defaultItem, item);\n    }\n\n    ui.plugin(ActionSheet);\n\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) {\n    (a3 || a2)();\n});\n"],"names":["define","__meta__","id","name","category","description","depends","$","window","kendo","jQuery","undefined","Widget","ui","ns","Popup","DOCUMENT_ELEMENT","document","documentElement","MOUSEDOWN","OPEN","CLOSE","ACTIVATE","ACTION_SHEET_CONTAINER","OVERLAY","ACTION_SHEET","ACTION_SHEET_BOTTOM","STATEDISABLED","HIDDEN","extend","template","CLICK","KEYDOWN","hexColor","HEADER_TEMPLATE","ITEM_TEMPLATE","SEPARATOR","defaultItem","text","iconClass","iconSize","iconColor","click","noop","group","disabled","contains","container","target","createIcon","data","result","inlineStyles","addClass","test","color","fontSize","Object","keys","length","css","ActionSheet","init","element","options","that","this","fn","call","_hasItems","items","_mapItems","_wrapper","_popup","_header","_items","_footer","downEvent","applyEventMap","guid","_mousedownProxy","_mousedown","bind","wrapper","on","_keydown","events","title","popup","map","defaultItemsMapper","wrap","parent","prepend","isRtl","support","anchor","omitOriginOffsets","appendTo","modal","animation","_openHandler","append","_createItems","topGroupFilter","itemsFilter","filter","idx","item","itemTemplate","itemElement","icon","prop","bottomGroupFilter","destroy","off","open","removeClass","_elementHeight","outerHeight","outerWidth","close","e","keyCode","ESC","stopPropagation","find","eq","trigger","eventTarget","plugin","amd","a1","a2","a3"],"mappings":"CAAA,SAAaA,QACTA,OAAO,oBAAoB,CAAC,aAAc,eAC3C,WAEH,IAAIC,EAAW,CACXC,GAAI,cACJC,KAAM,cACNC,SAAU,MACVC,YAAa,yFACbC,QAAS,CAAC,OAAQ,UAGZC,EAuRPC,OAAOC,MAAMC,OAvRHC,OAAb,EACQF,EAAQD,OAAOC,MACfG,EAASH,EAAMI,GAAGD,OAClBC,EAAKJ,EAAMI,GACXC,EAAK,oBACLC,EAAQF,EAAGE,MACXC,EAAmBT,EAAEU,SAASC,iBAC9BC,EAAY,OACZC,EACAC,EACAC,EAAW,WACXC,EAAyB,0BACzBC,EAAU,YACVC,EAAe,gBACfC,EAAsB,uBACtBC,EACAC,EAAS,WACTC,EAAStB,EAAEsB,OACXC,EAAWrB,EAAMqB,SACjBC,EAAQ,QACRC,EAAU,UACVC,EAAW,qCACXC,EAAkB,qCACM,WACJ,SACpBC,EAAgB,4DAVA,mBAU8E,aAC1E,8CACI,0BACA,yCACI,wDACA,0FACJ,UACJ,OACJ,QAChBC,EAAY,sBACZC,EAAc,CACdC,KAAM,GACNjC,YAAa,GACbkC,UAAW,GACXC,SAAU,EACVC,UAAW,GACXC,MAAOnC,EAAEoC,KACTC,MAAO,MACPC,SAAU,OAGd,SAASC,EAASC,EAAWC,GACzB,IAAKD,IAAcC,EACf,OAAO,MAEX,OAAOD,IAAcC,GAAUzC,EAAEuC,SAASC,EAAWC,GAGzD,SAASC,EAAWC,GAChB,IAAIC,EAAS5C,EAAE,iBACf,IAAI6C,EAAe,GAEnB,IAAKF,EAAKX,UACN,MAAO,GAGXY,EAAOE,SAASH,EAAKX,UAAY,4BAEjC,GAAIW,EAAKT,WAAaR,EAASqB,KAAKJ,EAAKT,WACrCW,EAAaG,MAAQL,EAAKT,eACvB,GAAIS,EAAKT,UACZU,EAAOE,SAAS,UAAYH,EAAKT,WAGrC,GAAIS,EAAKV,SACLY,EAAaI,SAAWN,EAAKV,SAGjC,GAAIiB,OAAOC,KAAKN,GAAcO,OAC1BR,EAAOS,IAAIR,GAGf,OAAOD,EAGX,IAAIU,EAAcjD,EAAOiB,OAAO,CAC5BiC,KAAM,SAASC,EAASC,GACpB,IAAIC,EAAOC,KAEXtD,EAAOuD,GAAGL,KAAKM,KAAKH,EAAMF,EAASC,GAEnCC,EAAKI,UAAYL,EAAQM,OAASN,EAAQM,MAAMX,OAChDM,EAAKM,YACLN,EAAKO,WACLP,EAAKQ,SACLR,EAAKS,UACLT,EAAKU,SACLV,EAAKW,UAELX,EAAKY,UAAYpE,EAAMqE,cAAc3D,EAAWV,EAAMsE,QACtDd,EAAKe,gBAAkBf,EAAKgB,WAAWC,KAAKjB,GAC5CA,EAAKkB,QAAQC,GAAGpD,EAAUlB,EAAImD,EAAMA,EAAKoB,SAASH,KAAKjB,KAG3DqB,OAAQ,CA3FD,OACC,SA+FRtB,QAAS,CACL7D,KAAM,cACNoF,MAAO,GACPjB,MAAO,GACPkB,MAAO,MAGXjB,UAAW,WACP,IAAIN,EAAOC,KAEX,IAAKD,EAAKI,UACN,OAGJJ,EAAKD,QAAQM,MAAQL,EAAKD,QAAQM,MAAMmB,IAAIC,IAGhDlB,SAAU,WACN,IAAIP,EAAOC,KACX,IAAIH,EAAUE,EAAKF,QACnB,IAAIoB,EAEJpB,EAAQV,SAAS5B,EAAe,IAAMC,EAAsB,YAC5DuC,EAAKkB,QAAUA,EAAUpB,EAAQ4B,KAAK,eAAiBpE,EAAyB,IAAMK,EAAS,YAAYgE,SAC3GT,EAAQU,QAAQtF,EAAE,eAAe8C,SAAS7B,KAG9CiD,OAAQ,WACJ,IAAIR,EAAOC,KACX,IAAIF,EAAUC,EAAKD,QAEnBC,EAAKuB,MAAQ,IAAIzE,EAAMkD,EAAKF,QAASlC,EAAOmC,EAAQwB,MAChDxB,EACA,CACI7D,KAAM,QACN2F,MAAOrF,EAAMsF,QAAQD,MAAM9B,EAAQgC,QACnCC,kBAAmB,KACnBC,SAAUjC,EAAKkB,QACfgB,MAAO,KACPC,UAAW,MACXJ,OAAQ/B,EAAKkB,WAGrBlB,EAAKuB,MAAMN,KAAK5D,EAAU2C,EAAKoC,aAAanB,KAAKjB,KAGrDS,QAAS,WACL,IAAIT,EAAOC,KACX,IAAIF,EAAUC,EAAKD,QAEnB,IAAKA,EAAQuB,MACT,OAGJtB,EAAKF,QAAQuC,OAAOxE,EAASI,EAATJ,CAA0BkC,KAGlDW,OAAQ,WACJ,IAAIV,EAAOC,KAEX,IAAKD,EAAKI,UACN,OAGJJ,EAAKsC,aAAaC,IAGtBD,aAAc,SAASE,GACnB,IAAIxC,EAAOC,KACX,IAAII,EAAQL,EAAKD,QAAQM,MAAMoC,OAAOD,GACtC,IAAIE,EACJ,IAAIC,EACJ,IAAIC,EACJ,IAAIC,EACJ,IAAI/D,EAAYxC,EAAE,sDAClB,IAAIwG,EAEJ,IAAKzC,EAAMX,OACP,OAGJM,EAAKF,QAAQuC,OAAOvD,GACpB8D,EAAe/E,EAASK,GAExB,IAAKwE,EAAM,EAAGA,EAAMrC,EAAMX,OAAQgD,IAAO,CACrCC,EAAOtC,EAAMqC,GACbI,EAAO9D,EAAW2D,GAClBE,EAAcvG,EAAEsG,EAAahF,EAAO,GAAI+E,EAAM,CAAEG,KAAMA,GAAQA,EAAKC,KAAK,iBACxEjE,EAAUuD,OAAOQ,GAEjB,GAAIF,EAAKlE,MACLoE,EAAY1B,GAAGrD,EAAQjB,EAAI8F,EAAKlE,MAAMwC,KAAKjB,MAKvDW,QAAS,WACL,IAAIX,EAAOC,KAEX,IAAKD,EAAKI,UACN,OAEJJ,EAAKF,QAAQuC,OAAOlE,GACpB6B,EAAKsC,aAAaU,IAGtBC,QAAS,WACL,IAAIjD,EAAOC,KAEXtD,EAAOuD,GAAG+C,QAAQ9C,KAAKH,GACvBA,EAAKF,QAAQoD,IAAIrG,GACjBmD,EAAKkB,QAAQgC,IAAIrG,GACjBmD,EAAKuB,MAAM0B,WAGfE,KAAM,WACF,IAAInD,EAAOC,KAEXD,EAAKkB,QAAQkC,YAAYzF,GACzBqC,EAAKqD,eAAiBrD,EAAKqD,gBAAkBrD,EAAKF,QAAQwD,cAC1DtD,EAAKuB,MAAM4B,MAAMnD,EAAKkB,QAAQqC,aAAevD,EAAKF,QAAQyD,cAAgB,EAAGvD,EAAKkB,QAAQoC,cAAgBtD,EAAKqD,gBAC/GtG,EAAiBmG,IAAIlD,EAAKY,UAAWZ,EAAKe,iBACrCI,GAAGnB,EAAKY,UAAWZ,EAAKe,kBAGjCyC,MAAO,WACH,IAAIxD,EAAOC,KAEXD,EAAKuB,MAAMiC,QACXxD,EAAKkB,QAAQ9B,SAASzB,GACtBZ,EAAiBmG,IAAIlD,EAAKY,UAAWZ,EAAKe,kBAG9CK,SAAU,SAASqC,GACf,IAAIzD,EAAOC,KACX,IAAIR,EAAOjD,EAAMiD,KACjB,IAAIiE,EAAUD,EAAEC,QAEhB,GAAIA,GAAWjE,EAAKkE,IAAK,CACrBF,EAAEG,kBACF5D,EAAKwD,UAIbpB,aAAc,WACV,IAAIpC,EAAOC,KAEXD,EAAKF,QAAQ+D,KAAK,yBAAyBC,GAAG,GAAGD,KAAK,KAAKE,QAAQ,UAGvE/C,WAAY,SAASyC,GACjB,IAAIzD,EAAOC,KACX,IAAInB,EAAYkB,EAAKF,QAAQ,GAC7B,IAAIf,EAASvC,EAAMwH,YAAYP,GAE/B,IAAK5E,EAASC,EAAWC,GACrBiB,EAAKwD,WAKjB,SAASjB,EAAeI,GACpB,OAAOA,EAAKhE,QAAU,MAG1B,SAASqE,EAAkBL,GACvB,OAAOA,EAAKhE,QAAU,MAG1B,SAAS8C,EAAmBkB,GACxB,OAAO/E,EAAO,GAAIQ,EAAauE,GAOvC,OAJI/F,EAAGqH,OAAOrE,GAIPrD,OAAOC,QArSd,CAuSoB,mBAAVT,QAAwBA,OAAOmI,IAAMnI,OAAS,SAASoI,EAAIC,EAAIC,IACpEA,GAAMD"}