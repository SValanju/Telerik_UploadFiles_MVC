{"version":3,"file":"kendo.ripple.min.js","sources":["kendo.ripple.js"],"sourcesContent":["(function(f, define){\n    define('util/ripple',[\n        \"kendo.core\"\n    ], f);\n})(function(){\n\n(function () {\n\nwindow.kendo.util = window.kendo.util || {};\nwindow.kendo.util.ripple = window.kendo.util.ripple || {};\n\nvar closest = function (element, selector) {\n    if (element.closest) {\n        return element.closest(selector);\n    }\n    var matches = Element.prototype.matches ?\n        function (el, sel) { return el.matches(sel); }\n        : function (el, sel) { return el.msMatchesSelector(sel); };\n    var node = element;\n    while (node) {\n        if (matches(node, selector)) {\n            return node;\n        }\n        node = node.parentElement;\n    }\n};\nvar createRipple = function (doc) {\n    var ripple = doc.createElement('div');\n    ripple.className = 'k-ripple';\n    var blob = doc.createElement('div');\n    blob.className = 'k-ripple-blob';\n    ripple.appendChild(blob);\n    return [ripple, blob];\n};\nvar once = function (element, eventName, fn) {\n    var listener = function () {\n        fn();\n        element.removeEventListener(eventName, listener, false);\n    };\n    var remove = function () { return element.addEventListener(eventName, listener, false); };\n    remove();\n    return { remove: remove };\n};\nvar activate = function (containerSelector, options) { return function (e) {\n    var target = e.target;\n    var doc = target.document || target.ownerDocument;\n    var container;\n    if (options.container) {\n        container = options.container(target);\n    }\n    else {\n        container = closest(target, containerSelector);\n    }\n    if (!container) {\n        return;\n    }\n    // focus event of ripple container triggers double-focus\n    var doubleFocus = /focus/i.test(e.type) && container.classList.contains(\"k-ripple-target\");\n    if (doubleFocus) {\n        return;\n    }\n    if (!target.classList.contains('k-checkbox') && !target.classList.contains('k-radio')) {\n        // suppress focus when animating ripples\n        container.classList.add(\"k-ripple-target\");\n        var _a = createRipple(doc), ripple = _a[0], blob = _a[1];\n        var state_1 = {\n            animated: false,\n            released: false,\n            blob: blob,\n            container: container,\n            ripple: ripple\n        };\n        var eventType = {\n            'focusin': 'focusout',\n            'keydown': 'keyup',\n            'mousedown': 'mouseup',\n            'pointerdown': 'pointerup',\n            'touchdown': 'touchup',\n            'animationstart': 'animationend'\n        }[e.type];\n        once(e.currentTarget, eventType, function () { return release(state_1); });\n        container.appendChild(ripple);\n        // recalc to allow the effect to animate\n        window.getComputedStyle(ripple).getPropertyValue('opacity');\n        var rect = container.getBoundingClientRect();\n        var left = 0;\n        var top = 0;\n        if ((/mouse|pointer|touch/).test(e.type)) {\n            left = e.clientX - rect.left;\n            top = e.clientY - rect.top;\n        }\n        else {\n            left = rect.width / 2;\n            top = rect.height / 2;\n        }\n        // coordinates of the farthest corner\n        var xMax = left < rect.width / 2 ? rect.width : 0;\n        var yMax = top < rect.height / 2 ? rect.height : 0;\n        // distance to the farthest corner\n        var dx = left - xMax;\n        var dy = top - yMax;\n        // blob size is twice the blob radius\n        var size = 2 * Math.sqrt(dx * dx + dy * dy);\n        var duration = 500;\n        blob.style.width = blob.style.height = size + \"px\";\n        // force reflow for Safari 11 to align ripple blob\n        if (blob.offsetWidth < 0) {\n            throw new Error(\"Inconceivable!\");\n        }\n        blob.style.cssText = \"\\n        width: \" + size + \"px;\\n        height: \" + size + \"px;\\n        transform: translate(-50%, -50%) scale(1);\\n        left: \" + left + \"px;\\n        top: \" + top + \"px;\\n    \";\n        setTimeout(function () { return finishAnimation(state_1); }, duration);\n    }\n    else {\n        e.target.classList.remove('k-ripple-focus');\n        if (e.type !== 'animationend') {\n            e.target.classList.add('k-ripple-focus');\n        }\n    }\n}; };\nvar finishAnimation = function (state) {\n    state.animated = true;\n    deactivate(state);\n};\nvar release = function (state) {\n    state.released = true;\n    deactivate(state);\n};\nvar deactivate = function (state) {\n    // deactivation happens when both\n    // - the activation event has been released (release)\n    // - the ripple has finished animating (finishAnimation)\n    if (!state.released || !state.animated) {\n        return;\n    }\n    var blob = state.blob, ripple = state.ripple, container = state.container;\n    if (container) {\n        once(container, 'blur', function () { return container.classList.remove(\"k-ripple-target\"); });\n    }\n    if (blob) {\n        once(blob, 'transitionend', function () {\n            if (ripple && ripple.parentNode) {\n                ripple.parentNode.removeChild(ripple);\n            }\n        });\n        blob.style.transition = 'opacity 200ms linear';\n        blob.style.opacity = '0';\n    }\n};\n/**\n * @hidden\n */\nvar register = function (root, elements) {\n    var flatten = function (arr) { return [].concat.apply([], arr); };\n    var handlers = flatten(elements.map(function (item) {\n        var defaultOptions = {\n            events: ['mousedown', 'touchdown'],\n            global: false\n        };\n        var selector = item.selector, _a = item.options, options = _a === void 0 ? defaultOptions : _a;\n        var activator = activate(selector, options);\n        var events = options.events || defaultOptions.events;\n        var container = options.global ? document.body : root;\n        events.forEach(function (evt) { return container.addEventListener(evt, activator, false); });\n        return { events: events, options: options, activator: activator };\n    }));\n    return function () {\n        if (!root) {\n            return;\n        }\n        var removeListener = function (_a) {\n            var events = _a.events, options = _a.options, activator = _a.activator;\n            var container = options.global ? document.body : root;\n            events.forEach(function (evt) { return container.removeEventListener(evt, activator, false); });\n        };\n        handlers.forEach(removeListener);\n        root = null;\n    };\n};\n\nkendo.deepExtend(kendo.util.ripple, {\n    register: register\n});\n\n})();\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n(function(f, define) {\n    define('kendo.ripple',[\n        \"./util/ripple\"\n    ], f);\n})(function() {\n\nvar __meta__ = { // jshint ignore:line\n    id: \"ripplecontainer\",\n    name: \"RippleContainer\",\n    category: \"web\",\n    depends: [ \"core\" ]\n};\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        ui = kendo.ui,\n        Widget = ui.Widget,\n        extend = $.extend,\n        ripple = kendo.util.ripple;\n\n    var RippleContainer = Widget.extend({\n        init: function(element, options) {\n            var that = this;\n\n            Widget.fn.init.call(that, element);\n\n            element = that.wrapper = that.element;\n\n            that.options = extend({}, that.options, options);\n\n            that.registerListeners();\n        },\n\n        options: {\n            name: \"RippleContainer\",\n            elements: [\n                { selector: \".k-button:not(li)\" },\n                { selector: \".k-list > .k-item\", options: { global: true } },\n                { selector: \".k-checkbox-label, .k-radio-label\" },\n                {\n                    selector: \".k-checkbox, .k-radio\",\n                    options: {\n                        events: [\"focusin\"],\n                        container: function(el) {\n                            if (/\\b(k-checkbox|k-radio)\\b/.test(el.className)) {\n                                return el.nextElementSibling;\n                            }\n                        }\n                    }\n                }\n            ]\n        },\n\n        removeListeners: function() {},\n\n        registerListeners: function() {\n            var that = this;\n            var root = that.element[0];\n            var elements = that.options.elements;\n\n            that.removeListeners();\n\n            var callback = ripple.register(root, elements);\n\n            that.removeListeners = callback;\n        },\n\n        destroy: function() {\n            var that = this;\n\n            Widget.fn.destroy.call(that);\n\n            that.removeListeners();\n        }\n    });\n\n    ui.plugin(RippleContainer);\n\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) { (a3 || a2)(); });\n\n"],"names":["define","window","kendo","util","ripple","closest","element","selector","matches","Element","prototype","el","sel","msMatchesSelector","node","parentElement","createRipple","doc","createElement","className","blob","appendChild","once","eventName","fn","listener","removeEventListener","remove","addEventListener","activate","containerSelector","options","e","target","document","ownerDocument","container","doubleFocus","test","type","classList","contains","add","_a","state_1","animated","released","eventType","focusin","keydown","mousedown","pointerdown","touchdown","animationstart","currentTarget","release","getComputedStyle","getPropertyValue","rect","getBoundingClientRect","left","top","clientX","clientY","width","height","xMax","yMax","dx","dy","size","Math","sqrt","duration","style","offsetWidth","Error","cssText","setTimeout","finishAnimation","state","deactivate","parentNode","removeChild","transition","opacity","register","deepExtend","root","elements","flatten","arr","concat","apply","handlers","map","item","defaultOptions","events","global","activator","body","forEach","evt","removeListener","amd","a1","a2","a3","__meta__","id","name","category","depends","$","jQuery","undefined","ui","Widget","extend","RippleContainer","init","that","this","call","wrapper","registerListeners","nextElementSibling","removeListeners","callback","destroy","plugin"],"mappings":"CAAA,SAAaA,QACTA,OAAO,cAAc,CACjB,cAEL,WAIHC,OAAOC,MAAMC,KAAOF,OAAOC,MAAMC,MAAQ,GACzCF,OAAOC,MAAMC,KAAKC,OAASH,OAAOC,MAAMC,KAAKC,QAAU,GAEvD,IAAIC,EAAU,SAAUC,EAASC,GAC7B,GAAID,EAAQD,QACR,OAAOC,EAAQD,QAAQE,GAE3B,IAAIC,EAAUC,QAAQC,UAAUF,QAC5B,SAAUG,EAAIC,GAAO,OAAOD,EAAGH,QAAQI,IACrC,SAAUD,EAAIC,GAAO,OAAOD,EAAGE,kBAAkBD,IACvD,IAAIE,EAAOR,EACX,MAAOQ,EAAM,CACT,GAAIN,EAAQM,EAAMP,GACd,OAAOO,EAEXA,EAAOA,EAAKC,gBAGhBC,EAAe,SAAUC,GACzB,IAAIb,EAASa,EAAIC,cAAc,OAC/Bd,EAAOe,UAAY,WACnB,IAAIC,EAAOH,EAAIC,cAAc,OAC7BE,EAAKD,UAAY,gBACjBf,EAAOiB,YAAYD,GACnB,MAAO,CAAChB,EAAQgB,IAEhBE,EAAO,SAAUhB,EAASiB,EAAWC,GACrC,IAAIC,EAAW,WACXD,IACAlB,EAAQoB,oBAAoBH,EAAWE,EAAU,QAErD,IAAIE,EAAS,WAAc,OAAOrB,EAAQsB,iBAAiBL,EAAWE,EAAU,QAChFE,IACA,MAAO,CAAEA,OAAQA,IAEjBE,EAAW,SAAUC,EAAmBC,GAAW,OAAO,SAAUC,GACpE,IAAIC,EAASD,EAAEC,OACf,IAAIhB,EAAMgB,EAAOC,UAAYD,EAAOE,cACpC,IAAIC,EACJ,GAAIL,EAAQK,UACRA,EAAYL,EAAQK,UAAUH,QAG9BG,EAAY/B,EAAQ4B,EAAQH,GAEhC,IAAKM,EACD,OAGJ,IAAIC,EAAc,SAASC,KAAKN,EAAEO,OAASH,EAAUI,UAAUC,SAAS,mBACxE,GAAIJ,EACA,OAEJ,IAAKJ,EAAOO,UAAUC,SAAS,gBAAkBR,EAAOO,UAAUC,SAAS,WAAY,CAEnFL,EAAUI,UAAUE,IAAI,mBACxB,IAAIC,EAAK3B,EAAaC,GAAMb,EAASuC,EAAG,GAAIvB,EAAOuB,EAAG,GACtD,IAAIC,EAAU,CACVC,SAAU,MACVC,SAAU,MACV1B,KAAMA,EACNgB,UAAWA,EACXhC,OAAQA,GAEZ,IAAI2C,EAAY,CACZC,QAAW,WACXC,QAAW,QACXC,UAAa,UACbC,YAAe,YACfC,UAAa,UACbC,eAAkB,gBACpBrB,EAAEO,MACJjB,EAAKU,EAAEsB,cAAeP,EAAW,WAAc,OAAOQ,EAAQX,KAC9DR,EAAUf,YAAYjB,GAEtBH,OAAOuD,iBAAiBpD,GAAQqD,iBAAiB,WACjD,IAAIC,EAAOtB,EAAUuB,wBACrB,IAAIC,EAAO,EACX,IAAIC,EAAM,EACV,GAAI,sBAAwBvB,KAAKN,EAAEO,MAAO,CACtCqB,EAAO5B,EAAE8B,QAAUJ,EAAKE,KACxBC,EAAM7B,EAAE+B,QAAUL,EAAKG,QAEtB,CACDD,EAAOF,EAAKM,MAAQ,EACpBH,EAAMH,EAAKO,OAAS,EAGxB,IAAIC,EAAON,EAAOF,EAAKM,MAAQ,EAAIN,EAAKM,MAAQ,EAChD,IAAIG,EAAON,EAAMH,EAAKO,OAAS,EAAIP,EAAKO,OAAS,EAEjD,IAAIG,EAAKR,EAAOM,EAChB,IAAIG,EAAKR,EAAMM,EAEf,IAAIG,EAAO,EAAIC,KAAKC,KAAKJ,EAAKA,EAAKC,EAAKA,GACxC,IAAII,EAAW,IACfrD,EAAKsD,MAAMV,MAAQ5C,EAAKsD,MAAMT,OAASK,EAAO,KAE9C,GAAIlD,EAAKuD,YAAc,EACnB,MAAM,IAAIC,MAAM,kBAEpBxD,EAAKsD,MAAMG,QAAU,oBAAsBP,EAAO,wBAA0BA,EAAO,0EAA4EV,EAAO,qBAAuBC,EAAM,YACnMiB,WAAW,WAAc,OAAOC,EAAgBnC,IAAa6B,OAE5D,CACDzC,EAAEC,OAAOO,UAAUb,OAAO,kBAC1B,GAAIK,EAAEO,OAAS,eACXP,EAAEC,OAAOO,UAAUE,IAAI,qBAI/BqC,EAAkB,SAAUC,GAC5BA,EAAMnC,SAAW,KACjBoC,EAAWD,IAEXzB,EAAU,SAAUyB,GACpBA,EAAMlC,SAAW,KACjBmC,EAAWD,IAEXC,EAAa,SAAUD,GAIvB,IAAKA,EAAMlC,WAAakC,EAAMnC,SAC1B,OAEJ,IAAIzB,EAAO4D,EAAM5D,KAAMhB,EAAS4E,EAAM5E,OAAQgC,EAAY4C,EAAM5C,UAChE,GAAIA,EACAd,EAAKc,EAAW,OAAQ,WAAc,OAAOA,EAAUI,UAAUb,OAAO,qBAE5E,GAAIP,EAAM,CACNE,EAAKF,EAAM,gBAAiB,WACxB,GAAIhB,GAAUA,EAAO8E,WACjB9E,EAAO8E,WAAWC,YAAY/E,KAGtCgB,EAAKsD,MAAMU,WAAa,uBACxBhE,EAAKsD,MAAMW,QAAU,MAMzBC,EA4BJpF,MAAMqF,WAAWrF,MAAMC,KAAKC,OAAQ,CAChCkF,SA7BW,SAAUE,EAAMC,GAC3B,IAAIC,EAAU,SAAUC,GAAO,MAAO,GAAGC,OAAOC,MAAM,GAAIF,IAC1D,IAAIG,EAAWJ,EAAQD,EAASM,IAAI,SAAUC,GAC1C,IAAIC,EAAiB,CACjBC,OAAQ,CAAC,YAAa,aACtBC,OAAQ,OAEZ,IAAI5F,EAAWyF,EAAKzF,SAAUoC,EAAKqD,EAAKjE,QAASA,EAAUY,SAAY,EAAIsD,EAAiBtD,EAC5F,IAAIyD,EAAYvE,EAAStB,EAAUwB,GACnC,IAAImE,EAASnE,EAAQmE,QAAUD,EAAeC,OAC9C,IAAI9D,EAAYL,EAAQoE,OAASjE,SAASmE,KAAOb,EACjDU,EAAOI,QAAQ,SAAUC,GAAO,OAAOnE,EAAUR,iBAAiB2E,EAAKH,EAAW,SAClF,MAAO,CAAEF,OAAQA,EAAQnE,QAASA,EAASqE,UAAWA,MAE1D,OAAO,WACH,IAAKZ,EACD,OAEJ,IAAIgB,EAAiB,SAAU7D,GAC3B,IAAIuD,EAASvD,EAAGuD,OAAQnE,EAAUY,EAAGZ,QAASqE,EAAYzD,EAAGyD,UAC7D,IAAIhE,EAAYL,EAAQoE,OAASjE,SAASmE,KAAOb,EACjDU,EAAOI,QAAQ,SAAUC,GAAO,OAAOnE,EAAUV,oBAAoB6E,EAAKH,EAAW,UAEzFN,EAASQ,QAAQE,GACjBhB,EAAO,WA/Kf,CAyLoB,mBAAVxF,QAAwBA,OAAOyG,IAAMzG,OAAS,SAAS0G,EAAIC,EAAIC,IAAMA,GAAMD,OACrF,SAAa3G,QACTA,OAAO,eAAe,CAClB,iBAEL,WAEH,IAAI6G,EAAW,CACXC,GAAI,kBACJC,KAAM,kBACNC,SAAU,MACVC,QAAS,CAAE,SAGLC,EAiEPjH,OAAOC,MAAMiH,OAjEHC,OAAb,EACQlH,EAAQD,OAAOC,MACfmH,EAAKnH,EAAMmH,GACXC,EAASD,EAAGC,OACZC,EAASL,EAAEK,OACXnH,EAASF,EAAMC,KAAKC,OAEpBoH,EAAkBF,EAAOC,OAAO,CAChCE,KAAM,SAASnH,EAASyB,GACpB,IAAI2F,EAAOC,KAEXL,EAAO9F,GAAGiG,KAAKG,KAAKF,EAAMpH,GAE1BA,EAAUoH,EAAKG,QAAUH,EAAKpH,QAE9BoH,EAAK3F,QAAUwF,EAAO,GAAIG,EAAK3F,QAASA,GAExC2F,EAAKI,qBAGT/F,QAAS,CACLgF,KAAM,kBACNtB,SAAU,CACN,CAAElF,SAAU,qBACZ,CAAEA,SAAU,oBAAqBwB,QAAS,CAAEoE,OAAQ,OACpD,CAAE5F,SAAU,qCACZ,CACIA,SAAU,wBACVwB,QAAS,CACLmE,OAAQ,CAAC,WACT9D,UAAW,SAASzB,GAChB,GAAI,2BAA2B2B,KAAK3B,EAAGQ,WACnC,OAAOR,EAAGoH,wBAQlCC,gBAAiB,aAEjBF,kBAAmB,WACf,IAAIJ,EAAOC,KACX,IAAInC,EAAOkC,EAAKpH,QAAQ,GACxB,IAAImF,EAAWiC,EAAK3F,QAAQ0D,SAE5BiC,EAAKM,kBAEL,IAAIC,EAAW7H,EAAOkF,SAASE,EAAMC,GAErCiC,EAAKM,gBAAkBC,GAG3BC,QAAS,WACL,IAAIR,EAAOC,KAEXL,EAAO9F,GAAG0G,QAAQN,KAAKF,GAEvBA,EAAKM,qBAQjB,OAJIX,EAAGc,OAAOX,GAIPvH,OAAOC,QAhFd,CAkFoB,mBAAVF,QAAwBA,OAAOyG,IAAMzG,OAAS,SAAS0G,EAAIC,EAAIC,IAAOA,GAAMD"}