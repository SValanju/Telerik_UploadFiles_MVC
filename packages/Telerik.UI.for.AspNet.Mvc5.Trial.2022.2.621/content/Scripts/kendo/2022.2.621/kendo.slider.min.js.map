{"version":3,"file":"kendo.slider.min.js","sources":["kendo.slider.js"],"sourcesContent":["(function(f, define) {\n    define('kendo.slider',[ \"kendo.draganddrop\" ], f);\n})(function() {\n\nvar __meta__ = { // jshint ignore:line\n    id: \"slider\",\n    name: \"Slider\",\n    category: \"web\",\n    description: \"The Slider widget provides a rich input for selecting values or ranges of values.\",\n    depends: [ \"draganddrop\" ]\n};\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        Widget = kendo.ui.Widget,\n        Draggable = kendo.ui.Draggable,\n        outerWidth = kendo._outerWidth,\n        outerHeight = kendo._outerHeight,\n        extend = $.extend,\n        format = kendo.format,\n        parse = kendo.parseFloat,\n        isArray = Array.isArray,\n        math = Math,\n        support = kendo.support,\n        pointers = support.pointers,\n        msPointers = support.msPointers,\n        CHANGE = \"change\",\n        SLIDE = \"slide\",\n        NS = \".slider\",\n        MOUSE_DOWN = \"touchstart\" + NS + \" mousedown\" + NS,\n        TRACK_MOUSE_DOWN = pointers ? \"pointerdown\" + NS : (msPointers ? \"MSPointerDown\" + NS : MOUSE_DOWN),\n        MOUSE_UP = \"touchend\" + NS + \" mouseup\" + NS,\n        TRACK_MOUSE_UP = pointers ? \"pointerup\" : (msPointers ? \"MSPointerUp\" + NS : MOUSE_UP),\n        MOVE_SELECTION = \"moveSelection\",\n        KEY_DOWN = \"keydown\" + NS,\n        CLICK = \"click\" + NS,\n        MOUSE_OVER = \"mouseover\" + NS,\n        FOCUS = \"focus\" + NS,\n        BLUR = \"blur\" + NS,\n        DRAG_HANDLE = \".k-draghandle\",\n        TRACK_SELECTOR = \".k-slider-track\",\n        TICK_SELECTOR = \".k-tick\",\n        STATE_SELECTED = \"k-state-selected\",\n        STATE_FOCUSED = \"k-state-focused\",\n        STATE_DISABLED = \"k-state-disabled\",\n        DISABLED = \"disabled\",\n        UNDEFINED = \"undefined\",\n        TABINDEX = \"tabindex\",\n        getTouches = kendo.getTouches,\n\n        ARIA_VALUETEXT = \"aria-valuetext\",\n        ARIA_VALUENOW = \"aria-valuenow\";\n\n    var SliderBase = Widget.extend({\n        init: function(element, options) {\n            var that = this;\n\n            Widget.fn.init.call(that, element, options);\n\n            options = that.options;\n            that._isHorizontal = options.orientation == \"horizontal\";\n            that._isRtl = that._isHorizontal && kendo.support.isRtl(element);\n            that._position = that._isHorizontal ? \"left\" : \"bottom\";\n            that._sizeFn = that._isHorizontal ? \"width\" : \"height\";\n            that._outerSize = that._isHorizontal ? outerWidth : outerHeight;\n\n            options.tooltip.format = options.tooltip.enabled ? options.tooltip.format || \"{0}\" : \"{0}\";\n\n            if (options.smallStep <= 0) {\n                throw new Error('Kendo UI Slider smallStep must be a positive number.');\n            }\n\n            that._createHtml();\n            that._trackDiv = that.wrapper.find(TRACK_SELECTOR);\n\n            that._maxSelection = that._trackDiv[that._sizeFn]();\n\n            that._sliderItemsInit();\n\n            that._reset();\n\n            that._tabindex(that.wrapper.find(DRAG_HANDLE));\n            that[options.enabled ? \"enable\" : \"disable\"]();\n\n            var rtlDirectionSign = kendo.support.isRtl(that.wrapper) ? -1 : 1;\n\n            that._keyMap = {\n                37: step(-1 * rtlDirectionSign * options.smallStep), // left arrow\n                40: step(-options.smallStep), // down arrow\n                39: step(+1 * rtlDirectionSign * options.smallStep), // right arrow\n                38: step(+options.smallStep), // up arrow\n                35: setValue(options.max), // end\n                36: setValue(options.min), // home\n                33: step(+options.largeStep), // page up\n                34: step(-options.largeStep) // page down\n            };\n\n            kendo.notify(that);\n        },\n\n        events: [\n            CHANGE,\n            SLIDE\n        ],\n\n        options: {\n            enabled: true,\n            min: 0,\n            max: 10,\n            smallStep: 1,\n            largeStep: 5,\n            orientation: \"horizontal\",\n            tickPlacement: \"both\",\n            tooltip: { enabled: true, format: \"{0}\" }\n        },\n\n        _distance: function() {\n            return round(this.options.max - this.options.min);\n        },\n\n        _resize: function() {\n            this.wrapper.find(\".k-slider-items\").remove();\n\n            this._maxSelection = this._trackDiv[this._sizeFn]();\n            this._sliderItemsInit();\n            this._refresh();\n\n            if (this.options.enabled) {\n                this.enable(true);\n            }\n        },\n\n        _sliderItemsInit: function() {\n            var that = this,\n                options = that.options;\n\n            // [Backwards compatibilty]: maxSelection is reduced with 2 to compensate new styling and preserve automatic calculation to not show ticks.\n            var sizeBetweenTicks = (that._maxSelection - 2) / ((options.max - options.min) / options.smallStep);\n\n            var pixelWidths = that._calculateItemsWidth(math.floor(removeFraction(that._distance()) / removeFraction(options.smallStep)));\n\n            if (options.tickPlacement != \"none\" && sizeBetweenTicks >= 2) {\n                $(this.element).parent().find(\".k-slider-items\").remove();\n                that._trackDiv.before(createSliderItems(options, that._distance()));\n                that._setItemsTitle();\n            }\n\n            that._calculateSteps(pixelWidths);\n\n            if (options.tickPlacement != \"none\" && sizeBetweenTicks >= 2 &&\n                options.largeStep >= options.smallStep) {\n                that._setItemsLargeTick();\n                that.wrapper.find(TICK_SELECTOR).first().addClass(\"k-first\");\n                that.wrapper.find(TICK_SELECTOR).last().addClass(\"k-last\");\n            }\n        },\n\n        getSize: function() {\n            return kendo.dimensions(this.wrapper);\n        },\n\n        _setItemsTitle: function() {\n            var that = this,\n                options = that.options,\n                items = that.wrapper.find(TICK_SELECTOR),\n                titleNumber = options.min,\n                count = items.length;\n\n            for (var i = 0; i <= count; i += 1) {\n                $(items[i]).attr(\"title\", format(options.tooltip.format, round(titleNumber)));\n                titleNumber += options.smallStep;\n            }\n        },\n\n        _setItemsLargeTick: function() {\n            var that = this,\n                options = that.options,\n                items = that.wrapper.find(TICK_SELECTOR),\n                i = 0, item, value;\n\n            if (removeFraction(options.largeStep) % removeFraction(options.smallStep) === 0 || that._distance() / options.largeStep >= 3) {\n                if (!that._isHorizontal && !that._isRtl) {\n                    items = $.makeArray(items).reverse();\n                }\n\n                for (i = 0; i < items.length; i++) {\n                    item = $(items[i]);\n                    value = that._values[i];\n                    var valueWithoutFraction = round(removeFraction(value - this.options.min));\n                    if (valueWithoutFraction % removeFraction(options.smallStep) === 0 && valueWithoutFraction % removeFraction(options.largeStep) === 0) {\n                        item.addClass(\"k-tick-large\")\n                            .html(\"<span class='k-label'>\" + item.attr(\"title\") + \"</span>\");\n\n                        if (i !== 0 && i !== items.length - 1) {\n                            item.css(\"line-height\", item[that._sizeFn]() + \"px\");\n                        }\n                    }\n                }\n            }\n        },\n\n        _calculateItemsWidth: function(itemsCount) {\n            var that = this,\n                options = that.options,\n                trackDivSize = parseFloat(that._trackDiv.css(that._sizeFn)) + 1,\n                distance = that._distance(),\n                preciseItemsCount = removeFraction(distance) / removeFraction(options.smallStep),\n                pixelStep = trackDivSize / removeFraction(distance),\n                itemWidth,\n                pixelWidths,\n                i;\n\n            if (preciseItemsCount - itemsCount > 0) {\n                trackDivSize -= ((removeFraction(distance) % removeFraction(options.smallStep)) * pixelStep);\n            }\n\n            itemWidth = trackDivSize / itemsCount;\n            pixelWidths = [];\n\n            for (i = 0; i < itemsCount - 1; i++) {\n                pixelWidths[i] = itemWidth;\n            }\n\n            pixelWidths[itemsCount - 1] = pixelWidths[itemsCount] = itemWidth / 2;\n            return that._roundWidths(pixelWidths);\n        },\n\n        _roundWidths: function(pixelWidthsArray) {\n            var balance = 0,\n                count = pixelWidthsArray.length,\n                i;\n\n            for (i = 0; i < count; i++) {\n                balance += (pixelWidthsArray[i] - math.floor(pixelWidthsArray[i]));\n                pixelWidthsArray[i] = math.floor(pixelWidthsArray[i]);\n            }\n\n            balance = math.round(balance);\n\n            return this._addAdditionalSize(balance, pixelWidthsArray);\n        },\n\n        _addAdditionalSize: function(additionalSize, pixelWidthsArray) {\n            if (additionalSize === 0) {\n                return pixelWidthsArray;\n            }\n\n            //set step size\n            var step = parseFloat(pixelWidthsArray.length - 1) / parseFloat(additionalSize == 1 ? additionalSize : additionalSize - 1),\n                i;\n\n            for (i = 0; i < additionalSize; i++) {\n                pixelWidthsArray[parseInt(math.round(step * i), 10)] += 1;\n            }\n\n            return pixelWidthsArray;\n        },\n\n        _calculateSteps: function(pixelWidths) {\n            var that = this,\n                options = that.options,\n                val = options.min,\n                selection = 0,\n                distance = that._distance(),\n                itemsCount = math.ceil(removeFraction(distance) / removeFraction(options.smallStep)),\n                i = 1,\n                lastItem;\n\n            itemsCount += (removeFraction(distance) / removeFraction(options.smallStep)) % 1 === 0 ? 1 : 0;\n            pixelWidths.splice(0, 0, pixelWidths[itemsCount - 2] * 2);\n            pixelWidths.splice(itemsCount - 1, 1, pixelWidths.pop() * 2);\n\n            that._pixelSteps = [selection];\n            that._values = [val];\n\n            if (itemsCount === 0) {\n                return;\n            }\n\n            while (i < itemsCount) {\n                selection += (pixelWidths[i - 1] + pixelWidths[i]) / 2;\n                that._pixelSteps[i] = selection;\n                val += options.smallStep;\n                that._values[i] = round(val);\n\n                i++;\n            }\n\n            lastItem = (removeFraction(distance) % removeFraction(options.smallStep)) === 0 ? itemsCount - 1 : itemsCount;\n\n            that._pixelSteps[lastItem] = that._maxSelection;\n            that._values[lastItem] = options.max;\n\n            if (that._isRtl) {\n                that._pixelSteps.reverse();\n                that._values.reverse();\n            }\n        },\n\n        _getValueFromPosition: function(mousePosition, draggableArea) {\n            var that = this,\n                options = that.options,\n                step = math.max(options.smallStep * (that._maxSelection / that._distance()), 0),\n                position = 0,\n                halfStep = (step / 2),\n                i;\n\n            if (that._isHorizontal) {\n                position = mousePosition - draggableArea.startPoint;\n                if (that._isRtl) {\n                    position = that._maxSelection - position;\n                }\n            } else {\n                position = draggableArea.startPoint - mousePosition;\n            }\n\n            if (that._maxSelection - ((parseInt(that._maxSelection % step, 10) - 3) / 2) < position) {\n                return options.max;\n            }\n\n            for (i = 0; i < that._pixelSteps.length; i++) {\n                if (math.abs(that._pixelSteps[i] - position) - 1 <= halfStep) {\n                    return round(that._values[i]);\n                }\n            }\n        },\n\n        _getFormattedValue: function(val, drag) {\n            var that = this,\n                html = \"\",\n                tooltip = that.options.tooltip,\n                tooltipTemplate,\n                selectionStart,\n                selectionEnd;\n\n            if (isArray(val)) {\n                selectionStart = val[0];\n                selectionEnd = val[1];\n            } else if (drag && drag.type) {\n                selectionStart = drag.selectionStart;\n                selectionEnd = drag.selectionEnd;\n            }\n\n            if (drag) {\n                tooltipTemplate = drag.tooltipTemplate;\n            }\n\n            if (!tooltipTemplate && tooltip.template) {\n                tooltipTemplate = kendo.template(tooltip.template);\n            }\n\n            if (isArray(val) || (drag && drag.type)) {\n\n                if (tooltipTemplate) {\n                    html = tooltipTemplate({\n                        selectionStart: selectionStart,\n                        selectionEnd: selectionEnd\n                    });\n                } else {\n                    selectionStart = format(tooltip.format, selectionStart);\n                    selectionEnd = format(tooltip.format, selectionEnd);\n                    html = selectionStart + \" - \" + selectionEnd;\n                }\n            } else {\n                if (drag) {\n                    drag.val = val;\n                }\n\n                if (tooltipTemplate) {\n                    html = tooltipTemplate({\n                        value: val\n                    });\n                } else {\n                    html = format(tooltip.format, val);\n                }\n            }\n            return html;\n        },\n\n        _getDraggableArea: function() {\n            var that = this,\n                offset = kendo.getOffset(that._trackDiv);\n\n            return {\n                startPoint: that._isHorizontal ? offset.left : offset.top + that._maxSelection,\n                endPoint: that._isHorizontal ? offset.left + that._maxSelection : offset.top\n            };\n        },\n\n        _createHtml: function() {\n            var that = this,\n                element = that.element,\n                options = that.options,\n                inputs = element.find(\"input\");\n\n            if (inputs.length == 2) {\n                inputs.eq(0).prop(\"value\", formatValue(options.selectionStart));\n                inputs.eq(1).prop(\"value\", formatValue(options.selectionEnd));\n            } else {\n                element.prop(\"value\", formatValue(options.value));\n            }\n\n            that.wrapper = element.wrap(createWrapper(options, element, that._isHorizontal)).hide().parents(\".k-slider\");\n\n            if (options.showButtons) {\n                that.wrapper.find(\".k-slider-track-wrap\")\n                       .after(createButton(options, \"increase\", that._isHorizontal, that._isRtl))\n                       .before(createButton(options, \"decrease\", that._isHorizontal, that._isRtl));\n            }\n\n            element.before(createTrack(options, element, that._isHorizontal));\n        },\n\n        _focus: function(e) {\n            var that = this,\n                target = e.target,\n                val = that.value(),\n                drag = that._drag;\n\n            if (!drag) {\n                if (target == that.wrapper.find(DRAG_HANDLE).eq(0)[0]) {\n                    drag = that._firstHandleDrag;\n                    that._activeHandle = 0;\n                } else {\n                    drag = that._lastHandleDrag;\n                    that._activeHandle = 1;\n                }\n                val = val[that._activeHandle];\n            }\n\n            $(target).addClass(STATE_FOCUSED + \" \" + STATE_SELECTED);\n\n            if (drag) {\n                that._activeHandleDrag = drag;\n\n                drag.selectionStart = that.options.selectionStart;\n                drag.selectionEnd = that.options.selectionEnd;\n\n                drag._updateTooltip(val);\n            }\n        },\n\n        _focusWithMouse: function(target) {\n            target = $(target);\n\n            var that = this,\n                idx = target.is(DRAG_HANDLE) ? target.index() : 0;\n\n            window.setTimeout(function() {\n                that.wrapper.find(DRAG_HANDLE)[idx == 2 ? 1 : 0].focus();\n            }, 1);\n\n            that._setTooltipTimeout();\n        },\n\n        _blur: function(e) {\n            var that = this,\n                drag = that._activeHandleDrag;\n\n            $(e.target).removeClass(STATE_FOCUSED + \" \" + STATE_SELECTED);\n\n            if (drag) {\n                drag._removeTooltip();\n                delete that._activeHandleDrag;\n                delete that._activeHandle;\n            }\n        },\n\n        _setTooltipTimeout: function() {\n            var that = this;\n            that._tooltipTimeout = window.setTimeout(function() {\n                var drag = that._drag || that._activeHandleDrag;\n                if (drag) {\n                    drag._removeTooltip();\n                }\n            }, 300);\n        },\n\n        _clearTooltipTimeout: function() {\n            var that = this;\n            window.clearTimeout(this._tooltipTimeout);\n            var drag = that._drag || that._activeHandleDrag;\n            if (drag && drag.tooltipDiv) {\n                drag.tooltipDiv.stop(true, false).css(\"opacity\", 1);\n            }\n        },\n\n        _reset: function() {\n            var that = this,\n                element = that.element,\n                formId = element.attr(\"form\"),\n                form = formId ? $(\"#\" + formId) : element.closest(\"form\");\n\n            if (form[0]) {\n                that._form = form.on(\"reset\", that._formResetHandler.bind(that));\n            }\n        },\n\n        min: function(value) {\n            if (!value) {\n                return this.options.min;\n            }\n            this.setOptions({ \"min\": value });\n        },\n\n        max: function(value) {\n            if (!value) {\n                return this.options.max;\n            }\n            this.setOptions({ \"max\": value });\n        },\n\n        setOptions: function(options) {\n            Widget.fn.setOptions.call(this, options);\n            this._sliderItemsInit();\n            this._refresh();\n        },\n\n        destroy: function() {\n            if (this._form) {\n                this._form.off(\"reset\", this._formResetHandler);\n            }\n            Widget.fn.destroy.call(this);\n        }\n    });\n\n    function createWrapper(options, element, isHorizontal) {\n        var orientationCssClass = isHorizontal ? \" k-slider-horizontal\" : \" k-slider-vertical\",\n            style = options.style ? options.style : element.attr(\"style\"),\n            cssClasses = element.attr(\"class\") ? (\" \" + element.attr(\"class\")) : \"\",\n            tickPlacementCssClass = \"\";\n\n        if (options.tickPlacement == \"bottomRight\") {\n            tickPlacementCssClass = \" k-slider-bottomright\";\n        } else if (options.tickPlacement == \"topLeft\") {\n            tickPlacementCssClass = \" k-slider-topleft\";\n        }\n\n        style = style ? \" style='\" + style + \"'\" : \"\";\n\n        return \"<div class='k-widget k-slider\" + orientationCssClass + cssClasses + \"'\" + style + \">\" +\n               \"<div class='k-slider-track-wrap\" + tickPlacementCssClass +\n               \"'></div></div>\";\n    }\n\n    function createButton(options, type, isHorizontal) {\n        var buttonCssClass = \"\";\n\n        if (isHorizontal) {\n            if (type === \"increase\") {\n                buttonCssClass = \"k-i-arrow-e\";\n            } else {\n                buttonCssClass = \"k-i-arrow-w\";\n            }\n        } else {\n            if (type == \"increase\") {\n                buttonCssClass = \"k-i-arrow-n\";\n            } else {\n                buttonCssClass = \"k-i-arrow-s\";\n            }\n        }\n\n        return \"<a role='button' class='k-button k-button-md k-rounded-full k-button-solid k-button-solid-base k-icon-button k-button-\" + type + \"' \" +\n                \"title='\" + options[type + \"ButtonTitle\"] + \"' \" +\n                \"aria-label='\" + options[type + \"ButtonTitle\"] + \"'>\" +\n                \"<span class='k-button-icon k-icon \" + buttonCssClass + \"'></span></a>\";\n    }\n\n    function createSliderItems(options, distance) {\n        var result = \"<ul class='k-reset k-slider-items' role='presentation'>\",\n            count = math.floor(round(distance / options.smallStep)) + 1,\n            i;\n\n        for (i = 0; i < count; i++) {\n            result += \"<li class='k-tick'></li>\";\n        }\n\n        result += \"</ul>\";\n\n        return result;\n    }\n\n    function createTrack(options, element, isHorizontal) {\n        var dragHandleCount = element.is(\"input\") ? 1 : 2,\n            firstDragHandleTitle = dragHandleCount == 2 ? options.leftDragHandleTitle : options.dragHandleTitle,\n            value = options.value,\n            min = options.selectionStart,\n            max = options.selectionEnd,\n            elementValue, minElementValue, maxElementValue;\n\n        if (dragHandleCount === 1) {\n            elementValue = element.val();\n\n            if (elementValue !== null && elementValue !== undefined && elementValue !== 'null') {\n                if (value === null || value === undefined) {\n                    value = elementValue;\n                }\n            }\n        } else {\n            minElementValue = element.find(\"input\").eq(0).val();\n            maxElementValue = element.find(\"input\").eq(1).val();\n\n            if (minElementValue !== null && minElementValue !== undefined && minElementValue !== 'null') {\n                if (min === null || min === undefined) {\n                    min = minElementValue;\n                }\n            }\n\n            if (maxElementValue !== null && maxElementValue !== undefined && maxElementValue !== 'null') {\n                if (max === null || max === undefined) {\n                    max = maxElementValue;\n                }\n            }\n        }\n\n        var result = \"<div class='k-slider-track'><div class='k-slider-selection'><!-- --></div>\" +\n               \"<span tabindex='0' class='k-draghandle' title='\" + firstDragHandleTitle + \"' role='slider' \" +\n               (isHorizontal === false ? \"aria-orientation='vertical' \" : \"\") +\n               \"aria-valuemin='\" + options.min + \"' aria-valuemax='\" + options.max + \"' aria-valuenow='\" + (dragHandleCount > 1 ? (min || options.min) : value || options.min) + \"'></span>\" +\n               (dragHandleCount > 1 ? \"<span tabindex='0' class='k-draghandle' title='\" + options.rightDragHandleTitle + \"'role='slider' \" +\n               (isHorizontal === false ? \"aria-orientation='vertical' \" : \"\") +\n               \"aria-valuemin='\" + options.min + \"' aria-valuemax='\" + options.max + \"' aria-valuenow='\" + (max || options.max) + \"'></span>\" : \"\") +\n               \"</div>\";\n\n        return result;\n    }\n\n    function step(stepValue) {\n        return function(value) {\n            return value + stepValue;\n        };\n    }\n\n    function setValue(value) {\n        return function() {\n            return value;\n        };\n    }\n\n    function formatValue(value) {\n        return (value + \"\").replace(\".\", kendo.cultures.current.numberFormat[\".\"]);\n    }\n\n    function calculatePrecision(value) {\n        var number = value.toString();\n        var precision = 0;\n\n        number = number.split(\".\");\n\n        if (number[1]) {\n            precision = number[1].length;\n        }\n\n        precision = precision > 10 ? 10 : precision;\n        return precision;\n    }\n\n    function round(value) {\n        var precision, power;\n\n        value = parseFloat(value, 10);\n        precision = calculatePrecision(value);\n        power = math.pow(10, precision || 0);\n\n        return math.round(value * power) / power;\n    }\n\n    function parseAttr(element, name) {\n        var value = parse(element.getAttribute(name));\n        if (value === null) {\n            value = undefined;\n        }\n        return value;\n    }\n\n    function defined(value) {\n        return typeof value !== UNDEFINED;\n    }\n\n    function removeFraction(value) {\n        return value * 10000;\n    }\n\n    var Slider = SliderBase.extend({\n        init: function(element, options) {\n            var that = this,\n                dragHandle;\n\n            element.type = \"text\";\n            options = extend({}, {\n                value: parseAttr(element, \"value\"),\n                min: parseAttr(element, \"min\"),\n                max: parseAttr(element, \"max\"),\n                smallStep: parseAttr(element, \"step\")\n            }, options);\n\n            element = $(element);\n\n            if (options && options.enabled === undefined) {\n                options.enabled = !element.is(\"[disabled]\");\n            }\n\n            SliderBase.fn.init.call(that, element, options);\n            options = that.options;\n            if (!defined(options.value) || options.value === null) {\n                options.value = options.min;\n                element.prop(\"value\", formatValue(options.min));\n            }\n            options.value = math.max(math.min(options.value, options.max), options.min);\n\n            dragHandle = that.wrapper.find(DRAG_HANDLE);\n\n            that._selection = new Slider.Selection(dragHandle, that, options);\n            that._drag = new Slider.Drag(dragHandle, \"\", that, options);\n\n            that._refreshAriaAttr(options.value);\n        },\n\n        options: {\n            name: \"Slider\",\n            showButtons: true,\n            increaseButtonTitle: \"Increase\",\n            decreaseButtonTitle: \"Decrease\",\n            dragHandleTitle: \"drag\",\n            tooltip: { format: \"{0:#,#.##}\" },\n            value: null\n        },\n\n        enable: function(enable) {\n            var that = this,\n                options = that.options,\n                clickHandler,\n                move;\n\n            that.disable();\n            if (enable === false) {\n                return;\n            }\n\n            that.wrapper\n                .removeClass(STATE_DISABLED);\n\n            that.wrapper.find(\"input\").prop(DISABLED, false);\n\n            clickHandler = function(e) {\n                var touch = getTouches(e)[0];\n\n                if (!touch) {\n                    return;\n                }\n\n                var mousePosition = that._isHorizontal ? touch.location.pageX : touch.location.pageY,\n                    draggableArea = that._getDraggableArea(),\n                    target = $(e.target);\n\n                if (target.hasClass(\"k-draghandle\")) {\n                    target.addClass(STATE_FOCUSED + \" \" + STATE_SELECTED);\n                    return;\n                }\n\n                that._update(that._getValueFromPosition(mousePosition, draggableArea));\n\n                that._focusWithMouse(e.target);\n\n                that._drag.dragstart(e);\n                e.preventDefault();\n            };\n\n            that.wrapper\n                .find(TICK_SELECTOR + \", \" + TRACK_SELECTOR)\n                    .on(TRACK_MOUSE_DOWN, clickHandler)\n                    .end()\n                    .on(TRACK_MOUSE_DOWN, function() {\n                        $(document.documentElement).one(\"selectstart\", kendo.preventDefault);\n                    })\n                    .on(TRACK_MOUSE_UP, function() {\n                        that._drag._end();\n                    });\n\n            that.wrapper\n                .find(DRAG_HANDLE)\n                .attr(TABINDEX, 0)\n                .on(MOUSE_UP, function() {\n                    that._setTooltipTimeout();\n                })\n                .on(CLICK, function(e) {\n                    that._focusWithMouse(e.target);\n                    e.preventDefault();\n                })\n                .on(FOCUS, that._focus.bind(that))\n                .on(BLUR, that._blur.bind(that));\n\n            move = (function(sign) {\n                var newVal = that._nextValueByIndex(that._valueIndex + (sign * 1));\n                that._setValueInRange(newVal);\n                that._drag._updateTooltip(newVal);\n            });\n\n            if (options.showButtons) {\n                var mouseDownHandler = (function(e, sign) {\n                    this._clearTooltipTimeout();\n                    if (e.which === 1 || (support.touch && e.which === 0)) {\n                        move(sign);\n\n                        this.timeout = setTimeout((function() {\n                            this.timer = setInterval(function() {\n                                move(sign);\n                            }, 60);\n                        }).bind(this), 200);\n                    }\n                }).bind(that);\n\n                that.wrapper.find(\".k-button\")\n                    .on(MOUSE_UP, (function(e) {\n                        this._clearTimer();\n                        that._focusWithMouse(e.target);\n                    }).bind(that))\n                    .on(MOUSE_OVER, function(e) {\n                        $(e.currentTarget).addClass(\"k-state-hover\");\n                    })\n                    .on(\"mouseout\" + NS, (function(e) {\n                        $(e.currentTarget).removeClass(\"k-state-hover\");\n                        this._clearTimer();\n                    }).bind(that))\n                    .on(MOUSE_DOWN, (function(e) {\n                        var sign = $(e.target).closest(\".k-button\").is(\".k-button-increase\") ? 1 : -1;\n                        mouseDownHandler(e, sign);\n                    }))\n                    .on(\"click\", kendo.preventDefault);\n            }\n\n            that.wrapper\n                .find(DRAG_HANDLE)\n                .off(KEY_DOWN, false)\n                .on(KEY_DOWN, this._keydown.bind(that));\n\n            options.enabled = true;\n        },\n\n        disable: function() {\n            var that = this;\n\n            that.wrapper\n                .addClass(STATE_DISABLED);\n\n            $(that.element).prop(DISABLED, DISABLED);\n\n            that.wrapper\n                .find(\".k-button\")\n                .off(MOUSE_DOWN)\n                .on(MOUSE_DOWN, function(e) {\n                    e.preventDefault();\n                    $(this).addClass(\"k-state-active\");\n                })\n                .off(MOUSE_UP)\n                .on(MOUSE_UP, function(e) {\n                    e.preventDefault();\n                    $(this).removeClass(\"k-state-active\");\n                })\n                .off(\"mouseleave\" + NS)\n                .on(\"mouseleave\" + NS, kendo.preventDefault)\n                .off(MOUSE_OVER)\n                .on(MOUSE_OVER, kendo.preventDefault);\n\n            that.wrapper\n                .find(TICK_SELECTOR + \", \" + TRACK_SELECTOR).off(TRACK_MOUSE_DOWN).off(TRACK_MOUSE_UP);\n\n            that.wrapper\n                .find(DRAG_HANDLE)\n                .attr(TABINDEX, -1)\n                .off(MOUSE_UP)\n                .off(KEY_DOWN)\n                .off(CLICK)\n                .off(FOCUS)\n                .off(BLUR);\n\n            that.options.enabled = false;\n        },\n\n        _update: function(val) {\n            var that = this,\n                change = that.value() != val;\n\n            that.value(val);\n\n            if (change) {\n                that.trigger(CHANGE, { value: that.options.value });\n            }\n        },\n\n        value: function(value) {\n            var that = this,\n                options = that.options;\n\n            value = round(value);\n            if (isNaN(value)) {\n                return options.value;\n            }\n\n            if (value >= options.min && value <= options.max) {\n                if (options.value != value) {\n                    that.element.prop(\"value\", formatValue(value));\n                    options.value = value;\n                    that._refreshAriaAttr(value);\n                    that._refresh();\n                }\n            }\n        },\n\n        _refresh: function() {\n            this.trigger(MOVE_SELECTION, { value: this.options.value });\n        },\n\n        _refreshAriaAttr: function(value) {\n            var that = this,\n                drag = that._drag,\n                formattedValue;\n\n            if (drag && drag._tooltipDiv) {\n                formattedValue = drag._tooltipDiv.text();\n            } else {\n                formattedValue = that._getFormattedValue(value, null);\n            }\n            this.wrapper.find(DRAG_HANDLE).attr(ARIA_VALUENOW, value).attr(ARIA_VALUETEXT, formattedValue);\n        },\n\n        _clearTimer: function() {\n            clearTimeout(this.timeout);\n            clearInterval(this.timer);\n        },\n\n        _keydown: function(e) {\n            var that = this;\n\n            if (e.keyCode in that._keyMap) {\n                that._clearTooltipTimeout();\n                that._setValueInRange(that._keyMap[e.keyCode](that.options.value));\n                that._drag._updateTooltip(that.value());\n                e.preventDefault();\n            }\n        },\n\n        _setValueInRange: function(val) {\n            var that = this,\n                options = that.options;\n\n            val = round(val);\n            if (isNaN(val)) {\n                that._update(options.min);\n                return;\n            }\n\n            val = math.max(math.min(val, options.max), options.min);\n            that._update(val);\n        },\n\n        _nextValueByIndex: function(index) {\n            var count = this._values.length;\n            if (this._isRtl) {\n                index = count - 1 - index;\n            }\n            return this._values[math.max(0, math.min(index, count - 1))];\n        },\n\n        _formResetHandler: function() {\n            var that = this,\n                min = that.options.min;\n\n            setTimeout(function() {\n                var value = that.element[0].value;\n                that.value(value === \"\" || isNaN(value) ? min : value);\n            });\n        },\n\n        destroy: function() {\n            var that = this;\n\n            SliderBase.fn.destroy.call(that);\n\n            that.wrapper.off(NS)\n                .find(\".k-button\").off(NS)\n                .end()\n                .find(DRAG_HANDLE).off(NS)\n                .end()\n                .find(TICK_SELECTOR + \", \" + TRACK_SELECTOR).off(NS)\n                .end();\n\n            that._drag.draggable.destroy();\n            that._drag._removeTooltip(true);\n        }\n    });\n\n    Slider.Selection = function(dragHandle, that, options) {\n        function moveSelection(val) {\n            var selectionValue = val - options.min,\n                index = that._valueIndex = math.ceil(round(selectionValue / options.smallStep)),\n                selection = parseInt(that._pixelSteps[index], 10),\n                selectionDiv = that._trackDiv.find(\".k-slider-selection\"),\n                rtlCorrection = that._isRtl ? 2 : 0;\n\n            selectionDiv[that._sizeFn](that._isRtl ? that._maxSelection - selection : selection);\n            dragHandle.css(that._position, selection - rtlCorrection);\n        }\n\n        moveSelection(options.value);\n\n        that.bind([SLIDE, MOVE_SELECTION], function(e) {\n            moveSelection(parseFloat(e.value, 10));\n        });\n\n        that.bind(CHANGE, function(e) {\n            moveSelection(parseFloat(e.sender.value(), 10));\n        });\n    };\n\n    Slider.Drag = function(element, type, owner, options) {\n        var that = this;\n        that.owner = owner;\n        that.options = options;\n        that.element = element;\n        that.type = type;\n\n        that.draggable = new Draggable(element, {\n            distance: 0,\n            dragstart: that._dragstart.bind(that),\n            drag: that.drag.bind(that),\n            dragend: that.dragend.bind(that),\n            dragcancel: that.dragcancel.bind(that)\n        });\n\n        element.click(false);\n\n        // Disable link dragging\n        element.on(\"dragstart\", function(e) {\n            e.preventDefault();\n        });\n    };\n\n    Slider.Drag.prototype = {\n        dragstart: function(e) {\n            // add reference to the last active drag handle.\n            this.owner._activeDragHandle = this;\n            // HACK to initiate click on the line\n            this.draggable.userEvents.cancel();\n            this._dragstart(e);\n            this.dragend();\n        },\n\n        _dragstart: function(e) {\n            var that = this,\n                owner = that.owner,\n                options = that.options;\n\n            if (!options.enabled) {\n                e.preventDefault();\n                return;\n            }\n\n            // add reference to the last active drag handle.\n            this.owner._activeDragHandle = this;\n\n            owner.element.off(MOUSE_OVER);\n            owner.wrapper.find(\".\" + STATE_FOCUSED).removeClass(STATE_FOCUSED + \" \" + STATE_SELECTED);\n            that.element.addClass(STATE_FOCUSED + \" \" + STATE_SELECTED);\n            $(document.documentElement).css(\"cursor\", \"pointer\");\n\n            that.draggableArea = owner._getDraggableArea();\n            that.step = math.max(options.smallStep * (owner._maxSelection / owner._distance()), 0);\n\n            if (that.type) {\n                that.selectionStart = options.selectionStart;\n                that.selectionEnd = options.selectionEnd;\n                owner._setZIndex(that.type);\n            } else {\n                that.oldVal = that.val = options.value;\n            }\n\n            that._removeTooltip(true);\n            that._createTooltip();\n        },\n\n        _createTooltip: function() {\n            var that = this,\n                owner = that.owner,\n                tooltip = that.options.tooltip,\n                html = '',\n                wnd = $(window),\n                tooltipTemplate, calloutCssClass;\n\n            if (!tooltip.enabled) {\n                return;\n            }\n\n            if (tooltip.template) {\n                tooltipTemplate = that.tooltipTemplate = kendo.template(tooltip.template);\n            }\n\n            $(\".k-slider-tooltip\").remove(); // if user changes window while tooltip is visible, a second one will be created\n            that.tooltipDiv = $(\"<div class='k-tooltip k-slider-tooltip'><!-- --></div>\").appendTo(document.body);\n\n            html = owner._getFormattedValue(that.val || owner.value(), that);\n\n            if (!that.type) {\n                calloutCssClass = \"k-callout-\" + (owner._isHorizontal ? 's' : 'e');\n                that.tooltipInnerDiv = \"<div class='k-callout \" + calloutCssClass + \"'><!-- --></div>\";\n                html += that.tooltipInnerDiv;\n            }\n\n            that.tooltipDiv.html(html);\n\n            that._scrollOffset = {\n                top: wnd.scrollTop(),\n                left: kendo.scrollLeft(wnd)\n            };\n\n            that.moveTooltip();\n        },\n\n        drag: function(e) {\n            var that = this,\n                owner = that.owner,\n                x = e.x.location,\n                y = e.y.location,\n                startPoint = that.draggableArea.startPoint,\n                endPoint = that.draggableArea.endPoint,\n                slideParams;\n\n            e.preventDefault();\n\n            if (owner._isHorizontal) {\n                if (owner._isRtl) {\n                    that.val = that.constrainValue(x, startPoint, endPoint, x < endPoint);\n                } else {\n                    that.val = that.constrainValue(x, startPoint, endPoint, x >= endPoint);\n                }\n            } else {\n                that.val = that.constrainValue(y, endPoint, startPoint, y <= endPoint);\n            }\n\n            if (that.oldVal != that.val) {\n                that.oldVal = that.val;\n\n                if (that.type) {\n                    if (that.type == \"firstHandle\") {\n                        if (that.val < that.selectionEnd) {\n                            that.selectionStart = that.val;\n                        } else {\n                            that.selectionStart = that.selectionEnd = that.val;\n                        }\n                    } else {\n                        if (that.val > that.selectionStart) {\n                            that.selectionEnd = that.val;\n                        } else {\n                            that.selectionStart = that.selectionEnd = that.val;\n                        }\n                    }\n                    slideParams = {\n                        values: [that.selectionStart, that.selectionEnd],\n                        value: [that.selectionStart, that.selectionEnd]\n                    };\n                } else {\n                    slideParams = { value: that.val };\n                }\n\n                owner.trigger(SLIDE, slideParams);\n            }\n            that._updateTooltip(that.val);\n        },\n\n        _updateTooltip: function(val) {\n            var that = this,\n                options = that.options,\n                tooltip = options.tooltip,\n                html = \"\";\n\n            if (!tooltip.enabled) {\n                return;\n            }\n\n            if (!that.tooltipDiv) {\n                that._createTooltip();\n            }\n\n            html = that.owner._getFormattedValue(round(val), that);\n\n            if (!that.type) {\n                html += that.tooltipInnerDiv;\n            }\n\n            that.tooltipDiv.html(html);\n            that.moveTooltip();\n        },\n\n        dragcancel: function() {\n            this.owner._refresh();\n            $(document.documentElement).css(\"cursor\", \"\");\n            return this._end();\n        },\n\n        dragend: function() {\n            var that = this,\n                owner = that.owner;\n\n            $(document.documentElement).css(\"cursor\", \"\");\n\n            if (that.type) {\n                owner._update(that.selectionStart, that.selectionEnd);\n            } else {\n                owner._update(that.val);\n                that.draggable.userEvents._disposeAll();\n            }\n\n            that.draggable.userEvents.cancel();\n            return that._end();\n        },\n\n        _end: function() {\n            var that = this,\n                owner = that.owner;\n\n            owner._focusWithMouse(that.element);\n\n            owner.element.on(MOUSE_OVER);\n\n            return false;\n        },\n\n        _removeTooltip: function(noAnimation) {\n            var that = this,\n                owner = that.owner;\n\n            if (that.tooltipDiv && owner.options.tooltip.enabled && owner.options.enabled) {\n                if (noAnimation) {\n                    that.tooltipDiv.remove();\n                    that.tooltipDiv = null;\n                } else {\n                    that.tooltipDiv.fadeOut(\"slow\", function() {\n                        $(this).remove();\n                        that.tooltipDiv = null;\n                    });\n                }\n            }\n        },\n\n        moveTooltip: function() {\n            var that = this,\n                owner = that.owner,\n                top = 0,\n                left = 0,\n                element = that.element,\n                offset = kendo.getOffset(element),\n                margin = 8,\n                viewport = $(window),\n                callout = that.tooltipDiv.find(\".k-callout\"),\n                width = outerWidth(that.tooltipDiv),\n                height = outerHeight(that.tooltipDiv),\n                dragHandles, sdhOffset, diff, anchorSize;\n\n            if (that.type) {\n                dragHandles = owner.wrapper.find(DRAG_HANDLE);\n                offset = kendo.getOffset(dragHandles.eq(0));\n                sdhOffset = kendo.getOffset(dragHandles.eq(1));\n\n                if (owner._isHorizontal) {\n                    top = sdhOffset.top;\n                    left = offset.left + ((sdhOffset.left - offset.left) / 2);\n                } else {\n                    top = offset.top + ((sdhOffset.top - offset.top) / 2);\n                    left = sdhOffset.left;\n                }\n\n                anchorSize = outerWidth(dragHandles.eq(0)) + 2 * margin;\n            } else {\n                top = offset.top;\n                left = offset.left;\n                anchorSize = outerWidth(element) + 2 * margin;\n            }\n\n            if (owner._isHorizontal) {\n                left -= parseInt((width - owner._outerSize(element)) / 2, 10);\n                top -= height + margin + (callout.length ? callout.height() : 0);\n            } else {\n                top -= parseInt((height - owner._outerSize(element)) / 2, 10);\n                left -= width + margin + (callout.length ? callout.width() : 0);\n            }\n\n            if (owner._isHorizontal) {\n                diff = that._flip(top, height, anchorSize, outerHeight(viewport) + that._scrollOffset.top);\n                top += diff;\n                left += that._fit(left, width, outerWidth(viewport) + that._scrollOffset.left);\n            } else {\n                diff = that._flip(left, width, anchorSize, outerWidth(viewport) + that._scrollOffset.left);\n                top += that._fit(top, height, outerHeight(viewport) + that._scrollOffset.top);\n                left += diff;\n            }\n\n            if (diff > 0 && callout) {\n                callout.removeClass();\n                callout.addClass(\"k-callout k-callout-\" + (owner._isHorizontal ? \"n\" : \"w\"));\n            }\n\n            that.tooltipDiv.css({ top: top, left: left });\n        },\n\n        _fit: function(position, size, viewPortEnd) {\n            var output = 0;\n\n            if (position + size > viewPortEnd) {\n                output = viewPortEnd - (position + size);\n            }\n\n            if (position < 0) {\n                output = -position;\n            }\n\n            return output;\n        },\n\n        _flip: function(offset, size, anchorSize, viewPortEnd) {\n            var output = 0;\n\n            if (offset + size > viewPortEnd) {\n                output += -(anchorSize + size);\n            }\n\n            if (offset + output < 0) {\n                output += anchorSize + size;\n            }\n\n            return output;\n        },\n\n        constrainValue: function(position, min, max, maxOverflow) {\n            var that = this,\n                val = 0;\n\n            if (min < position && position < max) {\n                val = that.owner._getValueFromPosition(position, that.draggableArea);\n            } else {\n                if (maxOverflow ) {\n                    val = that.options.max;\n                } else {\n                    val = that.options.min;\n                }\n            }\n\n            return val;\n        }\n\n    };\n\n    kendo.ui.plugin(Slider);\n\n    var RangeSlider = SliderBase.extend({\n        init: function(element, options) {\n            var that = this,\n                inputs = $(element).find(\"input\"),\n                firstInput = inputs.eq(0)[0],\n                secondInput = inputs.eq(1)[0];\n\n            firstInput.type = \"text\";\n            secondInput.type = \"text\";\n\n            if (options && options.showButtons) {\n                if (window.console) {\n                    window.console.warn(\"showbuttons option is not supported for the range slider, ignoring\");\n                }\n\n                options.showButtons = false;\n            }\n\n            options = extend({}, {\n                selectionStart: parseAttr(firstInput, \"value\"),\n                min: parseAttr(firstInput, \"min\"),\n                max: parseAttr(firstInput, \"max\"),\n                smallStep: parseAttr(firstInput, \"step\")\n            }, {\n                selectionEnd: parseAttr(secondInput, \"value\"),\n                min: parseAttr(secondInput, \"min\"),\n                max: parseAttr(secondInput, \"max\"),\n                smallStep: parseAttr(secondInput, \"step\")\n            }, options);\n\n            if (options && options.enabled === undefined) {\n                options.enabled = !inputs.is(\"[disabled]\");\n            }\n\n            SliderBase.fn.init.call(that, element, options);\n            options = that.options;\n            if (!defined(options.selectionStart) || options.selectionStart === null) {\n                options.selectionStart = options.min;\n                inputs.eq(0).prop(\"value\", formatValue(options.min));\n            }\n\n            if (!defined(options.selectionEnd) || options.selectionEnd === null) {\n                options.selectionEnd = options.max;\n                inputs.eq(1).prop(\"value\", formatValue(options.max));\n            }\n\n            var dragHandles = that.wrapper.find(DRAG_HANDLE);\n\n            this._selection = new RangeSlider.Selection(dragHandles, that, options);\n            that._firstHandleDrag = new Slider.Drag(dragHandles.eq(0), \"firstHandle\", that, options);\n            that._lastHandleDrag = new Slider.Drag(dragHandles.eq(1), \"lastHandle\" , that, options);\n\n            that._refreshAriaAttr(options.selectionStart , options.selectionEnd);\n        },\n\n        options: {\n            name: \"RangeSlider\",\n            leftDragHandleTitle: \"drag\",\n            rightDragHandleTitle: \"drag\",\n            tooltip: { format: \"{0:#,#.##}\" },\n            selectionStart: null,\n            selectionEnd: null\n        },\n\n        enable: function(enable) {\n            var that = this,\n                options = that.options,\n                clickHandler;\n\n            that.disable();\n            if (enable === false) {\n                return;\n            }\n\n            that.wrapper\n                .removeClass(STATE_DISABLED);\n\n            that.wrapper.find(\"input\").prop(DISABLED, false);\n\n            clickHandler = function(e) {\n                var touch = getTouches(e)[0];\n\n                if (!touch) {\n                    return;\n                }\n\n                var mousePosition = that._isHorizontal ? touch.location.pageX : touch.location.pageY,\n                    draggableArea = that._getDraggableArea(),\n                    val = that._getValueFromPosition(mousePosition, draggableArea),\n                    target = $(e.target),\n                    from, to, drag;\n\n                if (target.hasClass(\"k-draghandle\")) {\n                    that.wrapper.find(\".\" + STATE_FOCUSED).removeClass(STATE_FOCUSED + \" \" + STATE_SELECTED);\n                    target.addClass(STATE_FOCUSED + \" \" + STATE_SELECTED);\n                    return;\n                }\n\n                if (val < options.selectionStart) {\n                    from = val;\n                    to = options.selectionEnd;\n                    drag = that._firstHandleDrag;\n                } else if (val > that.selectionEnd) {\n                    from = options.selectionStart;\n                    to = val;\n                    drag = that._lastHandleDrag;\n                } else {\n                    if (val - options.selectionStart <= options.selectionEnd - val) {\n                        from = val;\n                        to = options.selectionEnd;\n                        drag = that._firstHandleDrag;\n                    } else {\n                        from = options.selectionStart;\n                        to = val;\n                        drag = that._lastHandleDrag;\n                    }\n                }\n\n                drag.dragstart(e);\n                that._setValueInRange(from, to);\n                that._focusWithMouse(drag.element);\n            };\n\n            that.wrapper\n                .find(TICK_SELECTOR + \", \" + TRACK_SELECTOR)\n                    .on(TRACK_MOUSE_DOWN, clickHandler)\n                    .end()\n                    .on(TRACK_MOUSE_DOWN, function() {\n                        $(document.documentElement).one(\"selectstart\", kendo.preventDefault);\n                    })\n                    .on(TRACK_MOUSE_UP, function() {\n                        if (that._activeDragHandle) {\n                            that._activeDragHandle._end();\n                        }\n                    });\n\n            that.wrapper\n                .find(DRAG_HANDLE)\n                .attr(TABINDEX, 0)\n                .on(MOUSE_UP, function() {\n                    that._setTooltipTimeout();\n                })\n                .on(CLICK, function(e) {\n                    that._focusWithMouse(e.target);\n                    e.preventDefault();\n                })\n                .on(FOCUS, that._focus.bind(that))\n                .on(BLUR, that._blur.bind(that));\n\n            that.wrapper.find(DRAG_HANDLE)\n                .off(KEY_DOWN, kendo.preventDefault)\n                .eq(0).on(KEY_DOWN,\n                    (function(e) {\n                        this._keydown(e, \"firstHandle\");\n                    }).bind(that)\n                )\n                .end()\n                .eq(1).on(KEY_DOWN,\n                    (function(e) {\n                        this._keydown(e, \"lastHandle\");\n                    }).bind(that)\n                );\n\n            that.options.enabled = true;\n        },\n\n        disable: function() {\n            var that = this;\n\n            that.wrapper\n                .addClass(STATE_DISABLED);\n\n            that.wrapper.find(\"input\").prop(DISABLED, DISABLED);\n\n            that.wrapper\n                .find(TICK_SELECTOR + \", \" + TRACK_SELECTOR).off(TRACK_MOUSE_DOWN).off(TRACK_MOUSE_UP);\n\n            that.wrapper\n                .find(DRAG_HANDLE)\n                .attr(TABINDEX, -1)\n                .off(MOUSE_UP)\n                .off(KEY_DOWN)\n                .off(CLICK)\n                .off(FOCUS)\n                .off(BLUR);\n\n            that.options.enabled = false;\n        },\n\n        _keydown: function(e, handle) {\n            var that = this,\n                selectionStartValue = that.options.selectionStart,\n                selectionEndValue = that.options.selectionEnd,\n                dragSelectionStart,\n                dragSelectionEnd,\n                activeHandleDrag;\n\n            if (e.keyCode in that._keyMap) {\n\n                that._clearTooltipTimeout();\n\n                if (handle == \"firstHandle\") {\n                    activeHandleDrag = that._activeHandleDrag = that._firstHandleDrag;\n                    selectionStartValue = that._keyMap[e.keyCode](selectionStartValue);\n\n                    if (selectionStartValue > selectionEndValue) {\n                        selectionEndValue = selectionStartValue;\n                    }\n                } else {\n                    activeHandleDrag = that._activeHandleDrag = that._lastHandleDrag;\n                    selectionEndValue = that._keyMap[e.keyCode](selectionEndValue);\n\n                    if (selectionStartValue > selectionEndValue) {\n                        selectionStartValue = selectionEndValue;\n                    }\n                }\n\n                that._setValueInRange(round(selectionStartValue), round(selectionEndValue));\n\n                dragSelectionStart = Math.max(selectionStartValue, that.options.selectionStart);\n                dragSelectionEnd = Math.min(selectionEndValue, that.options.selectionEnd);\n\n                activeHandleDrag.selectionEnd = Math.max(dragSelectionEnd, that.options.selectionStart);\n                activeHandleDrag.selectionStart = Math.min(dragSelectionStart, that.options.selectionEnd);\n\n                activeHandleDrag._updateTooltip(that.value()[that._activeHandle]);\n\n                e.preventDefault();\n            }\n        },\n\n        _update: function(selectionStart, selectionEnd) {\n            var that = this,\n                values = that.value();\n\n            var change = values[0] != selectionStart || values[1] != selectionEnd;\n\n            that.value([selectionStart, selectionEnd]);\n\n            if (change) {\n                that.trigger(CHANGE, {\n                    values: [selectionStart, selectionEnd],\n                    value: [selectionStart, selectionEnd]\n                });\n            }\n        },\n\n        value: function(value) {\n            if (value && value.length) {\n                return this._value(value[0], value[1]);\n            } else {\n                return this._value();\n            }\n        },\n\n        _value: function(start, end) {\n            var that = this,\n                options = that.options,\n                selectionStart = options.selectionStart,\n                selectionEnd = options.selectionEnd;\n\n            if (isNaN(start) && isNaN(end)) {\n                return [selectionStart, selectionEnd];\n            } else {\n                start = round(start);\n                end = round(end);\n            }\n\n            if (start >= options.min && start <= options.max &&\n                end >= options.min && end <= options.max && start <= end) {\n                if (selectionStart != start || selectionEnd != end) {\n                    that.element.find(\"input\")\n                        .eq(0).prop(\"value\", formatValue(start))\n                        .end()\n                        .eq(1).prop(\"value\", formatValue(end));\n\n                    options.selectionStart = start;\n                    options.selectionEnd = end;\n                    that._refresh();\n                    that._refreshAriaAttr(start, end);\n                }\n            }\n        },\n\n        values: function(start, end) {\n            if (isArray(start)) {\n                return this._value(start[0], start[1]);\n            } else {\n                return this._value(start, end);\n            }\n        },\n\n        _refresh: function() {\n            var that = this,\n                options = that.options;\n\n            that.trigger(MOVE_SELECTION, {\n                values: [options.selectionStart, options.selectionEnd],\n                value: [options.selectionStart, options.selectionEnd]\n            });\n\n            if (options.selectionStart == options.max && options.selectionEnd == options.max) {\n                that._setZIndex(\"firstHandle\");\n            }\n        },\n\n        _refreshAriaAttr: function(start, end) {\n            var that = this,\n                dragHandles = that.wrapper.find(DRAG_HANDLE),\n                drag = that._activeHandleDrag,\n                formattedValue;\n\n            formattedValue = that._getFormattedValue([start, end], drag);\n\n            dragHandles.eq(0).attr(ARIA_VALUENOW, start);\n            dragHandles.eq(1).attr(ARIA_VALUENOW, end);\n            dragHandles.attr(ARIA_VALUETEXT, formattedValue);\n        },\n\n        _setValueInRange: function(selectionStart, selectionEnd) {\n            var options = this.options;\n\n            selectionStart = math.max(math.min(selectionStart, options.max), options.min);\n\n            selectionEnd = math.max(math.min(selectionEnd, options.max), options.min);\n\n            if (selectionStart == options.max && selectionEnd == options.max) {\n                this._setZIndex(\"firstHandle\");\n            }\n\n            this._update(math.min(selectionStart, selectionEnd), math.max(selectionStart, selectionEnd));\n        },\n\n        _setZIndex: function(type) {\n            this.wrapper.find(DRAG_HANDLE).each(function(index) {\n                $(this).css(\"z-index\", type == \"firstHandle\" ? 1 - index : index);\n            });\n        },\n\n        _formResetHandler: function() {\n            var that = this,\n                options = that.options;\n\n            setTimeout(function() {\n                var inputs = that.element.find(\"input\");\n                var start = inputs[0].value;\n                var end = inputs[1].value;\n                that.values(start === \"\" || isNaN(start) ? options.min : start, end === \"\" || isNaN(end) ? options.max : end);\n            });\n        },\n\n        destroy: function() {\n            var that = this;\n\n            SliderBase.fn.destroy.call(that);\n\n            that.wrapper.off(NS)\n                .find(TICK_SELECTOR + \", \" + TRACK_SELECTOR).off(NS)\n                .end()\n                .find(DRAG_HANDLE).off(NS);\n\n            that._firstHandleDrag.draggable.destroy();\n            that._lastHandleDrag.draggable.destroy();\n        }\n    });\n\n    RangeSlider.Selection = function(dragHandles, that, options) {\n        function moveSelection(value) {\n            value = value || [];\n            var selectionStartValue = value[0] - options.min,\n                selectionEndValue = value[1] - options.min,\n                selectionStartIndex = math.ceil(round(selectionStartValue / options.smallStep)),\n                selectionEndIndex = math.ceil(round(selectionEndValue / options.smallStep)),\n                selectionStart = that._pixelSteps[selectionStartIndex],\n                selectionEnd = that._pixelSteps[selectionEndIndex],\n                rtlCorrection = that._isRtl ? 2 : 0;\n\n            dragHandles.eq(0).css(that._position, selectionStart - rtlCorrection)\n                       .end()\n                       .eq(1).css(that._position, selectionEnd - rtlCorrection);\n\n            makeSelection(selectionStart, selectionEnd);\n        }\n\n        function makeSelection(selectionStart, selectionEnd) {\n            var selection,\n                selectionPosition,\n                selectionDiv = that._trackDiv.find(\".k-slider-selection\");\n\n            selection = math.abs(selectionStart - selectionEnd);\n\n            selectionDiv[that._sizeFn](selection);\n            if (that._isRtl) {\n                selectionPosition = math.max(selectionStart, selectionEnd);\n                selectionDiv.css(\"right\", that._maxSelection - selectionPosition - 1);\n            } else {\n                selectionPosition = math.min(selectionStart, selectionEnd);\n                selectionDiv.css(that._position, selectionPosition - 1);\n            }\n        }\n\n        moveSelection(that.value());\n\n        that.bind([ CHANGE, SLIDE, MOVE_SELECTION ], function(e) {\n            moveSelection(e.values);\n        });\n    };\n\n    kendo.ui.plugin(RangeSlider);\n\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) { (a3 || a2)(); });\n\n"],"names":["define","__meta__","id","name","category","description","depends","$","window","kendo","jQuery","undefined","Widget","ui","Draggable","outerWidth","_outerWidth","outerHeight","_outerHeight","extend","format","parse","parseFloat","isArray","Array","math","Math","support","pointers","msPointers","CHANGE","SLIDE","NS","MOUSE_DOWN","TRACK_MOUSE_DOWN","MOUSE_UP","TRACK_MOUSE_UP","MOVE_SELECTION","KEY_DOWN","CLICK","MOUSE_OVER","FOCUS","BLUR","DRAG_HANDLE","TRACK_SELECTOR","TICK_SELECTOR","STATE_SELECTED","STATE_FOCUSED","STATE_DISABLED","DISABLED","UNDEFINED","TABINDEX","getTouches","ARIA_VALUETEXT","ARIA_VALUENOW","SliderBase","init","element","options","that","this","fn","call","_isHorizontal","orientation","_isRtl","isRtl","_position","_sizeFn","_outerSize","tooltip","enabled","smallStep","Error","_createHtml","_trackDiv","wrapper","find","_maxSelection","_sliderItemsInit","_reset","_tabindex","rtlDirectionSign","_keyMap","37","step","40","39","38","35","setValue","max","36","min","33","largeStep","34","notify","events","tickPlacement","_distance","round","_resize","remove","_refresh","enable","sizeBetweenTicks","pixelWidths","_calculateItemsWidth","floor","removeFraction","parent","before","createSliderItems","_setItemsTitle","_calculateSteps","_setItemsLargeTick","first","addClass","last","getSize","dimensions","items","titleNumber","count","length","i","attr","item","value","makeArray","reverse","_values","valueWithoutFraction","html","css","itemsCount","trackDivSize","distance","preciseItemsCount","pixelStep","itemWidth","_roundWidths","pixelWidthsArray","balance","_addAdditionalSize","additionalSize","parseInt","val","selection","ceil","lastItem","splice","pop","_pixelSteps","_getValueFromPosition","mousePosition","draggableArea","position","halfStep","startPoint","abs","_getFormattedValue","drag","tooltipTemplate","selectionStart","selectionEnd","type","template","_getDraggableArea","offset","getOffset","left","top","endPoint","inputs","eq","prop","formatValue","wrap","createWrapper","hide","parents","showButtons","after","createButton","createTrack","_focus","e","target","_drag","_firstHandleDrag","_activeHandle","_lastHandleDrag","_activeHandleDrag","_updateTooltip","_focusWithMouse","idx","is","index","setTimeout","focus","_setTooltipTimeout","_blur","removeClass","_removeTooltip","_tooltipTimeout","_clearTooltipTimeout","clearTimeout","tooltipDiv","stop","formId","form","closest","_form","on","_formResetHandler","bind","setOptions","destroy","off","isHorizontal","orientationCssClass","style","cssClasses","tickPlacementCssClass","buttonCssClass","result","dragHandleCount","firstDragHandleTitle","leftDragHandleTitle","dragHandleTitle","elementValue","minElementValue","maxElementValue","rightDragHandleTitle","stepValue","replace","cultures","current","numberFormat","calculatePrecision","number","toString","precision","split","power","pow","parseAttr","getAttribute","defined","Slider","dragHandle","_selection","Selection","Drag","_refreshAriaAttr","increaseButtonTitle","decreaseButtonTitle","clickHandler","move","disable","touch","location","pageX","pageY","hasClass","_update","dragstart","preventDefault","end","document","documentElement","one","_end","sign","newVal","_nextValueByIndex","_valueIndex","_setValueInRange","mouseDownHandler","which","timeout","timer","setInterval","_clearTimer","currentTarget","_keydown","change","trigger","isNaN","formattedValue","_tooltipDiv","text","clearInterval","keyCode","draggable","RangeSlider","moveSelection","selectionValue","selectionDiv","rtlCorrection","sender","owner","_dragstart","dragend","dragcancel","click","prototype","_activeDragHandle","userEvents","cancel","_setZIndex","oldVal","_createTooltip","wnd","calloutCssClass","appendTo","body","tooltipInnerDiv","_scrollOffset","scrollTop","scrollLeft","moveTooltip","x","y","slideParams","constrainValue","values","_disposeAll","noAnimation","fadeOut","margin","viewport","callout","width","height","dragHandles","sdhOffset","diff","anchorSize","_flip","_fit","size","viewPortEnd","output","maxOverflow","plugin","firstInput","secondInput","console","warn","from","to","handle","selectionStartValue","selectionEndValue","dragSelectionStart","dragSelectionEnd","activeHandleDrag","_value","start","each","selectionStartIndex","selectionEndIndex","makeSelection","selectionPosition","amd","a1","a2","a3"],"mappings":"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"}