/**
 * Kendo UI v2022.2.621 (http://www.telerik.com/kendo-ui)
 * Copyright 2022 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.
 *
 * Kendo UI commercial licenses may be obtained at
 * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete
 * If you do not own a commercial license, this file shall be governed by the trial license terms.
 */
!function(define){define("pivotgrid/common.min",["kendo.core.min"],function(){window.kendo.pivotgrid=window.kendo.pivotgrid||{},window.kendo.pivotgrid.common=function(N){var i={contains:', InStr({0}.CurrentMember.MEMBER_CAPTION,"{1}") > 0',doesnotcontain:', InStr({0}.CurrentMember.MEMBER_CAPTION,"{1}")',endswith:', Right({0}.CurrentMember.MEMBER_CAPTION,Len("{1}"))="{1}"',eq:', {0}.CurrentMember.MEMBER_CAPTION = "{1}"',neq:', {0}.CurrentMember.MEMBER_CAPTION = "{1}"',startswith:', Left({0}.CurrentMember.MEMBER_CAPTION,Len("{1}"))="{1}"'};var o={doesnotcontain:"doesnotcontain",in:"in",neq:"neq"};function O(e,r){var n="";var a="";for(var t=e.length-1;t>=0;t--){a="SELECT (";a+=l(e[t]);a+=") ON 0";if(t===e.length-1){a+=" FROM ["+r+"]";n=a}else n=a+" FROM ( "+n+" )"}return n}function l(e){var r="";var n=String(e.value);var a=e.field;var t=e.operator;if(t===o.in){r+="{";r+=n;r+="}"}else{r+=t===o.neq||t===o.doesnotcontain?"-":"";r+="Filter(";r+=a+".MEMBERS";r+=u(i[t],a,n);r+=")"}return r}function u(n){var e=[];for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];e.forEach(function(e,r){n=n.replace(new RegExp("\\{"+r+"\\}","g"),e)});return n}function p(e,r,n){var a="";e=e||[];var c=m(e);var t=c.expanded;var o=A(c.root);var i=[];var f=t.length;var l=0;var u;var s=[];if(o.length>1||r.length>1){i.push(v(o,r));for(;l<f;l++){u=C(t[l].name,n);s=I(u,o);i.push(v(s,r))}a+=i.join(",")}else{for(;l<f;l++){u=C(t[l].name,n);s.push(u[0])}a+=o.concat(s).join(",")}return a}function d(e){var r=e.length;var n=[];var a;for(var t=0;t<r;t++){a=e[t];n.push(a.name!==undefined?a.name:a)}return n}function A(e){var a=[];e.forEach(function(e){var r=e.name[0];var n=f(r);if(!a.some(function(e){return e.indexOf(n)===0}))a.push(r)});return a}function m(e){var r=[];var n=[];var a=[];var t=0;var o;for(;t<e.length;t++){var i=e[t];var l=i.name;o=false;if(l.length>1)n.push(i);else{var u=f(l[0]);for(var s=0,c=a.length;s<c;s++)if(a[s].name[0].indexOf(u)===0){o=true;break}if(!o)a.push(i);if(i.expand)r.push(i)}}r=r.concat(n);return{expanded:r,root:a}}function I(e,r){var n=r.length;r=r.slice(0);for(var a=0;a<e.length;a++){var t=e[a];for(var o=0;o<n;o++){var i=f(r[o]);if(t.indexOf(i)!==-1){r[o]=t;break}}}return r}function v(e,r){var n=e.slice(0);if(r.length>1)n.push("{"+d(r).join(",")+"}");return a(n)}function C(e,r){var n=e.length-1;var a=e[n];var t=c(r,a);if(t&&t.dir)a="ORDER("+a+".Children,"+t.field+".CurrentMember.MEMBER_CAPTION,"+t.dir+")";else a+=".Children";e[n]=a;return e}function c(e,r){for(var n=0,a=e.length;n<a;n++)if(r.indexOf(e[n].field)===0)return e[n];return null}function f(e){var r=e.split(".");if(r.length>2)return r[0]+"."+r[1];return e}function a(e){var r="CROSSJOIN({";var n;if(e.length>2){n=e.pop();r+=a(e)}else{r+=e.shift();n=e.pop()}r+="},{";r+=n;r+="})";return r}function y(e){var r='<Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/"><Header/><Body><Execute xmlns="urn:schemas-microsoft-com:xml-analysis"><Command><Statement>';var n=e.columnAxes,a=n===void 0?[]:n,t=e.rowAxes,o=t===void 0?[]:t;var i=e.measureAxes,l=i===void 0?[]:i,u=e.sort,c=u===void 0?[]:u,f=e.filter,A=f===void 0?[]:f;var s=e.measuresAxis==="rows";r+="SELECT NON EMPTY {";if(!a.length&&o.length&&(!l.length||l.length&&s)){a=o;o=[];s=false}if(!a.length&&!o.length)s=false;if(a.length)r+=p(a,!s?l:[],c);else if(l.length&&!s)r+=d(l).join(",");r+="} DIMENSION PROPERTIES CHILDREN_CARDINALITY, PARENT_UNIQUE_NAME ON COLUMNS";if(o.length||s&&l.length>1){r+=", NON EMPTY {";if(o.length)r+=p(o,s?l:[],c);else r+=d(l).join(",");r+="} DIMENSION PROPERTIES CHILDREN_CARDINALITY, PARENT_UNIQUE_NAME ON ROWS"}if(A.length){r+=" FROM ";r+="(";r+=O(A,e.connection.cube);r+=")"}else r+=" FROM ["+e.connection.cube+"]";if(l.length===1&&a.length)r+=" WHERE ("+d(l).join(",")+")";r+="</Statement></Command><Properties><PropertyList><Catalog>"+e.connection.catalog+"</Catalog><Format>Multidimensional</Format></PropertyList></Properties></Execute></Body></Envelope>";return r.replace(/&/g,"&amp;")}var _=function(){_=Object.assign||function e(r){for(var n,a=1,t=arguments.length;a<t;a++){n=arguments[a];for(var o in n)if(Object.prototype.hasOwnProperty.call(n,o))r[o]=n[o]}return r};return _.apply(this,arguments)};function e(e,i,n,l){function u(r){return r instanceof n?r:new n(function(e){e(r)})}return new(n||(n=Promise))(function(r,n){function a(e){try{o(l.next(e))}catch(e){n(e)}}function t(e){try{o(l["throw"](e))}catch(e){n(e)}}function o(e){e.done?r(e.value):u(e.value).then(a,t)}o((l=l.apply(e,i||[])).next())})}function S(e,n){var a={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},t,o,i,r;return r={next:l(0),throw:l(1),return:l(2)},typeof Symbol==="function"&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(e){return u([r,e])}}function u(r){if(t)throw new TypeError("Generator is already executing.");while(a)try{if(t=1,o&&(i=r[0]&2?o["return"]:r[0]?o["throw"]||((i=o["return"])&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;if(o=0,i)r=[r[0]&2,i.value];switch(r[0]){case 0:case 1:i=r;break;case 4:a.label++;return{value:r[1],done:false};case 5:a.label++;o=r[1];r=[0];continue;case 7:r=a.ops.pop();a.trys.pop();continue;default:if(!(i=a.trys,i=i.length>0&&i[i.length-1])&&(r[0]===6||r[0]===2)){a=0;continue}if(r[0]===3&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(r[0]===6&&a.label<i[1]){a.label=i[1];i=r;break}if(i&&a.label<i[2]){a.label=i[2];a.ops.push(r);break}if(i[2])a.ops.pop();a.trys.pop();continue}r=n.call(e,a)}catch(e){r=[6,e];o=0}finally{t=i=0}if(r[0]&5)throw r[1];return{value:r[0]?r[1]:void 0,done:true}}}function T(){for(var e=0,r=0,n=arguments.length;r<n;r++)e+=arguments[r].length;for(var a=Array(e),t=0,r=0;r<n;r++)for(var o=arguments[r],i=0,l=o.length;i<l;i++,t++)a[t]=o[i];return a}function P(e){var r=(new DOMParser).parseFromString(e,"text/xml");var n=Array.from(r.querySelectorAll("Axis"));var a=Array.from(r.querySelectorAll("CellData > Cell")).map(function(e){return{fmtValue:s(e,"FmtValue"),ordinal:parseInt(e.getAttribute("CellOrdinal"),10),value:s(e,"Value")}});var t={tuples:[]};var o={tuples:[]};var i=[];n.forEach(function(e){if(e.getAttribute("name")!=="SlicerAxis"){var r=t.tuples.length===0?t.tuples:o.tuples;Array.prototype.push.apply(r,x(e))}});var l=new Array(o.tuples.length*t.tuples.length).fill(null);a.forEach(function(e){l[e.ordinal]=e});var u=0;o.tuples.forEach(function(r){t.tuples.forEach(function(e){i.push({columnTuple:e,data:l[u],rowTuple:r});u++})});return{columns:t,data:i,rows:o}}function s(e,r){var n=e.querySelector(r);return n?n.textContent:""}function x(e){var r=Array.from(e.querySelectorAll("Tuple"));return r.map(function(e){var r=Array.from(e.querySelectorAll("Member"));var n=r.map(function(e){var r=parseInt(s(e,"LNum")||"0",10);var n=parseInt(s(e,"CHILDREN_CARDINALITY")||"0",10)>0;return{caption:s(e,"Caption"),children:[],hasChildren:n,hierarchy:e.getAttribute("Hierarchy"),levelName:s(e,"LName"),levelNum:r,name:s(e,"UName"),parentName:s(e,"PARENT_UNIQUE_NAME")}});return{members:n}})}var t={schemaCatalogs:"DBSCHEMA_CATALOGS",schemaCubes:"MDSCHEMA_CUBES",schemaDimensions:"MDSCHEMA_DIMENSIONS",schemaHierarchies:"MDSCHEMA_HIERARCHIES",schemaKPIs:"MDSCHEMA_KPIS",schemaLevels:"MDSCHEMA_LEVELS",schemaMeasures:"MDSCHEMA_MEASURES",schemaMembers:"MDSCHEMA_MEMBERS"};function M(e){var r={};var n='<Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/"><Header/><Body><Discover xmlns="urn:schemas-microsoft-com:xml-analysis">';n+="<RequestType>"+(t[e.command]||e.command)+"</RequestType>";n+="<Restrictions>"+g("RestrictionList",e.restrictions,true)+"</Restrictions>";if(e.connection&&e.connection.catalog)r.Catalog=e.connection.catalog;n+="<Properties>"+g("PropertyList",r,false)+"</Properties>";n+="</Discover></Body></Envelope>";return n}function g(e,r,n){var a="";if(r){a+="<"+e+">";var t=void 0;for(var o in r)if(r[o]){t=r[o];if(n)o=o.replace(/([A-Z]+(?=$|[A-Z][a-z])|[A-Z]?[a-z]+)/g,"$1_").toUpperCase().replace(/_$/,"");a+="<"+o+">"+t+"</"+o+">"}a+="</"+e+">"}else a+="<"+e+"/>";return a}function r(e){var r=(new DOMParser).parseFromString(e,"text/xml");var n=Array.from(r.querySelectorAll("DiscoverResponse > return > root > row")).map(function(e){return{name:s(e,"CUBE_NAME"),caption:s(e,"CUBE_CAPTION"),description:s(e,"DESCRIPTION"),type:s(e,"CUBE_TYPE")}});return n}function U(e){var r=(new DOMParser).parseFromString(e,"text/xml");var n=Array.from(r.querySelectorAll("DiscoverResponse > return > root > row")).map(function(e){return{name:s(e,"CATALOG_NAME"),description:s(e,"DESCRIPTION")}});return n}function D(e){var r=(new DOMParser).parseFromString(e,"text/xml");var n=Array.from(r.querySelectorAll("DiscoverResponse > return > root > row")).map(function(e){return{name:s(e,"MEASURE_NAME"),caption:s(e,"MEASURE_CAPTION"),uniqueName:s(e,"MEASURE_UNIQUE_NAME"),description:s(e,"DESCRIPTION"),aggregator:s(e,"MEASURE_AGGREGATOR"),groupName:s(e,"MEASUREGROUP_NAME"),displayFolder:s(e,"MEASURE_DISPLAY_FOLDER"),defaultFormat:s(e,"DEFAULT_FORMAT_STRING")}});return n}function F(e){var r=(new DOMParser).parseFromString(e,"text/xml");var n=Array.from(r.querySelectorAll("DiscoverResponse > return > root > row")).map(function(e){return{name:s(e,"KPI_NAME"),uniqueName:s(e,"KPI_NAME"),caption:s(e,"KPI_CAPTION"),value:s(e,"KPI_VALUE"),goal:s(e,"KPI_GOAL"),status:s(e,"KPI_STATUS"),trend:s(e,"KPI_TREND"),statusGraphic:s(e,"KPI_STATUS_GRAPHIC"),trendGraphic:s(e,"KPI_TREND_GRAPHIC"),description:s(e,"KPI_DESCRIPTION"),groupName:s(e,"MEASUREGROUP_NAME"),type:"kpi"}});return n}function w(e){var r=(new DOMParser).parseFromString(e,"text/xml");var n=Array.from(r.querySelectorAll("DiscoverResponse > return > root > row")).map(function(e){return{caption:s(e,"DIMENSION_CAPTION"),defaultHierarchy:s(e,"DEFAULT_HIERARCHY"),description:s(e,"DESCRIPTION"),name:s(e,"DIMENSION_NAME"),type:parseInt(s(e,"DIMENSION_TYPE"),10),uniqueName:s(e,"DIMENSION_UNIQUE_NAME")}});return n}function G(e){var r=(new DOMParser).parseFromString(e,"text/xml");var n=Array.from(r.querySelectorAll("DiscoverResponse > return > root > row")).map(function(e){return{name:s(e,"HIERARCHY_NAME"),caption:s(e,"HIERARCHY_CAPTION"),description:s(e,"DESCRIPTION"),uniqueName:s(e,"HIERARCHY_UNIQUE_NAME"),dimensionUniqueName:s(e,"DIMENSION_UNIQUE_NAME"),displayFolder:s(e,"HIERARCHY_DISPLAY_FOLDER"),origin:s(e,"HIERARCHY_ORIGIN"),defaultMember:s(e,"DEFAULT_MEMBER")}});return n}function b(e){var r=(new DOMParser).parseFromString(e,"text/xml");var n=Array.from(r.querySelectorAll("DiscoverResponse > return > root > row")).map(function(e){return{name:s(e,"LEVEL_NAME"),caption:s(e,"LEVEL_CAPTION"),description:s(e,"DESCRIPTION"),uniqueName:s(e,"LEVEL_UNIQUE_NAME"),dimensionUniqueName:s(e,"DIMENSION_UNIQUE_NAME"),displayFolder:s(e,"LEVEL_DISPLAY_FOLDER"),orderingProperty:s(e,"LEVEL_ORDERING_PROPERTY"),origin:s(e,"LEVEL_ORIGIN"),hierarchyUniqueName:s(e,"HIERARCHY_UNIQUE_NAME")}});return n}function V(e){var r=(new DOMParser).parseFromString(e,"text/xml");var n=Array.from(r.querySelectorAll("DiscoverResponse > return > root > row")).map(function(e){return{name:s(e,"MEMBER_NAME"),caption:s(e,"MEMBER_CAPTION"),uniqueName:s(e,"MEMBER_UNIQUE_NAME"),dimensionUniqueName:s(e,"DIMENSION_UNIQUE_NAME"),hierarchyUniqueName:s(e,"HIERARCHY_UNIQUE_NAME"),levelUniqueName:s(e,"LEVEL_UNIQUE_NAME"),childrenCardinality:s(e,"CHILDREN_CARDINALITY")}});return n}var L={schemaCatalogs:U,schemaCubes:r,schemaDimensions:w,schemaHierarchies:G,schemaKPIs:F,schemaLevels:b,schemaMeasures:D,schemaMembers:V};var H=function(t,o){return e(void 0,void 0,void 0,function(){var r,n,a;return S(this,function(e){switch(e.label){case 0:r=_({body:y(o),headers:{"Content-Type":"text/xml"},method:"POST"},t.init);return[4,fetch(t.url,r)];case 1:n=e.sent();return[4,n.text()];case 2:a=e.sent();return[2,P(a)]}})})};var k=function(t,o){return e(void 0,void 0,void 0,function(){var r,n,a;return S(this,function(e){switch(e.label){case 0:r=_({body:M(o),headers:{"Content-Type":"text/xml"},method:"POST"},t.init);return[4,fetch(t.url,r)];case 1:n=e.sent();return[4,n.text()];case 2:a=e.sent();return[2,L[o.command](a)]}})})};var q=function(e){var r={columns:e.columns.tuples,data:e.data,rows:e.rows.tuples};return r};function B(e){var r=[];for(var n=0,a=Object.keys(e);n<a.length;n++){var t=a[n];r.push({name:JSON.parse(t),expand:e[t]})}return r}var Y=function(e,r){if(r===void 0)r=[];e.sort=r};var K=function(e,r){if(r===void 0)r=[];e.filter=r};var Q=function(e,r){if(r===void 0)r=new Set;(e.children||[]).forEach(function(e){r.add(e.levelName);Q(e,r)});return r.size};var X=function(e){var r=0;(e.children||[]).forEach(function(e){r+=X(e)||1});return r};var j=function(e,r){return(r&&r.hierarchy===e.hierarchy?T((r.normalizedPath||[]).slice(0,-1),[e.name||null]):T(r&&r.normalizedPath?r.normalizedPath:[],[e.name])).filter(Boolean)};var z=function(e,r){return(r&&r.hierarchy===e.hierarchy?T((r.path||[]).slice(0,-1),[(e.levelNum===0?e.hierarchy:e.name)||null]):T(r&&r.path?r.path:[],[e.levelNum===0?e.hierarchy:e.name])).filter(Boolean)};var Z=function(r,o,i,c,f,e,n,a){if(o===void 0)o=-1;if(i===void 0)i=0;if(c===void 0)c=undefined;if(f===void 0)f=undefined;if(e===void 0)e=undefined;if(n===void 0)n=undefined;if(a===void 0)a=undefined;var A=Q(r);var d=X(r);var O=c||A;var p=f||d;var l=e?e.slice():[];var u=n?n.slice():new Array(p);var m=l.findIndex(function(e){return e&&e.name===r.levelName&&e.level===r.levelNum});var t=l[m];var I={name:r.levelName,level:r.levelNum,index:o,cells:new Array(p).fill(null)};var v=o!==-1&&i!==-1;var s={caption:r.caption,name:r.name,levelName:r.levelName,levelNum:r.levelNum,hasChildren:r.hasChildren,parentName:r.parentName,hierarchy:r.hierarchy,total:(r.total!==undefined?r.total:false)||a&&a.children.length<=1&&a.total,parent:a,rowIndex:o,colIndex:i,depth:1,breadth:1,path:r.path||[],normalizedPath:r.normalizedPath||[],children:r.children.filter(function(e){return e.hierarchy===r.hierarchy})};if(v)if(t){t.cells[i]=s;if(t.index>=o)o=t.index}else if(l[o]&&l[o].cells.length){for(var N=o;N<l.length;N++){var _=l[N];_.index++}l.splice(o,0,I);l[o].cells[i]=s}else{l[o]=I;l[o].cells[i]=s}var T=0;if(r.children&&r.children.length)r.children.forEach(function(e){var r=Z(e,o+1,i+T,O,p,l,u,s),n=r[0],a=r[1],t=r[3];T+=t||1;l=n.slice();u=a.slice()});else if(r.normalizedPath)u[i]={total:s.total,path:r.normalizedPath};s.depth=A;s.breadth=d;return[l,u,A,d]};var W=function(e,r,n){if(r===void 0)r=null;if(n===void 0)n=0;var a;var t=_(_({},e),{total:true,hasChildren:false,children:[]});for(var o=0;o<e.children.length;o++){var i=W(e.children[o],e,o);a=a||i.hierarchy;if(i.hierarchy!==a&&r&&!r.children.some(function(e){return e.total&&e.name===t.name})&&!e.total){t.children.push(i);e.children.splice(o,1);o--}}if(e.children.filter(function(e){return!e.total}).length>=1&&r&&!r.children.some(function(e){return e.total&&e.name===t.name})&&!e.total){var l=e.children[0].hierarchy;if(e.hierarchy===l)r.children.splice(n+1,0,t)}return e};var J=function(a){var l={children:[]};var u={};var e=function(e){var o=ae(a[e]);var i="";var r=function(e){var r=o.members[e];var n;if(l.children&&l.children.length===0)n=l;else if(u[i]&&!u[i+r.name]&&r.levelNum===0)n=u[i];else if(u[i+r.parentName]&&r.levelNum>0&&!u[i+r.parentName+r.name])n=u[i+r.parentName];else if(!u[i+r.parentName]&&r.levelNum>0&&!u[i+r.parentName+r.name]){var a=Object.keys(u).find(function(e){return e.indexOf(r.hierarchy)===0&&e.lastIndexOf(i+r.parentName)+(i+r.parentName).length===e.length});if(a)n=u[a]}if(n){r.path=z(r,n);r.normalizedPath=j(r,n);var t=n.children.findIndex(function(e){return e.hierarchy!==n.hierarchy});if(t!==-1)n.children.splice(Math.max(t,0),0,r);else n.children.push(r)}i+=r.parentName+=r.name;if(!u[i])u[i]=r};for(var n=0;n<o.members.length;n++)r(n)};for(var r=0;r<a.length;r++)e(r);return ae(W(l))};var $=function(e,r,a,n,t){var o=Array.from(new Array(t),function(){return{cells:Array.from(new Array(n),function(){return null})}});var i=function(e){return e.join("|")};var l=function(e){return e.members.map(function(e){return e.name})};var u=new Map;var s=new Map;r.forEach(function(e,r){u.set(i(e.path),r)});a.forEach(function(e,r){s.set(i(e.path),r)});e.forEach(function(e){var r=u.get(i(l(e.columnTuple)));var n=s.get(i(l(e.rowTuple)));if(r!==undefined&&n!==undefined)if(!o[n].cells[r]){o[n].row=a[n].path;o[n].cells[r]=e}});return o};var ee=function(e,r,n,a){var t=new Array(a);for(var o=0;o<a;o++)for(var i=0;i<n;i++)if(e[i]&&e[i].cells[o]){var l=e[i].cells[o];if(!t[o])t[o]={cells:new Array(n).fill(null)};t[o].cells[i]=_(_({},l),{rowSpan:l.colSpan,colSpan:l.rowSpan})}return[t,r,a,n]};var re=function(e){var r=Z(e),n=r[0],a=r[1],t=r[2],o=r[3];for(var i=0;i<o;i++){var l=null;for(var u=0;u<t;u++)if(n[u]){var s=n[u].cells[i];if(!s&&l)l.rowSpan=(l.rowSpan||1)+1;if(l)l.colSpan=l.breadth||1;if(s)l=s}}return[n,a,t,o]};var ne=function(e){var r=Z(e),n=r[0],a=r[1],t=r[2],o=r[3];for(var i=0;i<o;i++){var l=null;for(var u=0;u<t;u++)if(n[u]){var s=n[u].cells[i];if(!s&&l)l.rowSpan=(l.rowSpan||1)+1;if(l)l.colSpan=l.breadth;if(s)l=s}}return ee(n,a,t,o)};function ae(e){return JSON.parse(JSON.stringify(e))}var n=function(e,r,n){return{hierarchyUniqueName:e,uniqueName:r,caption:r,measure:r,name:r,type:n,kpi:true}};function te(e){var r=e.name;return[n(r,e.value,"value"),n(r,e.goal,"goal"),n(r,e.status,"status"),n(r,e.trend,"trend")]}var oe=function(e){var r;var n=0;for(;n<e.length;n++)if(e[n].type===2){r=true;break}if(r)e.splice(n+1,0,{caption:"KPIs",defaultHierarchy:"[KPIs]",name:"KPIs",uniqueName:"[KPIs]"})};var R=function(e,r){return String(e.name)===String([r.defaultHierarchy?r.defaultHierarchy:r.uniqueName])};var h=function(e,r){return String(e.name)===String(r.name)};N.HEADERS_ACTION=void 0;(function(e){e["toggle"]="HEADERS_ACTION_TOGGLE";e["expand"]="HEADERS_ACTION_EXPAND";e["collapse"]="HEADERS_ACTION_COLLAPSE"})(N.HEADERS_ACTION||(N.HEADERS_ACTION={}));var ie=function(e,n,a){var t=new Set;e.children.forEach(function(e){var r=n(e);if(a)t.add(String(e.path));ie(e,n,a||r).map(function(e){t.add(e)})});return Array.from(t.values())};var le=function(e,r){switch(r.type){case N.HEADERS_ACTION.toggle:{var n=e.find(function(e){return String(e.name)===String(r.payload)});return le(e,_(_({},r),{type:n&&n.expand?N.HEADERS_ACTION.collapse:N.HEADERS_ACTION.expand}))}case N.HEADERS_ACTION.expand:{var a=e.find(function(e){return String(e.name)===String(r.payload)});if(a&&a.expand===true)return e;else if(a&&(a.expand===false||a.expand===undefined))return e.map(function(e){return e===a?_(_({},a),{expand:true}):e});else return T(e,[{name:r.payload,expand:true}])}case N.HEADERS_ACTION.collapse:{var t=ie(r.tree,function(e){return!e.total&&String(e.path)===String(r.payload)});var o=T(e).filter(function(r){return!t.some(function(e){return e===String(r.name)})}).map(function(e){return _(_({},e),{expand:Boolean(e.expand)})}).map(function(e){return String(e.name)===String(r.payload)?r.payload.length>1?undefined:{name:r.payload,expand:false}:e}).filter(Boolean);return o}default:return e}};N.PIVOT_CONFIGURATOR_ACTION=void 0;(function(e){e["toggleSelection"]="PIVOT_CONFIGURATOR_ACTION_TOGGLE_SELECTION";e["addColumnAxis"]="PIVOT_CONFIGURATOR_ACTION_ADD_COLUMN_AXIS";e["addColumnAxes"]="PIVOT_CONFIGURATOR_ACTION_ADD_COLUMN_AXES";e["removeColumnAxis"]="PIVOT_CONFIGURATOR_ACTION_REMOVE_COLUMN_AXIS";e["removeColumnAxes"]="PIVOT_CONFIGURATOR_ACTION_REMOVE_COLUMN_AXES";e["addRowAxis"]="PIVOT_CONFIGURATOR_ACTION_ADD_ROW_AXIS";e["addRowAxes"]="PIVOT_CONFIGURATOR_ACTION_ADD_ROW_AXES";e["removeRowAxis"]="PIVOT_CONFIGURATOR_ACTION_REMOVE_ROW_AXIS";e["removeRowAxes"]="PIVOT_CONFIGURATOR_ACTION_REMOVE_ROW_AXES";e["addMeasureAxis"]="PIVOT_CONFIGURATOR_ACTION_ADD_MEASURE_AXIS";e["addMeasureAxes"]="PIVOT_CONFIGURATOR_ACTION_ADD_MEASURE_AXES";e["removeMeasureAxis"]="PIVOT_CONFIGURATOR_ACTION_REMOVE_MEASURE_AXIS";e["removeMeasureAxes"]="PIVOT_CONFIGURATOR_ACTION_REMOVE_MEASURE_AXES";e["remove"]="PIVOT_CONFIGURATOR_ACTION_REMOVE";e["setSort"]="PIVOT_CONFIGURATOR_ACTION_SET_SORT";e["setFilter"]="PIVOT_CONFIGURATOR_ACTION_SET_FILTER";e["addFilter"]="PIVOT_CONFIGURATOR_ACTION_ADD_FILTER";e["changeFilter"]="PIVOT_CONFIGURATOR_ACTION_CHANGE_FILTER";e["removeFilter"]="PIVOT_CONFIGURATOR_ACTION_REMOVE_FILTER";e["setDragItem"]="PIVOT_CONFIGURATOR_ACTION_SET_DRAGITEM";e["drop"]="PIVOT_CONFIGURATOR_ACTION_DROP";e["setDropZone"]="PIVOT_CONFIGURATOR_ACTION_SET_DROP_ZONE";e["setDropTarget"]="PIVOT_CONFIGURATOR_ACTION_SET_DROP_TARGET";e["setDropDirection"]="PIVOT_CONFIGURATOR_ACTION_SET_DROP_DIRECTION"})(N.PIVOT_CONFIGURATOR_ACTION||(N.PIVOT_CONFIGURATOR_ACTION={}));var E=function(n,a){var e;var r;var t;var c;var o;var i;var f;var A;var d;switch(a.type){case N.PIVOT_CONFIGURATOR_ACTION.toggleSelection:{if(Array.isArray(a.payload));else{var l=a.payload;if(l.type===2||"aggregator"in l)if(n.measureAxes.some(function(e){return R(e,l)}))return E(n,_(_({},a),{type:N.PIVOT_CONFIGURATOR_ACTION.removeMeasureAxis}));else return E(n,_(_({},a),{type:N.PIVOT_CONFIGURATOR_ACTION.addMeasureAxis}));else if(l.type==="kpi"){var O=te(l);if(O.every(function(r){return n.measureAxes.some(function(e){return R(e,r)})}))return E(n,_(_({},a),{type:N.PIVOT_CONFIGURATOR_ACTION.removeMeasureAxes,payload:O}));else return E(n,_(_({},a),{type:N.PIVOT_CONFIGURATOR_ACTION.addMeasureAxes,payload:O.filter(function(r){return!n.measureAxes.some(function(e){return R(e,r)})})}))}else if(a.payload.kpi)if(n.measureAxes.some(function(e){return R(e,l)}))return E(n,_(_({},a),{type:N.PIVOT_CONFIGURATOR_ACTION.removeMeasureAxis}));else return E(n,_(_({},a),{type:N.PIVOT_CONFIGURATOR_ACTION.addMeasureAxis}));else if(n.columnAxes.some(function(e){return R(e,l)}))return E(n,_(_({},a),{type:N.PIVOT_CONFIGURATOR_ACTION.removeColumnAxis}));else if(n.rowAxes.some(function(e){return R(e,l)}))return E(n,_(_({},a),{type:N.PIVOT_CONFIGURATOR_ACTION.removeRowAxis}));else if(n.columnAxes&&n.columnAxes.length&&(!n.rowAxes||!n.rowAxes.length))return E(n,_(_({},a),{type:N.PIVOT_CONFIGURATOR_ACTION.addRowAxis}));else return E(n,_(_({},a),{type:N.PIVOT_CONFIGURATOR_ACTION.addColumnAxis}))}break}case N.PIVOT_CONFIGURATOR_ACTION.addColumnAxis:{r=T(n.columnAxes||[],[{name:[a.payload.defaultHierarchy||a.payload.uniqueName]}]);break}case N.PIVOT_CONFIGURATOR_ACTION.addColumnAxes:break;case N.PIVOT_CONFIGURATOR_ACTION.removeColumnAxis:{r=T((n.columnAxes||[]).filter(function(e){return!R(e,a.payload)}));break}case N.PIVOT_CONFIGURATOR_ACTION.removeColumnAxes:break;case N.PIVOT_CONFIGURATOR_ACTION.addRowAxis:{e=T(n.rowAxes||[],[{name:[a.payload.defaultHierarchy||a.payload.uniqueName]}]);break}case N.PIVOT_CONFIGURATOR_ACTION.addRowAxes:break;case N.PIVOT_CONFIGURATOR_ACTION.removeRowAxis:{e=T((n.rowAxes||[]).filter(function(e){return!R(e,a.payload)}));break}case N.PIVOT_CONFIGURATOR_ACTION.removeRowAxes:break;case N.PIVOT_CONFIGURATOR_ACTION.addMeasureAxis:{t=T(n.measureAxes||[],[{name:[a.payload.defaultHierarchy||a.payload.uniqueName]}]);break}case N.PIVOT_CONFIGURATOR_ACTION.removeMeasureAxis:{t=T((n.measureAxes||[]).filter(function(e){return!R(e,a.payload)}));break}case N.PIVOT_CONFIGURATOR_ACTION.addMeasureAxes:{t=T(n.measureAxes||[],(a.payload||[]).map(function(e){return{name:[e.defaultHierarchy||e.uniqueName]}}));break}case N.PIVOT_CONFIGURATOR_ACTION.removeMeasureAxes:{t=T((n.measureAxes||[]).filter(function(r){return!a.payload.some(function(e){return R(r,e)})}));break}case N.PIVOT_CONFIGURATOR_ACTION.remove:{if(n.columnAxes.some(function(e){return h(e,a.payload)}))r=T(n.columnAxes.filter(function(e){return!h(e,a.payload)}));if(n.rowAxes.some(function(e){return h(e,a.payload)}))e=T(n.rowAxes.filter(function(e){return!h(e,a.payload)}));if(n.measureAxes.some(function(e){return h(e,a.payload)}))t=T(n.measureAxes.filter(function(e){return!h(e,a.payload)}));break}case N.PIVOT_CONFIGURATOR_ACTION.setDragItem:i=a.payload;break;case N.PIVOT_CONFIGURATOR_ACTION.setDropZone:f=a.payload;break;case N.PIVOT_CONFIGURATOR_ACTION.setDropTarget:d=a.payload;break;case N.PIVOT_CONFIGURATOR_ACTION.setDropDirection:A=a.payload;break;case N.PIVOT_CONFIGURATOR_ACTION.drop:if(n.dragItem&&n.dropZone){var p=n.columnAxes.find(function(e){return h(e,a.payload)});var m=n.rowAxes.find(function(e){return h(e,a.payload)});var I=n.measureAxes.find(function(e){return h(e,a.payload)});var u=void 0;if(p){u=p;r=T(n.columnAxes.filter(function(e){return!h(e,a.payload)}))}if(m){u=m;e=T(n.rowAxes.filter(function(e){return!h(e,a.payload)}))}if(I){u=I;t=T(n.measureAxes.filter(function(e){return!h(e,a.payload)}))}switch(n.dropZone){case"columnAxes":{r=r||n.columnAxes.slice();var s=-1;if(n.dropTarget&&n.dropDirection){var v=n.dropDirection?n.dropDirection==="before"?0:1:0;s=r.findIndex(function(e){return h(e,n.dropTarget)})+v}if(s>=0)r.splice(s,0,u);else r.push(u);break}case"rowAxes":{e=e||n.rowAxes.slice();var s=-1;if(n.dropTarget&&n.dropDirection){var v=n.dropDirection?n.dropDirection==="before"?0:1:0;s=e.findIndex(function(e){return h(e,n.dropTarget)})+v}if(s>=0)e.splice(s,0,u);else e.push(u);break}case"measureAxes":{t=t||n.measureAxes.slice();var s=-1;if(n.dropTarget&&n.dropDirection){var v=n.dropDirection?n.dropDirection==="before"?0:1:0;s=t.findIndex(function(e){return h(e,n.dropTarget)})+v}if(s>=0)t.splice(s,0,u);else t.push(u);break}}}i=null;f=null;d=null;break;case N.PIVOT_CONFIGURATOR_ACTION.setSort:c=a.payload;break;case N.PIVOT_CONFIGURATOR_ACTION.setFilter:if(Array.isArray(a.payload))o=a.payload;else o=[a.payload];break;case N.PIVOT_CONFIGURATOR_ACTION.addFilter:o=(n.filter||[]).slice();if(Array.isArray(a.payload))o.push.apply(o,a.payload);else o.push(a.payload);break;case N.PIVOT_CONFIGURATOR_ACTION.changeFilter:o=Array.isArray(a.payload)?(n.filter||[]).map(function(r){return a.payload.some(function(e){return e.field===r.field})?a.payload.find(function(e){return e.field===r.field}):r}):(n.filter||[]).map(function(e){return e.field===a.payload.field?a.payload:e});break;case N.PIVOT_CONFIGURATOR_ACTION.removeFilter:o=(n.filter||[]).slice();if(Array.isArray(a.payload))o=o.filter(function(r){return!a.payload.some(function(e){return e.field===r.field&&e.operator===r.operator})});else o=o.filter(function(e){return!(e.field===a.payload.field&&e.operator===a.payload.operator)});break}return{dragItem:i,dropTarget:d,dropDirection:A,dropZone:f,columnAxes:r,rowAxes:e,measureAxes:t,filter:o,sort:c}};N.addKPI=oe;N.buildKPIMeasures=te;N.compareAxes=h;N.configuratorReducer=E;N.createAxisDescriptors=B;N.createDataState=q;N.createDiscoverBody=M;N.createRequestBody=y;N.discoverCommands=t;N.fetchData=H;N.fetchDiscover=k;N.headersReducer=le;N.parseResponse=P;N.setFilter=K;N.setSort=Y;N.toColumns=re;N.toData=$;N.toRows=ne;N.toTree=J;Object.defineProperty(N,"__esModule",{value:true});return N}({})})}("function"==typeof define&&define.amd?define:function(e,r,n){(n||r)()}),function(define){define("kendo.pivot.common.min",["./pivotgrid/common.min"],function(){var e={id:"pivot.common",name:"PivotCommon",category:"web",description:"Common JS for PivotGrid",depends:["core"]};return window.kendo})}("function"==typeof define&&define.amd?define:function(e,r,n){(n||r)()});
//# sourceMappingURL=kendo.pivot.common.min.js.map
