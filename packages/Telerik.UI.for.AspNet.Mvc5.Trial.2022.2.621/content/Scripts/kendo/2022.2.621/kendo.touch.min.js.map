{"version":3,"file":"kendo.touch.min.js","sources":["kendo.touch.js"],"sourcesContent":["(function(f, define) {\n    define('kendo.touch',[ \"kendo.core\", \"kendo.userevents\" ], f);\n})(function() {\n\nvar __meta__ = { // jshint ignore:line\n    id: \"touch\",\n    name: \"Touch\",\n    category: \"mobile\",\n    description: \"The kendo Touch widget provides a cross-platform compatible API for handling user-initiated touch events, multi-touch gestures and event sequences (drag, swipe, etc.). \",\n    depends: [ \"core\", \"userevents\" ]\n};\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        Widget = kendo.ui.Widget,\n        abs = Math.abs,\n        MAX_DOUBLE_TAP_DISTANCE = 20;\n\n    var Touch = Widget.extend({\n        init: function(element, options) {\n            var that = this;\n\n            Widget.fn.init.call(that, element, options);\n            options = that.options;\n\n            element = that.element;\n            that.wrapper = element;\n\n            function eventProxy(name) {\n                return function(e) {\n                    that._triggerTouch(name, e);\n                };\n            }\n\n            function gestureEventProxy(name) {\n                return function(e) {\n                    that.trigger(name, { touches: e.touches, distance: e.distance, center: e.center, event: e.event });\n                };\n            }\n\n            that.events = new kendo.UserEvents(element, {\n                filter: options.filter,\n                surface: options.surface,\n                minHold: options.minHold,\n                multiTouch: options.multiTouch,\n                allowSelection: true,\n                fastTap: options.fastTap,\n                press: eventProxy(\"touchstart\"),\n                hold: eventProxy(\"hold\"),\n                tap: that._tap.bind(that),\n                gesturestart: gestureEventProxy(\"gesturestart\"),\n                gesturechange: gestureEventProxy(\"gesturechange\"),\n                gestureend: gestureEventProxy(\"gestureend\")\n            });\n\n            if (options.enableSwipe) {\n                that.events.bind(\"start\", that._swipestart.bind(that));\n                that.events.bind(\"move\", that._swipemove.bind(that));\n            } else {\n                that.events.bind(\"start\", that._dragstart.bind(that));\n                that.events.bind(\"move\", eventProxy(\"drag\"));\n                that.events.bind(\"end\", eventProxy(\"dragend\"));\n            }\n\n            kendo.notify(that);\n        },\n\n        events: [\n            \"touchstart\",\n            \"dragstart\",\n            \"drag\",\n            \"dragend\",\n            \"tap\",\n            \"doubletap\",\n            \"hold\",\n            \"swipe\",\n            \"gesturestart\",\n            \"gesturechange\",\n            \"gestureend\"\n        ],\n\n        options: {\n            name: \"Touch\",\n            surface: null,\n            global: false,\n            fastTap: false,\n            filter: null,\n            multiTouch: false,\n            enableSwipe: false,\n            minXDelta: 30,\n            maxYDelta: 20,\n            maxDuration: 1000,\n            minHold: 800,\n            doubleTapTimeout: 800\n        },\n\n        cancel: function() {\n            this.events.cancel();\n        },\n\n        destroy: function() {\n            Widget.fn.destroy.call(this);\n\n            this.events.destroy();\n        },\n\n        _triggerTouch: function(type, e) {\n            if (this.trigger(type, { touch: e.touch, event: e.event })) {\n                e.preventDefault();\n            }\n        },\n\n        _tap: function(e) {\n            var that = this,\n                lastTap = that.lastTap,\n                touch = e.touch;\n\n            if (lastTap &&\n                (touch.endTime - lastTap.endTime < that.options.doubleTapTimeout) &&\n                kendo.touchDelta(touch, lastTap).distance < MAX_DOUBLE_TAP_DISTANCE\n                ) {\n\n               that._triggerTouch(\"doubletap\", e);\n               that.lastTap = null;\n            } else {\n                that._triggerTouch(\"tap\", e);\n                that.lastTap = touch;\n            }\n        },\n\n        _dragstart: function(e) {\n            this._triggerTouch(\"dragstart\", e);\n        },\n\n        _swipestart: function(e) {\n            if (abs(e.x.velocity) * 2 >= abs(e.y.velocity)) {\n                e.sender.capture();\n            }\n        },\n\n        _swipemove: function(e) {\n            var that = this,\n                options = that.options,\n                touch = e.touch,\n                duration = e.event.timeStamp - touch.startTime,\n                direction = touch.x.initialDelta > 0 ? \"right\" : \"left\";\n\n            if (\n                abs(touch.x.initialDelta) >= options.minXDelta &&\n                abs(touch.y.initialDelta) < options.maxYDelta &&\n                duration < options.maxDuration\n                )\n            {\n                that.trigger(\"swipe\", {\n                    direction: direction,\n                    touch: e.touch\n                });\n\n                touch.cancel();\n            }\n        }\n    });\n\n    kendo.ui.plugin(Touch);\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) { (a3 || a2)(); });\n\n"],"names":["define","__meta__","id","name","category","description","depends","$","window","kendo","jQuery","undefined","Widget","ui","abs","Math","MAX_DOUBLE_TAP_DISTANCE","Touch","extend","init","element","options","that","this","fn","call","wrapper","eventProxy","e","_triggerTouch","gestureEventProxy","trigger","touches","distance","center","event","events","UserEvents","filter","surface","minHold","multiTouch","allowSelection","fastTap","press","hold","tap","_tap","bind","gesturestart","gesturechange","gestureend","enableSwipe","_swipestart","_swipemove","_dragstart","notify","global","minXDelta","maxYDelta","maxDuration","doubleTapTimeout","cancel","destroy","type","touch","preventDefault","lastTap","endTime","touchDelta","x","velocity","y","sender","capture","duration","timeStamp","startTime","direction","initialDelta","plugin","amd","a1","a2","a3"],"mappings":"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"}