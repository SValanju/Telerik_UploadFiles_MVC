/**
 * Kendo UI v2022.2.621 (http://www.telerik.com/kendo-ui)
 * Copyright 2022 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.
 *
 * Kendo UI commercial licenses may be obtained at
 * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete
 * If you do not own a commercial license, this file shall be governed by the trial license terms.
 */
!function(define){define("taskboard/toolbar.min",["kendo.toolbar.min"],function(){var i=window.kendo.jQuery,c=void 0,s=window.kendo,d=i.extend,n=s.ui.ToolBar,e=s.toolbar.Item,t="click",u="toggle",m="close",a="action",r="change",o=".taskBoardToolbar",f={searchbox:"k-searchbox k-textbox k-input k-input-md k-rounded-md k-input-solid",searchIcon:"k-input-icon k-icon k-i-search",searchInput:"k-input-inner"},l=n.extend({init:function(e,t){var a=this;a._extendOptions(t);n.fn.init.call(a,e,t);a._attachEvents()},events:n.fn.events.concat([a]),defaultTools:{addColumn:{type:"button",text:"Add Column",name:"addColumn",command:"AddColumnCommand",icon:"plus",rules:"isEditable"},spacer:{type:"spacer"},search:{type:"TaskBoardSearch",text:"Search",name:"search",command:"SearchCommand",icon:"search",overflow:"never",rules:"isSearchable"}},_attachEvents:function(){var e=this;e.bind(u,e._click.bind(e));e.bind(m,e._click.bind(e));e.bind(t,e._click.bind(e));e.bind(r,e._change.bind(e))},_extendOptions:function(e){var t=this,a=e.items?e.items:Object.keys(t.defaultTools);t.options=e;t.options.items=t._extendToolsOptions(a)},_extendToolsOptions:function(e){var r=this,o=r.options.messages;if(!e.length)return;return e.map(function(e){var t=i.isPlainObject(e)&&Object.keys(e).length===1&&e.name,a={},n;e=t?e.name:e;n=i.isPlainObject(e)?e:d({},r.defaultTools[e]||{name:e,command:e+"Command",type:"button"});if(!r._validateRules(n))return{hidden:true};a[s.attr("command")]=n.command;a[s.attr("options")]=n.options;s.deepExtend(n,{id:n.id||n.name+"-"+s.guid(),name:n.name,text:o[n.name]||n.name,attributes:d({"aria-label":o[n.name]||n.name,title:o[n.name]},a),overflow:n.overflow});if(n.type==="buttonGroup")n.buttons=n.buttons.map(r._mapButtonGroups.bind(r));if(n.type==="splitButton")n.menuButtons=n.menuButtons.map(r._mapMenuButtons.bind(r));return n},r)},_mapButtonGroups:function(e){var t=this,a=t.options.messages,n={};n[s.attr("command")]=e.command;n[s.attr("options")]=e.options;return s.deepExtend(e,{attributes:d({},e.attributes,{"aria-label":a[e.name],title:a[e.name]},n)})},_mapMenuButtons:function(e){var t=this,a=t.options.messages,n={};n[s.attr("command")]=e.command;n[s.attr("options")]=e.options;return s.deepExtend(e,{text:a[e.name],attributes:d({},e.attributes,{"aria-label":a[e.name],title:a[e.name]},n)})},_validateRules:function(e){var t=this,a=t.options.states,n=e.rules?e.rules.split(";"):[];if(!n.length)return true;for(var r=0;r<n.length;r++)if(!a[n[r]])return false;return true},_click:function(e){var t=i(e.target).attr(s.attr("command")),a=i(e.target).attr(s.attr("options"));if(!t)return;this.action({command:t,options:a})},_change:function(e){var t=i(e.target).attr(s.attr("command")),a=i(e.target).attr(s.attr("options"));a=d({},a,{value:i(e.target).val()});if(!t)return;this.action({command:t,options:a})},isToolEnabled:function(e){var t=this,a=t.options,n=false;for(var r=0;r<a.items.length;r++)if(a.items[r].name==e){n=true;break}return a.items[e]||n},action:function(e){this.trigger(a,e)},destroy:function(){if(this.search)this.search.destroy();n.fn.destroy.call(this)}}),p=e.extend({init:function(e,t){var a=this,n=l.styles,r=i("<span class='"+n.searchbox+"'></span>"),o=i("<span class='"+n.searchInputIcon+"'></span>"),s=i("<input class='"+n.searchInput+"' autocomplete='off' />");a.element=r;a.input=s;a.icon=o;a.options=e;a.options.type="taskBoardSearch";a.toolbar=t;a.attributes();a.renderIcon();a.addUidAttr();a.addIdAttr();a.addOverflowAttr();a.input.attr({placeholder:a.options.text,title:a.options.text});a.element.append(o).append(a.input);a._bindEvents();a.toolbar.search=a},attributes:function(){if(this.options.attributes)this.input.attr(this.options.attributes)},renderIcon:function(){if(this.options.icon)this.icon.addClass(l.styles.searchIcon)},_bindEvents:function(){this._inputHandler=this._input.bind(this);this.input.on("input"+o,this._inputHandler)},_input:function(e){this.toolbar.trigger(r,{target:e.target})},destroy:function(){this.element.off(o)}});return s.toolbar.registerComponent("TaskBoardSearch",p),d(s.ui,{taskboard:{ToolBar:l}}),d(true,s.ui.taskboard.ToolBar,{styles:f}),window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,a){(a||t)()}),function(define){define("taskboard/column.min",["kendo.sortable.min"],function(){var l=window.kendo.jQuery,t=void 0,c=window.kendo,r=c.ui,n=c.Observable,u=l.extend,o=".",a=o+"kendoTaskBoardColumn",e="click",i="blur",d="move",f="moveStart",p="moveEnd",b="change",s="action",h={element:"k-taskboard-column",header:"k-taskboard-column-header",headerText:"k-taskboard-column-header-text",ellipsis:"k-text-ellipsis",spacer:"k-spacer",actions:"k-taskboard-column-header-actions",cardsContainer:"k-taskboard-column-cards-container",columnCards:"k-taskboard-column-cards",actionButton:"k-taskboard-column-action-button",button:"k-button k-icon-button k-button-md k-rounded-md k-button-flat k-button-flat-base",card:"k-taskboard-card",cardTitle:"k-card-title",sortableSuffix:"-kendosortable",textbox:"k-textbox k-input k-input-md k-rounded-md k-input-solid",input:"k-input-inner",newColumn:"k-taskboard-column-new",editColumn:"k-taskboard-column-edit",disabled:"k-state-disabled",dragPlaceholder:"k-taskboard-drag-placeholder",dragHint:"k-taskboard-drag-hint",ignoreDrag:"k-taskboard-drag-ignore",grabbingCursor:"k-cursor-grabbing"};function g(e){e.preventDefault()}var m=n.extend({init:function(e,t){var a=this;a._dataItem=t;a.options=u(true,{},e);a.sortableUniqueClass=a.options.sortableIdentifier+m.styles.sortableSuffix;a._render();a._attachEvents();if(e.states.isReorderable)a._initSortable();n.fn.init.call(a)},empty:function(){var e=this;e.container.empty()},addCard:function(e){var t=this;t.container.append(e)},edit:function(){var e=this,t=m.styles;e.element.addClass(t.editColumn);e._renderEditHeader()},getDataItem:function(){return this._dataItem},cards:function(){var e=this;return e.container.children()},template:'<div class="#: styles.headerText # #: styles.ellipsis #">{0}</div>'+'<span class="#: styles.spacer #"></span>'+"#=buttons#",editTemplate:'<div class="#: styles.headerText # #: styles.ellipsis #">'+'<span class="#: styles.textbox #">'+'<input class="#: styles.input #" placeholder="#: {0} ? messages.editColumn : messages.newColumn #" #:kendo.attr("command")#="SaveColumnCommand" value="#:{0}#" />'+"</span>"+"</div>"+'<span class="#: styles.spacer #"></span>'+"#=buttons#",actionButton:'<button class="#: styles.actionButton # #: styles.button #" title="#:text#" #:kendo.attr("command")#="#:command#" #if(options){##:kendo.attr("options")#="#:options#"#}#>'+'<i class="k-button-icon #:icon# #:spriteCssClass#"></i>'+"</button>",builtinButtons:{editColumn:{name:"editColumn",icon:"edit",text:"Edit Column",command:"EditColumnCommand",rules:"isEditable"},addCard:{name:"addCard",icon:"add",text:"Add Card",command:"AddCardCommand",rules:"isEditable"},deleteColumn:{name:"deleteColumn",icon:"close",text:"Delete Column",command:"DeleteColumnCommand",rules:"isEditable"}},defaultButtons:["editColumn","addCard","deleteColumn"],_render:function(){var e=this,t=m.styles,a=c.guid(),n=l("<div class='"+t.element+"'></div>").attr(c.attr("uid"),e._dataItem.uid).css({width:e.options.width}).attr("role","list").attr("aria-labelledby",a),r=l("<div class='"+t.header+"'></div>"),o=l("<div class='"+t.cardsContainer+"'></div>"),s=l("<div class='"+t.columnCards+"'></div>");e.header=r.appendTo(n).attr("id",a);e._renderHeader();o.appendTo(n);e.container=s.appendTo(o).addClass(e.sortableUniqueClass);e.element=n},_renderHeader:function(){var e=this,t=m.styles,a=e.options,n=a.template?a.template:c.format(e.template,"#:"+a.dataTextField+"#");e.header.append(c.template(n)(u(true,{},{styles:t,buttons:e._buildActionsHtml()},e._dataItem)))},_renderEditHeader:function(){var e=this,t=m.styles,a=e.options,n=a.editTemplate?a.editTemplate:c.format(e.editTemplate,a.dataTextField);e.header.html("");e.header.append(c.template(n)(u(true,{},{styles:t,messages:a.messages,buttons:e._buildActionsHtml()},e._dataItem)));setTimeout(function(){e.header.find("input").trigger("focus")},0);e.header.find(o+t.actions).addClass(t.disabled)},_buildActionsHtml:function(){var e=this,t=e.options,a=t.messages,n=t.buttons||e.defaultButtons,r=m.styles,o="<div class='"+r.actions+"'>";for(var s=0;s<n.length;s++){var i=n[s];i=l.isPlainObject(i)&&Object.keys(i).length===1&&i.name?i.name:i;if(typeof i==="string")i=u(true,{},e.builtinButtons[i]||{spriteCssClass:i,command:i+"Command"},{text:a[i]||i});else if(l.isPlainObject(i)&&i.name)i=u(true,i,{text:a[i.name]});if(!e._validateRules(i))continue;var d=i.icon?"k-icon k-i-"+i.icon:"";i.icon=d;i.spriteCssClass=i.spriteCssClass||"";o+=c.template(e.actionButton)(u(true,{},{styles:r,options:false},i))}o+="</div>";return o},_validateRules:function(e){var t=this,a=t.options.states,n=e.rules?e.rules.split(";"):[];if(!n.length)return true;for(var r=0;r<n.length;r++)if(!a[n[r]])return false;return true},_actionClick:function(e){var t=this,a=l(e.target).closest("["+c.attr("command")+"]"),n=a.attr(c.attr("command")),r=a.attr(c.attr("options"));r=typeof r==="string"?{value:r}:r;if(!n)return;t.trigger(s,{command:n,options:u({target:a},r)})},_textboxBlur:function(e){var t=this,a=l(e.target).closest("["+c.attr("command")+"]"),n=a.attr(c.attr("command")),r=a.attr(c.attr("options"));r=typeof r==="string"?{value:r}:r;if(!n)return;t.trigger(s,{command:n,options:u({target:a},r)})},_attachEvents:function(){var t=this;t.header.on(e+a,o+m.styles.actionButton,t._actionClick.bind(t));t.header.on(i+a,o+m.styles.input,t._textboxBlur.bind(t));t.header.on("keyup"+a,o+m.styles.input,function(e){if(e.keyCode===c.keys.ENTER)t._textboxBlur(e)});if(t.container){t.container.on(e+a,o+m.styles.card+" ["+c.attr("command")+"]",t._actionClick.bind(t));t.container.on(e+a,o+m.styles.card+" a."+m.styles.cardTitle,g)}},_initSortable:function(){var e=this,t=e.options.states.isRtl,a=t?" k-rtl":"",n=e.container;if(!e.container)return;e.sortable=new r.Sortable(n,{ignore:o+m.styles.ignoreDrag+" *",connectWith:o+e.sortableUniqueClass,filter:o+m.styles.card,hint:function(e){return e.clone().addClass(m.styles.dragHint+" "+m.styles.grabbingCursor+a).css({width:e[0].offsetWidth,height:e[0].offsetHeight})},placeholder:function(e){return l("<div></div>").addClass(m.styles.dragPlaceholder).css({height:e[0].offsetHeight})},move:e._move.bind(e),start:e._start.bind(e),end:e._end.bind(e),change:e._change.bind(e)});e.sortable.draggable.userEvents.unbind("select");e.sortable.draggable.userEvents.bind("select",e._select.bind(e))},_select:function(e){var t=m.ignoreDragSelectors;var a=l(e.event.target);for(var n=0;n<t.length;n++)if(a.is(t[n])){e.preventDefault();break}},_move:function(e){u(e,{columnElement:e.sender.element.parents(o+m.styles.element)});this.trigger(d,e)},_start:function(e){u(e,{columnElement:e.sender.element.parents(o+m.styles.element)});this.trigger(f,e)},_end:function(e){u(e,{columnElement:e.sender.element.parents(o+m.styles.element)});this.trigger(p,e)},_change:function(e){var t=this;u(e,{columnElement:e.sender.element.parents(o+m.styles.element)});t.trigger(b,e);if(e.action==="receive"&&e.newIndex>=0||e.action==="sort"&&e.newIndex!==e.oldIndex)t.trigger(s,{command:"MoveCardCommand",options:e})},destroy:function(){var e=this;e.header.off(a);e.container.off(a);if(e.sortable)e.sortable.destroy()}}),v=m.extend({_render:function(){var e=this,t=m.styles,a=l("<div class='"+t.element+"'></div>").addClass(t.newColumn).attr(c.attr("uid"),e._dataItem.uid),n=l("<div class='"+t.header+"'></div>");e.header=n.appendTo(a);e._renderEditHeader();e.element=a}});return u(c.ui.taskboard,{Column:m,NewColumn:v}),u(true,c.ui.taskboard.Column,{styles:h,ignoreDragSelectors:["img"]}),window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,a){(a||t)()}),function(define){define("taskboard/card.min",["kendo.core.min"],function(){var l=window.kendo.jQuery,e=void 0,p=window.kendo,r=p.Observable,c=l.extend,t={element:"k-taskboard-card",card:"k-card",header:"k-card-header",hbox:"k-hbox",title:"k-card-title",link:"k-link",spacer:"k-spacer",button:"k-button",cardMenuButton:"k-taskboard-card-menu-button k-icon-button",flatButton:"k-button-md k-rounded-md k-button-flat k-button-flat-base",body:"k-card-body",actionsIcon:"k-icon k-i-more-vertical",moveCursor:"k-cursor-move",categoryBorder:"k-taskboard-card-category",headerActions:"k-card-header-actions",disabled:"k-state-disabled"},u=r.extend({init:function(e,t,a){var n=this;n._dataItem=t;n.resources=a;n.options=c(true,{},e);n._render();r.fn.init.call(n)},headerTemplate:'<div class="#:styles.header# #:styles.hbox#">'+'<a class="#:styles.title# #:styles.link#" href="\\#" #if(selectable){##:kendo.attr("command")#="SelectCardCommand"#}#>#:{0}#</a>'+'<span class="#:styles.spacer#"></span>'+"#=cardMenuButton#"+"</div>",bodyTemplate:'<div class="#:styles.body#"><p>#:{0}#</p></div>',cardMenuButtonTemplate:'<div class="#:styles.headerActions#"><button aria-label="menu" class="#:styles.button# #:styles.flatButton# #:styles.cardMenuButton#">'+'<span class="k-button-icon #:styles.actionsIcon#"></span>'+"</button></div>",_render:function(){var e=this,t=e.options,a=u.styles,n=t.template||e._buildTemplate(),r=l("<div class='"+a.element+" "+a.card+" "+a.moveCursor+"'></div>"),o=t.cardMenu?e.cardMenuButtonTemplate:"",s=e._resources(e._dataItem),i=t.states.isRtl?"borderRightColor":"borderLeftColor",d;r.attr(p.attr("uid"),e._dataItem.uid).attr("aria-disabled",!t.states.isDisabled).attr("role","listitem").toggleClass(a.disabled,t.states.isDisabled);d=s[t.dataCategoryField]&&s[t.dataCategoryField].color||e._dataItem.get(t.dataCategoryField);if(d)r.addClass(a.categoryBorder).css(i,d);r.append(p.template(n)(c(true,{},{styles:a,cardMenuButton:p.template(o)({styles:a}),selectable:t.states.isSelectable,resources:s},e._dataItem)));e.element=r},_resources:function(c){var e=this,t={};if(!e.resources)return t;for(var u in e.resources){var a=e.resources[u];var m=a.field;var n=p.getter(m)(c);if(!n)continue;if(!a.multiple)n=[n];var r=a.dataSource.view();for(var o=0;o<n.length;o++){var s=null;var i=n[o];if(!a.valuePrimitive)i=p.getter(a.dataValueField)(i);for(var d=0;d<r.length;d++)if(r[d].get(a.dataValueField)==i){s=r[d];break}if(s!==null){var f=p.getter(a.dataColorField)(s);var l={field:a.field,title:a.title,name:a.name,text:p.getter(a.dataTextField)(s),value:i,color:f};if(a.multiple)if(t[a.field])t[a.field].push(l);else t[a.field]=[l];else t[a.field]=l}}}return t},_buildTemplate:function(){var e=this,t=e.options,a=p.format(e.headerTemplate,t.dataTitleField),n=p.format(e.bodyTemplate,t.dataDescriptionField);return a+n}});return c(p.ui.taskboard,{Card:u}),c(true,p.ui.taskboard.Card,{styles:t}),window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,a){(a||t)()}),function(define){define("taskboard/cardmenu.min",["kendo.menu.min"],function(){var s=window.kendo.jQuery,e=void 0,o=window.kendo,i=s.extend,t=o.template,n=o.ui.ContextMenu,a="action",r=n.extend({init:function(e,t){var a=this;n.fn.init.call(a,e,t);a._overrideTemplates();a._extendItems();a.bind("select",a._onSelect.bind(a));a.bind("open",a._onOpen.bind(a));a.bind("activate",a._focus.bind(a))},_overrideTemplates:function(){this.templates.sprite=t("#if(spriteCssClass) {#<span class='#: spriteCssClass #'></span>#}#")},defaultItems:{editCard:{name:"editCard",text:"Edit card",icon:"edit",command:"EditCardCommand",rules:"isEditable"},deleteCard:{name:"deleteCard",text:"Delete card",icon:"delete",command:"DeleteCardCommand",rules:"isEditable"}},events:n.fn.events.concat([a]),_extendItems:function(){var e=this,t=e.options.items,a,n;if(t&&t.length)for(var r=0;r<t.length;r++){a=t[r];n=s.isPlainObject(a)&&Object.keys(a).length===1&&a.name;if(n)a=a.name;if(s.isPlainObject(a))e._append(a);else if(e.defaultItems[a]){a=e.defaultItems[a];e._append(a)}else if(typeof a==="string"){a={name:a,text:a,spriteCssClass:a,command:a+"Command"};e._append(a)}}else for(var o in e.defaultItems){a=e.defaultItems[o];e._append(a)}},_append:function(e){var t=this;t._extendItem(e);if(t._validateRules(e))t.append(e)},_extendItem:function(e){var t=this,a=t.options.messages,n=e.icon?"k-icon k-i-"+e.icon:"",r={};r[o.attr("command")]=e.command;if(e.options)r[o.attr("options")]=e.options;i(e,{text:a[e.name],spriteCssClass:n+" "+e.spriteCssClass||"",attr:r,uid:o.guid()})},_validateRules:function(e){var t=this,a=t.options.states,n=e.rules?e.rules.split(";"):[];if(!n.length)return true;for(var r=0;r<n.length;r++)if(!a[n[r]])return false;return true},_onSelect:function(e){var t=s(e.item).attr(o.attr("command")),a=s(e.item).attr(o.attr("options")),n=s(e.target);a=typeof a==="string"?{value:a}:a;if(!t)return;this.action({command:t,options:i({target:n},a)})},_onOpen:function(e){var t=e.sender,a=t.options.items;if(!a&&s.isEmptyObject(this.defaultItems))e.preventDefault()},_focus:function(e){if(e.sender)e.sender.element.trigger("focus")},action:function(e){this.trigger(a,e)}});return i(o.ui.taskboard,{CardMenu:r}),window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,a){(a||t)()}),function(define){define("taskboard/commands.min",["kendo.dialog.min"],function(){var l=window.kendo.jQuery,i=void 0,e=window.kendo,c=l.extend,u=l.isPlainObject,d,t=e.Class.extend({init:function(e){this.options=e;this.taskboard=e.taskboard},_confirm:function(e,t,a,n){var r=this,o=r.taskboard,s=o.options,i;if(u(s.editable)&&s.editable.confirmation===false){var d=l.Deferred();d.resolve();return d}i=l("<div></div>").kendoConfirm(c({},{title:e,content:t,messages:{okText:a,cancel:n},buttonLayout:"normal"})).data("kendoConfirm");i.open();setTimeout(function(){i.element.trigger("focus")});return i.result}}),a=t.extend({exec:function(){var e=this,a=e.taskboard;if(a.trigger("editColumn",{column:null}))return;a.columns().each(function(e,t){a.enableByColumn(t,false)});a.addColumn()}}),n=t.extend({exec:function(){var e=this,t=e.options,a=e.taskboard;if(a.trigger("editColumn",{column:t.column}))return;a.columns().each(function(e,t){a.enableByColumn(t,false)});a.editColumn(t.columnElement)}}),r=t.extend({exec:function(){var e=this,t=e.options,a=e.taskboard,n=a.options,r=n.messages,o=a.columnsDataSource;var s=e._confirm(r.deleteColumn,r.deleteColumnConfirm,r["delete"],r.cancel);s.done(function(){if(a.trigger("deleteColumn",{column:t.column})){a.dataSource.cancelChanges();return}o.remove(t.column);o.sync()})}}),o=t.extend({exec:function(){var e=this,t=e.options,a=e.taskboard,n=a.options.columnSettings,r=a.columnsDataSource,o=t.column,s=t.target.val();if(a.trigger("saveColumn",{column:t.column})){a.dataSource.cancelChanges();return}o.set(n.dataTextField,s);r.sync()}}),m=t.extend({exec:function(){var e=this,t=e.taskboard,a=t.columnsDataSource;a.cancelChanges()}}),f=t.extend({exec:function(){var e=this,t=e.taskboard,a=e.options,n=a.cardElement,r=a.columnElement,o=t.columns(),s=r.index(),i=a.value,d,l;switch(i){case"left":d=Math.max(0,s-1);break;case"right":d=Math.min(o.length-1,s+1);break;default:d=s;break}e.columns=o;e.columnIndex=d;e.column=l=t._getColumnByElement(o.eq(d));e.cards=l.cards();if(n)e._moveFromCardFocus(i,n);else if(r&&i==="down")e.cards.eq(0).trigger("focus");else o.eq(d).trigger("focus")},_moveFromCardFocus:function(e,t){var a=this,n=t.index(),r,o,s=false;switch(e){case"up":o=n-1;break;case"down":o=n+1;break;default:s=true;o=n;break}r=a.cards.eq(o);if(!r.length&&s)r=a._getFocusableCard(o,e);if(o>=0)r.trigger("focus");else a.options.columnElement.focus()},_getFocusableCard:function(e,t){var a=this,n=a.cards.length-1,r=a.cards.eq(Math.min(e,n));if(r.length)return r;if(a.columnIndex<=0||a.columnIndex>=a.columns.length-1)return;switch(t){case"left":a.columnIndex=Math.max(0,a.columnIndex-1);break;case"right":a.columnIndex=Math.min(a.columns.length-1,a.columnIndex+1);break}a.column=a.taskboard._getColumnByElement(a.columns.eq(a.columnIndex));a.cards=a.column.cards();return a._getFocusableCard(e,t)}}),s=t.extend({_updateOrder:function(e,c){var t=this,a=t.taskboard,u=a.options,n=u.dataOrderField,r=t.options,o=r.card,m=r.cardElement?r.cardElement.index():e.cards().length,f=c,s=e.cards().map(function(e,t){return a.dataItem(t)}),i=s[m-1],d;o.set(n,f);if(i&&i.get(n)>=o.get(n))o.set(n,i.get(n)+1);for(var l=f+1;l<s.length;l++){d=s[l];if(d.get(n)<=o.get(n)){d.set(n,o.get(n)+1);o=d}else break}}}),p=t.extend({exec:function(){var e=this,t=e.taskboard,a=e.options,n=a.cardElement;t._select(n,true);n.focus()}}),b=s.extend({exec:function(){var e=this,t=e.taskboard,a=t.options,n=e.options,r=n.card.get(a.dataStatusField),o=t._getColumn(r),s=l(document.activeElement);if(s.length)s.trigger("change");if(t.pane&&t.pane.form&&!t.pane.form.validate())return;if(t.trigger("saveCard",{card:n.card})){t.dataSource.cancelChanges();return}if(o&&a.dataOrderField)e._updateOrder(o,n.card.get(a.dataOrderField));t.dataSource.sync().then(function(){t.columns().eq(0).trigger("focus")})}}),h=t.extend({exec:function(){var e=this,t=e.taskboard,a=t.options.messages,n=e.options;var r=e._confirm(a.deleteCard,a.deleteCardConfirm,a["delete"],a.cancel);r.done(function(){if(t.trigger("deleteCard",{card:n.card})){t.dataSource.cancelChanges();return}t.dataSource.remove(n.card);t.dataSource.sync().then(function(){t.columns().eq(0).trigger("focus")})}).fail(function(){n.cardElement.trigger("focus")})}}),g=s.extend({exec:function(){var e=this,t=e.taskboard,a=t.options,n=a.columnSettings,r=e.options,o=r.column.get(n.dataStatusField);r.card.set(a.dataStatusField,o);if(a.dataOrderField)e._updateOrder(t._getColumn(o),r.newIndex);t.dataSource.sync()}}),v=t.extend({exec:function(){var e=this,t=e.taskboard,a=e.options;if(t.trigger("editCard",{card:a.card}))return;t._openPane(c({pane:"Edit"},a))}}),C=t.extend({exec:function(){var e=this,t=e.taskboard,a=e.options;if(t.trigger("editCard",{card:null}))return;t.dataSource.cancelChanges();t._openPane(c({pane:"Create"},a))}}),k=t.extend({exec:function(){var e=this,t=e.options,a=e.taskboard;a._openPane({pane:t.value,card:t.card,cardElement:t.cardElement,column:t.column,columnElement:t.columnElement})}}),y=t.extend({exec:function(){var e=this,t=e.taskboard;t._closePane();t.dataSource.cancelChanges()}}),_=t.extend({exec:function(){var e=this,t=e.options.value,a=e.taskboard,n=a.options,r=n.search,o=r.operator,s=r&&r.fields||[n.dataTitleField,n.dataDescriptionField],i;i=e._buildFilters(s,o,t);a.dataSource.filter(i)},_buildFilters:function(e,t,a){var n=e.map(function(e){return{field:e,operator:t,value:a}});return{logic:"or",filters:n}}});return c(e.ui.taskboard,{Command:t,commands:{AddColumnCommand:a,EditColumnCommand:n,DeleteColumnCommand:r,SaveColumnCommand:o,CancelEditColumnCommand:m,OpenPaneCommand:k,ClosePaneCommand:y,SelectCardCommand:p,MoveFocusCommand:f,SaveChangesCommand:b,DeleteCardCommand:h,MoveCardCommand:g,EditCardCommand:v,AddCardCommand:C,SearchCommand:_}}),window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,a){(a||t)()}),function(define){define("taskboard/pane.min",["kendo.form.min"],function(){var l=window.kendo.jQuery,e=void 0,p=window.kendo,u=l.extend,o=p.Observable,s=p.ui.Form,i=".",d=i+"kendoTaskBoardPane",c="action",b="click",t={element:"k-taskboard-pane",edit:"k-taskboard-edit-pane",preview:"k-taskboard-preview-pane",header:"k-taskboard-pane-header",headerText:"k-taskboard-pane-header-text",spacer:"k-spacer",headerActions:"k-taskboard-pane-header-actions",flatButton:"k-button k-icon-button k-button-md k-rounded-md k-button-flat k-button-flat-base",content:"k-taskboard-pane-content",footerActions:"k-taskboard-pane-actions",footerActionButtons:"k-actions k-hstack k-justify-content-end",footerButton:"k-button k-button-md k-rounded-md k-button-solid",baseButton:"k-button-solid-base",primaryButton:"k-button-solid-primary"},m=o.extend({init:function(e,t,a,n){var r=this;r.taskboard=e;r._dataItem=a;r.resources=n;r.options=u(true,{},t);r._render();r.element.on(b+d,"["+p.attr("command")+"]",r._commandClick.bind(r));o.fn.init.call(r)},headerTemplate:'<div class="#:styles.headerText#">{0}</div>'+'<span class="#:styles.spacer#"></span>'+'<div class="#:styles.headerActions#">'+'<button class="#:styles.flatButton#" title="#:messages.close#" #:kendo.attr("command")#="ClosePaneCommand">'+'<span class="k-button-icon k-icon k-i-close"></span>'+"</button>"+"</div>",buttonTemplate:'<button class="#:styles.footerButton##if(primary){# #:styles.primaryButton# # } else { # #:styles.baseButton# # } #" title="#:text#" #:kendo.attr("command")#="#:command#" #:kendo.attr("options")#="#:options#">'+'<span class="k-button-icon #:icon# #:spriteCssClass#"></span>'+'<span class="k-button-text">#:text#</span>'+"</button>",contentTemplate:"",builtinButtons:{edit:{name:"edit",icon:"edit",text:"Edit",primary:true,command:"EditCardCommand",rules:"isEditable"},delete:{name:"delete",icon:"delete",text:"Delete",command:"DeleteCardCommand",rules:"isEditable"},cancel:{name:"cancel",text:"Cancel",command:"ClosePaneCommand"},saveChanges:{name:"saveChanges",text:"Save",command:"SaveChangesCommand",primary:true,rules:"isEditable"},create:{name:"create",text:"Create",command:"SaveChangesCommand",primary:true,rules:"isEditable"}},defaultButtons:[],_render:function(){var e=this,t=m.styles,a=l("<div class='"+t.element+"'></div>"),n=l("<div class='"+t.header+"'></div>"),r=l("<div class='"+t.content+"'></div>"),o=l("<div class='"+t.footerActions+" "+t.footerActionButtons+"'></div>");e.header=n.appendTo(a);e._renderHeader();e.content=r.appendTo(a);e._renderContent();e.buttonsContainer=o.appendTo(a);e.buttonsContainer.append(e._buildButtonsHtml());e.element=a},_renderHeader:function(){var e=this,t=m.styles,a=e.options,n=a.messages,r=a.headerTemplate?a.headerTemplate:e._buildHeaderTemplate(),o=e._resources(e._dataItem);e.header.append(p.template(r)(u(true,{},{styles:t,messages:n,resources:o},e._dataItem)))},_buildHeaderTemplate:function(){var e=this;return p.format(e.headerTemplate,"#:"+e.options.dataTitleField+"#")},_renderContent:function(){var e=this,t=m.styles,a=e.options,n=a.messages,r=a.template||e.contentTemplate,o=e._resources(e._dataItem);e.content.append(p.template(r)(u(true,{},{styles:t,messages:n,resources:o},e._dataItem)))},_resources:function(c){var e=this,t={};if(!e.resources)return t;for(var u in e.resources){var a=e.resources[u];var m=a.field;var n=p.getter(m)(c);if(!n)continue;if(!a.multiple)n=[n];var r=a.dataSource.view();for(var o=0;o<n.length;o++){var s=null;var i=n[o];if(!a.valuePrimitive)i=p.getter(a.dataValueField)(i);for(var d=0;d<r.length;d++)if(r[d].get(a.dataValueField)==i){s=r[d];break}if(s!==null){var f=p.getter(a.dataColorField)(s);var l={field:a.field,title:a.title,name:a.name,text:p.getter(a.dataTextField)(s),value:i,color:f};if(a.multiple)if(t[a.field])t[a.field].push(l);else t[a.field]=[l];else t[a.field]=l}}}return t},_buildButtonsHtml:function(){var e=this,t=e.options,a=t.messages,n=t.buttons||e.defaultButtons,r=m.styles,o="";for(var s=0;s<n.length;s++){var i=n[s];i=l.isPlainObject(i)&&Object.keys(i).length===1&&i.name?i.name:i;if(typeof i==="string")i=u(true,{},e.builtinButtons[i]||{spriteCssClass:i,command:i+"Command"},{text:a[i]||i});else if(l.isPlainObject(i)&&i.name)i=u(true,i,{text:a[i.name]});if(!e._validateRules(i))continue;var d=i.icon?"k-icon k-i-"+i.icon:"";i.icon=d;i.spriteCssClass=i.spriteCssClass||"";o+=p.template(e.buttonTemplate)(u(true,{},{styles:r,messages:a,primary:false,options:null},i))}return o},_commandClick:function(e){var t=this,a=l(e.target).closest("["+p.attr("command")+"]"),n=a.attr(p.attr("command")),r=a.attr(p.attr("options")),o=t._dataItem;r=typeof r==="string"?{value:r}:r;if(!n)return;t.trigger(c,{command:n,options:u({card:o},r)})},_validateRules:function(e){var t=this,a=t.options.states,n=e.rules?e.rules.split(";"):[];if(!n.length)return true;for(var r=0;r<n.length;r++)if(!a[n[r]])return false;return true},destroy:function(){var e=this;e.element.off(d);e.element.remove()}}),a=m.extend({init:function(e,t,a,n){var r=this;t=u({},t.previewPane,{dataTitleField:t.dataTitleField,dataDescriptionField:t.dataDescriptionField,messages:t.messages,states:t.states});r.contentTemplate=p.format(r._contentTemplate,t.dataDescriptionField);m.fn.init.call(r,e,t,a,n);r.element.addClass(m.styles.preview)},_contentTemplate:"<p>#:{0}#</p>",defaultButtons:["delete","edit"]}),f=m.extend({init:function(e,t,a){var n=this;t=u({},t.editable,{dataTitleField:t.dataTitleField,dataDescriptionField:t.dataDescriptionField,messages:t.messages,states:t.states});n.formSettings=u(n.formSettings,{items:[{field:t.dataTitleField,label:t.messages[t.dataTitleField]},{field:t.dataDescriptionField,label:t.messages[t.dataDescriptionField]}]},t.form);m.fn.init.call(n,e,t,a);n.element.addClass(m.styles.edit)},defaultButtons:["cancel","saveChanges"],formSettings:{buttonsTemplate:""},_buildHeaderTemplate:function(){var e=this;return p.format(e.headerTemplate,e.options.messages.edit+" #:"+e.options.dataTitleField+"#")},_renderContent:function(){var e=this,t=e.options,a=m.styles,n=t.form||e.formSettings,r=p.guid(),o=l("<div></div>").attr("role","form").attr("aria-labelledby",r);e.header.find(i+a.headerText).attr("id",r);e.content.append(o);e.form=new s(o,u({},n,{formData:e._dataItem}));e.form.element.find("input").trigger("focus")}}),n=f.extend({init:function(e,t,a,n,r){var o=this,s=t.columnSettings.dataStatusField,i=e.columnsDataSource.view().at(0),c=r?r[s]:i[s],d=u({},a);a=e.dataSource.add();a.set(t.dataStatusField,c);for(var l in d)a.set(l,d[l]);f.fn.init.call(o,e,t,a,n)},_buildHeaderTemplate:function(){var e=this;return p.format(e.headerTemplate,e.options.messages.createNewCard)},defaultButtons:["cancel","create"]});return u(p.ui.taskboard,{Pane:m,panes:{Preview:a,Edit:f,Create:n}}),u(true,p.ui.taskboard.Pane,{styles:t}),window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,a){(a||t)()}),function(define){define("taskboard/keyboard.min",["kendo.core.min"],function(){var s=window.kendo.jQuery,e=void 0,t=window.kendo,a=t.Observable,r=s.extend,l,n="."+"kendoKeboardManager",o="keydown",i="action",d=a.extend({init:function(e){var t=this;t.register={};t.element=e;t._attachEvents();a.fn.init.call(t)},registerShortcut:function(e,t,a){var n=this;if(!n.register[e])n.register[e]=[];if(t.keyCode&&isNaN(t.keyCode)&&t.keyCode.toUpperCase)t.keyCode=t.keyCode.toUpperCase().charCodeAt(0);n.register[e].push({shortcut:r({keyCode:null,ctrlKey:false,shiftKey:false,altKey:false},t),options:a})},_attachEvents:function(){var e=this,t=e._handler.bind(e);e.element.on(o+n,t)},_handler:function(e){var t=this,a=s(e.target),n,r;for(var o in t.register)if(a.is(o)){n=t.register[o];r=t._getAction(n,e);if(r){t._trigger(r,e);break}}},_trigger:function(e,t){var a=this,n=s(t.target);if(e.command)a.trigger(i,r({},t,{command:e.command,options:r({},{target:n},e.options)}));if(e.handler)e.handler(t)},_getAction:function(e,t){var a=this;for(var n=0;n<e.length;n++)if(a._compareShortcut(e[n].shortcut,t))return e[n].options},_compareShortcut:function(e,t){var a=this;for(var n in e){var r=false;switch(n){case"ctrlKey":r=e[n]!==a._getShortcutModifier(t);break;default:r=e[n]!==t[n];break}if(r)return false}return true},_getShortcutModifier:function(e){var t=navigator.platform.toUpperCase().indexOf("MAC")>=0;return t?e.metaKey:e.ctrlKey},destroy:function(){var e=this;e.element.off(n)}});return r(t.ui.taskboard,{KeyboardManager:d}),window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,a){(a||t)()}),function(define){define("kendo.taskboard.min",["./taskboard/toolbar.min","./taskboard/column.min","./taskboard/card.min","./taskboard/cardmenu.min","./taskboard/commands.min","./taskboard/pane.min","./taskboard/keyboard.min","kendo.data.min"],function(){var e={id:"taskboard",name:"TaskBoard",category:"web",description:"The TaskBoard widget displays cards.",depends:["data","sortable","dialog","form","menu","toolbar"]},t={wrapper:"k-taskboard",header:"k-taskboard-header",content:"k-taskboard-content",toolbar:"k-taskboard-toolbar k-toolbar-flat",columnsContainer:"k-taskboard-columns-container",card:"k-taskboard-card",column:"k-taskboard-column",selected:"k-state-selected",disabled:"k-state-disabled",ignoreDrag:"k-taskboard-drag-ignore"},a=function(e){e.preventDefault()},i=window.kendo.jQuery,b=void 0,d=window.kendo,n=d.ui.Widget,s=d.data.DataSource,l=i.extend,c=d.ui,o=Array.isArray,h=i.isPlainObject,g="_generic",u=".",v="move",C="moveStart",k="moveEnd",r="select",y="execute",m="action",f="change",_="change",x="dataBinding",S="dataBound",w,E,T,F,B,D,I="columnsDataBinding",M="columnsDataBound",p=n.extend({init:function(e,t){var a=this;n.fn.init.call(a,e,t);e=a.wrapper=a.element;a._sortableIdentifier=a.element.attr("id")||d.guid();a._wrapper();a._columnsDataSource();a._initResources();a._dataSource();a._initToolbar();a._initCardMenu();a._initKeyboard();if(a.options.autoBind)a.load();d.notify(a)},events:[v,C,k,f,y,r,x,S,I,M,"editCard","saveCard","deleteCard","editColumn","saveColumn","deleteColumn"],options:{name:"TaskBoard",autoBind:true,height:600,width:"100%",toolbar:true,dataStatusField:"status",dataTitleField:"title",dataDescriptionField:"description",dataCategoryField:"category",dataOrderField:null,cardMenu:true,editable:true,selectable:true,reorderable:true,previewPane:true,search:{operator:"contains"},dataSource:[],columns:[],columnSettings:{dataStatusField:"status",dataTextField:"text",dataOrderField:null},resources:[],messages:{edit:"Edit",createNewCard:"Create new card",create:"Create",search:"Search",previewCard:"Preview card",addCard:"Add card",editCard:"Edit card",deleteCard:"Delete Card",addColumn:"Add column",editColumn:"Edit column",deleteColumn:"Delete column",close:"Close",cancel:"Cancel",delete:"Delete",saveChanges:"Save changes",title:"Title:",description:"Description:",newColumn:"New column",deleteColumnConfirm:"Are you sure you want to delete this column?",deleteCardConfirm:"Are you sure you want to delete this card?"}},items:function(){var e=this,t=i([]);for(var a in e._columns)i.merge(t,e._columns[a].cards());return t},itemsByStatus:function(e){var t=this,a=t._getColumn(e).cards();return a},itemsByColumn:function(e){var t=this,a=t._getColumnByElement(e);if(a)return a.cards()},load:function(){var e=this,t=[];e._progress(true);t.push(e.columnsDataSource.fetch());for(var a in e.resources)t.push(e.resources[a].dataSource.fetch());i.when.apply(null,t).then(e.dataSource.read.bind(e.dataSource))},dataItem:function(e){var t=this,a=t.dataSource,n;e=i(e);n=e.attr(d.attr("uid"));return a.getByUid(n)},columnDataItem:function(e){var t=this,a=t.columnsDataSource,n;e=i(e);n=e.attr(d.attr("uid"));return a.getByUid(n)},columns:function(){var e=this,t=i([]);for(var a in e._columns)i.merge(t,e._columns[a].element);return t},columnByStatus:function(e){return this._getColumn(e).element},select:function(e,t){var a=this;if(!e)return a.element.find(u+p.styles.card+u+p.styles.selected).eq(0);e=i(e);t=t!==false;if(t)a.element.find(u+p.styles.card+u+p.styles.selected).removeClass(p.styles.selected);e.toggleClass(p.styles.selected,t)},previewCard:function(e){var t=this,a=t.options,n=t._extendExecArgs({target:e});if(a.previewPane)t._openPane(l({pane:"Preview"},n))},editCard:function(e){var t=this,a=t.options,n;e=i(e);n=t._extendExecArgs({target:e});if(a.editable)t._openPane(l({pane:"Edit"},n))},saveCard:function(){var e=this;e.dataSource.sync()},deleteCard:function(e){var t=this,a=t.dataItem(e);t.dataSource.remove(a);t.dataSource.sync()},addCard:function(e){var t=this,a=t.options,n={card:e};if(a.editable)t._openPane(l({pane:"Create"},n))},addColumn:function(e,t){var a=this,n=l(true,{},a.options.columnSettings,{messages:a.options.messages,states:a._buildStates(),sortableIdentifier:a._sortableIdentifier}),r,o,s;if(isNaN(e)&&!t){t=e;e=null}o=a.columnsDataSource._createNewModel(t);e=isNaN(e)||e===null?a.columnsDataSource.data().length:e;s=a.columns().eq(e);a.columnsDataSource.insert(e,o);r=new c.taskboard.NewColumn(n,o);if(isNaN(e)||!s.length)a.columnsContainer.append(r.element);else s.before(r.element);r.bind(m,a.executeCommand.bind(a))},editColumn:function(e){var t=this;e=i(e);t._getColumnByElement(e).edit()},saveColumn:function(){var e=this;e.columnsDataSource.sync()},deleteColumn:function(e){var t=this,a=t.columnDataItem(e);t.columnsDataSource.remove(a);t.columnsDataSource.sync()},registerShortcut:function(e,t,a){var n=this;n.keyboardManager.registerShortcut(e,t,a)},enable:function(e,t){e=i(e);e.toggleClass(p.styles.disabled,t===false);e.attr("aria-disabled",t===false)},enableByColumn:function(e,a){var n=this;e=i(e);n.itemsByColumn(e).each(function(e,t){n.enable(t,a)})},readOnly:function(e,t){e=i(e);t=t!==false;e.find("["+d.attr("command")+"]").toggleClass(p.styles.disabled,t);e.find("a,button").toggleClass(p.styles.disabled,t);e.toggleClass(p.styles.ignoreDrag,t);e.attr("aria-readonly",t)},readOnlyByColumn:function(e,a){var n=this;e=i(e);n.itemsByColumn(e).each(function(e,t){n.readOnly(t,a)})},setDataSource:function(e){var t=this;t.options.dataSource=e;t._dataSource();if(t.options.autoBind)t.dataSource.read()},setColumnsDataSource:function(e){var t=this;t.options.columns=e;t._columnsDataSource();if(t.options.autoBind)t.columnsDataSource.fetch(function(){t._renderCards(t.dataSource.view())})},_getColumn:function(e){return this._columns[e]},_getColumnByElement:function(e){var t=this;e=i(e);for(var a in t._columns)if(t._columns[a].element[0]===e[0])return t._columns[a]},_openPane:function(e){var t=this,a=new c.taskboard.panes[e.pane](t,l({},t.options,{states:t._buildStates()}),e.card,t.resources,e.column),n,r;if(t.pane)t._closePane();t.pane=a;t.content.after(t.pane.element);t.content.css("margin-right",t.pane.element.outerWidth()-parseInt(t.content.css("paddingRight"),10));t.pane.bind(m,t.executeCommand.bind(t));t.pane.keyboardManager=r=new c.taskboard.KeyboardManager(t.pane.element);r.bind(m,t.executeCommand.bind(t));r.registerShortcut("*",{keyCode:d.keys.ESC},{command:"ClosePaneCommand"});r.registerShortcut("*",{keyCode:d.keys.ENTER},{command:"SaveChangesCommand",options:{card:t.pane._dataItem}});n=t.pane.element.find("input");if(!n.length)n=t.pane.element.find("button");setTimeout(function(){n.eq(0).trigger("focus")},0)},_closePane:function(){var e=this;if(e.pane){e.pane.keyboardManager.destroy();e.pane.unbind(m);e.pane.destroy();delete e.pane;e.content.css("margin-right","")}},_wrapper:function(){var e=this,t=e.options,a=p.styles,n="<div class='"+a.header+"'></div>",r="<div class='"+a.content+"'></div>",o="<div class='"+a.columnsContainer+"'></div>";e.element.addClass(a.wrapper).width(t.width).height(t.height).attr("role","application");e.header=i(n).appendTo(e.element);e.content=i(r).appendTo(e.element);e.columnsContainer=i(o).appendTo(e.content)},_initToolbar:function(){var e=this,t=p.styles,a=e.options,n=i("<div class='"+t.toolbar+"'></div>"),r=o(a.toolbar)?{items:a.toolbar}:a.toolbar;if(a.toolbar===false)return;r=l({},r,{taskboard:this,messages:a.messages,action:e.executeCommand.bind(e),states:e._buildStates()});e.header.append(n);e.toolbar=new c.taskboard.ToolBar(n,r)},_buildStates:function(){var e=this;return{isEditable:e._isEditable(),isReorderable:e._isReorderable(),isSelectable:e._isSelectable(),isReadOnly:!e._isReorderable()&&!e._isEditable(),isDisabled:!e._isReorderable()&&!e._isEditable()&&!e._isSelectable(),isSearchable:e._isSearchable(),notLocalColumns:!(e.columnsDataSource.transport instanceof d.data.LocalTransport),isRtl:d.support.isRtl(e.wrapper)}},_isSearchable:function(){return!!this.options.search},_isEditable:function(){return!!this.options.editable},_isReorderable:function(){return!!this.options.reorderable},_isSelectable:function(){return!!this.options.selectable},executeCommand:function(e){var t=this,a=e.command,n=l({taskboard:this},h(e.options)?t._extendExecArgs(e.options):{value:e.options}),r=c.taskboard.commands[a]&&new c.taskboard.commands[a](n);if(!t.trigger(y,e))if(r)r.exec();else window.console.warn(d.format("Trying to use {0} command, but such is not available in the kendo.ui.taskboard.commands namespace!",a))},_extendExecArgs:function(a){var e=this,t=a.draggableEvent?a.item:a.target,n,r,o,s;if(a.card)t=e.items().filter(function(e,t){return i(t).attr(d.attr("uid"))===a.card.get("uid")});if(!t||!(t&&t.length))return a;n=a.columnElement||(t.is(u+p.styles.column)?t:t.parents(u+p.styles.column));o=e.columnsDataSource.getByUid(n.data(d.ns+"uid"));r=t.is(u+p.styles.card)?t:t.closest(u+p.styles.card);s=e.dataSource.getByUid(r.data(d.ns+"uid"));return l(a,{card:s,cardElement:r.length?r:b,column:o,columnElement:n.length?n:b})},_select:function(e,t){var a=this;if(t===null)t=true;if(!a.trigger(r,{card:e})){a.select(e,t);a.previewCard(e)}},_columnsDataSource:function(){var e=this,t=e.options,a=t.columnSettings,n=t.columns;n=o(n)?{data:n}:n;if(a.dataOrderField&&!n.sort)n.sort={field:a.dataOrderField,dir:"asc"};if(!n.schema){var r={};r[a.dataStatusField]={type:"string",defaultValue:function(){return d.guid().split("-")[0]}};r[a.dataTextField]={type:"string"};if(a.dataOrderField)r[a.dataOrderField]={type:"number"};n.schema={model:{fields:r}}}if(e.columnsDataSource&&e._columnsChangeHandler){e.columnsDataSource.unbind(f,e._columnsChangeHandler);e.columnsDataSource.unbind(f,e._columnsErrorHandler)}else{e._columnsChangeHandler=e._columnsDataSourceChange.bind(e);e._columnsErrorHandler=e._error.bind(e)}e.columnsDataSource=s.create(n).bind(f,e._columnsChangeHandler).bind(_,e._columnsErrorHandler)},_columnsDataSourceChange:function(e){var t=this,a=t.columnsDataSource.view(),n=l(true,{},t.options.columnSettings,{messages:t.options.messages,states:t._buildStates(),sortableIdentifier:t._sortableIdentifier}),r=n.dataStatusField;if(e.action&&e.action!=="sync")return;if(t.trigger(I,e))return;t._progress(true);t._columns={};t.columnsContainer.html("");for(var o=0;o<a.length;o++){var s=a[o];var i=s[r]||g;var d;d=t._columns[i]=new c.taskboard.Column(n,s);t.columnsContainer.append(d.element);d.bind(m,t.executeCommand.bind(t));d.bind(v,t._move.bind(t));d.bind(k,t._moveEnd.bind(t));d.bind(C,t._moveStart.bind(t));d.bind(f,t._changeOrder.bind(t));t._tabindex(d.element)}if(e.action==="sync"||e.action===b)t._renderCards(t.dataSource.view());t._progress(false);t.trigger(M,e)},_move:function(e){this.trigger(v,this._extendExecArgs(e))},_moveEnd:function(e){this.trigger(k,this._extendExecArgs(e))},_moveStart:function(e){this.trigger(C,this._extendExecArgs(e))},_changeOrder:function(e){this.trigger(f,this._extendExecArgs(e))},_dataSource:function(){var e=this,t=e.options,a=t.dataSource;a=o(a)?{data:a}:a;if(t.dataOrderField&&!a.sort)a.sort={field:t.dataOrderField,dir:"asc"};if(!a.schema){var n={};n[t.dataStatusField]={type:"string"};n[t.dataTitleField]={type:"string"};n[t.dataDescriptionField]={type:"string"};n[t.dataCategoryField]={type:"string"};if(t.dataOrderField)n[t.dataOrderField]={type:"number"};a.schema={model:{fields:n}}}if(e.dataSource&&e._changeHandler){e.dataSource.unbind(f,e._changeHandler);e.dataSource.unbind(_,e._errorHandler)}else{e._changeHandler=e._change.bind(e);e._errorHandler=e._error.bind(e)}e.dataSource=s.create(a).bind(f,e._changeHandler)},_change:function(e){var t=this;if(e.action&&e.action!=="sync")return;if(t.trigger(x,e))return;t._progress(true);t._clearColumns();t._renderCards(t.dataSource.view());t._closePane();t.trigger(S,e);t._progress(false)},_error:function(){this._progress(false)},_renderCards:function(e){var t=this;for(var a=0;a<e.length;a++)t._renderCard(e[a])},_renderCard:function(e){var t=this,a=l({},t.options,{states:t._buildStates()}),n=a.dataStatusField,r=e[n]||g;if(r&&t._columns[r]){e=new c.taskboard.Card(a,e,t.resources);t._columns[r].addCard(e.element);t._tabindex(e.element)}},_clearColumns:function(){var e=this;for(var t in e._columns)e._columns[t].empty()},_initCardMenu:function(){var e=this,t=e.options,a=o(t.cardMenu)?{items:t.cardMenu}:t.cardMenu;a=l({},{messages:t.messages,target:e.columnsContainer,filter:".k-taskboard-card-menu-button",action:e.executeCommand.bind(e),showOn:"click",alignToAnchor:true,states:e._buildStates()},a);if(t.cardMenu===false)return;e.cardMenu=new c.taskboard.CardMenu("<ul></ul>",a)},_initResources:function(){var e=this,t=e.options.resources;for(var a=0;a<t.length;a++)e._addResource(t[a])},_addResource:function(e){var t=this;if(!t.resources)t.resources={};t.resources[e.field]={field:e.field,name:e.name,title:e.title||e.field,dataTextField:e.dataTextField||"text",dataValueField:e.dataValueField||"value",dataColorField:e.dataColorField||"color",valuePrimitive:e.valuePrimitive===false?false:true,multiple:e.multiple||false,dataSource:t._resourceDataSource(e.dataSource)}},_resourceDataSource:function(e){var t=o(e)?{data:e}:e,a=d.data.DataSource.create(t);return a},_progress:function(e){var t=this;d.ui.progress(t.element,e)},_initKeyboard:function(){var e=this;e.keyboardManager=new c.taskboard.KeyboardManager(e.element);e.keyboardManager.bind(m,e.executeCommand.bind(e));e._registerShortcuts()},_registerShortcuts:function(){var e=this,t=e._buildStates();if(t.isEditable){e.keyboardManager.registerShortcut(u+p.styles.column,{keyCode:d.keys.DELETE},{command:"DeleteColumnCommand"});e.keyboardManager.registerShortcut(u+p.styles.column,{keyCode:"e",ctrlKey:true},{command:"EditColumnCommand",handler:a});e.keyboardManager.registerShortcut(u+p.styles.column,{keyCode:"a",ctrlKey:true},{command:"AddCardCommand",handler:a});e.keyboardManager.registerShortcut(u+p.styles.column+" *",{keyCode:d.keys.ESC},{command:"CancelEditColumnCommand"});e.keyboardManager.registerShortcut(u+p.styles.card,{keyCode:d.keys.DELETE},{command:"DeleteCardCommand"});e.keyboardManager.registerShortcut(u+p.styles.card,{keyCode:"e",ctrlKey:true},{command:"EditCardCommand",handler:a})}if(t.isSelectable)e.keyboardManager.registerShortcut(u+p.styles.card,{keyCode:d.keys.ENTER},{command:"SelectCardCommand",handler:a});e.keyboardManager.registerShortcut(u+p.styles.card,{keyCode:d.keys.UP},{command:"MoveFocusCommand",options:{value:"up"},handler:a});e.keyboardManager.registerShortcut(u+p.styles.card,{keyCode:d.keys.DOWN},{command:"MoveFocusCommand",options:{value:"down"},handler:a});e.keyboardManager.registerShortcut(u+p.styles.card,{keyCode:d.keys.LEFT},{command:"MoveFocusCommand",options:{value:"left"},handler:a});e.keyboardManager.registerShortcut(u+p.styles.card,{keyCode:d.keys.RIGHT},{command:"MoveFocusCommand",options:{value:"right"},handler:a});e.keyboardManager.registerShortcut(u+p.styles.column,{keyCode:d.keys.LEFT},{command:"MoveFocusCommand",options:{value:"left"},handler:a});e.keyboardManager.registerShortcut(u+p.styles.column,{keyCode:d.keys.RIGHT},{command:"MoveFocusCommand",options:{value:"right"},handler:a});e.keyboardManager.registerShortcut(u+p.styles.column,{keyCode:d.keys.DOWN},{command:"MoveFocusCommand",options:{value:"down"},handler:a})},destroy:function(){var e=this;if(e._columnsChangeHandler){e.columnsDataSource.unbind(f,e._columnsChangeHandler);e.columnsDataSource.unbind(f,e._columnsErrorHandler)}if(e._changeHandler){e.dataSource.unbind(f,e._changeHandler);e.dataSource.unbind(_,e._errorHandler)}for(var t in e._columns)e._columns[t].destroy();if(e.toolbar)e.toolbar.destroy();if(e.cardMenu)e.cardMenu.destroy();if(e.keyboardManager)e.keyboardManager.destroy();if(e.pane)e.closePane();n.fn.destroy.call(e)}});return d.ui.plugin(p),l(true,p,{styles:t}),window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,a){(a||t)()});
//# sourceMappingURL=kendo.taskboard.min.js.map
