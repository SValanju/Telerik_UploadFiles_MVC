/**
 * Kendo UI v2022.2.621 (http://www.telerik.com/kendo-ui)
 * Copyright 2022 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.
 *
 * Kendo UI commercial licenses may be obtained at
 * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete
 * If you do not own a commercial license, this file shall be governed by the trial license terms.
 */
!function(define){define("kendo.grid.min",["kendo.data.min","kendo.columnsorter.min","kendo.editable.min","kendo.window.min","kendo.filtermenu.min","kendo.filtercell.min","kendo.columnmenu.min","kendo.groupable.min","kendo.pager.min","kendo.selectable.min","kendo.sortable.min","kendo.reorderable.min","kendo.resizable.min","kendo.ooxml.min","kendo.excel.min","kendo.pane.min","kendo.progressbar.min","kendo.pdf.min","kendo.dialog.min","kendo.pane.min","kendo.switch.min","kendo.html.button.min"],function(){var e={id:"grid",name:"Grid",category:"web",description:"The Grid widget displays tabular data and offers rich support for interacting with data,including paging, sorting, grouping, and selection.",depends:["data","columnsorter","sortable","html.button"],features:[{id:"grid-editing",name:"Editing",description:"Support for record editing",depends:["editable","window"]},{id:"grid-filtering",name:"Filtering",description:"Support for record filtering",depends:["filtermenu"]},{id:"grid-columnmenu",name:"Column menu",description:"Support for header column menu",depends:["columnmenu"]},{id:"grid-grouping",name:"Grouping",description:"Support for grid grouping",depends:["groupable"]},{id:"grid-filtercell",name:"Row filter",description:"Support for grid header filtering",depends:["filtercell"]},{id:"grid-paging",name:"Paging",description:"Support for grid paging",depends:["pager"]},{id:"grid-selection",name:"Selection",description:"Support for row selection",depends:["selectable"]},{id:"grid-column-reorder",name:"Column reordering",description:"Support for column reordering",depends:["reorderable"]},{id:"grid-column-resize",name:"Column resizing",description:"Support for column resizing",depends:["resizable"]},{id:"grid-mobile",name:"Grid adaptive rendering",description:"Support for adaptive rendering",depends:["dialog","pane","switch"]},{id:"grid-excel-export",name:"Excel export",description:"Export grid data as Excel spreadsheet",depends:["excel"]},{id:"grid-pdf-export",name:"PDF export",description:"Export grid data as PDF",depends:["pdf","drawing","progressbar"]}]},a,E=window.kendo.jQuery,R=void 0,D=window.kendo,b=D.ui,m=D.data.DataSource,l=D.data.ObservableObject,o=D.support.tbodyInnerHtml,u=D._activeElement,n=b.Widget,z=D._outerWidth,_=D._outerHeight,d=D.keys,M=E.isPlainObject,T=E.extend,v=E.map,A=E.grep,p=Array.isArray,F=E.inArray,c=Array.prototype.push,f=D.isFunction,h=E.isEmptyObject,s=E.contains,g=Math,I=".",w="progress",C="error",y="k-hierarchy-cell",S=":not(.k-group-cell):not(["+D.attr("virtual")+"]):not(.k-hierarchy-cell:not(:has(.k-icon.k-i-collapse,.k-icon.k-i-expand))):visible",i="tbody>tr:not(.k-grouping-row):not(.k-detail-row):not(.k-group-footer) > td:not(.k-group-cell):not(.k-hierarchy-cell)",q="tr:not(.k-footer-template):visible",P=":not(.k-group-cell):not(.k-detail-cell):not(.k-hierarchy-cell):visible",W="tr:not(.k-grouping-row):not(.k-detail-row):not(.k-footer-template):not(.k-group-footer):visible",V="col:not(.k-group-col, .k-hierarchy-col)",B="th.k-header:not(.k-group-cell):not(.k-hierarchy-cell)",t=".k-grid.k-widget",k=".kendoGrid",O="k-grid-content-locked",G="k-group-cell",N="edit",U="beforeEdit",K="save",j="remove",$="detailInit",Q="filterMenuInit",J="columnMenuInit",Y="filterMenuOpen",X="columnMenuOpen",Z="cellClose",ee="change",te="columnHide",re="columnShow",r="saveChanges",ie="dataBound",ae="detailExpand",le="detailCollapse",oe="itemchange",ne="page",se="paging",de="scroll",ce="sync",ue="loadStart",fe="loadEnd",pe="k-state-focused",he=":kendoFocusable",ge="k-state-selected",me="k-checkbox",ve="input[data-role='checkbox']."+me,ke="k-grid-norecords",be="k-link",_e="k-icon",we="k-sort-order",Ce="k-sorted",ye="k-header-column-menu",Se="k-grid-filter",Te="k-grid-content-sticky",xe="k-grid-header-sticky",He="k-grid-footer-sticky",Re="k-grid-no-left-border",Ie="resize",Ee="columnResize",De="columnReorder",Ae="columnLock",Fe="columnUnlock",Le="columnStick",ze="columnUnstick",Me="rowReorder",qe="navigate",Pe="click",We="mousedown",Ve="height",Be="tabIndex",Oe="function",Ge="string",Ne="bottom",Ue="container-for",Ke="field",je="input",$e="incell",Qe="inline",Je="uid",Ye=1,Xe="colSpan",Ze="overflow",et="hidden",tt="sort",rt="group-sort",it="Are you sure you want to delete this record?",at="No records available.",lt="Delete",ot="Cancel",nt="Collapse",st="Expand",dt="aria-label",ct=/(\}|\#)/gi,ut=/#/gi,ft="[\\x20\\t\\r\\n\\f]",pt=new RegExp("(\\s*left\\s*:\\s*\\d*px;?)*","ig"),ht=new RegExp("(\\s*right\\s*:\\s*\\d*px;?)*","ig"),gt=new RegExp("(^|"+ft+")"+"(k-group-cell|k-hierarchy-cell)"+"("+ft+"|$)"),mt=new RegExp("(^|"+ft+")"+"(k-filter-row)"+"("+ft+"|$)"),vt='<button type="button" class="#=className#" #=attr#>#=text#</button>',kt='<input class="'+me+' k-checkbox-md k-rounded-md" data-role="checkbox" aria-label="Select row" aria-checked="false" type="checkbox">',bt='<input class="'+me+' k-checkbox-md k-rounded-md" data-role="checkbox" aria-label="Select all rows" aria-checked="false" type="checkbox">',_t='<span class="k-icon k-i-reorder"></span>',wt='<span class="k-cell-inner"><span class="k-link"><span class="k-column-title">#=text#</span></span></span>',Ct=false,yt=D.support.browser,St=yt.msie&&yt.version===11,Tt=/Mac OS/.test(navigator.userAgent),xt={content:"k-content",widget:"k-widget",scrollContainer:"k-scroll-container",headerCellInner:"k-cell-inner"};if(b.Pager)a=b.Pager.extend({init:function(e,t){b.Pager.fn.init.call(this,e,T(true,{},t));this.dataSource.options.useRanges=true;this.dataSource._omitPrefetch=true},options:{name:"GroupsPager"},totalPages:function(){var e=this;return Math.ceil((e._collapsedTotal()||0)/(e.pageSize()||1))},_collapsedTotal:function(){var e=this.dataSource;return e?e.groupsTotal(true)||0:0}});var Ht=n.extend({init:function(e,t){var r=this;n.fn.init.call(r,e,t);r._refreshHandler=r.refresh.bind(r);r.setDataSource(t.dataSource);r.wrap()},setDataSource:function(e){var t=this;if(t.dataSource)t.dataSource.unbind(ee,t._refreshHandler);t.dataSource=e;t.dataSource.bind(ee,t._refreshHandler);t.dataSource.options.useRanges=true;t.dataSource.options.virtual=true},options:{name:"VirtualScrollable",itemHeight:E.noop,prefetch:true,maxScrollHeight:25e4},events:[se,ne,de,ue,fe],destroy:function(){var e=this;n.fn.destroy.call(e);e.dataSource.unbind(ee,e._refreshHandler);e.wrapper.add(e.verticalScrollbar).off(k);clearTimeout(e._timeout);if(e._scrollingTimeout)clearTimeout(e._scrollingTimeout);if(e.drag){e.drag.destroy();e.drag=null}e.wrapper=e.element=e.verticalScrollbar=null;e._refreshHandler=null},wrap:function(){var t=this,e=D.support.scrollbar()+1,r=t.element,i;r.css({width:"auto",overflow:"hidden"}).css(Ct?"padding-left":"padding-right",e);t.content=r.children().first();i=t.wrapper=t.content.wrap('<div class="k-virtual-scrollable-wrap"/>').parent().on("DOMMouseScroll"+k+" mousewheel"+k,t._wheelScroll.bind(t));t._wrapper();if(D.support.kineticScrollNeeded||D.support.touch){t.wrapper.css("touch-action","none");t.drag=new D.UserEvents(t.wrapper,{global:true,allowSelection:true,start:function(e){e.sender.capture()},move:function(e){t.verticalScrollbar.scrollTop(t.verticalScrollbar.scrollTop()-e.y.delta);D.scrollLeft(i,D.scrollLeft(i)-e.x.delta);e.preventDefault()}})}t.verticalScrollbar=E('<div class="k-scrollbar k-scrollbar-vertical" />').css({width:e}).appendTo(r).on("scroll"+k,t._scroll.bind(t))},_wrapper:function(){var e=this;if(St){e.wrapper.css({"overflow-y":de});e.element.css(Ct?"padding-left":"padding-right",0)}},_wheelScroll:function(e){if(e.ctrlKey)return;var t=this.verticalScrollbar,r=t.scrollTop(),i=D.wheelDeltaY(e);if(i&&!(i>0&&r===0)&&!(i<0&&r+t[0].clientHeight==t[0].scrollHeight)){e.preventDefault();this.verticalScrollbar.scrollTop(r+-i)}},_scroll:function(e){var t=this,r=!t.options.prefetch,i=e.currentTarget.scrollTop,a=t.dataSource,l=t.itemHeight,o=a.skip()||0,c=t._rangeStart||o,n=t.element.innerHeight(),s=!!(t._scrollbarTop&&t._scrollbarTop>i),d=g.max(g.floor(i/l),0),u=s?g.ceil(n/l):g.floor(n/l),f=g.max(d+u,0);if(t._preventScroll){t._preventScroll=false;return}t._prevScrollTop=t._scrollTop;t._scrollTop=i-c*l;t._scrollbarTop=i;t._scrolling=r;if(!t._fetch(d,f,s))t.wrapper[0].scrollTop=t._scrollTop;t.trigger(de);if(r){if(t._scrollingTimeout)clearTimeout(t._scrollingTimeout);t._scrollingTimeout=setTimeout(function(){t._scrolling=false;t._page(t._rangeStart,t.dataSource.take())},100)}},scrollToTop:function(){this._scrollTo(0)},scrollToBottom:function(){var e=this.verticalScrollbar;this._scrollTo(e[0].scrollHeight-e.height())},_scrollWrapperToTop:function(){this.wrapper.scrollTop(0)},_scrollWrapperToBottom:function(){this.wrapper.scrollTop(this.wrapper[0].scrollHeight)},_scrollWrapperOnColumnResize:function(){var e=this;var t=this.wrapper;var r=t.scrollTop();if(t[0].scrollWidth>t[0].clientWidth){if(!e._wrapperScrolled&&r||e._isScrolledToBottom()){t.scrollTop(r+D.support.scrollbar());e._scrollTop=t.scrollTop();e._wrapperScrolled=true}}else if(e._wrapperScrolled){if(!e._isWrapperScrolledToBottom()){t.scrollTop(r-D.support.scrollbar());e._scrollTop=t.scrollTop()}e._wrapperScrolled=false}},_scrollTo:function(e){var t=this;var r=t.verticalScrollbar;if(r.scrollTop()!==e)t._preventScroll=true;t.wrapper.scrollTop(e);t._scrollTop=t.wrapper.scrollTop();r.scrollTop(e);t._scrollbarTop=r.scrollTop()},_isScrolledToTop:function(){return this.verticalScrollbar.scrollTop()===0},_isScrolledToBottom:function(){var e=this.verticalScrollbar;var t=e.scrollTop();return t>0&&t>=parseInt(e[0].scrollHeight-e.height(),10)},_isWrapperScrolledToBottom:function(){var e=this.wrapper;return e.scrollTop()>=parseInt(e[0].scrollHeight-e.height(),10)},itemIndex:function(e){var t=this._rangeStart||this.dataSource.skip()||0;return t+e},position:function(e){var t=this._rangeStart||this.dataSource.skip()||0;var r=this.dataSource.pageSize();var i;if(e>t)i=e-t;else i=t-e-1;return i>r?r:i},scrollIntoView:function(e){var t=this.wrapper[0];var r=t.clientHeight;var i=!this._isScrolledToBottom()?this._scrollTop||t.scrollTop:t.scrollTop;var a=e[0].offsetTop;var l=e[0].offsetHeight;if(i>a)this.verticalScrollbar[0].scrollTop-=r/2;else if(a+l>=i+r)this.verticalScrollbar[0].scrollTop+=r/2},_fetch:function(e,t,c){var r=this,i=r.dataSource,a=r.itemHeight,l=i.take(),o=r._rangeStart||i.skip()||0,n=g.floor(e/l)*l,s=false,u=.33;var d=r.verticalScrollbar;var f=yt.webkit?1:0;var p=i._isGroupPaged()?i.groupsTotal(true):i.total();if(e<o){s=true;o=g.max(0,t-l);r._scrollTop=d.scrollTop()-o*a;r._page(o,l)}else if(t>=o+l&&!c){s=true;o=g.min(e,p-l);if(d.scrollTop()>=d[0].scrollHeight-d[0].offsetHeight-f)r._scrollTop=r.wrapper[0].scrollHeight-r.wrapper[0].offsetHeight;else if(r.dataSource._isGroupPaged()&&e>=p-l)r._scrollTop=r.wrapper[0].scrollHeight-r.wrapper[0].offsetHeight-(r._scrollTop-r._prevScrollTop);else r._scrollTop=a;r._page(o,l)}else if(!r._fetching&&r.options.prefetch){if(e<n+l-l*u&&e>l)i.prefetch(n-l,l,E.noop);if(t>n+l*u)i.prefetch(n+l,l,E.noop)}return s},fetching:function(){return this._fetching},_page:function(e,t,r){var i=this,a=!i.options.prefetch,l=i.dataSource,o=l._isGroupPaged();r=f(r)?r:E.noop;if(i.trigger(se,{skip:e,take:t}))return;clearTimeout(i._timeout);i._fetching=true;i._rangeStart=e;if(o&&l._groupRangeExists(e,e+t)||!o&&l.inRange(e,t)){i.trigger(ue);l.range(e,t,function(){i.trigger(fe);r();i.trigger(ne)},"page")}else{if(!a)i.trigger(ue);i._timeout=setTimeout(function(){if(!i._scrolling){if(a)i.trigger(ue);l.range(e,t,function(){i.trigger(fe);r();i.trigger(ne)})}},100)}},repaintScrollbar:function(e){var t=this,r="",i=t.options.maxScrollHeight,a=t.dataSource,l=!D.support.kineticScrollNeeded?D.support.scrollbar():0,o=t.wrapper[0],n,s,d;var c=t._isScrolledToBottom();d=t.itemHeight=t.options.itemHeight()||0;var u=o.scrollWidth>o.offsetWidth?l:0;n=(a._isGroupPaged()?a.groupsTotal(true):a.total())*d+u;for(s=0;s<g.floor(n/i);s++)r+='<div style="width:1px;height:'+i+'px"></div>';if(n%i)r+='<div style="width:1px;height:'+n%i+'px"></div>';t.verticalScrollbar.html(r);if(c&&!t._isScrolledToBottom()&&!t.dataSource._isGroupPaged())t.scrollToBottom();if(typeof t._scrollTop!=="undefined"&&!!e){o.scrollTop=t._scrollTop;t._scrollWrapperOnColumnResize()}},refresh:function(e){var t=this,r=t.dataSource,i=t._rangeStart;var a=(e||{}).action;var l=t._isScrolledToBottom()||!a||a!==oe&&a!==j&&a!==ce;t.trigger(fe);clearTimeout(t._timeout);t.repaintScrollbar(l);if(t.drag)t.drag.cancel();if(typeof i!=="undefined"&&!t._fetching){if(!a||a!==ce&&a!==oe&&a!=="expandGroup")t._rangeStart=r.skip();if(r.page()===1&&(!a||a!==ce&&a!==oe&&a!=="expandGroup"&&a!=="collapseGroup"))t.verticalScrollbar[0].scrollTop=0}t._fetching=false}});function Rt(e,t){return"["+D.attr(e)+"="+t+"]"}function It(e){return new Array(e+1).join('<td class="k-group-cell">&nbsp;</td>')}function Et(e){var t,r=" ";if(e){if(typeof e===Ge)return e;for(t in e)if(e[t]!=="")r+=t+'="'+e[t]+'"'}return r}var Dt={create:{text:"Add new record",className:"k-grid-add",iconClass:"k-icon k-i-plus"},cancel:{text:"Cancel changes",className:"k-grid-cancel-changes",iconClass:"k-icon k-i-cancel"},save:{text:"Save changes",className:"k-grid-save-changes",iconClass:"k-icon k-i-check"},destroy:{text:"Delete",className:"k-grid-delete",iconClass:"k-icon k-i-close"},edit:{text:"Edit",className:"k-grid-edit",iconClass:"k-icon k-i-edit"},update:{text:"Update",className:"k-grid-update",iconClass:"k-icon k-i-check",themeColor:"primary"},canceledit:{text:"Cancel",className:"k-grid-cancel",iconClass:"k-icon k-i-cancel"},excel:{text:"Export to Excel",className:"k-grid-excel",iconClass:"k-icon k-i-file-excel"},pdf:{text:"Export to PDF",className:"k-grid-pdf",iconClass:"k-icon k-i-file-pdf"},search:{text:"Search...",className:"k-grid-search"}};function At(e,t){E("th, th .k-grid-filter, th .k-link",e).add(document.body).css("cursor",t)}function Ft(e,t,r,i,a){var l=t;t=E();a=a||1;for(var o=0;o<a;o++)t=t.add(e.eq(l+o));if(typeof r=="number")t[i?"insertBefore":"insertAfter"](e.eq(r));else t.appendTo(r)}function Lt(e,t,r){return E(e).add(t).find(r)}function zt(e,t,r){var i,a,l,o;r=!p(r)?[r]:r;for(i=0,a=r.length;i<a;i++){l=r[i];if(M(l)&&l.click){o=l.name||l.text;t.on(Pe+k,".k-grid-"+(o||"").replace(/\s/g,""),{commandName:o},l.click.bind(e))}}}function Mt(e,i,a,l,o){return v(e,function(e){e=typeof e===Ge?{field:e}:e;var t;e.parentIds=o;if(!Kt(e)||a){e.attributes=Fr(e.attributes);e.footerAttributes=Fr(e.footerAttributes);e.headerAttributes=Fr(e.headerAttributes);t=true}var r=D.guid();if(l&&!e.locked)e.locked=l;e.headerAttributes=T({headers:o},e.headerAttributes);if(!e.headerAttributes.id){e.headerAttributes=T({id:r},e.headerAttributes);e.uid=r}else r=e.headerAttributes.id;if(e.columns)e.columns=Mt(e.columns,i,t,e.locked,o?o+" "+r:r);return T({encoded:i,hidden:t,locked:l},e)})}function qt(e,t){var r=[];Pt(e,t,r);return r[r.length-1]}function Pt(e,t,r){r=r||[];for(var i=0;i<t.length;i++)if(e===t[i])return true;else if(t[i].columns){var a=r.length;r.push(t[i]);if(!Pt(e,t[i].columns,r))r.splice(a,r.length-a);else return true}return false}function Wt(e,t){Vt(e,t,t)}function Vt(e,t,r){var i=r?zr:Fr;e.hidden=!t;e.attributes=i(e.attributes);e.footerAttributes=i(e.footerAttributes);e.headerAttributes=i(e.headerAttributes)}function Bt(e,t){Ot(e);var r=e._hideByMedia;Vt(e,t,r?e.matchesMedia:t)}function Ot(e){e.matchesMedia=Gt(e)}function Gt(e){return e&&($t(e.media)||!$t(e.media)&&D.matchesMedia(e.media))}function Nt(){return this.style.display!=="none"}function Ut(e){return E(e)[0].style.display!=="none"}function Kt(e){return x([e]).length>0}function x(e){return A(e,function(e){var t=!e.hidden&&e.matchesMedia!==false;if(t&&e.columns)t=x(e.columns).length>0;return t})}function jt(e){var t=[];var r;for(var i=0;i<e.length;i++){r=e[i];if(!$t(r.media)){if(!$t(r.minScreenWidth))throw new Error("Using 'media' and 'minScreenWidth' options at the same time is not supported.");t.push(r)}if(r.columns)t=t.concat(jt(r.columns))}return t}function $t(e){return typeof e==="undefined"}function Qt(e){return E(e).map(function(){return this.toArray()})}function Jt(e,t,r){var i=er(H(t));var a=er(_r(t));var l=e.rowSpan;if(r)if(i>a)e.rowSpan=l-(i-a)||1;else e.rowSpan=l+(a-i);else if(i>a)e.rowSpan=l+(i-a);else e.rowSpan=l-(a-i)||1}function Yt(e,t){for(var r=0;r<e.length;r++)if(e[r].field==t)return e[r]}function Xt(e,t,r,i,a,l,o,n){var s=er(e);var d=er([t]);if(s>d){var c=new Array(o+1).join('<th class="k-group-cell k-header" scope="col">&nbsp;</th>');var u=l.children(":not(.k-filter-row)");E(new Array(s-d+1).join("<tr>"+c+"</tr>")).insertAfter(u.last())}pr(l,s-d);tr(r,i,a,l,n)}function Zt(e,t,r){r=r||0;var i;var a;var l=t;t=L(t);var o={};var n=e.find(">tr:not(.k-filter-row)");var s=function(){var e=E(this);return!e.hasClass("k-group-cell")&&!e.hasClass("k-hierarchy-cell")};for(var d=0,c=t.length;d<c;d++){i=rr(t[d],l);if(!o[i.row])o[i.row]=n.eq(i.row).find(".k-header").filter(s);a=o[i.row].eq(i.cell);a.attr(D.attr("index"),r+d)}return t.length}function er(e){var t=1;var r=0;for(var i=0;i<e.length;i++)if(e[i].columns){var a=er(e[i].columns);if(a>r)r=a}return t+r}function tr(e,t,r,i,a){var l=lr(e[0],t);var o=r.find(">tr:not(.k-filter-row)").eq(l.row).children("th.k-header");var n=E();var c=l.cell;var s;for(s=0;s<e.length;s++)n=n.add(o.eq(c+s));i.find(">tr:not(.k-filter-row)").eq(l.row)[a](n);var d=[];for(s=0;s<e.length;s++)if(e[s].columns)d=d.concat(e[s].columns);if(d.length)tr(d,t,r,i,a)}function rr(e,t,r,i){var a;var l;r=r||0;i=i||{};i[r]=i[r]||0;for(l=0;l<t.length;l++){if(t[l]==e){a={cell:i[r],row:r};break}else if(t[l].columns){a=rr(e,t[l].columns,r+1,i);if(a)break}i[r]++}return a}function ir(e,t,r,i){var a;var l=!!r.locked;var o;do{a=e[t];t+=i?1:-1;o=!!a.locked}while(a&&t>-1&&t<e.length&&a!=r&&!a.columns&&o===l);return a}function ar(e,t,r,i,a){if(t.columns){t=t.columns;return t[i?0:t.length-1]}else{var l=qt(t,e);var o;if(l)o=l.columns;else o=e;var n=F(t,o);if(n===0&&i)n++;else if(n==o.length-1&&!i||!r.locked&&!t.columns&&!i)n--;else if(n>0||n===0&&!i)n++;var s=F(r,o);t=ir(o,n,r,s>n);var d=F(t,a);if(t.columns&&(!d||d===o.length-1))return null;if(t&&t!=r&&t.columns)return ar(e,t,r,i,a)}return null}function lr(e,t,r,i){var a;var l;r=r||0;i=i||{};i[r]=i[r]||0;for(l=0;l<t.length;l++){if(t[l]==e){a={cell:i[r],row:r};break}else if(t[l].columns){a=lr(e,t[l].columns,r+1,i);if(a)break}if(!t[l].hidden)i[r]++}return a}function or(e){var t=sr(H(e));return t.concat(sr(_r(e)))}function nr(e,t,r,i){var a=e[r];var l=e[i];var o=qt(a,t);t=o?o.columns:t;return F(l,t)}function sr(e){var t=[];var r=[];for(var i=0;i<e.length;i++){t.push(e[i]);if(e[i].columns)r=r.concat(e[i].columns)}if(r.length)t=t.concat(sr(r));return t}function dr(e){var t=0;var r;for(var i=0;i<e.length;i++){r=e[i];if(r.columns)t+=dr(r.columns);else if(r.hidden)t++}return t}function cr(e){var t=0;for(var r=0,i=e.length;r<i;r++)if(!e[r].hidden)t+=parseInt(e[r].width,10);return t}function ur(e){var t,r=0;for(var i=0,a=e.length;i<a;i++){t=e[i].style.width;if(t&&t.indexOf("%")==-1)r+=parseInt(t,10)}return r}function fr(e,t){var r=e.find("tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)");var i;for(var a=0;a<r.length;a++){i=r[a].rowSpan;if(i>1)r[a].rowSpan=i-t||1}}function pr(e,t){var r=e.find("tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)");for(var i=0;i<r.length;i++)r[i].rowSpan+=t}function hr(e){var t=e.find("tr:not(.k-filter-row)");var r=t.filter(function(){return!E(this).children().length}).remove().length;var i=t.find("th:not(.k-group-cell,.k-hierarchy-cell)");for(var a=0;a<i.length;a++)if(i[a].rowSpan>1)i[a].rowSpan-=r;return t.length-r}function gr(e,t,r,i,a){var l,o,n,s=[];for(l=0,n=e.length;l<n;l++){o=r[i]||[];o.push(t.eq(a+l));r[i]=o;if(e[l].columns)s=s.concat(e[l].columns)}if(s.length)gr(s,t,r,i+1,a+e.length)}function mr(e,t,r){e.css({left:t,right:r})}function vr(e,t,r){e[t]=e[t]||{};e[t][r]=e[t][r]||""}function kr(e,t,r,i){vr(e,t,r);if(e[t][r]!=="")e[t][r]+=" "+i;else e[t][r]=i}function br(e,t,r,i){vr(e,t,r);e[t][r]=e[t][r].replace(i,"")}function H(e){return A(e,function(e){return e.locked})}function _r(e){return A(e,function(e){return!e.locked})}function wr(e){return A(e,function(e){return e.sticky&&!e.locked})}function Cr(e){return A(e,function(e){return e.sticky&&!e.locked&&Kt(e)})}function yr(e){return A(e,function(e){return!e.locked&&Kt(e)})}function Sr(e){return A(e,function(e){return e.locked&&Kt(e)})}function Tr(e){var t=[];for(var r=0;r<e.length;r++){if(e[r].hidden)continue;if(e[r].columns)t=t.concat(Tr(e[r].columns));else t.push(e[r])}return t}function xr(e){var t=[];for(var r=0;r<e.length;r++)if(e[r].columns)t=t.concat(e[r].columns);return t}function Hr(e){var t=xr(e);t=t.filter(function(e){return!e.hidden});return t}function L(e){var t=[];for(var r=0;r<e.length;r++){if(!e[r].columns){t.push(e[r]);continue}t=t.concat(L(e[r].columns))}return t}function Rr(e){var t=[];e=L(e);for(var r=0;r<e.length;r++)if(typeof e[r]==="string")t.push(e[r]);else if(e[r].field)t.push(e[r].field);return t}function Ir(e){var t=e.find(">tr:not(.k-filter-row)");var r=function(){var e=E(this);return!e.hasClass("k-group-cell")&&!e.hasClass("k-hierarchy-cell")};var i=E();if(t.length>1)i=t.find("th").filter(r).filter(function(){return this.rowSpan>1});i=i.add(t.last().find("th").filter(r));var a=D.attr("index");i.sort(function(e,t){e=E(e);t=E(t);var r=e.attr(a);var i=t.attr(a);if(r===R)r=E(e).index();if(i===R)i=E(t).index();r=parseInt(r,10);i=parseInt(i,10);return r>i?1:r<i?-1:0});return i}function Er(e){var c=e.closest("table");var t=E().add(e);var r=e.closest("tr");var i=c.find("tr:not(.k-filter-row)");var a=i.index(r);if(a>0){var u=i.eq(a-1);var l=u.find("th:not(.k-group-cell,.k-hierarchy-cell)").filter(function(){return!E(this).attr("rowspan")});var o=0;var n=r.find("th:not(.k-group-cell,.k-hierarchy-cell)").index(e);var f=e.prevAll(":not(.k-group-cell,.k-hierarchy-cell)").filter(function(){return this.colSpan>1});for(var s=0;s<f.length;s++)o+=f[s].colSpan||1;n+=Math.max(o-1,0);o=0;for(s=0;s<l.length;s++){var d=l.eq(s);if(d.attr("data-colspan"))o+=d[0].getAttribute("data-colspan");else o+=1;if(n>=s&&n<o){t=Er(d).add(t);break}}}return t}function Dr(e){var c=e.closest("thead");var t=E().add(e);var r=e.closest("tr");var i=c.find("tr:not(.k-filter-row)");var u=i.index(r)+e[0].rowSpan;var a=D.attr("colspan");if(u<=i.length-1){var l=r.next();var o=e.prevAll(":not(.k-group-cell,.k-hierarchy-cell)");var n;o=o.filter(function(){return!this.rowSpan||this.rowSpan===1});var s=0;for(n=0;n<o.length;n++)s+=parseInt(o.eq(n).attr(a),10)||1;var f=l.find("th:not(.k-group-cell,.k-hierarchy-cell)");var d=parseInt(e.attr(a),10)||1;n=0;while(n<d){l=f.eq(n+s);t=t.add(Dr(l));var p=parseInt(l.attr(a),10);if(p>1)d-=p-1;n++}}return t}function Ar(e,t,r,i){var a,l=e;if(i)e.empty();if(o)e[0].innerHTML=r;else{a=document.createElement("div");a.innerHTML="<table><tbody>"+r+"</tbody></table>";e=a.firstChild.firstChild;t[0].replaceChild(e,l[0]);e=E(e)}return e}function Fr(e){e=e||{};var t=e.style;if(!t)t="display:none";else{t=t.replace(/display:[^;]*/i,"display:none");if(!t.match(/display:/i))t=t.replace(/(.*)?/i,"display:none;$1")}return T({},e,{style:t})}function Lr(e){e=e||{};var t=e.style||"";return t.indexOf("display:none")!==-1}function zr(e){e=e||{};var t=e.style;if(t)e.style=t.replace(/(display\s*:\s*none\s*;?)*/gi,"");return e}function Mr(e,t,r,i){var a=e.find(">colgroup"),l,o=v(t,function(e){l=e.width;if(l&&parseInt(l,10)!==0)return D.format('<col style="width:{0}"/>',typeof l===Ge?l:l+"px");return"<col />"});if(r||a.find(".k-hierarchy-col").length)o.splice(0,0,'<col class="k-hierarchy-col" />');if(a.length)a.remove();a=E(new Array(i+1).join('<col class="k-group-col">')+o.join(""));if(!a.is("colgroup"))a=E("<colgroup/>").append(a);e.prepend(a)}function qr(e,t){var r=0;var i,a;var l=e.find("th:not(.k-group-cell)");for(i=0,a=t.length;i<a;i++)if(t[i].locked){l.eq(i).insertBefore(l.eq(r));l=e.find("th:not(.k-group-cell)");r++}}function Pr(e){var t={},r,i,a;for(i=0,a=e.length;i<a;i++){r=e[i];t[r.value]=r.text}return t}function Wr(e,t,r,i){var a=r&&r.length&&M(r[0])&&"value"in r[0],l=a?Pr(r)[e]:e;l=l!=null?l:"";return t?D.format(t,l):i===false?l:D.htmlEncode(l)}function Vr(e,t,r){var i=0,a,l=e[i];while(l){a=r?true:l.style.display!=="none";if(a&&!gt.test(l.className)&&--t<0){l.style.display=r?"":"none";break}l=e[++i]}}function Br(e,t){var r=0,i=e.length,a,l;for(;r<i;r+=1){l=e.eq(r);if(l.is(".k-grouping-row,.k-detail-row")){a=l.children(":not(.k-group-cell):first,.k-detail-cell").last();a.attr("colspan",parseInt(a.attr("colspan"),10)-1)}else{if(l.hasClass("k-grid-edit-row")&&(a=l.children(".k-edit-container")[0])){a=E(a);a.attr("colspan",parseInt(a.attr("colspan"),10)-1);a.find("col").eq(t).remove();l=a.find("tr").first()}Vr(l[0].cells,t,false)}}}function Or(e){var t=[];var r;for(var i=0;i<e.length;i++){r=e[i];if(!("field"in r&&"value"in r&&"items"in r))break;t.push(r);if(r.hasSubgroups)t=t.concat(Or(r.items))}return t}function Gr(e){var t=[];var r;for(var i=0;i<e.length;i++){r=e[i];if(!("field"in r&&"value"in r&&"items"in r))break;if(r.hasSubgroups)t=t.concat(Gr(r.items));t.push(r.aggregates)}return t}function Nr(e,t){var r=0,i=e.length,a,l,o;for(;r<i;r+=1){l=e.eq(r);if(l.is(".k-grouping-row,.k-detail-row")){a=l.children(":not(.k-group-cell):first,.k-detail-cell").last();a.attr("colspan",parseInt(a.attr("colspan"),10)+1)}else{if(l.hasClass("k-grid-edit-row")&&(a=l.children(".k-edit-container")[0])){a=E(a);a.attr("colspan",parseInt(a.attr("colspan"),10)+1);Mr(a.find(">form>table"),x(o),false,0);l=a.find("tr").first()}Vr(l[0].cells,t,true)}}}function Ur(e,t,r){r=r||1;var i,a,l;for(a=0,l=e.length;a<l;a++){i=e.eq(a).children().last();i.attr("colspan",parseInt(i.attr("colspan"),10)+r);i=t.eq(a).children().last();i.attr("colspan",parseInt(i.attr("colspan"),10)-r)}}function Kr(e){var t,r,i=0;var a=e.find(">colgroup>col");for(t=0,r=a.length;t<r;t+=1)i+=parseInt(a[t].style.width,10);return i}var jr=D.ui.DataBoundWidget.extend({init:function(e,t,r){var i=this;t=p(t)?{dataSource:t}:t;n.fn.init.call(i,e,t);if(r)i._events=r;Ct=D.support.isRtl(e);i._element();i._aria();i._columns(E.extend(true,[],i.options.columns));if(i._foreignKeyPromises)E.when.apply(null,i._foreignKeyPromises).then(function(){i._foreignKeyPromises=null;i._continueInit()});else i._continueInit()},_continueInit:function(){var e=this;e._dataSource();e._stickyColumns();e._tbody();e._thead();e._groupable();e._toolbar();e._pageable();e._setContentHeight();e._templates();e._navigatable();e._selectable();e._clipboard();e._details();e._editable();e._attachCustomCommandsEvent();e._adaptiveColumns();e._minScreenSupport();if(e.options.autoBind)e.dataSource.fetch();else{e._group=e._groups()>0;e._footer()}if(e.lockedContent){e.wrapper.addClass("k-grid-lockedcolumns");e._resizeHandler=function(){e.resize()};E(window).on("resize"+k,e._resizeHandler)}D.notify(e)},events:[ee,"dataBinding","cancel",ie,ae,le,$,Q,Y,J,X,N,U,K,j,r,Z,Ee,De,re,te,Ae,Fe,Le,ze,Me,qe,"page","sort","filter","group","groupExpand","groupCollapse","kendoKeydown"],setDataSource:function(e){var t=this;var r=t.options.scrollable;var i;t.options.dataSource=e;t._dataSource();t._pageable();t._thead();if(r)if(r.virtual){i=t.content.find(">.k-virtual-scrollable-wrap");D.scrollLeft(i,ii(i,Ct))}else{i=t.tbody;D.scrollLeft(t.content,ii(i,Ct))}if(t.options.groupable)t._groupable();if(t.virtualScrollable)t.virtualScrollable.setDataSource(t.options.dataSource);if(t.options.navigatable)t._navigatable();if(t.options.selectable)t._selectable();if(t.options.autoBind)t.dataSource.fetch();else t._footer()},options:{name:"Grid",columns:[],toolbar:null,autoBind:true,filterable:false,scrollable:true,sortable:false,selectable:false,allowCopy:false,navigatable:false,pageable:false,persistSelection:false,editable:false,encodeTitles:false,groupable:false,rowTemplate:"",altRowTemplate:"",search:false,noRecords:false,dataSource:{},height:null,resizable:false,reorderable:false,columnMenu:false,detailTemplate:null,columnResizeHandleWidth:3,mobile:"",loaderType:"loadingPanel",messages:{editable:{cancelDelete:ot,confirmation:it,confirmDelete:lt},commands:{create:Dt.create.text,cancel:Dt.cancel.text,save:Dt.save.text,destroy:Dt.destroy.text,edit:Dt.edit.text,update:Dt.update.text,canceledit:Dt.canceledit.text,excel:Dt.excel.text,pdf:Dt.pdf.text,search:Dt.search.text},noRecords:at,expandCollapseColumnHeader:"",groupHeader:"Press ctrl + space to group",ungroupHeader:"Press ctrl + space to ungroup",itemsSelected:"items selected",dragHandleLabel:"Drag row"},width:null},destroy:function(){var e=this,t;e._angularItems("cleanup");e._destroyColumnAttachments();n.fn.destroy.call(e);if(this._navigatableTables){this._navigatableTables.off(k);this._navigatableTables=null;this._headertables=null}if(e._resizeHandler)E(window).off("resize"+k,e._resizeHandler);if(e.pager&&e.pager.element)e.pager.destroy();if(e.timer)clearTimeout(e.timer);if(e._progressTimeOut)clearTimeout(e._progressTimeOut);if(e._collapseGroupsTimeOut)clearTimeout(e._collapseGroupsTimeOut);if(e._endlessFetchTimeOut)clearTimeout(e._endlessFetchTimeOut);e.pager=null;e._destroyGroupable();if(e.options.reorderable===true||e.options.reorderable&&e.options.reorderable.columns)e.wrapper.data("kendoReorderable").destroy();if(e._hasReorderableRows())e.tbody.data("kendoReorderable").destroy();if(e.selectable&&e.selectable.element){e.selectable.destroy();e.clearArea();e._selectedIds=null;if(e.copyHandler){e.wrapper.off("keydown",e.copyHandler);e.unbind(e.copyHandler)}if(e.updateClipBoardState){e.unbind(e.updateClipBoardState);e.updateClipBoardState=null}if(e.clearAreaHandler)e.wrapper.off("keyup",e.clearAreaHandler)}e.selectable=null;if(e.resizable){e.resizable.destroy();if(e._resizeUserEvents){if(e._resizeHandleDocumentClickHandler)E(document).off("click",e._resizeHandleDocumentClickHandler);e._resizeUserEvents.destroy();e._resizeUserEvents=null}e.resizable=null}e._destroyVirtualScrollable();if(e.editableUserEvents){e.editableUserEvents.destroy();e.editableUserEvents=null}if(e._lockedContentUserEvents){e._lockedContentUserEvents.destroy();e._lockedContentUserEvents=null}e._destroyEditable();if(e.dataSource){e.dataSource.unbind(ee,e._refreshHandler).unbind(w,e._progressHandler).unbind(C,e._errorHandler).unbind(tt,e._clearSortClasses);e._refreshHandler=e._progressHandler=e._errorHandler=e._sortHandler=null}t=e.element.add(e.wrapper).add(e.table).add(e.thead).add(e.wrapper.find(">.k-grid-toolbar"));if(e.content)t=t.add(e.content).add(e.content.find(">.k-virtual-scrollable-wrap"));if(e.lockedHeader)e._removeLockedContainers();if(e.pane)e.pane.destroy();if(e._isMobile){e.wrapper.off("transitionend"+k);e.wrapper.off("contextmenu"+k)}if(e.minScreenResizeHandler)E(window).off("resize",e.minScreenResizeHandler);e._detachColumnMediaResizeHandler();if(e._draggableInstance&&e._draggableInstance.element)e._draggableInstance.destroy();e._draggableInstance=null;if(e._draggableRowsInstance&&e._draggableRowsInstance.element)e._draggableRowsInstance.destroy();e._draggableRowsInstance=null;t.off(k);D.destroy(e.wrapper);e.rowTemplate=e.altRowTemplate=e.lockedRowTemplate=e.lockedAltRowTemplate=e.detailTemplate=e.footerTemplate=e.groupFooterTemplate=e.lockedGroupFooterTemplate=e.noRecordsTemplate=null;e.scrollables=e.thead=e.tbody=e.element=e.table=e.content=e.footer=e.wrapper=e.lockedTable=e.lockedContent=e.lockedHeader=e.lockedFooter=e._groupableClickHandler=e._groupRows=e._setContentWidthHandler=null},getOptions:function(){var e=this.options;e.dataSource=null;var t=T(true,{},this.options);t.columns=D.deepExtend([],this.columns);var r=this.dataSource;var i=r.options.data&&r._data;r.options.data=null;t.dataSource=E.extend(true,{},r.options);r.options.data=i;t.dataSource.data=i;t.dataSource.page=r.page();t.dataSource.filter=E.extend(true,{},r.filter());t.dataSource.pageSize=r.pageSize();t.dataSource.sort=r.sort();t.dataSource.group=r.group();t.dataSource.aggregate=r.aggregate();if(t.dataSource.transport)t.dataSource.transport.dataSource=null;if(t.pageable&&t.pageable.pageSize)t.pageable.pageSize=r.pageSize();t.$angular=R;return t},setOptions:function(e){var t=this.getOptions();D.deepExtend(t,e);if(!e.dataSource)t.dataSource=this.dataSource;else if(e.dataSource.filter)t.dataSource.filter=e.dataSource.filter;var r=this.wrapper;var i=this._events;var a=this.element;this.destroy();this.options=null;if(this._isMobile){var l=r.closest(D.roleSelector("pane")).parent();l.after(r);l.remove();r.removeClass("k-grid-mobile")}if(r[0]!==a[0]){r.before(a);r.remove()}a.empty();this.init(a,t,i);this._setEvents(t)},items:function(){if(this.lockedContent)return this._items(this.tbody).add(this._items(this.lockedTable.children("tbody")));else return this._items(this.tbody)},_items:function(e,t){return e.children().filter(function(){var e=E(this);return(t?!e.hasClass("k-detail-row"):!e.hasClass("k-grouping-row"))&&!e.hasClass("k-detail-row")&&!e.hasClass("k-group-footer")})},dataItems:function(){var e=D.ui.DataBoundWidget.fn.dataItems.call(this);if(this.lockedContent){var t=e.length,r=new Array(2*t);for(var i=t;--i>=0;)r[i]=r[i+t]=e[i];e=r}return e},_destroyColumnAttachments:function(){var e=this;e.resizeHandle=null;if(!e.thead)return;this.angular("cleanup",function(){return{elements:e.thead.get()}});e.thead.add(e.lockedHeader).find("th").each(function(){var e=E(this),t=e.data("kendoFilterMenu"),r=e.data("kendoColumnSorter"),i=e.data("kendoColumnMenu");if(t)t.destroy();if(r)r.destroy();if(i)i.destroy()})},_attachCustomCommandsEvent:function(){var e=this,t=L(e.columns||[]),r,i,a;for(i=0,a=t.length;i<a;i++){r=t[i].command;if(r)zt(e,e.wrapper,r)}},_aria:function(){var e=this.element.attr("id")||"aria";if(e)this._cellId=e+"_active_cell"},_element:function(){var e=this,t=e.element;if(!t.is("table")){if(e.options.scrollable)t=e.element.find("> .k-grid-content > table");else t=e.element.children("table");if(!t.length)t=E("<table />").appendTo(e.element)}e.table=t.attr("role",e._hasDetails()?"treegrid":"grid");e._wrapper()},_createResizeHandle:function(e,t){var r=this;var c=r.options.columnResizeHandleWidth;var u=r.options.scrollable;var i=r.resizeHandle;var f=c*3/2;var a=0;var l;var p;var h;var g;var o;var m;var n;var s;var d;var v;if(i&&r.lockedContent&&i.data("th")[0]!==t[0]){i.off(k).remove();i=null}if(!i){i=r.resizeHandle=E('<div class="k-resize-handle"><div class="k-resize-handle-inner"></div></div>');e.append(i)}s=D.scrollLeft(e);if(Ct&&(yt.mozilla||yt.webkit&&yt.version>=85))s=s*-1;n=parseFloat(e.css("borderLeftWidth"));d=t.offset().left+s-parseFloat(t.css("marginLeft"))-(e.offset().left+n);if(!Ct)d+=t[0].offsetWidth;else if(u){a=d<=s?f:0;l=t.closest(".k-grid-header-wrap, .k-grid-header-locked");m=l[0].scrollWidth-l[0].offsetWidth;o=parseFloat(l.css("marginLeft"));p=yt.msie?2*D.scrollLeft(l)+n-o-a:0;h=-a;g=yt.mozilla?n-o-a:0;d-=h+g+p}v=t.offset().top-parseFloat(t.css("marginTop"))-(e.offset().top+parseFloat(e.css("borderTopWidth")));i.css({top:v,left:d-f,height:_(t),width:c*3-a}).data("th",t).show();i.off("dblclick"+k).on("dblclick"+k,function(){r._autoFitLeafColumn(parseInt(t.attr(D.attr("index")),10))})},_positionColumnResizeHandle:function(){var i=this,e=i.lockedHeader?i.lockedHeader.find("thead").first():E();i.thead.add(e).on("mousemove"+k,"tr:not(.k-filter-row) > th",function(e){var t=typeof e.buttons!=="undefined"?e.buttons:e.which||e.button;var r=E(this);if(r.hasClass("k-group-cell")||r.hasClass("k-hierarchy-cell"))return;if(typeof t!=="undefined"&&t!==0)return;if(r[0].hasAttribute(D.attr(Xe)))return;i._createResizeHandle(r.closest("div"),r)})},_resizeHandleDocumentClick:function(e){if(E(e.target).closest(".k-column-active").length)return;E(document).off(e);this._resetResizeHandleHeader();this._hideResizeHandle()},_resetResizeHandleHeader:function(){var e;if(!this.resizeHandle)return;e=E(this.resizeHandle).data("th");if(e){e.find(I+be).find(I+_e).show();e.find(I+we).show();e.find(I+ye).show();e.find(I+Se).show()}},_hideResizeHandle:function(){if(this.resizeHandle){this.resizeHandle.data("th").removeClass("k-column-active");if(this.lockedContent&&!this._isMobile){this.resizeHandle.off(k).remove();this.resizeHandle=null}else this.resizeHandle.hide()}},_positionColumnResizeHandleTouch:function(){var r=this,e=r.lockedHeader?r.lockedHeader.find("thead").first():E();r._resizeUserEvents=new D.UserEvents(e.add(r.thead),{filter:"th:not(.k-group-cell):not(.k-hierarchy-cell)",threshold:10,minHold:500,hold:function(e){var t=E(e.target);e.preventDefault();if(r.resizeHandle){r.resizeHandle.data("th").removeClass("k-column-active");r._resetResizeHandleHeader()}t.addClass("k-column-active");t.find(I+be).find(I+_e).hide();t.find(I+we).hide();t.find(I+ye).hide();t.find(I+Se).hide();r._createResizeHandle(t.closest("div"),t);if(!r._resizeHandleDocumentClickHandler)r._resizeHandleDocumentClickHandler=r._resizeHandleDocumentClick.bind(r);E(document).on("click",r._resizeHandleDocumentClickHandler)}})},resizeColumn:function(e,t){var r=this;var i=!!e.locked;var c=!!e.hidden;var u=this.options;var f=!D.support.mobileOS?D.support.scrollbar():0;var a=i?F(e,Sr(Tr(r.columns))):F(e,yr(Tr(r.columns)));var l=i?r.lockedTable:r.table;var p=r.footer||E();var h=i?r.lockedHeader.find("table"):r.thead.closest("table");var o=e.minResizableWidth||10;var n=i?z(l.find("tbody")):z(r.tbody);var s;if(c){e.width=t>o?t:o;return}if(r.footer&&r.lockedContent)p=i?r.footer.children(".k-grid-footer-locked"):r.footer.children(".k-grid-footer-wrap");if(u.scrollable)s=h.find("col:not(.k-group-col,.k-hierarchy-col)").eq(a).add(l.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col)").eq(a)).add(p.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col)").eq(a));else s=l.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col)").eq(a);if(u.scrollable){var g=false;var m=r.wrapper.width()-f;var d=t=t>o?t:o;if(i&&n-t+d>m){d=t+(m-n-f*2);if(d<0)d=t;g=true}if(d>10&&d>=o){s.css("width",d);if(n){if(g)d=m-f*2;else d=n+(t-e.width);l.add(h).add(p).css("width",d);if(!i)r._footerWidth=d}}r._scrollVirtualWrapperOnColumnResize()}else if(t>10&&t>=o)s.css("width",t);e.width=t;r._applyLockedContainersWidth();r._syncLockedContentHeight();r._syncLockedHeaderHeight();r._updateStickyColumns()},_resizable:function(){var d=this,c=d.options,e,u,f,p,h,o=this._isMobile,k=!D.support.mobileOS?D.support.scrollbar():0,g,m,v;if(c.resizable){e=c.scrollable?d.wrapper.find(".k-grid-header-wrap").first():d.wrapper;if(o)d._positionColumnResizeHandleTouch(e);else d._positionColumnResizeHandle(e);if(d.resizable)d.resizable.destroy();d.resizable=new b.Resizable(e.add(d.lockedHeader),{handle:(!!c.scrollable?"":">")+".k-resize-handle",hint:function(e){return E('<div class="k-grid-resize-indicator" />').css({height:_(e.data("th"))+d.tbody.attr("clientHeight")})},start:function(e){v=E(e.currentTarget).data("th");if(o)d._hideResizeHandle();var t=v.closest("table"),r=E.inArray(v[0],Ir(v.closest("thead")).filter(":visible"));g=t.parent().hasClass("k-grid-header-locked");var i=g?d.lockedTable:d.table,a=d.footer||E();if(d.footer&&d.lockedContent)a=g?d.footer.children(".k-grid-footer-locked"):d.footer.children(".k-grid-footer-wrap");At(d.wrapper,"col-resize");if(c.scrollable)m=t.find("col:not(.k-group-col):not(.k-hierarchy-col)").eq(r).add(i.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col)").eq(r)).add(a.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col)").eq(r));else m=i.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col)").eq(r);var l=E.map(d.columns,function(e){return!e.hidden&&(g&&e.locked||!g&&!e.locked)?e:null});u=e.x.location;f=z(v);p=L(l)[r].minResizableWidth||10;h=g?z(i.children("tbody")):z(d.tbody);if(yt.webkit)d.wrapper.addClass("k-grid-column-resizing")},resize:function(e){var t=Ct?-1:1,r=f+e.x.location*t-u*t;if(c.scrollable){var i;if(g&&d.lockedFooter)i=d.lockedFooter.children("table");else if(d.footer)i=d.footer.find(">.k-grid-footer-wrap>table");if(!i||!i[0])i=E();var a=v.closest("table");var l=g?d.lockedTable:d.table;var o=false;var n=d.wrapper.width()-k;var s=r;if(g&&h-f+s>n){s=f+(n-h-k*2);if(s<0)s=r;o=true}if(s>10&&s>=p){m.css("width",s);if(h){if(o)s=n-k*2;else s=h+e.x.location*t-u*t;l.add(a).add(i).css("width",s);if(!g)d._footerWidth=s}}d._scrollVirtualWrapperOnColumnResize()}else if(r>10&&r>=p)m.css("width",r)},resizeend:function(){var e=z(v),t,r;At(d.wrapper,"");if(yt.webkit)d.wrapper.removeClass("k-grid-column-resizing");if(f!=e){r=d.lockedHeader?d.lockedHeader.find("thead").first().find("tr").first().add(d.thead.find("tr").first()):v.parent();var i=v.attr(D.attr("index"));if(!i)i=r.find("th:not(.k-group-cell):not(.k-hierarchy-cell)").index(v);t=L(d.columns)[i];t.width=e;d.trigger(Ee,{column:t,oldWidth:f,newWidth:e});d._applyLockedContainersWidth();d._syncLockedContentHeight();d._syncLockedHeaderHeight();d._updateStickyColumns()}d._resetResizeHandleHeader();d._hideResizeHandle();v=null}})}},_draggable:function(){var t=this,e=t.options.reorderable;if(e===true||e&&e.columns){if(t._draggableInstance)t._draggableInstance.destroy();var r=t.wrapper.children(".k-grid-header");t._draggableInstance=t.wrapper.kendoDraggable({group:D.guid(),autoScroll:true,filter:t.content?".k-grid-header:first "+B:"table:first>.k-grid-header "+B,dragstart:function(){r.children(".k-grid-header-wrap").off("scroll"+k+"scrolling").on("scroll"+k+"scrolling",function(e){if(t.virtualScrollable)D.scrollLeft(t.content.find(">.k-virtual-scrollable-wrap"),this.scrollLeft);else D.scrollLeft(t.scrollables.not(e.currentTarget),this.scrollLeft)})},dragend:function(){t._resetResizeHandleHeader();r.children(".k-grid-header-wrap").off("scroll"+k+"scrolling")},drag:function(){t._hideResizeHandle()},hint:function(e){var t=e.attr(D.attr("title"));if(t)t=D.htmlEncode(t);return E('<div class="k-reorder-clue k-drag-clue" />').html(t||e.attr(D.attr("field"))||e.text()).prepend('<span class="k-icon k-drag-status k-i-cancel"></span>')}}).data("kendoDraggable")}},_reorderable:function(){var a=this,e=a.options.reorderable;if(e===true||e&&e.columns){if(a.wrapper.data("kendoReorderable"))a.wrapper.data("kendoReorderable").destroy();a.wrapper.kendoReorderable({draggable:a._draggableInstance,dropFilter:B,dragOverContainers:function(e,t){var r=or(a.columns);return r[e].lockable!==false&&nr(r,a.columns,e,t)>-1},inSameContainer:function(e){return E(e.source).parent()[0]===E(e.target).parent()[0]&&nr(or(a.columns),a.columns,e.sourceIndex,e.targetIndex)>-1},change:function(e){var t=or(a.columns);var r=t[e.oldIndex];var i=nr(t,a.columns,e.oldIndex,e.newIndex);a.trigger(De,{newIndex:i,oldIndex:F(r,t),column:r});a.reorderColumn(i,r,e.position==="before")}})}},_reorderHeader:function(e,t,r,c){var i=this;var a=rr(e[0],i.columns);var l=rr(t,i.columns);var o;var u;var n=[];for(var f=0;f<e.length;f++)if(e[f].columns)n=n.concat(e[f].columns);if(c)u=Lt(c,c,"tr:eq("+a.row+")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)");else u=Lt(i.lockedHeader,i.thead,"tr:eq("+a.row+")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)");var s=H(e).length;var d=H([t]).length;if(n.length){if(s>0&&d===0){o="prepend";Xt(e,t,n,i.columns,i.lockedHeader.find("thead"),i.thead,this._groups(),o)}else if(s===0&&d>0){o=l.cell===0&&e[0].columns&&!t.columns&&!i._group?"prepend":"append";Xt(e,t,n,_r(i.columns),i.thead,i.lockedHeader.find("thead"),this._groups(),o)}if(t.columns||a.cell-l.cell>1||l.cell-a.cell>1){t=ar(i.columns,t,e[0],r,i.columns);if(t)if(s>0&&d===0)i._reorderHeader(n,t,r,i.thead);else if(s===0&&d>0)i._reorderHeader(n,t,r,i.lockedHead);else i._reorderHeader(n,t,r)}}else if(s!==d)Jt(u[a.cell],i.columns,s);Ft(u,a.cell,l.cell,r,e.length)},_reorderContent:function(e,c,t){var r=this;var u=E();var f=e[0];var p=x(e);var i=F(f,L(r.columns));var a=F(c,L(r.columns));var l=F(p[0],Tr(r.columns));var o=F(c,Tr(r.columns));var h=H(r.columns).length;var g=!!c.locked;var n=r.footer||r.wrapper.find(".k-grid-footer");var s,m,d;s=m=o;if(c.hidden){var v=g?H(r.columns):_r(r.columns);if(x(v).length>0){s=m=o=this._findClosestVisibleColumnIndex(v,a);d=x(v.slice(a)).length>0}else if(g){o=r.lockedTable.find("colgroup");s=r.lockedHeader.find("colgroup");m=E(r.lockedFooter).find(">table>colgroup")}else{o=r.tbody.prev();s=r.thead.prev();m=n.find(".k-grid-footer-wrap").find(">table>colgroup")}}if(r._hasFilterRow())Ft(r.wrapper.find(".k-filter-row th:not(.k-group-cell,.k-hierarchy-cell)"),i,a,t,e.length);if(l>=0)Ft(Lt(r.lockedHeader,r.thead.prev(),V),l,s,d?d:t,p.length);if(r.options.scrollable)if(l>=0&&!r._hasVirtualColumns())Ft(Lt(r.lockedTable,r.tbody.prev(),V),l,o,d?d:t,p.length);if(n&&n.length){if(l>=0)Ft(Lt(r.lockedFooter,n.find(".k-grid-footer-wrap"),">table>colgroup>col:not(.k-group-col,.k-hierarchy-col)"),l,m,d?d:t,p.length);Ft(n.find(".k-footer-template>td:not(.k-group-cell,.k-hierarchy-cell)"),i,a,t,e.length)}var k=r.tbody.children(":not(.k-grouping-row,.k-detail-row)");if(r.lockedTable){if(h>a){if(h<=i)Ur(r.lockedTable.find(">tbody>tr.k-grouping-row"),r.table.find(">tbody>tr.k-grouping-row"),e.length)}else if(h>i)Ur(r.table.find(">tbody>tr.k-grouping-row"),r.lockedTable.find(">tbody>tr.k-grouping-row"),e.length);u=r.lockedTable.find(">tbody>tr:not(.k-grouping-row,.k-detail-row)")}for(var b=0,_=k.length;b<_;b+=1)Ft(Lt(u[b],k[b],">td:not(.k-group-cell,.k-hierarchy-cell)"),i,a,t,e.length)},_findClosestVisibleColumnIndex:function(e,t){var r=x(e.slice(t)).length>0?e.slice(t):e.slice(0,t+1).reverse(),i=x(r)[0];return F(i,x(this.columns))},_autoFitLeafColumn:function(e){this.autoFitColumn(L(this.columns)[e])},_hasReorderableRows:function(){return this._hasDragHandleColumn||this.options.reorderable&&this.options.reorderable.rows},_draggableRows:function(){var i=this,a=i._checkBoxSelection||i.options.selectable&&!D.ui.Selectable.parseOptions(i.options.selectable).cell;if(i._draggableRowsInstance)i._draggableRowsInstance.destroy();i._draggableRowsInstance=i.tbody.kendoDraggable({group:"row-draggable",autoScroll:true,filter:(a?" > .k-state-selected":" > "+W)+(i._hasDragHandleColumn?" > .k-drag-cell":""),hint:function(e){var r=E('<div class="k-reorder-clue k-drag-clue"><span class="k-icon k-drag-status k-i-cancel"></span></div>');if(a&&i.select().length>1)r.append("<span>"+i.select().length+" "+i.options.messages.itemsSelected+"</span>");else{var t=e.closest(W).clone();t.find("td.k-command-cell").remove();t.find("td").each(function(e,t){r.append("<span>"+t.innerText+"&nbsp;</span>")})}return r}}).data("kendoDraggable")},_reorderableRows:function(){var a=this,l=a._checkBoxSelection||a.options.selectable&&!D.ui.Selectable.parseOptions(a.options.selectable).cell;if(a.tbody.data("kendoReorderable"))a.tbody.data("kendoReorderable").destroy();a.tbody.kendoReorderable({smartPosition:false,draggable:a._draggableRowsInstance,dragOverContainers:function(e,t){var r=true,i=E(W,a.content).eq(t);if(l)r=!i.is(".k-state-selected");return r},inSameContainer:function(e){if(l)return!E(e.target).is(".k-state-selected");return true},dropFilter:"> "+W,allowIcon:"k-i-insert-middle",orientation:"vertical",reorderDropCue:E('<div class="k-drop-hint k-drop-hint-h"><div class="k-drop-hint-start"></div><div class="k-drop-hint-line"></div></div>'),positionDropCue:function(e,t){var r=D.getOffset(t.children(S).eq(0)).left;e.css({transform:"translate(0,-50%)",left:r})},externalDraggable:function(e){var t=e.draggable;if(t)return t},change:function(e){a._triggerRowRorder(e)}})},_triggerRowRorder:function(e){var t=this,r={newIndex:e.position==="after"?e.newIndex+1:e.newIndex,oldIndex:e.oldIndex},i=e.element,a=t._checkBoxSelection||t.options.selectable&&!D.ui.Selectable.parseOptions(t.options.selectable).cell;if(a&&t.select().length>1)r=T(r,{rows:t.select()});else r=T(r,{row:i});if(!t.trigger(Me,r))t.reorderRows(a?t.select():i,r.newIndex)},reorderRows:function(e,t){var r=this,i=r.dataSource,a=r.tbody.children(W).length,l=r.dataItem(r.tbody.children(W).eq(t)),o=e.toArray().map(function(e){return r.dataItem(e)});if(!l){l=r.dataItem(r.tbody.children(W).eq(a-1));t=i.indexOf(l)+1}else t=i.indexOf(l);if(t>=0){r._rowDropping=true;i.pushMove(t,o);r._rowDropping=false}},autoFitColumns:function(e){var t=this;e=e||t.columns;for(var r=0;r<e.length;r++){var i=e[r];if(i.columns)t.autoFitColumns(i.columns);else t.autoFitColumn(i)}},autoFitColumn:function(t){var e=this,c=e.options,u=e.columns,r,i,a,l,o,f=e.lockedHeader?Ir(e.lockedHeader.find(">table>thead")).filter(Nt).length:0,n,p,h,g,m="col:not(.k-group-col):not(.k-hierarchy-col)",v="td:visible:not(.k-group-cell):not(.k-hierarchy-cell)",k,b;if(typeof t=="number")t=u[t];else if(M(t))t=A(sr(u),function(e){return e===t})[0];else t=A(sr(u),function(e){return e.field===t})[0];if(!t||!Kt(t))return;l=L(u);p=t.minResizableWidth;r=F(t,l);o=t.locked;if(o)a=e.lockedHeader.children("table");else a=e.thead.parent();i=a.find("[data-index='"+r+"']");k=i.find("a.k-header-column-menu, a.k-grid-filter");var s=o?e.lockedTable:e.table,_=e.footer||E();if(e.footer&&e.lockedContent)_=o?e.footer.children(".k-grid-footer-locked"):e.footer.children(".k-grid-footer-wrap");var w=_.find("table").first();if(e.lockedHeader&&!o)r-=f;for(var C=0;C<l.length;C++)if(l[C]===t)break;else if(l[C].hidden)r--;if(c.scrollable){n=a.find(m).eq(r).add(s.children("colgroup").find(m).eq(r)).add(w.find("colgroup").find(m).eq(r));if(!o){h=s.parent();g=D.scrollLeft(h)}}else n=s.children("colgroup").find(m).eq(r);var d=a.add(s).add(w);if(yt.safari)i.css("white-space","initial");var y=z(i);n.width("");d.css("table-layout","fixed");n.width("auto");d.addClass("k-autofitting");d.css("table-layout","");b=k.length?z(k)+z(i):z(i);var S=Math.ceil(Math.max(b,z(s.find("tr:not(.k-grouping-row)").eq(0).children(v).eq(r)),z(w.find("tr").eq(0).children(v).eq(r))))+1;if(p&&p>S)S=p;n.width(S);t.width=S;if(yt.safari)i.css("white-space","");if(c.scrollable){var T=a.find("col"),x,H=0;for(var R=0,I=T.length;R<I;R+=1){x=T[R].style.width;if(x&&x.indexOf("%")==-1)H+=parseInt(x,10);else if(T.eq(R).hasClass("k-group-col"))H+=parseInt(T.eq(R).width(),10);else{H=0;break}}if(H)d.each(function(){this.style.width=H+"px"})}d.removeClass("k-autofitting");if(g)D.scrollLeft(h,g);e.trigger(Ee,{column:t,oldWidth:y,newWidth:S});e._applyLockedContainersWidth();e._syncLockedContentHeight();e._syncLockedHeaderHeight();e._updateStickyColumns()},reorderColumn:function(e,t,r){var i=this,c=qt(t,i.columns),a=c?c.columns:i.columns,l=F(t,a),o=a[e],u=i.virtualScroll||{},n,s=!!o.locked,f=H(i.columns).length,p=A(L(i.columns),function(e){return e.groupHeaderColumnTemplate});if(l===e)return;if(!t.locked&&s&&_r(i.columns).length==1)return;if(t.locked&&!s&&f==1)return;i._hideResizeHandle();if(r===R)r=e<l;var d=[t];i._reorderHeader(d,o,r);if(i.lockedHeader){hr(i.thead);hr(i.lockedHeader)}if(o.columns){o=L(o.columns);o=o[r?0:o.length-1]}if(t.columns)d=L(t.columns);i._reorderContent(d,o,r);n=!!t.locked;n=n!=s;t.locked=s;a.splice(r?e:e+1,0,t);a.splice(l<e?l:l+1,1);i._updateLockedCols();i._updateCols();i._templates();i._updateColumnCellIndex();i._updateColumnSorters();if(p.length>0)i._renderGroupRows();i._updateTablesWidth();i._applyLockedContainersWidth();i._syncLockedHeaderHeight();i._syncLockedContentHeight();i._updateFirstColumnClass();i._updateStickyColumns();if(u.columns)i.refresh();if(!n)return;if(s)i.trigger(Ae,{column:t});else i.trigger(Fe,{column:t})},_updateColumnCellIndex:function(){var e;var t=0;if(this.lockedHeader){e=this.lockedHeader.find("thead");t=Zt(e,H(this.columns))}Zt(this.thead,_r(this.columns),t)},lockColumn:function(t){var e=this.columns;if(typeof t=="number")t=e[t];else t=A(e,function(e){return e.field===t})[0];if(!t||t.locked||t.hidden)return;if(t.sticky)this.unstickColumn(e.indexOf(t));var r=H(e).length-1;this.reorderColumn(r,t,false)},unlockColumn:function(t){var e=this.columns;if(typeof t=="number")t=e[t];else t=A(e,function(e){return e.field===t})[0];if(!t||!t.locked||t.hidden)return;var r=H(e).length;this.reorderColumn(r,t,true)},stickColumn:function(t){var e=this.columns;if(typeof t=="number")t=e[t];else t=A(e,function(e){return e.field===t})[0];if(!t||t.sticky||t.hidden)return;if(t.locked){this.unlockColumn(e.indexOf(t));if(t.locked)return}t.sticky=true;this._updateStickyColumns()},unstickColumn:function(t){var e=this.columns;if(typeof t=="number")t=e[t];else t=A(e,function(e){return e.field===t})[0];if(!t||!t.sticky||t.locked||t.hidden)return;this._removeStickyAttributes([t]);this._removeStickyStyles(wr(e));t.sticky=false;this._updateStickyColumns();if(this._anyStickyColumns()===0){this._templates();if(this._hasFilterRow())this._updateStickyFilterCells()}},cellIndex:function(e){var t=0;if(this.lockedTable&&!E.contains(this.lockedTable[0],e[0]))t=L(H(this.columns)).length;return E(e).parent().children("td:not(.k-group-cell,.k-hierarchy-cell)").index(e)+t},_modelForContainer:function(e){e=E(e);if(!e.is("tr")&&this._editMode()!=="popup")e=e.closest("tr");var t=e.attr(D.attr("uid"));return this.dataSource.getByUid(t)},_calculateColumnIndex:function(e){var t=this.cellIndex(e);var r=0;if(this._hasVirtualColumns()){r=parseInt(E(e).closest("tr").find("td").first().attr("colspan"),10);r=r>1?r-1:0}return t+r},_editable:function(){var i=this,e=i.options.editable,r=function(){var e=u(),t=i._editContainer;if(t&&t[0]&&!E.contains(t[0],e)&&t[0]!==e&&!E(e).closest(".k-animation-container").length)if(i.editable.end())i.closeCell();else i._scrollVirtualWrapper()};if(e){this.wrapper.addClass("k-editable");var t=i._editMode();if(t==="incell"){i.table.add(i.lockedTable).on("mousedown"+k,q+">"+P,function(e){var t=E(e.target);if(i._editMode()==="incell"&&t.hasClass("k-checkbox")&&t.prev().attr(D.attr("bind")))e.preventDefault()});if(e.update!==false){if(Tt)i.wrapper.on(Pe+k,".k-edit-cell > input[type='checkbox']",function(e){E(e.target).trigger("focus")}).on(Pe+k,".k-edit-cell",function(e){if(!E(e.target).is("input"))E(e.currentTarget).find("input[type='checkbox']").trigger("focus")}).on(We+k,"tr:not(.k-grouping-row) > td",function(e){var t=i._editContainer;if(t&&t[0]&&(E.contains(t[0],e.target)||t[0]===e.target))i._mousedownOnEditCell=true;else i._mousedownOnEditCell=false});i.editableUserEvents=new D.UserEvents(i.wrapper,{filter:"tr:not(.k-grouping-row) > td",allowSelection:true,tap:function(e){var t=E(e.target),r=i.lockedTable&&t.closest("table")[0]===i.lockedTable[0];i._mousedownOnEditCell=false;if(t.hasClass("k-hierarchy-cell")||t.hasClass("k-detail-cell")||t.hasClass("k-group-cell")||t.hasClass("k-edit-cell")||t.has(".k-grid-delete").length||t.closest("tbody")[0]!==i.tbody[0]&&!r||E(e.target).is(":input"))return;if(i.editable)if(i.editable.end()){E(u()).trigger("blur");i.closeCell();i.editCell(t)}else i._scrollVirtualWrapper();else i.editCell(t)}});i.wrapper.on("focusin"+k,function(){if(!E.contains(this,u())){clearTimeout(i.timer);i.timer=null}}).on("focusout"+k,function(e){var t=true;if(Tt&&i._mousedownOnEditCell||i._virtualColScroll)t=false;i._mousedownOnEditCell=false;if(t)i.timer=setTimeout(function(){r(e)},1)})}}else if(e.update!==false){i.wrapper.on(Pe+k,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-edit",function(e){var t=E(this);if(!i._belongsToGrid(t))return;e.preventDefault();i.editRow(t.closest("tr"))});if(i._isVirtualInlineEditable())i.wrapper.on("focusout"+k,"tr:not(.k-grouping-row) > td",function(){if(i.editable&&!i.editable.end())i._scrollVirtualWrapper()})}if(e.destroy!==false)i.wrapper.on(Pe+k,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-delete",function(e){var t=E(this);if(!i._belongsToGrid(t))return;e.preventDefault();e.stopPropagation();i.removeRow(t.closest("tr"))});else i.wrapper.on(Pe+k,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-delete",function(e){if(!i._belongsToGrid(E(this)))return;e.stopPropagation();if(!i._confirmation())e.preventDefault()})}},editCell:function(t){t=E(t);var r=this,e=L(r.columns)[r._calculateColumnIndex(t)],i=r._modelForContainer(t);r.closeCell();if(i&&ei(e,i)&&!e.command){if(r.trigger(U,{model:i}))return;r._attachModelChange(i);r._editContainer=t;if(r._shouldClearEditableState)r._clearEditableState();r.editable=t.addClass("k-edit-cell").kendoEditable({fields:{field:e.field,format:e.format,editor:e.editor,values:e.values},model:i,target:r,change:function(e){if(r.trigger(K,{values:e.values,container:t,model:i}))e.preventDefault()},skipFocus:(r._isVirtualIncellEditable()||r._hasVirtualColumns())&&r._editableState?true:false}).data("kendoEditable");var a=t.parent().addClass("k-grid-edit-row");if(r.lockedContent){Qr(a[0],r._relatedRow(a).addClass("k-grid-edit-row")[0]);r._syncLockedScroll()}r.trigger(N,{container:t,model:i})}},_adjustLockedHorizontalScrollBar:function(){var e=this.table,t=e.parent();var r=e[0].offsetWidth>t[0].clientWidth?D.support.scrollbar():0;this.lockedContent.height(t[0].offsetHeight-r)},_syncLockedScroll:function(){this.lockedContent[0].scrollTop=this.content[0].scrollTop;if(this.virtualScrollable)this.lockedContent[0].scrollTop=this.wrapper.find(".k-virtual-scrollable-wrap")[0].scrollTop},_syncLockedContentHeight:function(){if(this.lockedTable){if(!this.touchScroller)this._adjustLockedHorizontalScrollBar();this._adjustRowsHeight(this.table,this.lockedTable)}},_syncLockedHeaderHeight:function(){if(this.lockedHeader){var e=this.lockedHeader.children("table");var t=this.thead.parent();this._adjustRowsHeight(e,t);$r(e,t)}},_syncLockedFooterHeight:function(){if(this.lockedFooter&&this.footer&&this.footer.length)this._adjustRowsHeight(this.lockedFooter.children("table"),this.footer.find(".k-grid-footer-wrap > table"))},_destroyEditable:function(){var t=this;var e=function(){if(t.editable){var e=t.editView?t.editView.element:t._editContainer;if(e){e.off(Pe+k,".k-grid-cancel",t._editCancelClickHandler);e.off(Pe+k,".k-grid-update",t._editUpdateClickHandler)}t._detachModelChange();t.editable.destroy();t.editable=null;t._editContainer=null;t._destroyEditView();t._editableIsClosing=null}};if(t.editable)if(t._editMode()==="popup"&&!t._isMobile)if(t._editableIsClosing)t._editContainer.data("kendoWindow").bind("deactivate",e);else{t._editableIsClosing=true;t._editContainer.data("kendoWindow").bind("deactivate",e).close()}else e();if(t._confirmDialog){t._confirmDialog.close();t._confirmDialog.destroy();t._confirmDialog=null}},_destroyEditView:function(){if(this.editView){this.editView.purge();this.editView=null;this.pane.navigate("")}},_attachModelChange:function(e){var t=this;t._modelChangeHandler=function(e){t._modelChange({field:e.field,model:this})};e.bind("change",t._modelChangeHandler)},_detachModelChange:function(){var e=this,t=e._editContainer,r=e._modelForContainer(t);if(r)r.unbind(ee,e._modelChangeHandler)},closeCell:function(e){var t=this,r=t._editContainer,i,a,l;if(!r)return;l=t._modelForContainer(r);if(e&&t.trigger("cancel",{container:r,model:l}))return;t.trigger(Z,{type:e?"cancel":"save",model:l,container:r});r.removeClass("k-edit-cell");i=L(t.columns)[t._calculateColumnIndex(r)];a=r.parent().removeClass("k-grid-edit-row");if(t.lockedContent)t._relatedRow(a).removeClass("k-grid-edit-row");t._destroyEditable();t._displayCell(r,i,l);if(t._shouldClearEditableState)t._clearEditableState();t.trigger("itemChange",{item:a,data:l,ns:b});if(t.lockedContent)Qr(a.css("height","")[0],t._relatedRow(a).css("height","")[0])},_displayCell:function(e,t,r){var i=this,a={storage:{},count:0},l=T({},D.Template,i.options.templateSettings),o=D.template(i._cellTmpl(t,a),l);if(a.count>0)o=o.bind(a.storage);e.empty().html(o(r));i.angular("compile",function(){return{elements:e,data:[{dataItem:r}]}})},removeRow:function(e){if(!this._confirmation(e))return;this._removeRow(e)},_removeRow:function(e){var t=this,r,i,a,l,o=t._editMode();if(o!=="incell")t.cancelRow();e=E(e);if(t.lockedContent)e=e.add(t._relatedRow(e));e=e.hide();if(t.dataSource._isGroupPaged())t._removeGroupIfEmpty(e);r=t._modelForContainer(e);if(r&&!t.trigger(j,{row:e,model:r})){l=t.dataSource.options.schema;if(t._selectedIds&&l&&l.model){i=f(t.dataSource.options.schema.model)?t.dataSource.options.schema.model.fn.idField:t.dataSource.options.schema.model.id;a=r[i];delete t._selectedIds[a]}t.dataSource.remove(r);if(o==="inline"||o==="popup")t.dataSource.sync()}else if(o==="incell")t._destroyEditable()},_editMode:function(){var e="incell",t=this.options.editable;if(t!==true)if(typeof t=="string")e=t;else e=t.mode||e;return e},editRow:function(e){var r;var i=this;if(e instanceof l)r=e;else{e=E(e);r=i._modelForContainer(e)}var t=i._editMode();var a;i.cancelRow();if(r){e=i.tbody.children("["+D.attr("uid")+"="+r.uid+"]");i._attachModelChange(r);if(t==="popup")i._createPopupEditor(r);else if(t==="inline")i._createInlineEditor(e,r);else if(t==="incell")E(e).children(S).each(function(){var e=E(this);var t=L(i.columns)[i._calculateColumnIndex(e)];r=i._modelForContainer(e);if(r&&(!r.editable||r.editable(t.field))&&t.field&&!t.selectable){i.editCell(e);return false}});a=i.editView?i.editView.element:i._editContainer;if(a){if(!this._editCancelClickHandler)this._editCancelClickHandler=this._editCancelClick.bind(this);a.on(Pe+k,".k-grid-cancel",this._editCancelClickHandler);if(!this._editUpdateClickHandler)this._editUpdateClickHandler=this._editUpdateClick.bind(this);a.on(Pe+k,".k-grid-update",this._editUpdateClickHandler)}}},_editUpdateClick:function(e){e.preventDefault();e.stopPropagation();this.saveRow()},_editCancelClick:function(e){var t=this;var r=t.options.navigatable;var i=t.editable.options.model;var a=t.editView?t.editView.element:t._editContainer;e.preventDefault();e.stopPropagation();if(t.trigger("cancel",{container:a,model:i}))return;var l=t.items().index(E(t.current()).parent());t.cancelRow();if(r){t._setCurrent(t.items().eq(l).children().filter(P).first());Yr(t.table,true)}},_createPopupEditor:function(r){var i=this;var e="<div "+D.attr("uid")+'="'+r.uid+'" class="k-popup-edit-form"><'+(i._isMobile?'ul class="k-edit-form-container k-listgroup k-listgroup-flush">':'div class="k-edit-form-container">');var t;var a;var c=[];var l;var u;var o;var f;var p;var h;var g;var n;var m=L(i.columns);var v;var k=D.guid();var b=i.options.editable;var s=b.template;var _=M(b)?b.window:{};var w=T({},D.Template,i.options.templateSettings);var d;if(i.trigger(U,{model:r}))return;_=_||{};if(s){if(typeof s===Ge)s=D.unescape(s);e+=D.template(s,w)(r);for(l=0,u=m.length;l<u;l++){t=m[l];if(t.command){n=Jr(t.command,"edit");if(n)a=n}}}else for(l=0,u=m.length;l<u;l++){t=m[l];if(t.selectable)continue;if(!t.command)if(!i._isMobile){e+='<div class="k-edit-label"><label for="'+t.field+'">'+(t.title&&(i.options.encodeTitles?pi(t.title):t.title)||t.field||"")+"</label></div>";if(ei(t,r)){c.push({field:t.field,title:t.title,format:t.format,editor:t.editor,values:t.values});e+="<div "+D.attr("container-for")+'="'+t.field+'" class="k-edit-field"></div>'}else{d={storage:{},count:0};o=D.template(i._cellTmpl(t,d),w);if(d.count>0)o=o.bind(d.storage);e+='<div class="k-edit-field k-no-editor">'+o(r)+"</div>"}}else{e+='<li class="k-item k-listgroup-item">';if(ei(t,r)){c.push({field:t.field,title:t.title,format:t.format,editor:t.editor,values:t.values});e+='<label class="k-label k-listgroup-form-row">';e+='<span class="k-item-title k-listgroup-form-field-label">'+(t.title&&(i.options.encodeTitles?pi(t.title,true):t.title)||t.field||"")+"</span>";e+='<div class="k-listgroup-form-field-wrapper" id="'+t.field+"_"+k+'" '+D.attr("container-for")+'="'+t.field+'"></div>';e+="</label>"}else{d={storage:{},count:0};o=D.template(i._cellTmpl(t,d),w);if(d.count>0)o=o.bind(d.storage);e+='<label class="k-label k-listgroup-form-row k-no-click">';e+='<span class="k-item-title k-listgroup-form-field-label">'+(t.title&&(i.options.encodeTitles?pi(t.title,true):t.title)||t.field||"")+"</span>";e+='<span class="k-no-editor k-listgroup-form-field-wrapper">'+o(r)+"</span>";e+="</label>"}e+="</li>"}else if(t.command){n=Jr(t.command,"edit");if(n)a=n}}if(a)if(M(a)){if(M(a.text)){f=a.text.update;p=a.text.cancel}if(M(a.iconClass)){h=a.iconClass.update;g=a.iconClass.cancel}if(a.attr)v=a.attr}var C;if(!i._isMobile){e+='<div class="k-edit-buttons k-actions-end">';e+=i._createButton({name:"update",text:f,attr:v,iconClass:h})+i._createButton({name:"canceledit",text:p,attr:v,iconClass:g});e+="</div></div></div>";C=i._editContainer=E(e).appendTo(i.wrapper).eq(0).kendoWindow(T({modal:true,resizable:false,draggable:true,title:i.options.messages.commands.edit||"Edit",visible:false,close:function(e){if(e.userTriggered){e.sender.element.trigger("focus");if(i.trigger("cancel",{container:C,model:r})){e.preventDefault();return}var t=i.items().index(E(i.current()).parent());i._editableIsClosing=true;i.cancelRow();if(i.options.navigatable){i._setCurrent(i.items().eq(t).children().filter(P).first());Yr(i.table,true)}}}},_))}else{e+="</ul></div>";i.editView=i.pane.append("<div data-"+D.ns+'role="view" class="k-grid-edit-form">'+"<div data-"+D.ns+'role="header" class="k-header">'+'<a href="\\#" class="k-header-cancel k-link k-grid-cancel" title="#=messages.cancel#" '+'aria-label="#=messages.cancel#"><span class="k-icon k-i-arrow-chevron-left"></span></a>'+(i.options.messages.commands.edit||"Edit")+'<a href="\\#" class="k-header-done k-link k-grid-update" title="#=messages.done#" '+'aria-label="#=messages.done#"><span class="k-icon k-i-check"></span></a>'+"</div>"+"<div data-"+D.ns+'role="content" class="'+xt.content+'">'+e+"</div>"+"</div>");C=i._editContainer=i.editView.element.find(".k-popup-edit-form")}i.editable=i._editContainer.kendoEditable({fields:c,model:r,clearContainer:false,target:i}).data("kendoEditable");i._openPopUpEditor();i.trigger(N,{container:C,model:r})},_openPopUpEditor:function(){var e=this;var t=e._editContainer?e._editContainer.data("kendoWindow"):null;var r=(e.options.editable||{}).window||{};if(!this._isMobile){if(t){if(!r.position)t.center();t.open()}}else this.pane.navigate(this.editView,this._editAnimation)},_createInlineEditor:function(e,l){var o=this;var n;var s;var d;var c=[];if(o.trigger(U,{model:l}))return;if(o.lockedContent)e=e.add(o._relatedRow(e));e.children(":not(.k-group-cell,.k-hierarchy-cell)").each(function(){s=E(this);n=L(o.columns)[o._calculateColumnIndex(s)];if(!n.command&&ei(n,l)){c.push({field:n.field,title:n.title,format:n.format,editor:n.editor,values:n.values});s.attr(D.attr("container-for"),n.field);s.empty()}else if(n.command){d=Jr(n.command,"edit");if(d){s.empty();var e,t,r,i,a;if(M(d)){if(M(d.text)){e=d.text.update;t=d.text.cancel}if(M(d.iconClass)){r=d.iconClass.update;i=d.iconClass.cancel}if(d.attr)a=d.attr}E(o._createButton({name:"update",text:e,attr:a,iconClass:r})+o._createButton({name:"canceledit",text:t,attr:a,iconClass:i})).appendTo(s)}}});o._editContainer=e;o._editContainer.addClass("k-grid-edit-row");if(o._shouldClearEditableState)o._clearEditableState();o.editable=new D.ui.Editable(o._editContainer,{target:o,fields:c,model:l,skipFocus:o._isVirtualInlineEditable()&&o._editableState&&(o._editableState.field?true:false)||o._hasVirtualColumns(),clearContainer:false});if(e.length>1){Qr(e[0],e[1]);o._applyLockedContainersWidth()}o.trigger(N,{container:e,model:l})},cancelRow:function(e){var t=this,r=t._editContainer,i;if(r){i=t._modelForContainer(r);if(!i||e&&t.trigger("cancel",{container:r,model:i}))return;t._destroyEditable();t.dataSource.cancelChanges(i);t._clearEditableState();if(t._editMode()!=="popup")t._displayRow(r);else t._displayRow(t.tbody.find("["+D.attr("uid")+"="+i.uid+"]"))}},saveRow:function(){var e=this;var t=this._editContainer;var r=this._modelForContainer(t);var i=E.Deferred();var a;if(!t||!this.editable)return i.resolve().promise();a=e.editable&&e.editable.end();if(!a||this.trigger(K,{container:t,model:r})){if(!a)e._scrollVirtualWrapper();return i.reject().promise()}e._clearEditableState();return this.dataSource.sync()},_displayRow:function(e){var t=this,r=t._modelForContainer(e),i,a,l,o=e.hasClass("k-state-selected"),n=e.hasClass("k-alt");if(r){if(t.lockedContent){i=E((n?t.lockedAltRowTemplate:t.lockedRowTemplate)(r));t._relatedRow(e.last()).replaceWith(i)}t.angular("cleanup",function(){return{elements:e.get()}});a=E((n?t.altRowTemplate:t.rowTemplate)(r));if(!e.is(":visible"))a.hide();e.replaceWith(a);t.trigger("itemChange",{item:a,data:r,ns:b});if(i&&i.length)t.trigger("itemChange",{item:i,data:r,ns:b});var s=a;var d=[{dataItem:r}];if(i&&i.length){s=a.add(i);d.push({dataItem:r})}t.angular("compile",function(){return{elements:s.get(),data:d}});if(o&&(t.options.selectable||t._checkBoxSelection))t.select(a.add(i));if(i)Qr(a[0],i[0]);l=a.next();if(l.hasClass("k-detail-row")&&l.is(":visible"))a.find(".k-hierarchy-cell .k-icon").removeClass("k-i-expand").addClass("k-i-collapse")}},_showMessage:function(e,t){var r=this;if(!r._isMobile)return window.confirm(e.title);var i=r._confirmDialog=new D.ui.Confirm(E("<div />").appendTo(document.body),{modal:{preventScroll:true},closable:false,title:false,content:e.title,messages:{okText:e.confirmDelete,cancel:e.cancelDelete},open:function(){if(r.content){r.content.data(Ze,r.content.css(Ze));r.content.css(Ze,et)}},close:function(){if(r.content)r.content.css(Ze,r.content.data(Ze))}});i.result.done(function(){r._removeRow(t)}).fail(function(){var e=r._confirmDialog;if(e){e.close();e.destroy()}});return false},_confirmation:function(e){var t=this,r=t.options.editable,i=r===true||typeof r===Ge?t.options.messages.editable.confirmation:r.confirmation;if(M(r)&&typeof r.mode===Ge&&typeof i!==Oe&&typeof i!==Ge&&i!==false)i=t.options.messages.editable.confirmation;if(i!==false&&i!=null){if(typeof i===Oe)i=i(t._modelForContainer(e));return t._showMessage({confirmDelete:r.confirmDelete||t.options.messages.editable.confirmDelete,cancelDelete:r.cancelDelete||t.options.messages.editable.cancelDelete,title:i===true?t.options.messages.editable.confirmation:i},e)}return true},cancelChanges:function(){var e=this;e.dataSource.cancelChanges();if(e._isVirtualEditable())e._virtualPageToTop(function(){e.virtualScrollable.scrollToTop()})},saveChanges:function(){var e=this;var t=e.editable&&e.editable.end();if((t||!e.editable)&&!e.trigger(r))e.dataSource.sync();else if(!t)e._scrollVirtualWrapper()},addRow:function(){var e=this,t,r=e.dataSource,i=e._editMode(),a=e.options.editable.createAt||"",l=r.pageSize(),o=r.view()||[];var n=a.toLowerCase()===Ne;var s;var d=e._isVirtualEditable();if(e.editable&&e.editable.end()||!e.editable){if(i!="incell")e.cancelRow();t=r.indexOf(o[0]);if(n){t+=o.length;if(l&&!r.options.serverPaging&&l<=o.length)t-=1}if(t<0)if(r.page()>r.totalPages())t=(r.page()-1)*l;else t=0;if(e.options.navigatable&&i=="incell")e._removeCurrent();if(d)e._virtualAddRow();else{s=r.insert(t,{});e._editModel(s)}}else e._scrollVirtualWrapper()},_editModel:function(e){var t=this;var r=t.options.editable.createAt||"";var i=t._editMode();if(e){var a=e.uid,l=t.lockedContent?t.lockedTable:t.table,o=l.find("tr["+D.attr("uid")+"="+a+"]"),n=o.children("td:not(.k-group-cell,.k-hierarchy-cell)").eq(t._firstEditableColumnIndex(o));if(i==="inline"&&o.length)t.editRow(o);else if(i==="popup")t.editRow(e);else if(n.length)t.editCell(n);if(r.toLowerCase()=="bottom"&&t.lockedContent)t.lockedContent[0].scrollTop=t.content[0].scrollTop=t.table[0].offsetHeight}},_virtualAddRow:function(){var e=this;var t=(e.options.editable.createAt||"").toLowerCase()===Ne;e._clearEditableState();if(t)e._virtualAddRowAtBottom();else e._virtualAddRowAtTop()},_virtualAddRowAtTop:function(){var e=this;var t=e.dataSource;var r=e.virtualScrollable;var i;if(t.page()===1){i=t.insert(0,{});e._editModel(i);r.scrollToTop()}else e._virtualPageToTop(function(){i=t.insert(0,{});e._editModel(i);r.scrollToTop()})},_virtualAddRowAtBottom:function(){var e=this;var t=e.dataSource;var r=e.virtualScrollable;var i=t.total();var a;if(t.at(i-1)instanceof l){a=t.insert(i,{});e._virtualPageToBottom(function(){e._editModel(a);r.scrollToBottom()})}else e._virtualPageToBottom(function(){a=t.insert(i,{});e._editModel(a);r.scrollToBottom()})},_virtualPageToTop:function(e){var t=this;t._virtualPage(0,t.dataSource.take(),function(){e()})},_virtualPageToBottom:function(e){var t=this;var r=t.dataSource;var i=r.take();var a=r.total();var l=a>i?a-i:0;t._virtualPage(l,i,function(){e()})},_virtualPage:function(e,t,r){var i=this;if(i._isVirtualEditable()){i.virtualScrollable._preventScroll=true;i.virtualScrollable._page(e,t,r)}},_firstEditableColumnIndex:function(e){var t=this,r,i=L(t.columns),a,l,o=t._modelForContainer(e);for(a=0,l=i.length;a<l;a++){r=i[a];if(o&&(!o.editable||o.editable(r.field))&&!r.command&&r.field&&r.hidden!==true)return a}return-1},_toolbar:function(){var o=this,e=o.wrapper,t=o.options.toolbar,r=o.options.editable,i;if(t){i=o.wrapper.find(".k-grid-toolbar");if(!i.length){if(!f(t)){t=typeof t===Ge?t:o._toolbarTmpl(t).replace(ut,"\\#");t=D.template(t).bind(o)}i=E('<div class="k-toolbar k-grid-toolbar" />').html(t({})).prependTo(e);o.angular("compile",function(){return{elements:i.get()}})}if(r&&r.create!==false)i.on(Pe+k,".k-grid-add",function(e){e.preventDefault();o.addRow()}).on(Pe+k,".k-grid-cancel-changes",function(e){e.preventDefault();o.cancelChanges()}).on(Pe+k,".k-grid-save-changes",function(e){e.preventDefault();o.saveChanges()});i.on(Pe+k,".k-grid-excel",function(e){e.preventDefault();o.saveAsExcel()});i.on(Pe+k,".k-grid-pdf",function(e){e.preventDefault();var t=o.saveAsPDF();if(t)t.done(function(){o._pdfInitialized=false})});i.on(je+k,".k-grid-search input",function(e){var l=e.currentTarget;clearTimeout(o._searchTimeOut);o._searchTimeOut=setTimeout(function(){o._searchTimeOut=null;var e=o.options;var t=e.search?e.search.fields:null;var r={filters:[],logic:"or"};var i=l.value;if(!t)t=Rr(e.columns);if(o.dataSource.options.endless){o.dataSource.options.endless=null;o._endlessPageSize=o.dataSource.options.pageSize}if(i)for(var a=0;a<t.length;a++)o._pushExpression(r.filters,t[a],i);else r={};o.dataSource.filter(r)},300)})}},_pushExpression:function(c,e,t){var r=this,i=r.dataSource.options.serverFiltering,a={string:"contains",number:"gte",date:"gte",enums:"eq",boolean:"eq"},l=e.name||e,o=e.operator,n=r.dataSource.reader.model&&r.dataSource.reader.model.fields,s=n&&n[l],d=s&&s.parse,u={field:l,operator:o||a.string,value:t};if((o||i)&&s&&D.isFunction(d)&&d(t)!==null)T(u,{operator:o||a[s.type],value:d(t)});if(i&&s&&D.isFunction(d)&&d(t)===null)return;c.push(u)},_toolbarTmpl:function(e){var t=this,r,i,a="",l,o="",n=t.options.messages.commands;if(p(e))for(r=0,i=e.length;r<i;r++){l=typeof e[r]==="string"?e[r].toLowerCase():(e[r].name||"").toLowerCase();if(l==="search"){if(typeof e[r]!=="string")o=e[r].text;o=o||n.search;a+="<span class='k-spacer'></span>";a+="<span class='k-searchbox k-input k-input-md k-rounded-md k-input-solid k-grid-search'>";a+="<span class='k-input-icon k-icon k-i-search'></span>";a+="<input autocomplete='off' placeholder='"+o+"' title='"+o+"' class='k-input-inner' />";a+="</span>"}else a+=t._createButton(e[r])}return a},_createButton:function(e){var t,r=e.template||vt,i=typeof e===Ge?e:e.name||e.text,a=Dt[i]?Dt[i].className:"k-grid-"+(i||"").replace(/\s/g,""),l={className:a,text:i,attr:"",iconClass:""},o=this.options.messages.commands,n;if(!i&&!(M(e)&&e.template))throw new Error("Custom commands should have name specified");if(M(e)){e=T(true,{},e);if(e.className&&F(l.className,e.className.split(" "))<0)e.className+=" "+l.className;else if(e.className===R)e.className=l.className;if(e.className.indexOf("k-primary")>-1){e.className=e.className.replace("k-primary","");e.themeColor="primary"}if(i==="edit"){e=T(true,{},e);e.text=M(e.text)?e.text.edit:e.text;e.iconClass=M(e.iconClass)?e.iconClass.edit:e.iconClass}if(e.attr){if(M(e.attr))e.attr=Et(e.attr);if(typeof e.attr===Ge){n=e.attr.match(/class="(.+?)"/);if(n&&F(n[1],e.className.split(" "))<0)e.className+=" "+n[1]}}l=T(true,l,Dt[i],{text:o[i]},e)}else l=T(true,l,Dt[i],{text:o[i]});t=D.template(r)(l);if(!e.template)return D.html.renderButton(E(t),l);else return t},_hasFooters:function(){return!!this.footerTemplate||!!this.groupFooterTemplate||this.footer&&this.footer.length>0||this.wrapper.find(".k-grid-footer").length>0},_groupable:function(){var a=this;if(a._groupableClickHandler)a.table.add(a.lockedTable).off(Pe+k,a._groupableClickHandler);else a._groupableClickHandler=function(e){var t=E(this),r=t.closest("tr");var i=a._groupRows?a._groupRows[a.wrapper.find(".k-grouping-row").index(r)]:{};if(t.hasClass("k-i-collapse")){if(!a.trigger("groupCollapse",{group:i,element:r}))a.collapseGroup(r)}else if(!a.trigger("groupExpand",{group:i,element:r}))a.expandGroup(r);e.preventDefault();e.stopPropagation()};if(a._isLocked())a.lockedTable.on(Pe+k,".k-grouping-row .k-i-expand, .k-grouping-row .k-i-collapse",a._groupableClickHandler);else a.table.on(Pe+k,".k-grouping-row .k-i-expand, .k-grouping-row .k-i-collapse",a._groupableClickHandler);a._attachGroupable()},_attachGroupable:function(){var t=this,e=t.wrapper,r=t.options.groupable,i=B+"["+D.attr("field")+"]",a=t.content?".k-grid-header:first "+i:"table:first>.k-grid-header "+i;if(r&&r.enabled!==false){if(!e.has("div.k-grouping-header")[0])E("<div>&nbsp;</div>").addClass("k-grouping-header").prependTo(e);if(t.groupable)t._destroyGroupable();if(yt.chrome){e.find("div.k-grouping-header").css("touch-action","none");e.find(a).css("touch-action","none")}t.groupable=new b.Groupable(e,T({},r,{draggable:t._draggableInstance,groupContainer:">div.k-grouping-header",dataSource:t.dataSource,draggableElements:a,filter:a,allowDrag:t.options.reorderable,change:function(e){if(t.trigger("group",{groups:e.groups}))e.preventDefault();else{t._clearEditableState();if(t.dataSource.options.endless)t._resetEndless()}}}));t._addGroupableOptionsToHeader()}},_resetEndless:function(){var e=this;e.dataSource.options.endless=null;e._endlessPageSize=e.dataSource.options.pageSize;e.dataSource._skip=0;e.dataSource._pageSize=e.dataSource._take=e._endlessPageSize;e.dataSource._page=1},_addGroupableOptionsToHeader:function(){var e=this;var t=sr(e.columns);var r={};var i="";var a=e._headerCells();var l="";var o;var n;var s;for(s=0;s<t.length;s++){i=t[s].field;r[t[s].field]=t[s]}for(s=0;s<a.length;s++){o=a.eq(s);l=o.attr(D.attr(Ke));n=r[l];if(n&&n.groupable&&n.groupable.sort)o.data(rt,n.groupable.sort)}},_destroyGroupable:function(){var e=this;if(e.groupable&&e.groupable.element)e.groupable.element.kendoGroupable("destroy");e.groupable=null;e._removeGroupableOptionsFromHeader()},_removeGroupableOptionsFromHeader:function(){var e=this;var t=e._headerCells();for(var r=0;r<t.length;r++)t.eq(r).removeData(rt)},_continuousItems:function(e,t){if(!this.lockedContent)return;var r=this;var i=r.table.add(r.lockedTable);var a=E(e,i[0]);var l=E(e,i[1]);var o=t?H(r.columns).length:1;var n=t?r.columns.length-o:1;var s=[];for(var d=0;d<a.length;d+=o){c.apply(s,a.slice(d,d+o));c.apply(s,l.splice(0,n))}return s},_selectable:function(){var l=this,a,o,e=[],n=l._isLocked(),t=l.options.selectable;if(t){if(l.selectable)l.selectable.destroy();l._selectedIds={};t=D.ui.Selectable.parseOptions(t);a=t.multiple;o=t.cell;if(l._hasDetails())e[e.length]=".k-detail-row";if(l.options.groupable||l._hasFooters()||l._groups())e[e.length]=".k-grouping-row,.k-group-footer";e=e.join(",");if(e!=="")e=":not("+e+")";var s=l.table;if(n)s=s.add(l.lockedTable);var r=">"+(o?i:"tbody>tr"+e);l.selectable=new D.ui.Selectable(s,{filter:r,aria:true,multiple:a,dragToSelect:l.options.selectable&&l.options.selectable.dragToSelect,change:function(e){var t;if(!o)l._persistSelectedRows();if(l._checkBoxSelection){t=l.selectable.value();l._uncheckCheckBoxes();l._checkRows(t);if(t.length&&t.length===l.items().length)l._toggleHeaderCheckState(true);else l._toggleHeaderCheckState(false)}if(e.event)l.trigger(ee)},useAllItems:n&&a&&o,relatedTarget:function(e){if(o||!n)return;var t;var r=E();for(var i=0,a=e.length;i<a;i++){t=l._relatedRow(e[i]);if(F(t[0],e)<0)r=r.add(t)}return r},continuousItems:function(){return l._continuousItems(r,o)},ignoreOverlapped:l.options.selectable&&l.options.selectable.ignoreOverlapped,addIdToRanges:true});if(l.options.navigatable)s.on("keydown"+k,function(e){var t=l.current();var r=e.target;var i={event:e};if(!t)return;if(e.keyCode===d.SPACEBAR&&!e.shiftKey&&E.inArray(r,s)>-1&&!t.is(".k-edit-cell,.k-header")&&t.parent().is(":not(.k-grouping-row,.k-detail-row,.k-group-footer)")){e.preventDefault();e.stopPropagation();t=o?t:t.parent();if(n&&!o)t=t.add(l._relatedRow(t));if(a){if(!e.ctrlKey)l.selectable.clear();else if(t.hasClass(ge)){l._deselectCheckRows(t);return}}else l.selectable.clear();if(!o)l.selectable._lastActive=t;l.selectable.value(t,i)}else if(!o&&(E(r).is("td")||E(r).is("table")&&F(r,this._navigatableTables))&&(e.shiftKey&&e.keyCode==d.LEFT||e.shiftKey&&e.keyCode==d.RIGHT||e.shiftKey&&e.keyCode==d.UP||e.shiftKey&&e.keyCode==d.DOWN||e.keyCode===d.SPACEBAR&&e.shiftKey)){e.preventDefault();e.stopPropagation();t=t.parent();if(n)t=t.add(l._relatedRow(t));if(a){if(!l.selectable._lastActive)l.selectable._lastActive=t;l.selectable.selectRange(l.selectable._firstSelectee(),t,i)}else{l.selectable.clear();l.selectable.value(t,i)}}})}},_clipboard:function(){var e=this.options;var t=e.selectable;if(t&&e.allowCopy){var r=this;if(!e.navigatable)r.table.add(r.lockedTable).attr("tabindex",0).on("mousedown"+k+" keydown"+k,".k-detail-cell",function(e){if(e.target!==e.currentTarget)e.stopImmediatePropagation()}).on("mousedown"+k,q+">"+P,ri.bind(r));r.copyHandler=r.copySelection.bind(r);r.updateClipBoardState=function(){if(r.areaClipBoard)r.areaClipBoard.val(r.getTSV()).trigger("focus").select()};r.bind("change",r.updateClipBoardState);r.wrapper.on("keydown",r.copyHandler);r.clearAreaHandler=r.clearArea.bind(r);r.wrapper.on("keyup",r.clearAreaHandler)}},copySelectionToClipboard:function(e){this._createAreaClipBoard();this.areaClipBoard.val(this.getTSV(e)).trigger("focus").select();document.execCommand("copy")},copySelection:function(e){if(e instanceof jQuery.Event&&!(e.ctrlKey||e.metaKey)||E(e.target).is("input:visible,textarea:visible")||window.getSelection&&window.getSelection().toString()||document.selection&&document.selection.createRange().text)return;this._createAreaClipBoard();this.areaClipBoard.val(this.getTSV()).trigger("focus").select()},_createAreaClipBoard:function(){if(!this.areaClipBoard)this.areaClipBoard=E("<textarea />").css({position:"fixed",top:"50%",left:"50%",opacity:0,width:0,height:0}).appendTo(this.wrapper)},getTSV:function(a){var o=this;var e=o.select();var l="\t";var t=o.options.allowCopy;var f=true;var p=o._isLocked()&&H(o.columns).length;if(E.isPlainObject(t)&&t.delimeter)l=t.delimeter;var r="";if(e.length){if(e.eq(0).is("tr"))e=e.find("td:not(.k-group-cell)");if(f)e.filter(":visible");var n=[];var s=this.columns.length;var h=o._isLocked()&&H(o.columns).length;var d=true;var c=[];var u;var g=Tr(this.columns);E.each(e,function(e,t){t=E(t);u=o._getCellField(t,p);var r=t.closest("tr");var i=r.index();var a=t.index();if(f)a-=t.prevAll(":hidden").length;if(h&&d)d=E.contains(o.lockedTable[0],t[0]);if(o._groups()&&d)a-=o._groups();a=d?a:a+h;if(u)c[a]=u;if(s>a)s=a;var l=t.text();if(!n[i])n[i]=[];n[i][a]=l});var i=n.length;n=E.each(n,function(e,t){if(t){n[e]=t.slice(s);if(i>e)i=e}});if(a&&c.length){n.splice(i,0,c.map(function(e){return hi(e,g)}));var m=n.findIndex(function(e){return e!==R});n[m]=n[m].slice(s)}E.each(n.slice(i),function(e,t){if(t)r+=t.join(l)+"\r\n";else r+="\r\n"})}return r},clearArea:function(e){var t;if(this.areaClipBoard&&e&&e.target===this.areaClipBoard[0]){if(this.options.navigatable)t=E(this.current()).closest("table");else t=this.table;Yr(t,true)}if(this.areaClipBoard){this.areaClipBoard.remove();this.areaClipBoard=null}},_adaptiveColumns:function(){var e=this;if(e._anyColumnHasMediaQuery()){e._setColumnsMediaVisibility(e.columns);e._attachColumnMediaResizeHandler()}},_anyColumnHasMediaQuery:function(){return this._columnsWithMediaQuery().length},_columnsWithMediaQuery:function(){return jt(this.columns)},_attachColumnMediaResizeHandler:function(){var e=this;e._detachColumnMediaResizeHandler();e._columnMediaResizeHandler=e._onColumnMediaResize.bind(e);E(window).on(Ie+k,e._columnMediaResizeHandler)},_detachColumnMediaResizeHandler:function(){var e=this;if(e._columnMediaResizeHandler)E(window).off(Ie+k,e._columnMediaResizeHandler)},_onColumnMediaResize:function(){var e=this;e._setColumnsMediaVisibility(e.columns);e._setContentMediaWidth()},_setColumnsMediaVisibility:function(e){var t=e||[];for(var r=0;r<t.length;r++)this._setColumnMediaVisibility(t[r])},_setColumnMediaVisibility:function(e){var t=this;if($t(e.media))t._setColumnsMediaVisibility(e.columns);else if(Gt(e)){t._showColumnByMedia(e);if(!e.hidden)t._setColumnsMediaVisibility(e.columns)}else t._hideColumnByMedia(e)},_showColumnByMedia:function(e){if(!e.hidden)this.showColumn(e);Ot(e)},_hideColumnByMedia:function(e){var t=e.hidden;if(!t){e._hideByMedia=true;this.hideColumn(e);e._hideByMedia=false;e.hidden=t}Ot(e)},_setContentMediaWidth:function(){var e=this;var t=e.options;var r=e._isLocked();var i;if(t.scrollable&&t.resizable){if(r&&e.lockedFooter)i=e.lockedFooter.children("table");else if(e.footer)i=e.footer.find(">.k-grid-footer-wrap>table");if(!i||!i[0])i=E();var a=r?e.wrapper.find(".k-grid-header-locked").find("table"):e.wrapper.find(".k-grid-header").find("table");var c=r?e.lockedTable:e.table;var l=a.find("th");var u=a.find("colgroup");var f=l.length;var p=l.filter(Nt).length;var h=l.length-p;var o=0;if(a[0].style.width!==""&&parseFloat(a[0].style.width)!==o){var g=a.css("width");for(var n=0;n<f;n++)if(Ut(l[n])){var s;var m=Math.max(n,n-h);var d=u.children()[m];var v=d?d.style.width:"";if(v!=="")s=parseFloat(v);else{a.css("width","auto");s=z(l.eq(n));a.css("width",g)}o+=s}c.css("width",o-1);a.css("width",o);i.css("width",o);e._updateStickyColumns()}}},_minScreenSupport:function(){var e=this.hideMinScreenCols();if(e){this.minScreenResizeHandler=this.hideMinScreenCols.bind(this);E(window).on("resize",this.minScreenResizeHandler)}},hideMinScreenCols:function(){var e=this.columns,t=window.innerWidth>0?window.innerWidth:screen.width;return this._iterateMinScreenCols(e,t)},_iterateMinScreenCols:function(e,t){var r=false;for(var i=0;i<e.length;i++){var a=e[i];var l=a.minScreenWidth;if(l!==R&&l!==null){r=true;if(l>t)this.hideColumn(a);else this.showColumn(a)}if(!a.hidden&&a.columns)r=this._iterateMinScreenCols(a.columns,t)||r}return r},_stickyColumns:function(){var e=this;if(e._anyStickyColumns())e._setStickyColumns(false)},_updateStickyColumns:function(){var e=this;var t=A(L(e.columns),function(e){return e.groupHeaderColumnTemplate});if(e._anyStickyColumns()){e._setStickyColumns(true);e._templates();if(t.length>0)e._renderGroupRows();if(e._hasFilterRow())e._updateStickyFilterCells()}},_updateStickyFilterCells:function(){var e=this;var t=e.thead.find(".k-filter-row").find("th:not(.k-group-cell,.k-hierarchy-cell)");if(t.length)t.each(function(){var e=E(this);var t=e.data("column");var r=e.attr("style")||"";if(t.sticky){e.attr("style",r+t.stickyStyle);e.addClass(xe)}else{r=r.replace(pt,"");r=r.replace(ht,"");e.attr("style",r);e.removeClass(xe)}})},_anyStickyColumns:function(){var e=this;return wr(e.columns).length},_setStickyColumns:function(e){var t=this;var r=wr(t.columns);var i=Cr(t.columns);var a=t._calculateStickyWidths(i);t._removeStickyAttributes(r);t._setStickyClassAttributes(r);t._setStickyStyleAttributes(i,a,e);if(e)t._setStickyStyles(i,a)},_calculateStickyWidths:function(e,t,r){var i=this;var a;var l;var o;var n;var s;var c=Ct?"right":"left";var u=Ct?"left":"right";var d={left:new Array(e.length).fill(t?t:0),right:new Array(e.length).fill(r?r:0)};for(a=0;a<e.length-1;a++){l=e[a];o=i._sumColumnWidth(l);n=o+d[c][a];d[c][a+1]=n}for(a=e.length-1;a>0;a--){l=e[a];o=i._sumColumnWidth(l);s=o+d[u][a];d[u][a-1]=s}return d},_setStickyClassAttributes:function(e,t){var r=this;var i;var a;for(i=0;i<e.length;i++){a=e[i];if(a.columns){if(!t&&i)t=i;r._setStickyClassAttributes(xr([a]),t)}if(t)kr(a,"headerAttributes","class",Re);kr(a,"attributes","class",Te);kr(a,"headerAttributes","class",xe);kr(a,"footerAttributes","class",He)}},_setStickyStyleAttributes:function(e,t,c){var r=this;var i;var a;var l;var o;var n;var s;var d;for(i=0;i<e.length;i++){a=e[i];l=t.left[i];o=t.right[i];n="left: "+l+"px; right: "+o+"px;";if(a.columns){s=Hr([a]);d=r._calculateStickyWidths(s,l,o);r._setStickyStyleAttributes(s,d,c);if(c)r._setStickyStyles(s,d)}kr(a,"attributes","style",n);kr(a,"headerAttributes","style",n);kr(a,"footerAttributes","style",n);a.stickyStyle=n}},_removeStickyAttributes:function(e){var t=this;var r;var i=new RegExp("(\\s*"+Te+")*","ig");var a=new RegExp("(\\s*"+xe+")*","ig");var l=new RegExp("(\\s*"+He+")*","ig");var o=new RegExp("(\\s*"+Re+")*","ig");var n;for(r=0;r<e.length;r++){n=e[r];if(n.columns)t._removeStickyAttributes(xr([n]));br(n,"attributes","class",i);br(n,"attributes","style",pt);br(n,"attributes","style",ht);br(n,"headerAttributes","class",a);br(n,"headerAttributes","class",o);br(n,"headerAttributes","style",pt);br(n,"headerAttributes","style",ht);br(n,"footerAttributes","class",l);br(n,"footerAttributes","style",pt);br(n,"footerAttributes","style",ht)}},_setStickyStyles:function(c,u){var e=this;var t;var r;var f=L(_r(e.columns));var p=e.tbody.children(":not(.k-detail-row)");var i;var a;var l;var o;var n;var s;var d;var h;var g;for(t=0;t<c.length;t++){a=c[t];o=u.left[t];n=u.right[t];l=f.indexOf(a);s=e._getColumnHeader(a);s.addClass(xe);if(a.headerAttributes["class"]&&a.headerAttributes["class"].indexOf(Re)!==-1)s.addClass(Re);mr(s,o,n);if(a.columns)continue;if(e.footer){d=e.footer.find(".k-grid-footer-wrap tr.k-footer-template").children().filter(":not(.k-group-cell,.k-hierarchy-cell)").eq(l);d.addClass(He);mr(d,o,n)}for(r=0;r<p.length;r++){i=E(p[r]);if(i.hasClass("k-grouping-row")){h=i.find("."+a.groupHeaderColumnTemplateClass);h.addClass(Te);mr(h,o,n)}else{g=i.children().filter(":not(.k-group-cell,.k-hierarchy-cell)").eq(l);g.addClass(Te);mr(g,o,n)}}}},_removeStickyStyles:function(c){var e=this;var t;var r;var u=L(_r(e.columns));var f=e.tbody.children(":not(.k-detail-row)");var i;var a;var l;var o;var n;var s;var d;for(t=0;t<c.length;t++){a=c[t];l=u.indexOf(a);o=e._getColumnHeader(a);o.removeClass(xe);o.removeClass(Re);mr(o,"","");if(a.columns){e._removeStickyStyles(a.columns);continue}if(a.footerTemplate&&e.footer){n=e.footer.find(".k-grid-footer-wrap tr.k-footer-template").children().filter(":not(.k-group-cell,.k-hierarchy-cell)").eq(l);n.removeClass(He);mr(n,"","")}for(r=0;r<f.length;r++){i=E(f[r]);if(i.hasClass("k-grouping-row")){s=i.find("."+a.groupHeaderColumnTemplateClass);s.removeClass(Te);mr(s,"","")}else{d=i.children().filter(":not(.k-group-cell,.k-hierarchy-cell)").eq(l);d.removeClass(Te);mr(d,"","")}}}},_getColumnHeader:function(e){var t=this;var r=E("#"+e.headerAttributes.id).length?E("#"+e.headerAttributes.id):E("#"+t._cellId);return r},_sumColumnWidth:function(e){var t=this;var r=0;if(e.columns)r=t._sumCurrentWidths(L([e]));else r=t._sumCurrentWidths([e]);return r},_sumCurrentWidths:function(e){var t=this;var r=0;var i=0;var a;var l;var o;var n=e.length;for(o=0;o<n;o++){a=e[o];l=t._getColumnHeader(a);if(!a.hidden&&Gt(a)){i=l.is(":visible")?l.outerWidth():a.width;r+=i?parseInt(i,10):0}}return r},_belongsToGrid:function(e){return this.wrapper[0]===e.closest(t)[0]},getSelectedData:function(){var e=this;var t=e.selectable.selectedRanges();var r=Object.keys(t);var i=e.selectable.selectedSingleItems();var a=[];var l=Tr(e.columns);for(var o=0;o<r.length;o++)a=a.concat(e._mapSelectionToData(t[r[o]],l));if(i.length)a=a.concat(e._mapSelectionToData(i,l));return a},exportSelectedToExcel:function(e){if(!D.excel||!D.ooxml)throw new Error("The excel export functionality depends on both kendo.excel.js and kendo.ooxml.js scripts, please make sure they are included.");var t=this;var r=this.options.excel||{};var i=Tr(t.columns);var a=new D.excel.ExcelExporter({});var c=function(){return{autoWidth:true}};var l={sheets:[{columns:Array.apply(0,Array(i.length)).map(c),rows:[],freezePane:{},filter:false}]};var o=t.selectable.selectedRanges();var u=Object.keys(o);var f=t.selectable.selectedSingleItems();var n;var s=[];var p=t._isLocked()&&H(t.columns).length;var h=gi.bind(t);for(n=0;n<u.length;n++)s=s.concat(t._mapSelectionToData(o[u[n]],i,mi));if(s.length)t._addRangeSelectionRows(l,a,s,e);s=f.length?t._mapSelectionToData(f,i,mi):[];if(s.length){if(p)s=s.sort(h);t._addSingleSelectionRows(l,a,s,e)}if(l.sheets[0].rows.length){var d=new D.ooxml.Workbook(l);if(!d.options)d.options={};d.options.skipCustomHeight=true;d.toDataURLAsync().then(function(e){D.saveAs({dataURI:e,fileName:l.fileName||r.fileName,proxyURL:r.proxyURL,forceProxy:r.forceProxy})})}},_addSingleSelectionRows:function(e,t,r,i){var a=0;var l=Tr(this.columns);var o;for(a=0;a<r.length;a++){o=r[a];t.data=[o];this._setExporterColumns(t,l,o);this._createExportRows(e,t,i)}},_addRangeSelectionRows:function(e,t,r,i){var a=Tr(this.columns);t.data=r;this._setExporterColumns(t,a,r[0]);this._createExportRows(e,t,i)},_createExportRows:function(e,t,r){e.sheets[0].rows=e.sheets[0].rows.concat(r?t._rows():t._dataRows(t.data,0))},_setExporterColumns:function(e,t,r){e.columns=e.options.columns=E.map(t.filter(function(e){return Object.keys(r).indexOf(e.field)>=0}),e._prepareColumn)},_mapSelectionToData:function(e,c,r){var t=this;var u=e[0][0].nodeName;var f=u==="TR";var i;var a={};var l;var o;var n;var p=function(e){var t={};if(!e.field||r&&!r(e))return;t[e.field]=i[e.field];return t};var h=t._isLocked()&&H(t.columns).length;var s;for(var d=0;d<e.length;d++){l=e[d];i=t.dataItem(f?l:l.parent());if(f)a[i.uid]=E.extend.apply(null,c.map(p));else{n=t._getCellField(l,h);if(!n)continue;o=a[i.uid];if(!o)o=a[i.uid]={};s=Yt(c,n);if(!s||r&&!r(s))continue;o[n]=i[n]}}return Object.keys(a).map(function(e){a[e].uid=e;return a[e]})},_getCellField:function(e,t){var r=this;var i=t&&E.contains(r.lockedTable[0],e[0]);var a=D.attr("field");if(t)return r.element.find(".k-grid-header-"+(i?"locked":"wrap")+" th").eq(e.index()).attr(a);else return r.thead.find("th").eq(e.index()).attr(a)},_relatedRow:function(e){var t=this.lockedTable;e=E(e);if(!t)return e;var r=e.closest(this.table.add(this.lockedTable));var i=r.find(">tbody>tr").index(e);r=r[0]===this.table[0]?t:this.table;return r.find(">tbody>tr").eq(i)},_relatedCell:function(e){var t=this.lockedTable;e=E(e);if(!t)return e;var r=e.closest(this.table.add(this.lockedTable));var i=r.find(">tbody>tr>td").index(e);r=r[0]===this.table[0]?t:this.table;return r.find(">tbody>tr>td").index(i)},clearSelection:function(){var e=this;if(e.selectable&&!e._checkBoxSelection)e.selectable.clear();if(e._checkBoxSelection){e._deselectCheckRows(e.select());return}if(e.options.persistSelection)e._persistSelectedRows();else e._selectedIds={}},select:function(e){var t=this,r=t.selectable,i=D.ui.Selectable.parseOptions(this.options.selectable),a=i.cell;e=t.table.add(t.lockedTable).find(e);if(e.length){if(r&&!r.options.multiple){r.clear();e=e.first()}if(t._isLocked())e=e.add(e.map(function(){if(a)return t._relatedCell(this);else return t._relatedRow(this)}));if(r&&!t._checkBoxSelection)r.value(e);else{t._checkRows(e);if(t.select().length===t.items().length)t._toggleHeaderCheckState(true);if(!a)t._persistSelectedRows();t.trigger(ee)}return}return r?r.value():t.items().filter("."+ge)},_toggleHeaderCheckState:function(e){var t=this;if(e)t.thead.add(t.lockedHeader).find("tr "+ve).prop("checked",true).attr("aria-checked",true).attr("aria-label","Deselect all rows");else t.thead.add(t.lockedHeader).find("tr "+ve).prop("checked",false).attr("aria-checked",false).attr("aria-label","Select all rows")},_uncheckCheckBoxes:function(){var e=this;var t=e.table.add(e.lockedTable);t.find("tbody "+ve).attr("aria-checked",false).prop("checked",false).attr("aria-label","Select row")},_deselectCheckRows:function(e){var t=this,r=D.attr("range-selected");e=t.table.add(t.lockedTable).find(e);if(t._isLocked())e=e.add(e.map(function(){return t._relatedRow(this)}));e.each(function(){E(this).removeClass(ge).removeAttr(r).find(ve).attr("aria-checked",false).prop("checked",false).attr("aria-label","Select row")});t._toggleHeaderCheckState(false);t._persistSelectedRows();t.trigger(ee)},_checkRows:function(e){e.each(function(){E(this).addClass(ge).find(ve).prop("checked",true).attr("aria-label","Deselect row").attr("aria-checked",true)})},_persistSelectedRows:function(){var e=this,t,r,i=e.items(),a=e.dataSource.options,l=a.schema,o,n={};if(!l||!l.model||!e._data)return;o=f(l.model)?l.model.fn.idField:l.model.id;if(!o)return;if(!D.ui.Selectable.parseOptions(e.options.selectable).multiple&&!e._checkBoxSelection)e._selectedIds={};e.select().each(function(){r=e.dataItem(this);n[r[o]]=true});for(var s=0;s<i.length;s++){r=e.dataItem(i[s]);t=r[o];if(n[t])e._selectedIds[t]=true;else delete e._selectedIds[t]}},selectedKeyNames:function(){var e=this,t=[];for(var r in e._selectedIds)t.push(r);t.sort();return t},_updateCurrentAttr:function(e,t){var r=E(e).data("headerId");var i;var a;E(e).removeClass(pe).closest("table").removeAttr("aria-activedescendant");if(r){r=r.replace(this._cellId,"");E(e).attr("id",r)}else E(e).removeAttr("id");i=t.attr("id");if(i!=this._cellId)t.data("headerId",i);if(t.is("th"))a=i;else t.attr("id",this._cellId);t.addClass(pe).closest("table").attr("aria-activedescendant",a||this._cellId);this._current=t},_scrollCurrent:function(){var e=this._current;var t=this.options.scrollable;if(!e||!t)return;var r=e.parent();var i=r.closest("table").parent();var a=i.is(".k-grid-content-locked,.k-grid-header-locked");var l=i.is(".k-grid-content-locked,.k-grid-content,.k-virtual-scrollable-wrap");var o=E(this.content).find(">.k-virtual-scrollable-wrap").addBack().last()[0];if(l)if(this.virtualScroll){var n=Math.max(F(r[0],this._items(r.parent())),0);if(this.virtualScroll.rows){this._rowVirtualIndex=this.virtualScrollable.itemIndex(n);this.virtualScrollable.scrollIntoView(r)}else{this._rowVirtualIndex=n;this._scrollTo(this._relatedRow(r)[0],o)}}else this._scrollTo(this._relatedRow(r)[0],o);if(this.lockedContent)this.lockedContent[0].scrollTop=o.scrollTop;if(!a)this._scrollTo(e[0],o)},current:function(e){return this._setCurrent(e,true)},_setCurrent:function(e,t,r){var i=this._current;e=E(e);if(e.length)if(!i||i[0]!==e[0]){var a=e.parent();var l=a.children(S);var o=parseInt(a.children().first().attr("colspan"),10);if(this._hasVirtualColumns())this._virtualCellIndex=(o>1?o:0)+l.index(e);this._updateCurrentAttr(i,e);if(!r)this._scrollCurrent();if(!t)this.trigger(qe,{element:e})}if(e&&e.length)this._lastCellIndex=e.parent().children(S).index(e);return this._current},_removeCurrent:function(){if(this._current){this._current.removeClass(pe);this._current=null}},_scrollTo:function(e,t){var c=e.tagName.toLowerCase();var r=c==="td"||c==="th";var i=E(e).closest("table")[0];var u=e[r?"offsetWidth":"offsetHeight"];var a=t[r?"scrollLeft":"scrollTop"];var l=t[r?"clientWidth":"clientHeight"];var o=E(e).css("position")==="relative"&&Ct&&r?Math.abs(i.offsetLeft-e.offsetLeft):e[r?"offsetLeft":"offsetTop"];var f=o+u;var n=0;var s=0;var d=0;if(Ct&&r)if(yt.msie||yt.edge)s=i.offsetLeft;else if(yt.mozilla||yt.webkit&&yt.version>85)d=i.offsetLeft-D.support.scrollbar();a=Math.abs(a+s-d);if(a>o)n=o;else if(f>a+l)if(u<=l)n=f-l;else n=o;else n=a;n=Math.abs(n+s)+d;t[r?"scrollLeft":"scrollTop"]=n},_navigatable:function(){var e=this;if(!e.options.navigatable)return;var t=e.table.add(e.lockedTable);var r=e.thead.parent().add(E(">table",e.lockedHeader));var i=t;if(e.options.scrollable){i=i.add(r);r.attr(Be,-1)}this._navigatableTables=i;this._headertables=r;i.off("mousedown"+k+" focus"+k+" focusout"+k+" keydown"+k);r.on("keydown"+k,e._openHeaderMenu.bind(e)).find("a.k-link").attr("tabIndex",-1);t.attr(Be,g.max(t.attr(Be)||0,0)).on("keydown"+k,".k-detail-cell",function(e){if(e.target!==e.currentTarget)e.stopImmediatePropagation()});i.on(D.support.touch?"touchstart"+k:"mousedown"+k,q+">"+P,ri.bind(e)).on("focus"+k,e._tableFocus.bind(e)).on("focusout"+k,e._tableBlur.bind(e)).on("keydown"+k,e,e._tableKeyDown.bind(e))},_openHeaderMenu:function(e){if(e.altKey&&e.keyCode==d.DOWN){this.current().find(".k-grid-filter, .k-header-column-menu").click();e.stopImmediatePropagation()}},_setTabIndex:function(e){this._navigatableTables.attr(Be,-1);e.attr(Be,0)},_tableFocus:function(e){var t=this.current();var r=E(e.currentTarget);if(t&&t.is(":visible"))t.addClass(pe);else if(this._virtualColScroll)this._setCurrent(r.find(q).first().children(P).first(),true,true);else this._setCurrent(r.find(q).first().children(P).first());this._setTabIndex(r)},_tableBlur:function(){var e=this.current();if(e)e.removeClass(pe)},_findCellIndex:function(e,t,r){var i;var a;if(r)for(a=t;a>=0;a--){i=a;if(!e[a].hidden)break}else for(a=t;a<e.length;a++){i=a;if(!e[a].hidden)break}return i},_scrollToColumn:function(e,t){if(this._virtualCellIndex===R)return false;var r=this;var i=r._virtualCellIndex;var a=L(_r(r.columns));var l=0;if(e==(Ct?d.LEFT:d.RIGHT)&&i!==a.length-1)i=r._findCellIndex(a,i+1);else if(e==(Ct?d.RIGHT:d.LEFT)&&i)i=r._findCellIndex(a,i-1,true);else if(e==d.HOME)i=r._findCellIndex(a,0);else if(e==d.END)i=r._findCellIndex(a,a.length-1,true);for(var o=0;o<i;o++)l+=a[o].width;r._virtualCellIndex=i;if(t){t.preventDefault();t.stopPropagation()}D.scrollLeft(r.content,l);return true},_tableKeyDown:function(e){var t=this.current();var r=this.virtualScroll||{};var i=this.virtualScrollable&&this.virtualScrollable.fetching();var a=E(e.target);var l=!e.isDefaultPrevented()&&!a.is(":button,a,:input,a>.k-icon");if(i){e.preventDefault();return}if(r.columns&&(!t||!document.body.contains(t[0]))&&this._scrollToColumn(e.keyCode,e))return;if(!t)t=E(this.lockedTable).add(this.options.scrollable?this.table:this.tbody).find(q).first().children(P).first();if(!t.length)return;var o=false;if(l&&e.keyCode==d.UP)o=this._moveUp(t,e.shiftKey,e.ctrlKey);if(l&&e.keyCode==d.DOWN)o=this._moveDown(t,e.shiftKey,e.ctrlKey);if(l&&e.keyCode==(Ct?d.LEFT:d.RIGHT))o=this._moveRight(t,e.altKey,e.shiftKey,e.ctrlKey,e.currentTarget);if(l&&e.keyCode==(Ct?d.RIGHT:d.LEFT))o=this._moveLeft(t,e.altKey,e.shiftKey,e.ctrlKey,e.currentTarget);if(l&&e.keyCode==d.PAGEDOWN)o=this._handlePageDown();if(l&&e.keyCode==d.PAGEUP)o=this._handlePageUp();if(l&&e.keyCode==d.HOME)o=this._handleHome(t,e.ctrlKey);if(l&&e.keyCode==d.END)o=this._handleEnd(t,e.ctrlKey);if(l&&e.keyCode==d.SPACEBAR)o=this._handleSpaceKey(t,e.ctrlKey);if(e.keyCode==d.ENTER||e.keyCode==d.F2)o=this._handleEnterKey(t,e.currentTarget,a);if(e.keyCode==d.ESC)o=this._handleEscKey(t,e.currentTarget);if(e.keyCode==d.TAB)o=this._handleTabKey(t,e.currentTarget,e.shiftKey,a);if(o){e.preventDefault();e.stopPropagation()}},_moveLeft:function(e,t,r,i,a){var l,o;var n=e.parent();var s=n.parent();if(t)if(n.hasClass("k-grouping-row"))this.collapseGroup(n);else this.collapseRow(n);else if(i&&e.is(".k-header")&&this.options.reorderable)this._moveColumn(e,true);else{o=s.find(q).index(n);l=this._prevHorizontalCell(s,e,o);if(!l[0])if(r)if(this.lockedTable){l=this._relatedRow(n);if(E.contains(this.lockedTable[0],n[0]))l=l.prevAll(W).first();l=l.children(S).last()}else l=this._tabNext(e,a,true);else{s=this._horizontalContainer(s);l=this._prevHorizontalCell(s,e,o);if(l[0]!==e[0])Yr(s.parent(),true)}this._setCurrent(l)}return true},_moveRight:function(e,t,r,i,a){var l,o;var n=e.parent();var s=n.parent();if(t)if(n.hasClass("k-grouping-row"))this.expandGroup(n);else this.expandRow(n);else if(i&&e.is(".k-header")&&this.options.reorderable)this._moveColumn(e,false);else{o=s.find(q).index(n);l=this._nextHorizontalCell(s,e,o);if(!l[0])if(r)if(this.lockedTable){l=this._relatedRow(n);if(E.contains(this.table[0],n[0]))l=l.nextAll(W).first();l=l.children(S).first()}else l=this._tabNext(e,a,false);else{s=this._horizontalContainer(s,true);l=this._nextHorizontalCell(s,e,o);if(l[0]!==e[0])Yr(s.parent(),true)}this._setCurrent(l)}return true},_moveUp:function(e,t,r){var i=e.parent().parent();var a,l,o,n;if(t){a=e.parent();a=a.prevAll(W).first();a=e.parent().is(W)?a.children().eq(e.index()):a.children(S).last()}else if(r&&e.parent().is(W)&&this._hasReorderableRows()){l=e.index();a=e.parent();a=a.prevAll(W).first();o=this.tbody.children(W).index(a);n=this.tbody.children(W).index(e.parent());if(o>=0&&!this.trigger(Me,{oldIndex:n,newIndex:o,row:e.parent()})){this.reorderRows(e.parent(),o);a=this.tbody.children(W).eq(o).children().eq(l)}}else{a=this._prevVerticalCell(i,e);if(!a[0]){this._lastCellIndex=0;i=this._verticalContainer(i,true);a=this._prevVerticalCell(i,e);if(a[0])Yr(i.parent(),true)}}var s=this._lastCellIndex||0;this._setCurrent(a);this._lastCellIndex=s;return true},_moveDown:function(e,t,r){var i=e.parent().parent();var a,l,o,n;if(t){a=e.parent();a=a.nextAll(W).first();a=e.parent().is(W)?a.children().eq(e.index()):a.children(S).first()}else if(r&&e.parent().is(W)&&this._hasReorderableRows()){l=e.index();a=e.parent();a=a.nextAll(W).first();o=this.tbody.children(W).index(a);n=this.tbody.children(W).index(e.parent());if(o>=0&&!this.trigger(Me,{oldIndex:n,newIndex:o,row:e.parent()})){this.reorderRows(e.parent(),o+1);a=this.tbody.children(W).eq(o).children().eq(l)}}else{a=this._nextVerticalCell(i,e);if(!a[0]){this._lastCellIndex=0;i=this._verticalContainer(i);a=this._nextVerticalCell(i,e);if(a[0])Yr(i.parent(),true)}}var s=this._lastCellIndex||0;this._setCurrent(a);this._lastCellIndex=s;return true},_moveColumn:function(e,t){var r=this.wrapper.data().kendoReorderable.element.find(this._draggableInstance.options.filter+":visible");var i=x(or(this.columns));var a=r.index(E(e));var l=t?-1:1;var o=i[a];var n=nr(i,this.columns,a,a+l);if(n>=0){this.reorderColumn(n,o,t);this.trigger(De,{newIndex:n,oldIndex:a,column:o})}},_handleHome:function(e,t){var r=e.parent();var i=r.parent();var a=this.lockedTable&&this.lockedTable.children("tbody")[0]===i[0];var l=i[0]===this.tbody[0];var o;if(this._hasVirtualColumns()){this._scrollToColumn(D.keys.HOME);return true}if(t)if(this.lockedTable)o=this.lockedTable.find(W).first().children(P).first();else o=this.table.find(W).first().children(P).first();else if(l||a){if(l&&this.lockedTable)r=this._relatedRow(r);o=r.children(S).first()}if(o&&o.length){this._setCurrent(o);return true}},_handleEnd:function(e,t){var r=e.parent();var i=r.parent();var a=this.lockedTable&&this.lockedTable.children("tbody")[0]===i[0];var l=i[0]===this.tbody[0];var o;if(this._hasVirtualColumns()){this._scrollToColumn(D.keys.END);return true}if(t)o=this.table.find(W).last().children(P).last();else if(l||a){if(!l&&this.lockedTable)r=this._relatedRow(r);o=r.children(S).last()}if(o&&o.length){this._setCurrent(o);return true}},_handlePageDown:function(){if(!this.options.pageable)return false;this.dataSource.page(this.dataSource.page()+1);return true},_handlePageUp:function(){if(!this.options.pageable)return false;this.dataSource.page(this.dataSource.page()-1);return true},_handleTabKey:function(e,t,r,i){var a=this.options.editable&&this._editMode()=="incell";var l;if(!a||e.is("th")||(this.options.scrollable?this._headertables.filter(t).length:this.thead.filter(i).length))return false;l=E(u()).closest(".k-edit-cell");if(l[0]&&l[0]!==e[0])e=l;l=this._tabNext(e,t,r);if(l[0]===e[0])return false;if(l.length){this._handleEditing(e,l,l.closest("table"));return true}return false},_handleEscKey:function(e,t){var r=u();var i=this._editMode()=="incell";if(!oi(e)){if(e.has(r).length){Yr(t,true);return true}return false}if(i)this.closeCell(true);else{var a=E(e).parent().index();if(r)r.blur();this.cancelRow(true);if(a>=0)this._setCurrent(this.items().eq(a).children(P).first())}Yr(t,true);return true},_toggleCurrent:function(e,t,r){var i=e.parent();if(e.is(".k-command-cell"))return false;if(i.is(".k-grouping-row")){i.find(".k-icon").first().click();return true}if(!t&&r){i.find(".k-icon").first().click();return true}return false},_handleSpaceKey:function(e,t){var r=this;if(!t||!r.groupable||!e.hasClass("k-header"))return;var i=r.groupable.descriptors();var a=e.attr(D.attr("field"));var l=r.groupable.aggregates();var o=e.attr(D.attr("title"))||a;if(r.groupable._canDrag(e)){i.push({field:a,dir:"asc",aggregates:l||[]});o+=" "+r.options.messages.ungroupHeader}else{i=E.grep(i,function(e){return e.field!==a});o+=" "+r.options.messages.groupHeader}e.attr("aria-label",o);r.dataSource.group(i);return true},_handleEnterKey:function(e,t,r){var i=this.options.editable&&this.options.editable.update!==false;var a=r.closest("[role=gridcell]");var l=this._hasDetails();var o;if(!r.is("table")&&!E.contains(e[0],r[0]))e=a;if(e.is("th")){o=e.find(".k-link");if(o.length)o.click();else e.find(ve).trigger("focus");return true}if(this._toggleCurrent(e,i,l))return true;var n=e.find(":kendoFocusable").first();if(n[0]&&!e.hasClass("k-edit-cell")&&e.hasClass("k-state-focused")){n.trigger("focus");return true}if(i&&!r.is(":button,.k-button,textarea")){if(!a[0])a=e;this._handleEditing(a,false,t);return true}return false},_nextHorizontalCell:function(e,t,r){var i=t.nextAll(S);if(!i.length){var a=e.find(q);var l=a.index(t.parent());if(l==-1){if(t.hasClass("k-header")){var o=[];gr([H(this.columns)[0]],Dr(a.eq(0).children(":visible").first()),o,0,0);if(o[r])return o[r][0];return t}if(t.parent().hasClass("k-filter-row"))return a.last().children(S).first();return a.eq(r).children(S).first()}}return i.first()},_prevHorizontalCell:function(e,t,r){var i=t.prevAll(S);if(!i.length){var a=e.find(q);var l=a.index(t.parent());if(l==-1){if(t.hasClass("k-header")){var o=[];var n=H(this.columns);gr([n[n.length-1]],Dr(a.eq(0).children().last()),o,0,0);if(o[r])return o[r][0];return t}if(t.parent().hasClass("k-filter-row"))return a.last().children(S).last();return a.eq(r).children(S).last()}}return i.first()},_currentDataIndex:function(e,t){var r=t.attr("data-index");if(!r)return R;var i=H(this.columns).length;if(i&&!e.closest("div").hasClass("k-grid-content-locked")[0])return r-i;return r},_prevVerticalCell:function(e,t){var r;var i=t.parent();var a=e.children(q);var l=a.index(i);var o=this._currentDataIndex(e,t);if(o||t.hasClass("k-header")){r=Er(t);return r.eq(r.length-2)}o=Math.max(i.children(S).index(t),this._lastCellIndex||0);if(i.hasClass("k-filter-row"))return Ir(e).filter(Nt).eq(o);if(l==-1){if(this._hasVirtualColumns())o=this._virtualCellIndex;i=e.find("tr.k-filter-row:visible");if(!i[0]){if((this._hasDetails()||t.parent().find(".k-hierarchy-cell").length)&&o)o--;return Ir(e).filter(Nt).eq(o)}}else i=l===0?E():a.eq(l-1);r=i.children(S);if(r.length>o)return r.eq(o);return r.eq(0)},_nextVerticalCell:function(e,t){var r;var i=t.parent();var a=e.children(q);var l=a.index(i);var o=this._currentDataIndex(e,t);var c=this.virtualScroll||{};var n;if(l!=-1&&o===R&&t.hasClass("k-header"))return Dr(t).eq(1);o=o?parseInt(o,10):i.children(S).index(t);o=Math.max(o,this._lastCellIndex||0);if(l==-1){i=a.eq(0);if(c.columns){n=parseInt(i.children().first().attr("colspan"),10);o=this._virtualCellIndex-(n>1?n:0)}if(this._hasDetails()||i.find(".k-hierarchy-cell").length)o++}else i=a.eq(l+t[0].rowSpan);var s=o;if(this._currentDataIndex(e,t)!==R){var u=i.children(":not(.k-group-cell):not(.k-hierarchy-cell)");var f=u.filter(":hidden");for(var d=0,p=f.length;d<p;d++)if(u.index(f[d])<o)s--}o=s;r=i.children(S);if(r.length>o)return r.eq(o);return r.eq(0)},_verticalContainer:function(e,t){var r=e.parent();var i=this._navigatableTables.length;var a=Math.floor(i/2);var l=F(r[0],this._navigatableTables);if(t)a*=-1;l+=a;if(l>=0||l<i)r=this._navigatableTables.eq(l);return r.find(t?">thead":">tbody")},_horizontalContainer:function(e,t){var r=this._navigatableTables.length;if(r<=2)return e;var i=e.parent();var a=F(i[0],this._navigatableTables);a+=t?1:-1;if(t&&(a==2||a==r))return e;if(!t&&(a==1||a<0))return e;return this._navigatableTables.eq(a).find("thead, tbody")},_tabNext:function(e,t,r){var i=true;var a=r?e.prevAll(S).first():e.nextAll(":visible").first();if(!a.length){a=e.parent();if(this.lockedTable){i=r&&t==this.lockedTable[0]||!r&&t==this.table[0];a=this._relatedRow(a)}if(i){if(this._hasVirtualColumns())return e;a=a[r?"prevAll":"nextAll"]("tr:not(.k-grouping-row):not(.k-detail-row):visible").first()}if(r)a=a.children(S).last();else a=a.children(S).first()}return a},_handleEditing:function(e,t,r){var i=this,a=E(u()),l=i._editMode(),o=yt.msie,n=i._editContainer,s,c=i.options.editable&&i.options.editable.update!==false,d;r=E(r);if(l=="incell")d=e.hasClass("k-edit-cell");else d=e.parent().hasClass("k-grid-edit-row");if(i.editable){if(E.contains(n[0],a[0])){a.trigger("blur");if(o)a.trigger("blur")}if(!i.editable){Yr(r);return}if(i.editable.end())if(l=="incell")i.closeCell();else{i.saveRow();d=true}else{if(l=="incell")i._setCurrent(n);else i._setCurrent(n.children().filter(S).first());s=n.find(":kendoFocusable").first()[0];if(s)s.focus();return}}if(t)i._setCurrent(t);Yr(r,true);if(!c)return;if(!d&&!t||t)if(l===$e){if(!E(i.current()).hasClass(y))i.editCell(i.current())}else i.editRow(i.current().parent())},_wrapper:function(){var e=this,t=e.table,r=e.options.height,i=e.options.width,a=e.element;if(!a.is("div"))a=a.wrap("<div/>").parent();e.wrapper=a.addClass("k-grid k-widget k-grid-display-block");if(r){e.wrapper.css(Ve,r);t.css(Ve,"auto")}if(i)e.wrapper.css("width",i);e._initMobile()},_initMobile:function(){var e=this.options;var t=this;this._isMobile=e.mobile===true&&D.support.mobileOS||e.mobile==="phone"||e.mobile==="tablet";if(this._isMobile){var r=this.wrapper.addClass("k-grid-mobile").wrap("<div data-"+D.ns+'stretch="true" data-'+D.ns+'role="view" '+"data-"+D.ns+'init-widgets="false"></div>').parent();this.pane=this._createPane(r);this.view=this.pane.view();if(e.height)this.pane.element.parent().css(Ve,e.height);else this.pane.element.parent().css(Ve,this.wrapper[0].style.height);this._editAnimation="slide";t.wrapper.on("transitionend"+k,function(e){e.stopPropagation()});t.wrapper.on("contextmenu"+k,"th a",function(e){e.preventDefault();return false});this.view.bind("showStart",function(){if(t._isLocked()){t._updateTablesWidth();t._applyLockedContainersWidth();t._syncLockedContentHeight();t._syncLockedHeaderHeight();t._syncLockedFooterHeight()}})}},_createPane:function(e){var t=D.Pane.wrap(e,{viewEngine:{viewOptions:{renderOnInit:true,wrap:false,wrapInSections:true,detachOnHide:false,detachOnDestroy:false}}});return t},_tbody:function(){var e=this,t=e.table,r;r=t.find(">tbody");if(!r.length)r=E("<tbody/>").appendTo(t);e.tbody=r.attr("role","rowgroup")},_scrollable:function(){var r=this,e,t,c=r.options,i=c.scrollable,u=i!==true&&i.virtual,a=u?ai(i.virtual):null,l=!D.support.kineticScrollNeeded||a&&a.rows?D.support.scrollbar():0,o;if(i){e=r.wrapper.children(".k-grid-header");if(!e[0])e=E('<div class="k-grid-header" />').insertBefore(r.table);e.css(Ct?"padding-left":"padding-right",i.virtual?l+1:l);t=E('<table role="grid" />');t.width(r.table[0].style.width);t.append(r.thead);e.empty().append(E('<div class="k-grid-header-wrap k-auto-scrollable" />').append(t));r.content=r.table.parent();r.virtualScroll=a;if(r.content.is(".k-virtual-scrollable-wrap, "+I+xt.scrollContainer))r.content=r.content.parent();if(!r.content.is(".k-grid-content, .k-virtual-scrollable-wrap"))r.content=r.table.wrap('<div class="k-grid-content k-auto-scrollable" />').parent();if(a&&a.rows&&!r.virtualScrollable)r._createVirtualScrollable();if(a&&a.columns)r.table.css({width:cr(Tr(yr(r.columns)))});o=e.children(".k-grid-header-wrap");r.scrollables=o.add(r.content);var n=r.wrapper.find(".k-grid-footer");if(n.length)r.scrollables=r.scrollables.add(n.children(".k-grid-footer-wrap"));o.off("scroll"+k).on("scroll"+k,function(e){if(r._scrollLeft!==this.scrollLeft)D.scrollLeft(r.scrollables.not(e.currentTarget),this.scrollLeft)});if(a&&a.rows)r.content.find(">.k-virtual-scrollable-wrap").off("scroll"+k).on("scroll"+k,function(){var e=this.scrollLeft!=r._scrollLeft;r._scrollLeft=this.scrollLeft;D.scrollLeft(r.scrollables,this.scrollLeft);if(r.lockedContent)r.lockedContent[0].scrollTop=this.scrollTop;if(a.columns&&e)r.refresh()});else{var s=i.endless;var f=r.dataSource.options.pageSize;if(s)r._endlessPageSize=f;r.content.off("scroll"+k).on("scroll"+k,function(e){var t=this.scrollLeft!=r._scrollLeft;r._scrollLeft=this.scrollLeft;D.scrollLeft(r.scrollables.not(e.currentTarget),r._scrollLeft);if(r.lockedContent&&e.currentTarget==r.content[0])r.lockedContent[0].scrollTop=this.scrollTop;if(s)if(this.scrollTop+this.clientHeight-this.scrollHeight>=-10&&!r._endlessFetchInProgress&&r._endlessPageSize<r.dataSource.total()){r._skipRerenderItemsCount=r._endlessPageSize;r._endlessPageSize=r._endlessPageSize+f;r.dataSource.options.endless=true;r._endlessFetchInProgress=true;r.dataSource.pageSize(r._endlessPageSize)}if(a&&a.columns&&t){r._virtualColScroll=true;r._cacheEditableState();r.refresh();r._restoreEditableState();r._virtualColScroll=false}});var d=r.content.data("kendoTouchScroller");if(d)d.destroy();d=D.touchScroller(r.content);if(d&&d.movable){r.touchScroller=d;d.movable.bind("change",function(e){D.scrollLeft(r.scrollables,-e.sender.x);if(r.lockedContent)r.lockedContent.scrollTop(-e.sender.y)});r.one(ie,function(e){e.sender.wrapper.addClass("k-grid-backface")})}}}},_createVirtualScrollable:function(){var e=this;if(e.virtualScrollable)e.virtualScrollable.destroy();e.virtualScrollable=new Ht(e.content,{dataSource:e.dataSource,itemHeight:function(){return e._averageRowHeight()},page:function(){e._restoreEditableState()},scroll:function(){e._focusEditable()},loadStart:function(){e._progress(true)},loadEnd:function(){e._progress(false)}});e.virtualScrollable.bind(se,e._onVirtualPaging.bind(e))},_onVirtualPaging:function(){var e=this;e._cacheEditableState();if(e._isVirtualIncellEditable()){e._shouldClearEditableState=false;e.closeCell();e._shouldClearEditableState=true}},_isVirtualEditable:function(){return this._isVirtualIncellEditable()||this._isVirtualInlineEditable()||this._isVirtualPopupEditable()},_isVirtualInlineEditable:function(){return this.virtualScrollable&&this._editMode()===Qe},_isVirtualIncellEditable:function(){return this.virtualScrollable&&this._editMode()===$e},_isVirtualPopupEditable:function(){return this.virtualScrollable&&this._editMode()==="popup"},_hasVirtualColumns:function(){return(this.virtualScroll||{}).columns?true:false},_scrollVirtualWrapper:function(){var e=this;var t=e.virtualScrollable;if(e._isVirtualInlineEditable()||e._isVirtualIncellEditable())if(t._isScrolledToBottom())t._scrollWrapperToBottom();else if(t._isScrolledToTop())t._scrollWrapperToTop()},_scrollVirtualWrapperOnColumnResize:function(){var e=this.virtualScrollable;if(e)e._scrollWrapperOnColumnResize()},_restoreEditableState:function(){var e=this;var t=e._editableState||{};var r=t.model;var i=e.dataSource;var a=e._isVirtualInlineEditable();var l=e._isVirtualIncellEditable();var o=e._hasVirtualColumns();var n;var s;if((a||l||o)&&r&&i._getByUid(r.uid,i.view()))if(e._editMode()===Qe){e._shouldClearEditableState=false;e.editRow(r);if(!o)e._focusEditable()}else if(e._editMode()===$e){n=e.tbody.children(Rt(Je,r.uid));s=E(n).children(Rt(Ke,t.field));if(s[0]){e._shouldClearEditableState=false;e.editCell(s);if(!o)e._focusEditable()}}e._shouldClearEditableState=true},_focusEditable:function(){var e=this;var t=(e._editableState||{}).field;var r=e._editContainer;if(r&&r.length&&!s(r[0],u())&&e._canFocusEditable())if(e._isVirtualInlineEditable()||e._hasVirtualColumns())r.find(Rt(Ue,t)).find(he).eq(0).trigger("focus");else if(e._isVirtualIncellEditable()||e._hasVirtualColumns())r.find(he).eq(0).trigger("focus")},_canFocusEditable:function(){var e=this;var t=(e._isVirtualIncellEditable()||e._isVirtualInlineEditable()||e._hasVirtualColumns())&&(li((e.virtualScrollable||{}).wrapper,e._editContainer)||li(e.content,e._editContainer));return t},_cacheEditableState:function(){var e=this;var t=e._editContainer;var r=t?e._modelForContainer(t):null;var i=e._isVirtualInlineEditable();var a=e._isVirtualIncellEditable();var l=e._hasVirtualColumns();var o;var n;if((i||a||l)&&r){e._clearEditableState();o=E(u());if(t&&o[0]&&s(t[0],o[0])){o.change();n=D.widgetInstance(o,D.ui);if(n&&f(n.value)&&o.is(je)){n.value(o.val());n.trigger(ee)}}if(e._editMode()===Qe)e._editableState={model:r,field:o.closest("["+D.attr(Ue)+"]").attr(D.attr(Ue))};else if(e._editMode()===$e)e._editableState={model:r,field:t.attr(D.attr(Ke))}}},_clearSortClasses:function(){var e=this,t=e.content||e.table,r=e.lockedContent;if(t)t.find(V).removeClass(Ce);if(r)r.find(V).removeClass(Ce)},_clearEditableState:function(){var e=this;if(e.virtualScrollable||e.virtualScroll&&e._hasVirtualColumns())e._editableState=null},_destroyVirtualScrollable:function(){var e=this;e._clearEditableState();if(e.virtualScrollable&&e.virtualScrollable.element)e.virtualScrollable.destroy();e.virtualScrollable=null},_renderNoRecordsContent:function(){var e=this;if(e.options.noRecords){var t=e.table.parent().children("."+ke);if(t.length){e.angular("cleanup",function(){return{elements:t.get()}});t.remove()}if(!e.dataSource||!e.dataSource.view().length){t=E(e.noRecordsTemplate({})).insertAfter(e.table);e.angular("compile",function(){return{elements:t.get(),data:[{}]}})}}},_setContentWidth:function(e){var t=this,r="k-grid-content-expander",i='<div class="'+r+'"></div>',a=t.resizable,l;if(t.options.scrollable&&t.wrapper.is(":visible")){l=t.table.parent().children("."+r);t._setContentWidthHandler=t._setContentWidth.bind(t);if(!t.dataSource||!t.dataSource.view().length){if(!l[0]){l=E(i).appendTo(t.table.parent());if(a)a.bind("resize",t._setContentWidthHandler)}if(t.thead){l.width(t.thead.width());if(!isNaN(parseFloat(e,10)))D.scrollLeft(t.content,e)}}else if(l[0]){l.remove();if(a)a.unbind("resize",t._setContentWidthHandler)}t._applyLockedContainersWidth();t._syncLockedContentHeight();if(t.lockedHeader&&t.table[0].clientWidth===0)t.table[0].style.width="1px"}},_applyLockedContainersWidth:function(){if(this.options.scrollable&&this.lockedHeader){var e=this.thead.parent(),t=e.parent(),r=this.wrapper[0].clientWidth,i=this._groups(),a=D.support.scrollbar(),l=this.lockedHeader.find(">table>colgroup>col:not(.k-group-col, .k-hierarchy-col)"),o=e.find(">colgroup>col:not(.k-group-col, .k-hierarchy-col)"),n=ur(l),s=ur(o),d;if(i>0)n+=z(this.lockedHeader.find(".k-group-cell").first())*i;if(n>=r)n=r-3*a;this.lockedHeader.add(this.lockedContent).width(n);t[0].style.width=t.parent().width()-n-2+"px";e.add(this.table).width(s);if(this.virtualScrollable&&!St)r-=a;this.content[0].style.width=r-n-1+"px";if(this.lockedFooter&&this.lockedFooter.length){this.lockedFooter.width(n);d=this.footer.find(".k-grid-footer-wrap");d[0].style.width=t[0].clientWidth+"px";d.children().first().width(s)}}},_setContentHeight:function(){var e=this,t=e.options,r,i=e.wrapper.children(".k-grid-header"),a=D.support.scrollbar();var l=(t.scrollable||{}).height;if(t.scrollable&&e.wrapper.is(":visible")){if(l&&e.content[0].style.height==="")e.content[0].style.height=l;r=e.wrapper.innerHeight();r-=_(i);if(e.pager&&e.pager.element.is(":visible"))r-=_(e.pager.element);if(t.groupable)r-=_(e.wrapper.children(".k-grouping-header"));if(t.toolbar)r-=_(e.wrapper.children(".k-grid-toolbar"));if(e.footerTemplate)r-=_(e.wrapper.children(".k-grid-footer"));var o=function(e){var t,r;if(e[0].style.height)return true;else t=e.height();e.height("auto");r=e.height();if(t!=r){e.height("");return true}e.height("");return false};if(o(e.wrapper))if(r>a*2){if(e.lockedContent){a=e.table[0].offsetWidth>e.table.parent()[0].clientWidth?a:0;e.lockedContent.height(r-a)}e.content.height(r)}else e.content.height(a*2+1)}},_averageRowHeight:function(){var e=this,t=e._items(e.tbody,true).length,r=e._rowHeight;if(t===0)return r;if(!e._rowHeight){e._rowHeight=r=_(e.table)/t;e._sum=r;e._measures=1}var i=_(e.table)/t;if(r!==i){e._measures++;e._sum+=i;e._rowHeight=e._sum/e._measures}return r},_dataSource:function(){var e=this,t=e.options,r,i=t.dataSource;i=p(i)?{data:i}:i;if(M(i)){T(i,{table:e.table,fields:e.columns});r=t.pageable;if(M(r)&&r.pageSize!==R)i.pageSize=r.pageSize}if(e.dataSource&&e._refreshHandler)e.dataSource.unbind(ee,e._refreshHandler).unbind(w,e._progressHandler).unbind(C,e._errorHandler).unbind(tt,e._sortHandler);else{e._refreshHandler=e.refresh.bind(e);e._progressHandler=e._requestStart.bind(e);e._errorHandler=e._error.bind(e);e._sortHandler=e._clearSortClasses.bind(e)}e.dataSource=m.create(i).bind(ee,e._refreshHandler).bind(w,e._progressHandler).bind(C,e._errorHandler).bind(tt,e._sortHandler)},_error:function(){this._progress(false)},_requestStart:function(){this._progress(true)},_modelChange:function(c){var e=this,u=e.tbody,t=c.model,r=e.tbody.find("tr["+D.attr("uid")+"="+t.uid+"]"),i,a,l,f=r.hasClass("k-alt"),o,n=e._items(u).index(r),s=e.lockedContent,p,d,h,g,m;if(s)i=e._relatedRow(r);if(r.add(i).children(".k-edit-cell").length&&!e.options.rowTemplate)r.add(i).children(":not(.k-group-cell,.k-hierarchy-cell)").each(function(){a=E(this);l=L(e.columns)[e._calculateColumnIndex(a)];if(l.field===c.field)if(!a.hasClass("k-edit-cell"))e._displayCell(a,l,t);else a.addClass("k-dirty-cell")});else if(!r.hasClass("k-grid-edit-row")){d=E().add(r);if(s){o=(f?e.lockedAltRowTemplate:e.lockedRowTemplate)(t);d=d.add(i);i.replaceWith(o)}e.angular("cleanup",function(){return{elements:d.get()}});o=(f?e.altRowTemplate:e.rowTemplate)(t);r.replaceWith(o);o=e._items(u).eq(n);var v=[{dataItem:t}];if(s){r=r.add(i);i=e._relatedRow(o)[0];Qr(o[0],i);o=o.add(i);v.push({dataItem:t})}e.angular("compile",function(){return{elements:o.get(),data:v}});p=e.options.selectable;if((p||e._checkBoxSelection)&&r.hasClass("k-state-selected"))e.select(o);g=d.children(":not(.k-group-cell,.k-hierarchy-cell)");h=o.children(":not(.k-group-cell,.k-hierarchy-cell)");for(n=0,m=e.columns.length;n<m;n++){l=e.columns[n];a=h.eq(n);if(p&&g.eq(n).hasClass("k-state-selected"))a.addClass("k-state-selected")}e.trigger("itemChange",{item:o,data:t,ns:b})}},_pageable:function(){var t=this,e,r=t.options.pageable,i=t.options.navigatable;if(r){e=t.wrapper.children("div.k-grid-pager");if(!e.length)e=E('<div class="k-pager-wrap k-grid-pager"/>');if(r.position==="top")e.prependTo(t.wrapper).addClass("k-grid-pager-top");else e.appendTo(t.wrapper);if(t.pager)t.pager.destroy();if(typeof r==="object"&&r instanceof D.ui.Pager)t.pager=r;else if(t.dataSource._groupPaging)t.pager=new a(e,T({},r,{dataSource:t.dataSource,navigatable:i}));else t.pager=new D.ui.Pager(e,T({},r,{dataSource:t.dataSource,navigatable:i}));t.pager.bind("pageChange",function(e){if(t.trigger("page",{page:e.index}))e.preventDefault()});t._togglePagerVisibility()}},_footer:function(){var e=this,t=e.dataSource.aggregates(),r="",i=e.footerTemplate,a=e.options,l,o=e.footer||e.wrapper.find(".k-grid-footer");if(i){r=E(e._wrapFooter(i(t)));if(o.length){var n=r;e.angular("cleanup",function(){return{elements:o.get()}});o.replaceWith(n);o=e.footer=n}else if(a.scrollable)o=e.footer=a.pageable&&a.pageable.position!=="top"?r.insertBefore(e.wrapper.children("div.k-grid-pager")):r.appendTo(e.wrapper);else o=e.footer=r.insertAfter(e.tbody);e.angular("compile",function(){return{elements:o.find("td:not(.k-group-cell, .k-hierarchy-cell)").get(),data:v(e.columns,function(e){return{column:e,aggregate:t[e.field]}})}})}else if(o&&!e.footer)e.footer=o;if(o.length){if(a.scrollable){l=o.attr("tabindex",-1).children(".k-grid-footer-wrap");e.scrollables=E(e.scrollables.filter(function(){return!E(this).is(".k-grid-footer-wrap")}).toArray()).add(l)}if(e._footerWidth)o.find("table").css("width",e._footerWidth);if(l){var s=D.scrollLeft(e.content);if(a.scrollable!==true&&e.virtualScroll&&e.virtualScroll.rows)s=D.scrollLeft(e.wrapper.find(".k-virtual-scrollable-wrap"));D.scrollLeft(l,s)}}if(e.lockedContent){e._appendLockedColumnFooter();e._applyLockedContainersWidth();e._syncLockedFooterHeight()}},_wrapFooter:function(e){var t=this,r="",i=!D.support.mobileOS?D.support.scrollbar():0;if(t.options.scrollable){r=E('<div class="k-grid-footer"><div class="k-grid-footer-wrap"><table><tbody>'+e+"</tbody></table></div></div>");t._appendCols(r.find("table"));r.css(Ct?"padding-left":"padding-right",i);return r}return'<tfoot class="k-grid-footer">'+e+"</tfoot>"},_columnMenu:function(){var t=this,e,r=L(t.columns),i,a=t.options,l=a.columnMenu,o,c,n,s,u=A(t.columns,function(e){return e.columns!==R}).length>0,f=A(t.columns,function(e){return e.lockable!==false}).length>0,p=A(t.columns,function(e){return e.stickable===true}).length>0,h=this._isMobile,g=function(e){t.trigger(J,{field:e.field,container:e.container})},m=function(e){t.trigger(X,{field:e.field,container:e.container})},v=function(e){Yr(e.closest("table"),true)},k=function(e){t.trigger(Le,{column:e.column})},b=function(e){t.trigger(ze,{column:e.column})},_=function(e){if(t.trigger("sort",{sort:e.sort}))e.preventDefault();else{t._clearEditableState();if(t.dataSource.options.endless)t._resetEndless()}},w=function(e){if(t.trigger("filter",{filter:e.filter,field:e.field}))e.preventDefault();else{t._clearEditableState();if(t.dataSource.options.endless)t._resetEndless()}},C=a.$angular;if(l){if(typeof l=="boolean")l={};t._setColumnsMediaVisibility(r);s=Ir(t.thead);for(var d=0,y=s.length;d<y;d++){i=r[d];var S=s.eq(d);if(!i.command&&(i.field||S.attr("data-"+D.ns+"field"))){e=S.data("kendoColumnMenu");if(e)e.destroy();c=i.sortable!==false&&l.sortable!==false&&a.sortable!==false?T({},a.sortable,{compare:(i.sortable||{}).compare}):false;n=a.filterable&&i.filterable!==false&&l.filterable!==false?T({pane:t.pane},a.filterable,i.filterable):false;if(i.filterable&&i.filterable.dataSource){n.forceUnique=false;n.checkSource=i.filterable.dataSource}if(n)n.format=i.format;o={dataSource:t.dataSource,values:i.values,columns:l.columns,sortable:c,filterable:n,messages:l.messages,owner:t,closeCallback:v,init:g,open:m,stick:k,unstick:b,pane:t.pane,sort:_,filtering:w,filter:h?":not(.k-column-active)":"",hasLockableColumns:H(r).length>0&&f&&!u,hasStickableColumns:p&&!u,encodeTitles:t.options.encodeTitles,componentType:l.componentType,appendTo:I+xt.headerCellInner};if(C)o.$angular=C;S.kendoColumnMenu(o)}}}},_headerCells:function(){return E(this.thead).find("th").filter(function(){var e=E(this);return!e.hasClass("k-group-cell")&&!e.hasClass("k-hierarchy-cell")})},_hasFilterMenu:function(){var e=this.options.filterable;if(e&&typeof e.mode==Ge&&e.mode.indexOf("menu")==-1)return false;return e},_filterable:function(){var t=this,e=L(t.columns),r,i,a,l=function(e){t.trigger(Q,{field:e.field,container:e.container})},c=function(e){Yr(e.closest("table"),true)},u=function(e){if(t.trigger("filter",{filter:e.filter,field:e.field}))e.preventDefault();else{t._clearEditableState();if(t.dataSource.options.endless)t._resetEndless()}},f=function(e){t.trigger(Y,{field:e.field,container:e.container})},o=t._hasFilterMenu();if(o&&!t.options.columnMenu){i=Ir(t.thead);for(var n=0,p=i.length;n<p;n++){a=i.eq(n);if(e[n].filterable!==false&&!e[n].command&&(e[n].field||a.attr("data-"+D.ns+"field"))){r=a.data("kendoFilterMenu");if(r)r.destroy();r=a.data("kendoFilterMultiCheck");if(r)r.destroy();var s=e[n].filterable;var d=T({},o,s,{dataSource:t.dataSource,values:e[n].values,format:e[n].format,closeCallback:c,title:e[n].title||e[n].field,init:l,open:f,pane:t.pane,change:u,appendTo:I+xt.headerCellInner});if(s&&s.messages)d.messages=T(true,{},o.messages,s.messages);if(s&&s.dataSource){d.forceUnique=false;d.checkSource=s.dataSource}if(s&&s.multi)a.kendoFilterMultiCheck(d);else a.kendoFilterMenu(d)}}}},_filterRow:function(){var t=this;if(!t._hasFilterRow())return;var e;var r=t.options.$angular;var i=L(t.columns),c=t.options.filterable,u=t.thead.find(".k-filter-row"),f=function(e){if(t.trigger("filter",{filter:e.filter,field:e.field}))e.preventDefault();else{t._clearEditableState();if(t.dataSource.options.endless)t._resetEndless()}};this._updateHeader(this.dataSource.group().length);for(var a=0;a<i.length;a++){var l,o=i[a],p=t.options.filterable.operators,h=false,n=E("<th/>"),s=o.field;if(o.hidden)n.hide();u.append(n);if(s&&o.filterable!==false){var d=o.filterable&&o.filterable.cell||{};l=t.options.dataSource;if(l instanceof m)l=t.options.dataSource.options;var g=T(true,{},c.messages);if(o.filterable)T(true,g,o.filterable.messages);if(d.enabled===false){n.html("&nbsp;");continue}if(d.dataSource){l=d.dataSource;h=true}if(o.filterable&&o.filterable.operators)p=o.filterable.operators;e={column:o,dataSource:t.dataSource,suggestDataSource:l,customDataSource:h,field:s,messages:g,values:o.values,template:d.template,delay:d.delay,inputWidth:d.inputWidth,suggestionOperator:d.suggestionOperator,minLength:d.minLength,dataTextField:d.dataTextField,operator:d.operator,operators:p,showOperators:d.showOperators,change:f};if(r)e.$angular=r;E("<span/>").attr(D.attr("field"),s).appendTo(n).kendoFilterCell(e)}else n.html("&nbsp;");n.data("column",o)}},_sortable:function(){var t=this,e=L(t.columns),r,i,a,l=t.options.sortable,o=function(e){if(t.trigger("sort",{sort:e.sort}))e.preventDefault();else t._clearEditableState()};if(l){var n=Ir(t.thead);for(var s=0,d=n.length;s<d;s++){r=e[s];if(r.sortable!==false&&!r.command&&r.field){a=n.eq(s);i=a.data("kendoColumnSorter");if(i)i.destroy();a.attr("data-"+D.ns+"field",r.field).kendoColumnSorter(T({},l,r.sortable,{dataSource:t.dataSource,aria:true,filter:":not(.k-column-active)",change:o}))}}n=null}},_columns:function(e){var t=this,r=t.table,i,d=r.find("col"),a,l=t.element.find("thead tr"),o=t.options.dataSource,n;e=e.length?e:v(r.find("th:not(.k-group-cell):not(.k-hierarchy-cell)"),function(e,t){e=E(e);var r=e.attr(D.attr("sortable")),i=e.attr(D.attr("filterable")),a=e.attr(D.attr("type")),l=e.attr(D.attr("groupable")),o=e.attr(D.attr("field")),n=e.attr(D.attr("title")),s=e.attr(D.attr("menu"));if(!o)o=e.text().replace(/\s|[^A-z0-9]/g,"");return{field:o,type:a,title:n,sortable:r!=="false",filterable:i!=="false",groupable:l!=="false",menu:s!=="false",template:e.attr(D.attr("template")),width:d.eq(t).css("width")}});i=!(t.table.find("tbody tr").length>0&&(!o||!o.transport));if(t.options.scrollable){var c=e;a=H(e);e=_r(e);if(a.length>0&&e.length===0)throw new Error("There should be at least one non locked column");qr(t.element.find("tr:has(th)").first(),c);e=a.concat(e)}if(l.length&&e.length)t._updateColumnIDs(e,l.first());t.columns=Mt(e,i);if(E.grep(L(t.columns),function(e){return e.selectable}).length){t._selectedIds={};t._checkBoxSelection=true;t.wrapper.on(Pe+k,"tbody > tr "+ve,t._checkboxClick.bind(t));t.wrapper.on(Pe+k,"thead > tr "+ve,t._headerCheckboxClick.bind(t))}n=E.grep(L(t.columns),function(e){return e.draggable});if(n.length){t._hasDragHandleColumn=true;for(var s=0;s<n.length;s++)n[s].headerAttributes=E.extend({"aria-label":t.options.messages.dragHandleLabel},n[s].headerAttributes)}t._foreignKeyBindings(t.columns)},_foreignKeyBindings:function(e){var t=this;var r=e.length;var i;for(var a=0;a<r;a++){i=e[a];if(i.dataSource)t._fetchForeignKeyValues(i)}},_fetchForeignKeyValues:function(t){var e=this;var r=E.Deferred();e._hasBoundForeignKey=true;t.dataSource=m.create(t.dataSource);if(!e._foreignKeyPromises)e._foreignKeyPromises=[];e._foreignKeyPromises.push(r);t.dataSource.fetch().then(function(){var e=t.dataSource.data();t.values=e.map(function(e){return{value:e[t.dataValueField],text:e[t.dataTextField]}});r.resolve()})},_updateColumnIDs:function(e,t){if(!e.length)return;var r=t.find("th:not(.k-group-cell):not(.k-hierarchy-cell)");var i;for(var a=0;a<e.length;a++){i=r.eq(a).attr("id");if(i)e[a].headerAttributes=T(e[a].headerAttributes,{id:i})}this._updateColumnIDs(xr(e),t.next())},_headerCheckboxClick:function(e){var t=this,r=E(e.target),i=r.prop("checked");if(!t._belongsToGrid(r))return;if(i)t.select(t.items());else t.clearSelection()},_checkboxClick:function(e){var t=this,r=E(e.target).closest("tr"),i=!r.hasClass(ge);if(!t._belongsToGrid(r))return;if(i)t.select(r);else t._deselectCheckRows(r)},_groups:function(){var e=this.dataSource.group();return e?e.length:0},_tmpl:function(e,t,c,u){var r=this,i=T({},D.Template,r.options.templateSettings),f=i.paramName,a,p=t.length,h,l={storage:{},count:0},o,g,m=r._hasDetails(),n=[],v=r._groups(),k=r.options.navigatable;var b=D.attr("field");var s;var d="";if(!e){e="<tr";if(c)n.push("k-alt");n.push("k-master-row");if(n.length)e+=' class="'+n.join(" ")+'"';if(p)e+=" "+D.attr("uid")+'="#='+D.expr("uid",i.paramName)+'#"';e+=" role='row'>";if(v>0&&!u)e+=It(v);if(m)e+='<td class="k-hierarchy-cell" aria-expanded="false"><a class="k-icon k-i-expand" href="\\#" '+dt+'="'+st+'" tabindex="-1"></a></td>';for(a=0;a<p;a++){o=t[a];h=o.template;g=typeof h;s=o.field;if(r._editMode()===$e&&s){o.attributes=o.attributes||{};if(r.virtualScroll)o.attributes[b]=s;d=r._dirtyCellTemplate(s,f);o.attributes["class"]=o.attributes["class"]||"";if(o.attributes["class"].indexOf(d)<0)o.attributes["class"]+=d}if(o.colSpan&&o.colSpan>0&&Lr(o.attributes))o.attributes=zr(o.attributes);else if(!o.colSpan&&o.hidden)o.attributes=Fr(o.attributes);if(o.command){o.attributes=o.attributes||{};if(typeof o.attributes["class"]!=="undefined")o.attributes["class"]+=" k-command-cell";else o.attributes["class"]="k-command-cell"}if(o.draggable){o.attributes=o.attributes||{};if(typeof o.attributes["class"]!=="undefined")o.attributes["class"]+=" k-drag-cell k-touch-action-none";else o.attributes["class"]="k-drag-cell k-touch-action-none";if(typeof o.attributes["aria-label"]==="undefined")o.attributes["aria-label"]=r.options.messages.dragHandleLabel;if(typeof o.attributes.style!=="undefined")o.attributes.style+=" cursor: move;";else o.attributes.style="cursor: move;"}e+="<td"+Et(o.attributes);if(k&&!o.draggable)e+=" aria-describedby='"+o.headerAttributes.id+"'";if(o.colSpan){if(o.colSpan>1)e+=" "+D.attr("virtual");e+=" colSpan='"+o.colSpan+"'"}e+=" role='gridcell'>";e+=r._cellTmpl(o,l);e+="</td>"}e+="</tr>"}e=D.template(e,i);if(l.count>0)return e.bind(l.storage);return e},_dirtyCellTemplate:function(e,t){var r;if(e&&t){r=e.charAt(0)==="["?D.expr(e,t+".dirtyFields"):t+".dirtyFields['"+e+"']";return"#= "+t+" && "+t+".dirty && "+t+".dirtyFields && "+r+" ? ' k-dirty-cell' : '' #"}return""},_headerCellText:function(e){var t=this,r=T({},D.Template,t.options.templateSettings),i=e.headerTemplate,a=typeof i,l=e.title&&(t.options.encodeTitles?pi(e.title):e.title)||e.field||"";if(a===Oe)l=D.template(i,r)({});else if(a===Ge)l=i;return l},_cellTmpl:function(e,t){var r=this,c=T({},D.Template,r.options.templateSettings),i=e.template,a=c.paramName,l=e.field,o="",n,u,s=e.format,f=typeof i,d=e.values;if(e.command){if(p(e.command)){for(n=0,u=e.command.length;n<u;n++)if(e.command[n].visible)o+=D.format("#= {0}(data)? '{1}':'' #",e.command[n].visible,r._createButton(e.command[n]).replace(ut,"\\#").replace(/'/gi,"\\'"));else o+=r._createButton(e.command[n]).replace(ut,"\\#");return o}return r._createButton(e.command).replace(ut,"\\#")}if(e.selectable)return kt;if(e.draggable)return _t;o+=r._dirtyIndicatorTemplate(l,a);if(f===Oe){t.storage["tmpl"+t.count]=i;o+="#=this.tmpl"+t.count+"("+a+")#";t.count++}else if(f===Ge)o+=i;else if(d&&d.length&&M(d[0])&&"value"in d[0]&&l){o+="#var v ="+D.stringify(Pr(d)).replace(ut,"\\#")+"#";o+="#var f = v[";if(!c.useWithBlock)o+=a+".";o+=l+"]#";o+="${f != null ? f : ''}"}else{o+=e.encoded?"#:":"#=";if(s)o+='kendo.format("'+s.replace(ct,"\\$1")+'",';if(l){l=D.expr(l,a);o+=l+"==null?'':"+l}else o+="''";if(s)o+=")";o+="#"}return o},_dirtyIndicatorTemplate:function(e,t){var r;if(e&&t){r=e.charAt(0)==="["?D.expr(e,t+".dirtyFields"):t+".dirtyFields['"+e+"']";return"#= "+t+" && "+t+".dirty && "+t+".dirtyFields && "+r+" ? '<span class=\"k-dirty\"></span>' : '' #"}return""},_virtualCols:function(e){var t=this;var r=E.map(e,function(e){return e.hidden?0:parseInt(e.width,10)});var i=t.virtualScrollable?D.scrollLeft(t.content.find(">.k-virtual-scrollable-wrap")):D.scrollLeft(t.content);var c=z(t.content);var u=cr(e);var a=[];var f=0;var p=0;var l=0;var o=0;var n=0;var h;for(o=0;o<e.length;o++){h=o<r.length-1?r[o+1]:0;if(n+r[o]+2*h<i){if(r[o])l++;n+=r[o]}else{f=1+l;break}}l=0;n=0;for(var s=e.length-1;s>=0;s--)if(n+3*r[s]<u-c-i){if(r[s])l++;n+=r[s]}else{p=1+l;for(var d=o;d<=s;d++){if(e[d].locked)continue;a.push(e[d]);if(e[d].colSpan)delete e[d].colSpan}a[0].colSpan=f;a[a.length-1].colSpan=p;break}if(a[0].hidden)a[0].colSpan--;t.virtualCols=a;return a},_templates:function(){var e=this,t=e.options,r=e.dataSource,i=r.group(),c=e.footer||e.wrapper.find(".k-grid-footer"),a=r.aggregate(),l=L(e.columns),o=L(H(e.columns)),n=t.scrollable?L(_r(e.columns)):l,s=(e.virtualScroll||{}).columns?e._virtualCols(n):n,d=A(x(o),function(e,t){return e.groupHeaderColumnTemplate&&t!==0}),u=A(x(s),function(e){return e.groupHeaderColumnTemplate});if(t.scrollable&&o.length){if(t.rowTemplate||t.altRowTemplate)throw new Error("Having both row template and locked columns is not supported");e.rowTemplate=e._tmpl(t.rowTemplate,s,false,true);e.altRowTemplate=e._tmpl(t.altRowTemplate||t.rowTemplate,s,true,true);e.lockedRowTemplate=e._tmpl(t.rowTemplate,o);e.lockedAltRowTemplate=e._tmpl(t.altRowTemplate||t.rowTemplate,o,true)}else{e.rowTemplate=e._tmpl(t.rowTemplate,s);e.altRowTemplate=e._tmpl(t.altRowTemplate||t.rowTemplate,s,true)}if(e._hasDetails())e.detailTemplate=e._detailTmpl(t.detailTemplate||"");if(e._group&&!h(a)||!h(a)&&!c.length||A(l,function(e){return e.footerTemplate}).length)e.footerTemplate=e._footerTmpl(l,a,"footerTemplate","k-footer-template");if(i&&A(l,function(e){return e.groupFooterTemplate}).length){a=E.map(i,function(e){return e.aggregates});e.groupFooterTemplate=e._footerTmpl(s,a,"groupFooterTemplate","k-group-footer",o.length);if(t.scrollable&&o.length)e.lockedGroupFooterTemplate=e._footerTmpl(o,a,"groupFooterTemplate","k-group-footer")}if(i&&(d.length||u.length)){a=E.map(i,function(e){return e.aggregates});e.groupHeaderColumnTemplate=e._groupHeaderTmpl(x(s),a,"groupHeaderColumnTemplate","k-grouping-row",o.length,u);if(t.scrollable&&o.length)e.lockedGroupHeaderColumnTemplate=e._groupHeaderTmpl(x(o),a,"groupHeaderColumnTemplate","k-grouping-row",0,d)}else{e.groupHeaderColumnTemplate=null;e.lockedGroupHeaderColumnTemplate=null}if(e.options.noRecords)e.noRecordsTemplate=e._noRecordsTmpl()},_noRecordsTmpl:function(){var e='<div class="{0}">{1}</div>';var t='<div class="k-grid-norecords-template"{1}>{0}</div>';var r=this.options.scrollable&&!this.wrapper[0].style.height?' style="margin:0 auto;position:static;"':"";var i={storage:{},count:0};var a=E.extend({},D.Template,this.options.templateSettings);var l=a.paramName;var o;var n="";var s;var d;if(this.options.noRecords.template)o=this.options.noRecords.template;else o=D.format(t,this.options.messages.noRecords,r);s=typeof o;if(s==="function"){i.storage["tmpl"+i.count]=o;n+="#=this.tmpl"+i.count+"("+l+")#";i.count++}else if(s==="string")n+=o;d=D.template(D.format(e,ke,n),a);if(i.count>0)d=d.bind(i.storage);return d},_footerTmpl:function(e,c,u,f,p){var t=this,r=T({},D.Template,t.options.templateSettings),i=r.paramName,a="",l,o,n,h,g={},s=0,m={},v=t._groups(),k=t.dataSource._emptyAggregates(c),d;a+='<tr class="'+f+'">';if(v>0&&!p)a+=It(v);if(t._hasDetails())a+='<td class="k-hierarchy-cell">&nbsp;</td>';for(l=0,o=e.length;l<o;l++){d=e[l];n=d[u];h=typeof n;a+="<td"+Et(d.footerAttributes)+">";if(n){if(h!==Oe){m=k[d.field]?T({},r,{paramName:i+"['"+d.field+"']"}):{};n=D.template(n,m)}g["tmpl"+s]=n;a+="#=this.tmpl"+s+"("+i+")#";s++}else a+="&nbsp;";a+="</td>"}a+="</tr>";a=D.template(a,r);if(s>0)return a.bind(g);return a},_groupHeaderTmpl:function(e,c,u,f,t,p){var h=this,r=T({},D.Template,h.options.templateSettings),g=r.paramName,i="",a,m,l,v,k={},o=0,b={},_=h.dataSource._emptyAggregates(c),n,s=p.length?F(p[0],e):-1,d;i+='<tr role="row" class="'+f+'">';if(!t)i+="# for (var i = 0; i < data.groupCells; i++) { #"+'<td class="k-group-cell">'+"&nbsp;"+"</td>"+"# } #";if(h._hasDetails())i+='<td class="k-hierarchy-cell">&nbsp;</td>';if(s<0){i+=!t?si(e.length):"";return}if(s<Ye&&p.length<=1&&!t){i+=!t?si(e.length):"";return D.template(i,r)}if(s<Ye){s=!t?1:0;i+=!t?si(s):""}else i+=!t?si(s):di(s);for(a=s,m=e.length;a<m;a++){n=e[a];l=n[u];v=typeof l;if(n.sticky){d=n.groupHeaderColumnTemplateClass||"";if(!d)d=n.groupHeaderColumnTemplateClass="group-header-column-template-"+D.guid();i+="<td class='"+Te+" "+d+"' style='"+(n.stickyStyle||"")+"'>"}else i+="<td>";if(l){if(v!==Oe){b=_[n.field]?T({},r,{paramName:g+"['"+n.field+"']"}):{};l=D.template(l,b)}k["tmpl"+o]=l;i+="#=this.tmpl"+o+"("+g+")#";o++}else i+="&nbsp;";i+="</td>"}i+="</tr>";i=D.template(i,r);if(o>0)return i.bind(k);return i},_detailTmpl:function(e){var t=this,r="",i=T({},D.Template,t.options.templateSettings),a=i.paramName,l={},o=0,n=t._groups(),s=x(L(t.columns)).length,d=typeof e;r+='<tr class="k-detail-row">';if(n>0)r+=It(n);r+='<td class="k-hierarchy-cell"></td><td class="k-detail-cell"'+(s?' colspan="'+s+'"':"")+">";if(d===Oe){l["tmpl"+o]=e;r+="#=this.tmpl"+o+"("+a+")#";o++}else r+=e;r+="</td></tr>";r=D.template(r,i);if(o>0)return r.bind(l);return r},_hasDetails:function(){var e=this;return e.options.detailTemplate!==null||(e._events[$]||[]).length},_hasFilterRow:function(){var e=this.options.filterable;var t=e&&typeof e.mode==Ge&&e.mode.indexOf("row")!=-1;var r=this.columns;var i=E.grep(r,function(e){return e.filterable===false});if(r.length&&i.length==r.length)t=false;return t},_details:function(){var r=this;if(r.options.scrollable&&r._hasDetails()&&H(r.columns).length)throw new Error("Having both detail template and locked columns is not supported");r.table.on(Pe+k,".k-hierarchy-cell .k-i-expand, .k-hierarchy-cell .k-i-collapse",function(e){var t=E(this);r._toggleDetails(t);e.preventDefault();return false})},_toggleDetails:function(e,t){var r=this,i=e.closest("td.k-hierarchy-cell"),a=e.hasClass("k-i-expand"),l=e.closest("tr.k-master-row"),o,n=r.detailTemplate,s,d=r._hasDetails(),c=a?nt:st,u=a?true:false;e.toggleClass("k-i-expand",!a).toggleClass("k-i-collapse",a).attr(dt,c);i.attr("aria-expanded",u);o=l.next();if(d&&!o.hasClass("k-detail-row")){s=r.dataItem(l);o=E(n(s)).addClass(l.hasClass("k-alt")?"k-alt":"").insertAfter(l);r.angular("compile",function(){return{elements:o.get(),data:[{dataItem:s}]}});r.trigger($,{masterRow:l,detailRow:o,data:s,detailCell:o.find(".k-detail-cell")})}r.trigger(a?ae:le,{masterRow:l,detailRow:o});if(t)fi(o,a);else o.toggle(a)},dataItem:function(e){e=E(e)[0];if(!e)return null;var t=this.tbody.children(),r=/k-grouping-row|k-detail-row|k-group-footer/,i=e.sectionRowIndex,a,l;l=i;for(a=0;a<i;a++)if(r.test(t[a].className))l--;return this._data[l]},expandRow:function(e,t){var r=E(e).find("> td .k-i-expand");if(r.length)this._toggleDetails(r,t)},collapseRow:function(e,t){var r=E(e).find("> td .k-i-collapse");if(r.length)this._toggleDetails(r,t)},_createHeaderCells:function(e,t){var r=this,i,a,l,o="",c,n,u=r.options.columnMenu,f=r.options.sortable,p=r._hasFilterMenu(),h=r.options.messages,g=L(r.columns),m=r.dataSource.group(),s;for(i=0,c=e.length;i<c;i++){a=e[i].column||e[i];l=r._headerCellText(a);n=a.title;s="";var d=F(a,g);if(a.selectable){o+="<th scope='col'"+Et(a.headerAttributes);if(t&&!e[i].colSpan)o+=" rowspan='"+t+"'";if(d>-1)o+=D.attr("index")+"='"+d+"'";l=a.headerTemplate?l:D.template(bt)({});o+=">"+l+"</th>"}else if(a.draggable){o+="<th class='k-header k-drag-cell' scope='col'"+Et(a.headerAttributes);if(t&&!e[i].colSpan)o+=" rowspan='"+t+"'";if(d>-1)o+=D.attr("index")+"='"+d+"'";l=a.headerTemplate?l:"";o+=">"+l+"</th>"}else if(a.command){o+="<th scope='col'"+Et(a.headerAttributes);if(t&&!e[i].colSpan)o+=" rowspan='"+t+"'";if(d>-1)o+=D.attr("index")+"='"+d+"'";o+=">"+l+"</th>"}else{if(a.field)s=D.attr("field")+"='"+a.field+"' ";o+="<th scope='col' role='columnheader' "+s;if(u&&a.field&&a.menu!==false||p&&a.filterable!==false&&!a.command)o+=" aria-haspopup='true'";if(t&&!e[i].colSpan)o+=" rowspan='"+t+"'";if(e[i].colSpan>1){o+='colspan="'+(e[i].colSpan-dr(a.columns))+'" ';o+=D.attr("colspan")+"='"+e[i].colSpan+"'"}else if(e[i].colSpan===1)o+=D.attr("colspan")+"='"+e[i].colSpan+"'";if(n){n=n&&(r.options.encodeTitles?pi(n,true):n);o+=D.attr("title")+'="'+n+'" '}if(a.groupable!==R)o+=D.attr("groupable")+"='"+a.groupable+"' ";if(Xr(r,a)){o+="aria-label='"+(n||a.field)+" ";o+=Zr(m,a.field)?h.ungroupHeader:h.groupHeader;o+="' "}if(a.aggregates&&a.aggregates.length)o+=D.attr("aggregates")+"='"+a.aggregates+"'";if(d>-1)o+=D.attr("index")+"='"+d+"'";o+=Et(a.headerAttributes);if(f)l=D.template(wt)({text:l});o+=">"+l+"</th>"}}return o},_appendLockedColumnContent:function(){var e=this.columns,t,r=this.table.find("colgroup"),c=r.find(V),i,a=E(),l=0,o,n,s,d=0;for(t=0,i=e.length;t<i;t++)if(e[t].locked)if(Kt(e[t])){n=1;if(e[t].columns)n=L(e[t].columns).length-dr(e[t].columns);n=n||1;for(s=0;s<n;s++)a=a.add(c.eq(t+d+s-l));d+=n-1}else l++;o=E('<div class="k-grid-content-locked"><table><colgroup></colgroup><tbody></tbody></table></div>');r.detach();o.find("colgroup").append(a);r.insertBefore(this.table.find("tbody"));this.lockedContent=o.insertBefore(this.content);this.lockedTable=o.children("table")},_appendLockedColumnFooter:function(){var e=this;var t=e.footer;var r=t.find(".k-footer-template>td");var i=t.find(".k-grid-footer-wrap>table>colgroup>col");var a=E('<div class="k-grid-footer-locked"><table><colgroup></colgroup><tbody><tr class="k-footer-template"></tr></tbody></table></div>');var l,o;var n=e._groups();var s=E(),d=E();s=s.add(r.filter(".k-group-cell"));for(l=0,o=L(H(e.columns)).length;l<o;l++)s=s.add(r.eq(l+n));d=d.add(i.filter(".k-group-col"));for(l=0,o=x(L(Sr(e.columns))).length;l<o;l++)d=d.add(i.eq(l+n));s.appendTo(a.find("tr"));d.appendTo(a.find("colgroup"));e.lockedFooter=a.prependTo(t)},_appendLockedColumnHeader:function(c){var e=this,t=this.columns,r,i,a,l,u,f,o,p,h,n=[],g=0,m=E(),v=e._hasFilterRow(),k=0,b=E(),_,s=0,w=E();l=e.thead.prev().find(V);p=e.thead.find("tr").first().find(".k-header:not(.k-group-cell,.k-hierarchy-cell)");h=e.thead.find(".k-filter-row").find("th:not(.k-group-cell,.k-hierarchy-cell)");var C=0;for(r=0,a=t.length;r<a;r++){if(t[r].locked){_=p.eq(r);s=L(t[r].columns||[]).length;if(Kt(t[r])){var d=null;if(t[r].columns)d=s-dr(t[r].columns);d=d||1;for(var y=0;y<d;y++)m=m.add(l.eq(r+C+y-g));C+=d-1}gr([t[r]],Dr(_),n,0,0);s=s||1;for(var S=0;S<s;S++)b=b.add(h.eq(k+S));k+=s}if(t[r].columns)g+=dr(t[r].columns);if(!Kt(t[r]))g++}if(n.length){i='<div class="k-grid-header-locked" style="width:1px"><table><colgroup></colgroup><thead>';i+=new Array(n.length+1).join("<tr></tr>");i+=(v?'<tr class="k-filter-row"></tr>':"")+"</thead></table></div>";o=E(i);l=o.find("colgroup");l.append(e.thead.prev().find("col.k-group-col").add(m));u=o.find("thead tr:not(.k-filter-row)");for(r=0,a=n.length;r<a;r++){w=Qt(n[r]);u.eq(r).append(e.thead.find("tr").eq(r).find(".k-group-cell").add(w))}var T=hr(this.thead);if(n.length<T)fr(o,T-n.length);f=o.find(".k-filter-row");f.append(e.thead.find(".k-filter-row .k-group-cell").add(b));this.lockedHeader=o.prependTo(c);this.thead.find(".k-group-cell").remove();return true}return false},_removeLockedContainers:function(){var e=this.lockedHeader.add(this.lockedContent).add(this.lockedFooter);D.destroy(e);e.off(k).remove();this.lockedHeader=this.lockedContent=this.lockedFooter=null;this.selectable=null},_thead:function(){var t=this,e=t.columns,r=t._hasDetails()&&e.length,c=t._hasFilterRow(),i,a="",l=t.table.find(">thead"),u=t.element.find("thead").first().length>0,o=t.options.messages.expandCollapseColumnHeader,n;if(!l.length)l=E("<thead/>").insertBefore(t.tbody);if(t.lockedHeader&&t.thead){n=t.thead.find("tr:has(th):not(.k-filter-row)").html("");n.remove();n=E();t._removeLockedContainers()}else if(u)n=t.element.find("thead").first().find("tr:has(th):not(.k-filter-row)");else n=t.element.find("tr:has(th)").first();if(!n.length){n=l.children().first();if(!n.length){var s=[{rowSpan:1,cells:[],index:0}];t._prepareColumns(s,e);for(i=0;i<s.length;i++){a+="<tr>";if(r)a+='<th class="k-hierarchy-cell" scope="col">'+o+"</th>";a+=t._createHeaderCells(s[i].cells,s[i].rowSpan);a+="</tr>"}n=E(a)}}else{for(i=0;i<e.length;i++){var f=F(e[i],L(e));var p=Ir(n.parent()).filter("th:not(.k-group-cell):not(.k-hierarchy-cell)").eq(f);if(e[i].hidden&&f>=0)p[0].style.display="none"}t._updateHeadersAttr(xr(e))}if(c){var d=E("<tr/>");d.addClass("k-filter-row");if(r||n.find(".k-hierarchy-cell").length)d.prepend('<th class="k-hierarchy-cell" scope="col">&nbsp;</th>');var h=(t.thead||l).find(".k-filter-row");if(h.length){D.destroy(h);h.remove()}l.append(d)}if(!n.children().length){a="";if(r)a+='<th class="k-hierarchy-cell" scope="col">&nbsp;</th>';a+=t._createHeaderCells(e);n.html(a)}else if(r&&!n.find(".k-hierarchy-cell")[0])n.prepend('<th class="k-hierarchy-cell" scope="col">'+(o?o:"&nbsp;")+"</th>");n.attr("role","row").find("th").addClass("k-header");if(!t.options.scrollable)l.addClass("k-grid-header");n.find("script").remove().end().prependTo(l);if(t.thead)t._destroyColumnAttachments();this.angular("cleanup",function(){return{elements:l.find("th"+P).get()}});this.angular("compile",function(){return{elements:l.find(B).get(),data:v(e,function(e){return{column:e}})}});t.thead=l.attr("role","rowgroup");t._sortable();t._filterable();t._filterRow();t._scrollable();t._columnMenu();var g;var m=this.options.scrollable&&H(this.columns).length;if(m){g=t._appendLockedColumnHeader(t.thead.closest(".k-grid-header"));t._appendLockedColumnContent();t.lockedContent.on("DOMMouseScroll"+k+" mousewheel"+k,t._wheelScroll.bind(t));if(D.support.touch)t._lockedContentUserEvents=new D.UserEvents(t.lockedContent,{move:function(e){t.content.scrollTop(t.content.scrollTop()+-e.y.delta);e.preventDefault()}});t._updateLockedCols()}t._updateCols();t._updateColumnCellIndex();t._updateFirstColumnClass();t._resizable();t._draggable();t._reorderable();t._updateHeader(t._groups());t._updateStickyColumns();if(m){if(g)t._syncLockedHeaderHeight();t._applyLockedContainersWidth()}if(t.groupable)t._attachGroupable()},_retrieveFirstColumn:function(e,t){var r=E();if(t.length&&e[0]){var i=e[0];while(i.columns&&i.columns.length){i=i.columns[0];t=t.filter(":not(:first)")}r=r.add(t)}return r},_updateFirstColumnClass:function(){var e=this,t=e.columns||[],r=e._hasDetails()&&t.length;if(!r&&!e._groups()){var i=e.thead.find(">tr:not(.k-filter-row):not(:first)");t=_r(t);var a=e._retrieveFirstColumn(t,i);if(e._isLocked()){i=e.lockedHeader.find("thead>tr:not(.k-filter-row):not(:first)");t=H(e.columns);a=a.add(e._retrieveFirstColumn(t,i))}a.each(function(){var e=E(this).find("th");e.removeClass("k-first");e.eq(0).addClass("k-first")})}},_prepareColumns:function(e,t,r,i){var a=i||e[e.length-1];var l=e[a.index+1];var o=0;for(var n=0;n<t.length;n++){var s={column:t[n],colSpan:0};a.cells.push(s);if(t[n].columns&&t[n].columns.length){if(!l){l={rowSpan:0,cells:[],index:e.length};e.push(l)}s.colSpan=t[n].columns.length;this._prepareColumns(e,t[n].columns,s,l);o+=s.colSpan-1;a.rowSpan=e.length-a.index}}if(r)r.colSpan+=o},_wheelScroll:function(e){if(e.ctrlKey)return;var t=this.content;if(this.virtualScroll&&this.virtualScroll.rows)t=this.virtualScrollable.verticalScrollbar;var r=t.scrollTop(),i=D.wheelDeltaY(e);if(i){if(t[0].scrollHeight>t[0].clientHeight&&(t[0].scrollTop<t[0].scrollHeight-t[0].clientHeight&&i<0||t[0].scrollTop>0&&i>0))e.preventDefault();t.scrollTop(r+-i)}},_isLocked:function(){return this.lockedHeader!=null},_updateHeaderCols:function(){var e=this.thead.parent().add(this.table);if(this._isLocked())Mr(e,Tr(yr(this.columns)),this._hasDetails(),0);else Mr(e,Tr(x(this.columns)),this._hasDetails(),0)},_updateColumnSorters:function(){var e=this;var t=Ir(e.thead);var r=L(e.columns);var i;var a;var l;if(!e.options.sortable)return;for(var o=0,n=t.length;o<n;o++){i=r[o];if(i.sortable!==false&&!i.command&&i.field){a=t.eq(o);l=a.data("kendoColumnSorter");if(l)l.refresh()}}},_updateHeadersAttr:function(e){if(!e.length)return;var t=this;for(var r=0;r<e.length;r++)if(e[r].headerAttributes){var i=t.element.find("[id='"+e[r].headerAttributes.id+"']");i.attr("headers",e[r].headerAttributes.headers)}t._updateHeadersAttr(xr(e))},_updateCols:function(e){e=e||this.thead.parent().add(this.table);this._appendCols(e,this._isLocked())},_updateLockedCols:function(e){if(this._isLocked()){e=e||this.lockedHeader.find("table").add(this.lockedTable);Mr(e,Tr(Sr(this.columns)),this._hasDetails(),this._groups())}},_appendCols:function(e,t){if(t)Mr(e,Tr(yr(this.columns)),this._hasDetails(),0);else Mr(e,Tr(x(this.columns)),this._hasDetails(),this._groups())},_autoColumns:function(e){if(e&&e.toJSON){var t=this,r,i;e=e.toJSON();i=!(t.table.find("tbody tr").length>0&&(!t.dataSource||!t.dataSource.transport));for(r in e)t.columns.push({field:r,encoded:i,headerAttributes:{id:D.guid()}});t._thead();t._templates()}},_rowsHtml:function(e,t){var r=this,i="",a,l=t.rowTemplate,o=t.altRowTemplate,n;for(a=0,n=e.length;a<n;a++){if(r._skipRerenderItemsCount>0)r._skipRerenderItemsCount--;else if(a%2)i+=o(e[a]);else i+=l(e[a]);r._data.push(e[a])}return i},_groupData:function(e,t,r){var i=this,a=i._groupAggregatesDefaultObject||{},l=e.items,o=T({},a,e.aggregates),n=T({},{field:e.field,value:e.value,items:l,aggregates:o},e.aggregates[r?r.field:e.field]),s={};if(!t)for(var d in o)s[d]=T({},o[d],{group:{field:e.field,value:e.value,items:l}});return T({},s,n)},_removeGroupIfEmpty:function(e){var t=this,r,i,a=t.dataSource._group.length;for(var l=0;l<a;l++){e=e.prev();r=+e.attr("data-group-item-count");i=+e.attr("data-sub-group-count");if(r==1||i==1)e.hide()}},_groupRowHtml:function(e,t,r,c,i,u,f,p){var a=this,l="",o,h,g=a.lockedContent!=null,m=e.field,n=A(L(a.columns),function(e){return e.field==m})[0]||{},v=x(a.columns)[0],k=v?v.groupHeaderColumnTemplate:null,s=n.groupHeaderTemplate?n.groupHeaderTemplate:k,b=(n.title&&(a.options.encodeTitles?pi(n.title,true):n.title)||m)+": "+Wr(e.value,n.format,n.values,n.encoded),_=e.currentItems||e.items,w=a._groups(),C=i.groupFooterTemplate,y=i.groupHeaderColumnTemplate,d,S=a.dataSource._isGroupPaged(),T=S?a.dataSource._groupsState[e.uid]:true;if(a.options.editable&&e.items&&e.items[0]&&e.items[0].isNew&&e.items[0].isNew())T=true;if(i.groupFooterTemplate||i.groupHeaderColumnTemplate||n.groupHeaderTemplate)d=a._groupData(e,false,!n.groupHeaderTemplate&&x(a.columns)[0].groupHeaderColumnTemplate?x(a.columns)[0]:false);if(s&&!u)b=typeof s===Oe?s(d):D.template(s)(d);if(!a._skipRerenderItemsCount)if(!e.excludeHeader)l+=ni(y,c,t,w-r,d,r,b,T,e,S);else if(g)e.excludeHeader=p?false:true;else e.excludeHeader=false;else c(t,r,b,T,e.uid,S);if(T)if(e.hasSubgroups)for(o=0,h=_.length;o<h;o++)l+=a._groupRowHtml(_[o],u?t:t-1,r+1,c,i,u,f&&o===_.length-1,p);else l+=a._rowsHtml(_,i);if(C)if(f){if(!F(e.value,a._skippedGroups))a._skippedGroups.push(e.value)}else{if(a._skippedGroups.length&&a._skippedGroups[0]===e.value)a._skippedGroups.shift();if(!a._skipRerenderItemsCount)l+=C(d)}return l},collapseGroup:function(e){var t,r=this,c=e,u=this.options.groupable,f=u.showFooter,i=f?0:1,a,l=E(),o,n,s;e=E(e);t=e.find(".k-group-cell").length;if(this.dataSource._isGroupPaged()){var p=e.attr("data-group-uid");var h=r.dataSource._getGroupByUid(p);var g=r.dataSource._calculateGroupsTotal([h],true);var m;r.dataSource._groupsState[p]=false;m=r.dataSource._calculateGroupsTotal([h],true);r.dataSource._serverGroupsTotal-=g-m;r._progress(true);r.dataSource.range(r.dataSource._currentRangeStart,r.dataSource.take(),function(){r._progress(false)},"collapseGroup");return}if(this._isLocked())if(!e.closest("div").hasClass("k-grid-content-locked")){l=e.nextAll("tr");e=this.lockedTable.find(">tbody>tr").eq(e.index())}else l=this.tbody.children("tr").eq(e.index()).nextAll("tr");e.find(".k-i-collapse").addClass("k-i-expand").removeClass("k-i-collapse");e.find("td[aria-expanded='true']").first().attr("aria-expanded",false).find("a").attr(dt,st);e=e.nextAll("tr");var d=[];for(o=0,n=e.length;o<n;o++){s=e.eq(o);a=s.find(".k-group-cell").length;if(s.hasClass("k-grouping-row"))i++;else if(s.hasClass("k-group-footer"))i--;if(a<=t||s.hasClass("k-group-footer")&&i<0)break;if(l.length)d.push(l[o]);d.push(s[0])}E(d).hide();if(this.options.scrollable.endless&&this.content){clearTimeout(r._collapseGroupsTimeOut);r._collapseGroupsTimeOut=setTimeout(function(){r.content.scroll();r._groupToCollapse=c})}},expandGroup:function(e){e=E(e);var t=this,r=t.options.groupable.showFooter,i,a,l,o=E(),n,c,u=[],s=1;i=e.find(".k-group-cell").length;if(this.dataSource._isGroupPaged()){var f=e.attr("data-group-uid");var d=t.dataSource._getGroupByUid(f);var p=t.dataSource._calculateGroupsTotal([d],true);var h;t.dataSource._groupsState[f]=true;if(d.items&&d.items.length){h=t.dataSource._calculateGroupsTotal([d],true);t.dataSource._serverGroupsTotal+=h-p}t._progress(true);t.dataSource.range(t.dataSource._currentRangeStart,t.dataSource.take(),function(){t._progress(false)},"expandGroup");return}if(this._isLocked())if(!e.closest("div").hasClass("k-grid-content-locked")){o=e.nextAll("tr");e=this.lockedTable.find(">tbody>tr").eq(e.index())}else o=this.tbody.children("tr").eq(e.index()).nextAll("tr");e.find(".k-i-expand").addClass("k-i-collapse").removeClass("k-i-expand");e.find("td[aria-expanded='false']").first().attr("aria-expanded",true).find("a").attr(dt,nt);e=e.nextAll("tr");for(n=0,c=e.length;n<c;n++){a=e.eq(n);l=a.find(".k-group-cell").length;if(l<=i)break;if(l==i+1&&!a.hasClass("k-detail-row")){a.show();o.eq(n).show();if(a.hasClass("k-grouping-row")&&a.find(".k-icon").hasClass("k-i-collapse"))t.expandGroup(a);if(a.hasClass("k-master-row")&&a.find(".k-icon").hasClass("k-i-collapse")){a.next().show();o.eq(n+1).show()}}if(a.hasClass("k-grouping-row")){if(r)u.push(a.is(":visible"));s++}if(a.hasClass("k-group-footer")){if(r){var g=u.pop();a.toggle(g);o.eq(n).toggle(g)}if(s==1){a.show();o.eq(n).show()}else s--}}if(i===0&&t.options.scrollable.endless&&this._isLocked()||!t.options.scrollable.endless&&this._isLocked())t._syncLockedContentHeight()},_updateHeader:function(e){var t=this,r=t._isLocked()?t.lockedHeader.find("thead"):t.thead,i=r.find("tr.k-filter-row").find("th.k-group-cell").length,a=r.find("tr").first().find("th.k-group-cell").length,l=r.children("tr:not(:first)").filter(function(){return!E(this).children(":visible").length});if(e>a){E(new Array(e-a+1).join('<th class="k-group-cell k-header" scope="col">'+t.options.messages.expandCollapseColumnHeader+"</th>")).prependTo(r.children("tr:not(.k-filter-row)"));if(t.element.is(":visible"))l.find("th.k-group-cell").hide()}else if(e<a)r.find("tr").each(function(){E(this).find("th.k-group-cell").eq(e).remove();E(this).find("th.k-group-cell").slice(e).remove()});if(e>i)E(new Array(e-i+1).join('<th class="k-group-cell k-header" scope="col">&nbsp;</th>')).prependTo(r.find(".k-filter-row"))},_firstDataItem:function(e,t){if(e&&t)if(e.hasSubgroups)e=this._firstDataItem(e.items[0],t);else e=e.items[0];return e},_updateTablesWidth:function(){var e=this,t;if(!e._isLocked())return;t=E(">.k-grid-footer>.k-grid-footer-wrap>table",e.wrapper).add(e.thead.parent()).add(e.table);e._footerWidth=Kr(t.eq(0));t.width(e._footerWidth);t=E(">.k-grid-footer>.k-grid-footer-locked>table",e.wrapper).add(e.lockedHeader.find(">table")).add(e.lockedTable);t.width(Kr(t.eq(0)))},hideColumn:function(t){var e=this,c,u,r,i,a,f,l=0,p,h,o=e.footer||e.wrapper.find(".k-grid-footer"),g=e.virtualScroll||{},n=e.columns,s=e.lockedHeader?Ir(e.lockedHeader.find(">table>thead")).filter(Nt).length:0,d,m=A(L(e.columns),function(e){return e.groupHeaderColumnTemplate});if(typeof t=="number")t=n[t];else if(M(t))t=A(sr(n),function(e){return e===t})[0];else t=A(sr(n),function(e){return e.field===t})[0];if(!t||!Kt(t))return;var v=e._columnVisibilitySetter(t);if(t.columns&&t.columns.length){f=lr(t,n);v(t,false);Vr(Lt(E(">table>thead",e.lockedHeader),e.thead,">tr:eq("+f.row+")>th"),f.cell,false);for(r=0;r<t.columns.length;r++)this.hideColumn(t.columns[r]);e.trigger(te,{column:t});return}d=F(t,x(L(n)));v(t,false);e._setParentsVisibility(t,false);e._templates();e._updateCols();e._updateLockedCols();var k=e.thead;p=d;if(e.lockedHeader&&s>d)k=e.lockedHeader.find(">table>thead");else p-=s;c=Ir(k).filter(Nt).eq(p);c[0].style.display="none";Vr(Lt(E(">table>thead",e.lockedHeader),e.thead,">tr.k-filter-row>th"),d,false);if(o[0]){e._updateCols(o.find(">.k-grid-footer-wrap>table"));e._updateLockedCols(o.find(">.k-grid-footer-locked>table"));Vr(o.find(".k-footer-template>td"),d,false)}if(g.columns&&!t.locked){e._updateContentWidth();e.trigger(te,{column:t});return}if(e.lockedTable&&s>d)Br(e.lockedTable.find(">tbody>tr"),d);else Br(e.tbody.children(),d-s);if(e.lockedTable){e._updateTablesWidth();e._applyLockedContainersWidth();e._syncLockedContentHeight();e._syncLockedHeaderHeight();e._syncLockedFooterHeight()}else{i=e.thead.prev().find("col");for(r=0,h=i.length;r<h;r+=1){a=i[r].style.width;if(i[r].className.indexOf("k-hierarchy-col")>-1){l+=z(i[r]);continue}if(i[r].className.indexOf("k-group-col")>-1){l+=z(i[r]);continue}if(a&&a.indexOf("%")==-1)l+=parseInt(a,10);else{l=0;break}}u=e.wrapper.find(">.k-grid-header table").first().add(e.wrapper.find(">.k-grid-footer table").first()).add(e.table);e._footerWidth=null;if(l){u.each(function(){this.style.width=l+"px"});e._footerWidth=l;e._setContentWidth()}}e._updateFirstColumnClass();e._updateStickyColumns();if(m.length>0)e._renderGroupRows();e.trigger(te,{column:t})},_setParentsVisibility:function(e,t){var r=this;var i=r.columns;var a;var l=[];var o;var n;var s;var d;var c=r._columnVisibilitySetter(e);var u=t?function(e){return x(e.columns).length&&e.hidden}:function(e){return!x(e.columns).length&&!e.hidden};if(Pt(e,i,l)&&l.length)for(a=l.length-1;a>=0;a--){o=l[a];n=rr(o,i);s=Lt(E(">table>thead",this.lockedHeader),this.thead,">tr:eq("+n.row+")>th:not(.k-group-cell):not(.k-hierarchy-cell)").eq(n.cell);if(u(o)){c(o,t);s[0].style.display=t?"":"none"}if(s.filter("["+D.attr("colspan")+"]").length){d=parseInt(s.attr(D.attr("colspan")),10);s[0].colSpan=d-dr(o.columns)||1}}},_updateContentWidth:function(){var e=this;var t=e.table.add(e.thead.parent());t.css({width:cr(Tr(yr(e.columns)))});e.refresh()},showColumn:function(r){var e=this,t,c,u,f,i,p,h,g,a,l=e.columns,m=e.virtualScroll||{},o=e.footer||e.wrapper.find(".k-grid-footer"),n=e.lockedHeader?Ir(e.lockedHeader.find(">table>thead")).length:0,s,v,d,k=A(L(e.columns),function(e){return e.groupHeaderColumnTemplate});if(typeof r=="number"){s=r;r=l[r]}else if(M(r))E.each(sr(l),function(e,t){if(t===r){r=t;s=e;return false}});else E.each(sr(l),function(e,t){if(t.field===r){r=t;s=e;return false}});if(!r||Kt(r))return;var b=e._columnVisibilitySetter(r);if(r.columns&&r.columns.length){h=rr(r,l);v=sr(e.options.columns)[s];b(r,true);Vr(Lt(E(">table>thead",e.lockedHeader),e.thead,">tr:eq("+h.row+")>th"),h.cell,true);for(t=0;t<r.columns.length;t++)if(!v.columns[t].hidden)this.showColumn(r.columns[t]);e.trigger(re,{column:r});return}d=F(r,L(l));b(r,true);e._setParentsVisibility(r,true);e._templates();e._updateCols();e._updateLockedCols();var _=e.thead;p=d;if(e.lockedHeader&&n>d)_=e.lockedHeader.find(">table>thead");else p-=n;u=Ir(_).eq(p);u[0].style.display="";Vr(Lt(E(">table>thead",e.lockedHeader),e.thead,">tr.k-filter-row>th"),d,true);if(o[0]){e._updateCols(o.find(">.k-grid-footer-wrap>table"));e._updateLockedCols(o.find(">.k-grid-footer-locked>table"));Vr(o.find(".k-footer-template>td"),d,true)}if(m.columns&&!r.locked){e._updateContentWidth();e.trigger(re,{column:r});return}if(e.lockedTable&&n>d)Nr(e.lockedTable.find(">tbody>tr"),d);else Nr(e.tbody.children(),d-n);if(e.lockedTable){e._updateTablesWidth();e._applyLockedContainersWidth();e._syncLockedContentHeight();e._syncLockedHeaderHeight()}else{f=e.wrapper.find(">.k-grid-header table").first().add(e.wrapper.find(">.k-grid-footer table").first()).add(e.table);if(!r.width)f.width("");else{i=0;a=e.thead.prev().find("col");for(t=0,c=a.length;t<c;t+=1){g=a[t].style.width;if(a[t].className.indexOf("k-hierarchy-col")>-1){i+=z(a[t]);continue}if(a[t].className.indexOf("k-group-col")>-1){i+=z(a[t]);continue}if(g.indexOf("%")>-1){i=0;break}i+=parseInt(g,10)}e._footerWidth=null;if(i){f.each(function(){this.style.width=i+"px"});e._footerWidth=i;e._setContentWidth()}}}e._updateFirstColumnClass();e._updateStickyColumns();if(k.length>0)e._renderGroupRows();e.trigger(re,{column:r})},_columnVisibilitySetter:function(e){var t=e||{};if($t(t.media))return Wt;else return Bt},_buildSkeleton:function(){var e=this.virtualCols?this.virtualCols:Tr(this.columns);var t=this.dataSource.pageSize()||this.dataSource.total();var r="";var i;var a=(this.dataSource.group()||[]).length;var l=e.length+a;if(this._hasDetails())l++;if(this._hasVirtualColumns())i=parseInt(this.content.find("tr").first().find("td").first().attr("colspan"),10);for(var o=0;o<t;o++){r+="<tr>";for(var n=0;n<l;n++)if(i&&!n)r+="<td colspan='"+i+"'><span class='k-skeleton k-skeleton-text k-skeleton-pulse'></span></td>";else r+="<td><span class='k-skeleton k-skeleton-text k-skeleton-pulse'></span></td>";r+="</tr>"}return r},_progress:function(e){var t=this.element;var r=this.options.scrollable&&this.options.scrollable.endless;var i=this.options.loaderType;var a=this.options.scrollable&&this.options.scrollable.virtual;var l;if(a)t=this.content;else if(this._editContainer&&this._editMode()==="popup")t=this._editContainer;else if(this.lockedContent||r)t=this.wrapper;else if(this.element.is("table"))t=this.element.parent();else if(this.content&&this.content.length)t=this.content;if(i=="skeleton")if(e){l=this._buildSkeleton();t.find("tbody").empty().append(l)}else t.find(".k-skeleton").closest("tbody").empty();else if(r&&e)D.ui.progress(t,e,{height:this.content.height(),top:this.content[0].offsetTop,opacity:true});else D.ui.progress(t,e)},_resize:function(e,t){this._syncLockedContentHeight();this._syncLockedHeaderHeight();if(this.content){this._setContentWidth();this._setContentHeight()}if(this.lockedTable)this._syncLockedScroll();if(this.virtualScrollable&&(t||this._rowHeight)){if(t)this._rowHeight=null;this.virtualScrollable.repaintScrollbar()}if(this.pager&&this.pager.element)this.pager.resize(t);if(this._anyStickyColumns())this._updateStickyColumns(false)},_isActiveInTable:function(){var e=u();if(!e)return false;return this.table[0]===e||E.contains(this.table[0],e)||this._isLocked()&&(this.lockedTable[0]===e||E.contains(this.lockedTable[0],e))},refresh:function(e){var t=this,r=t.dataSource.view(),c=t.options.navigatable,i=t.virtualScroll||{},a,l=E(t.current()),o=false,n=(t.dataSource.group()||[]).length,s=n+Tr(x(t.columns)).length,d,u;if(e&&e.action==="itemchange"&&(t.editable||t.options.scrollable.endless))if(this._editMode()!="popup"||this._editMode()==="popup"&&!t._editableIsClosing)return;if(i.columns)t._templates();if(e&&e.action==="remove"&&t.editable&&t.editable.options.model&&F(t.editable.options.model,e.items)>-1)t.editable.options.model.unbind(ee,t._modelChangeHandler);e=e||{};if(t.trigger("dataBinding",{action:e.action||"rebind",index:e.index,items:e.items}))return;if(e.action===ce&&t._isVirtualEditable()){t._destroyEditable();t._clearEditableState()}t._angularItems("cleanup");if(!t._endlessFetchInProgress){if(c&&(t._isActiveInTable()||t._editContainer&&t._editContainer.data("kendoWindow"))){o=l.is("th");a=o?l.parent().children(":not(.k-group-cell)").index(l[0]):Math.max(t.cellIndex(l),0)}t._destroyEditable()}if(t.options.scrollable&&t.options.scrollable.endless&&!t._pdfInitialized){clearTimeout(t._progressTimeOut);t._progressTimeOut=setTimeout(function(){if(!t._endlessFetchInProgress)t._progress(false)},250)}else t._progress(false);t._hideResizeHandle();t._data=[];if(!t.columns.length){t._autoColumns(t._firstDataItem(r[0],n));s=n+t.columns.length}t._group=n>0||t._group;if(t._group){t._templates();t._updateCols();t._updateLockedCols();if(!t._virtualColScroll)t._updateHeader(n);t._group=n>0;t._groupRows=Or(r)}if(t.content)d=D.scrollLeft(t.content);u=t._skipRerenderItemsCount;t._renderContent(r,s,n);if(t.options.scrollable&&t.options.scrollable.endless&&this.lockedContent)t._skipRerenderItemsCount=u;t._renderLockedContent(r,s,n);if(!t._virtualColScroll){t._footer();t._renderNoRecordsContent();t._togglePagerVisibility();t._setContentHeight();t._setContentWidth(t.content&&d)}if(t.lockedTable)if(i.rows)t.content.find(">.k-virtual-scrollable-wrap").trigger("scroll");else if(t.touchScroller)t.touchScroller.movable.trigger("change");else{t.wrapper.one("scroll",function(e){e.stopPropagation()});t.content.trigger("scroll")}if(!t._endlessFetchInProgress&&!t._rowDropping)t._restoreCurrent(a,o);if(t.touchScroller)t.touchScroller.contentResized();if(t.selectable)t.selectable.resetTouchEvents();t._muteAngularRebind(function(){t._angularItems("compile")});if(t._checkBoxSelection)t._toggleHeaderCheckState(false);if(t.options.persistSelection&&(t.selectable&&!D.ui.Selectable.parseOptions(t.options.selectable).cell||t._checkBoxSelection)&&(t.items().length||t.dataSource._isGroupPaged()))t._restoreSelection();if(!t.options.persistSelection)t._selectedIds={};if(t._hasReorderableRows()){t._draggableRows();t._reorderableRows()}t.trigger(ie)},_restoreCurrent:function(e,t){if(e===R||e<0)return;this._removeCurrent();if(t)this._setCurrent(this.thead.find("th:not(.k-group-cell)").eq(e));else{var r=0;var i=this.virtualScroll||{};if(this._rowVirtualIndex)if(i.rows)r=this.virtualScrollable.position(this._rowVirtualIndex);else r=this._rowVirtualIndex;else e=0;var a=E();var l;if(this.lockedTable)a=this.lockedTable.find(">tbody>tr").eq(r);a=a.add(this.tbody.children().eq(r));if(this._hasVirtualColumns()){l=parseInt(a.find("td").first().attr("colspan"),10);e=this._virtualCellIndex-(l>1?l-1:0)}var o=a.find(">td:not(.k-group-cell):not(.k-hierarchy-cell)").eq(e);if(!o.length||e<0)return;if(this._hasVirtualColumns())this._setCurrent(o,true,true);else this._setCurrent(o)}if(this._current)Yr(this._current.closest("table")[0],true)},_restoreSelection:function(){var r=this,e=r.items(),t,i=f(r.dataSource.options.schema.model)?r.dataSource.options.schema.model.fn.idField:r.dataSource.options.schema.model.id;t=A(e,function(e){var t=r.dataItem(e)[i];if(r._selectedIds[t])return e});r.select(t)},_angularItems:function(e){D.ui.DataBoundWidget.fn._angularItems.call(this,e);if(e==="cleanup"&&(!this.dataSource||!this.dataSource.options.endless))this._cleanupDetailItems();this._angularGroupItems(e);this._angularGroupFooterItems(e)},_cleanupDetailItems:function(){var e=this;if(e._hasDetails()){e.angular("cleanup",function(){return{elements:e.tbody.children(".k-detail-row")}});e.tbody.find(".k-detail-cell").empty()}},_angularGroupItems:function(e){var t=this,r=t.tbody;if(t.lockedContent)r=t.lockedTable.find("tbody");if(t._group)t.angular(e,function(){return{elements:r.children(".k-grouping-row"),data:E.map(Or(t.dataSource.view()),function(e){return{dataItem:e}})}})},_angularGroupFooterItems:function(e){var t=this,r=t.tbody;if(t.lockedContent)r=t.element;if(t._group&&t.groupFooterTemplate)t.angular(e,function(){return{elements:r.find(".k-group-footer"),data:E.map(Gr(t.dataSource.view()),function(e){return{dataItem:e}})}})},_renderContent:function(e,t,r){var i=this,a,l,o="",n=i.lockedContent!=null,s=null,c,d,u=i.options.scrollable,f={rowTemplate:i.rowTemplate,altRowTemplate:i.altRowTemplate,groupFooterTemplate:i.groupFooterTemplate,groupHeaderColumnTemplate:i.groupHeaderColumnTemplate};if(u&&u.endless&&!i.dataSource.options.endless){i._skipRerenderItemsCount=0;if(i.content)i.content[0].scrollTop=0}s=i._skipRerenderItemsCount>0;t=n?t-Tr(Sr(i.columns)).length:t;if(r>0){t=n?t-r:t;if(i.detailTemplate)t++;if(i.groupFooterTemplate)i._groupAggregatesDefaultObject=i.dataSource.aggregates();if(i.options.scrollable.endless)d=i.dataSource.flatView().length;for(a=0,l=e.length;a<l;a++){if(!i._skippedGroups)i._skippedGroups=[];c=d&&a===e.length-1&&d!==i.dataSource.total();o+=i._groupRowHtml(e[a],t,0,n?ui:ci,f,n,c,false)}}else o+=i._rowsHtml(e,f);if(s){i.tbody.append(o);clearTimeout(i._endlessFetchTimeOut);i._endlessFetchTimeOut=setTimeout(function(){if(i._groupToCollapse){i.collapseGroup(i._groupToCollapse);i._groupToCollapse=null}});i._endlessFetchInProgress=null}else i.tbody=Ar(i.tbody,i.table,o,this.options.$angular)},_renderGroupRows:function(){var r=this,i=r._groupRows,e=r.wrapper.find(".k-grouping-row"),a=r._groups(),f,p=r.lockedContent!=null,l,h,o,g,n,s,m,v,k,d,b,_,c,u,w,C;e.each(function(e,t){c=E(t);k=c.closest("table").parent();d=k.is("."+O);l=d?Tr(x(H(r.columns))):Tr(x(_r(r.columns)));u=c.find("."+G).length;if(p){f=d?ci:ui;h=d?l.length+a-u:l.length}else{f=ci;h=l.length+a-u}o=e>=i.length?i[e-i.length]:i[e];g=o.field;n=A(L(r.columns),function(e){return e.field==g})[0]||{};C=!n.groupHeaderTemplate&&x(r.columns)[0].groupHeaderColumnTemplate?x(r.columns)[0]:false;s=n.groupHeaderTemplate?n.groupHeaderTemplate:x(r.columns)[0].groupHeaderColumnTemplate;m=(n.title&&(r.options.encodeTitles?pi(n.title,true):n.title)||g)+": "+Wr(o.value,n.format,n.values,n.encoded);a=a;v=r._groupData(o,false,C);w=d?r.lockedGroupHeaderColumnTemplate:r.groupHeaderColumnTemplate;if(s)m=typeof s===Oe?s(v):D.template(s)(v);b=c.prev().length?c.prev():c.parent();_=E(w?w(T({},v,{groupCells:u,colspan:a-u,text:m})):f(h,u,m));if(b.is("tbody"))b.prepend(_);else b.after(_);c.remove()})},_renderLockedContent:function(e,t,c){var r="",i,a,l,o=null,n,s={rowTemplate:this.lockedRowTemplate,altRowTemplate:this.lockedAltRowTemplate,groupFooterTemplate:this.lockedGroupFooterTemplate,groupHeaderColumnTemplate:this.lockedGroupHeaderColumnTemplate};if(this.lockedContent){var d=this.lockedTable;o=this._skipRerenderItemsCount>0;if(c>0){t=t-x(L(_r(this.columns))).length;if(this.options.scrollable.endless)n=this.dataSource.flatView().length;for(i=0,a=e.length;i<a;i++){l=n&&i===e.length-1&&n!==this.dataSource.total();r+=this._groupRowHtml(e[i],t,0,ci,s,false,l,true)}}else r=this._rowsHtml(e,s);if(o)d.children("tbody").append(r);else Ar(d.children("tbody"),d,r,this.options.$angular);this._syncLockedContentHeight()}},_togglePagerVisibility:function(){if(this.options.pageable.alwaysVisible===false)this.wrapper.find(".k-grid-pager").toggle(this.dataSource.total()>=this.dataSource.pageSize())},_adjustRowsHeight:function(e,c){var t=e[0].rows,r=t.length,i,a=c[0].rows,l=e.add(c),u=l.length,o=[];for(i=0;i<r;i++){if(!a[i])break;if(t[i].style.height)t[i].style.height=a[i].style.height=""}for(i=0;i<r;i++){if(!a[i])break;var n=t[i].offsetHeight;var s=a[i].offsetHeight;var d=0;if(n>s)d=n;else if(n<s)d=s;o.push(d)}for(i=0;i<u;i++)l[i].style.display="none";for(i=0;i<r;i++)if(o[i])t[i].style.height=a[i].style.height=o[i]+1+"px";for(i=0;i<u;i++)l[i].style.display=""}});if(D.ExcelMixin)D.ExcelMixin.extend(jr.prototype);if(D.PDFMixin){D.PDFMixin.extend(jr.prototype);jr.prototype._drawPDF_autoPageBreak=function(t){var r=this;var i=new E.Deferred;var a=r.dataSource;var l=r.options.pdf.allPages;var c=r.wrapper.find('table[role$="grid"] > tbody').first();var o=E("<div>").css({position:"absolute",left:-1e4,top:-1e4});var n;r.toggleUnexportableColumns(r.columns);n=r.wrapper.clone().css({height:"auto",width:"auto"}).appendTo(o);n.find(".k-grid-content").css({height:"auto",width:"auto",overflow:"visible"});n.find('table[role$="grid"], .k-grid-footer table').css({height:"auto",width:"100%",overflow:"visible"});n.find(".k-grid-pager, .k-grid-toolbar, .k-grouping-header").remove();n.find(".k-grid-header, .k-grid-footer, .k-auto-scrollable").css({paddingRight:0});this._initPDFProgress(t);var u=n.find('table[role$="grid"] > tbody').first().empty();var e=a.page();function f(){if(l&&e!==R){a.one("change",s);a.page(e)}else{r.refresh();s()}}function s(){o.appendTo(document.body);var e=E.extend({},r.options.pdf,{_destructive:true,progress:function(e){t.notify({page:e.page,pageNumber:e.pageNum,progress:.5+e.pageNum/e.totalPages/2,totalPages:e.totalPages})}});D.drawing.drawDOM(n,e).always(function(){o.remove()}).then(function(e){i.resolve(e);r.toggleUnexportableColumns(r.columns,true)}).fail(function(e){i.reject(e)})}function d(){var e=a.page();var t=l?a.totalPages():1;u.append(c.children("tr:not(.k-detail-row)"));if(e<t)a.page(e+1);else{a.unbind("change",d);f()}}if(l){a.bind("change",d);a.page(1)}else d();return i.promise()};jr.prototype.toggleUnexportableColumns=function(e,t){var r=e.length;var i;var a;var l;var o;for(var n=0;n<r;n++){i=e[n];a=i.exportable;if(!t){if(typeof i.exportable==="object")a=i.exportable.pdf;l=!i.hidden&&a!==false;o=i.hidden&&a===true;a=l||o;if(!a&&!i.hidden){i._toggledDuringExport=true;this.hideColumn(i)}else if(a&&i.hidden){i._toggledDuringExport=true;this.showColumn(i)}else if(a&&i.columns)this.toggleUnexportableColumns(i.columns)}else if(i._toggledDuringExport){i._toggledDuringExport=false;if(i.hidden)this.showColumn(i);else this.hideColumn(i)}else if(i.columns)this.toggleUnexportableColumns(i.columns,t)}};jr.prototype._drawPDF=function(a){var l=this;if(l.options.pdf.paperSize&&l.options.pdf.paperSize!="auto")return l._drawPDF_autoPageBreak(a);var t=new E.Deferred;var o=l.dataSource;var n=l.options.pdf.allPages;this._initPDFProgress(a);var s=new D.drawing.Group;var e=o.page();function d(){if(n&&e!==R){o.unbind("change",r);o.one("change",function(){t.resolve(s)});o.page(e)}else t.resolve(s)}function r(){l.toggleUnexportableColumns(l.columns);l._drawPDFShadow({width:l.wrapper.width()},{avoidLinks:l.options.pdf.avoidLinks}).done(function(e){var t=o.page();var r=n?o.totalPages():1;var i={page:e,pageNumber:t,progress:t/r,totalPages:r};l.toggleUnexportableColumns(l.columns,true);a.notify(i);s.append(i.page);if(t<r)o.page(t+1);else d()}).fail(function(e){t.reject(e)})}if(n){o.bind("change",r);o.page(1)}else r();return t.promise()};jr.prototype._initPDFProgress=function(e){var t=E("<div class='k-loading-pdf-mask'><div class='k-loading-color'></div></div>");t.prepend(this.wrapper.clone().css({position:"absolute",top:0,left:0}));this._pdfInitialized=true;this.wrapper.append(t);var r=E("<div class='k-loading-pdf-progress'>").appendTo(t).kendoProgressBar({type:"chunk",chunkCount:10,min:0,max:1,value:0}).data("kendoProgressBar");e.progress(function(e){r.value(e.progress)}).always(function(){D.destroy(t);t.remove()})}}function $r(e,t){e=e[0];t=t[0];if(e.rows.length!==t.rows.length){var r=e.offsetHeight;var i=t.offsetHeight;var a;var l;if(r>i){a=t.rows[t.rows.length-1];if(mt.test(a.className))a=t.rows[t.rows.length-2];l=r-i}else{a=e.rows[e.rows.length-1];if(mt.test(a.className))a=e.rows[e.rows.length-2];l=i-r}a.style.height=a.offsetHeight+l+"px"}}function Qr(e,t){var r;var i=e.offsetHeight;var a=t.offsetHeight;if(i>a)r=i+"px";else if(i<a)r=a+"px";if(r)e.style.height=t.style.height=r}function Jr(e,t){var r,i,a;if(typeof e===Ge&&e===t)return e;if(M(e)&&e.name===t)return e;if(p(e))for(r=0,i=e.length;r<i;r++){a=e[r];if(typeof a===Ge&&a===t||a.name===t)return a}return null}function Yr(e,t){if(t===true){e=E(e);var r=D.scrollLeft(e.parent());D.focusElement(e);D.scrollLeft(e.parent(),r)}else E(e).one("focusin",function(e){e.preventDefault()}).trigger("focus")}function Xr(e,t){return e.options.groupable&&(t.groupable||t.groupable===R)}function Zr(e,t){return!!E.grep(e,function(e){return e.field===t}).length}function ei(e,t){if(!e.field||e.selectable)return false;if(t.editable&&!t.editable(e.field))return false;if(e.editable&&!e.editable(t))return false;return true}function ti(e){return E(e).is(":button,a,:input,a>.k-icon,textarea,span.k-select,span.k-icon,span.k-link,label.k-checkbox-label,.k-input,.k-multiselect-wrap,.k-picker-wrap,.k-picker-wrap>.k-selected-color,.k-tool-icon,.k-dropdownlist,.k-switch-thumb,.k-switch-track,.k-switch-label-off,.k-switch-label-on")}function ri(e){var t=E(e.currentTarget),r=t.is("th"),i=this.table.add(this.lockedTable),a=this.thead.parent().add(E(">table",this.lockedHeader)),l=ti(e.target),o=E(e.target).is(".k-checkbox"),n=E(e.target),s=t.closest("table")[0];if(l&&t.find(D.roleSelector("filtercell")).length){this._setCurrent(t);return}if(s!==i[0]&&s!==i[1]&&s!==a[0]&&s!==a[1])return;if(n.is("a.k-i-expand, a.k-i-collapse"))return;if(this.options.navigatable)this._setCurrent(t,false,o);if(r||!l)setTimeout(function(){var e=E(D._activeElement());if((e.hasClass("k-widget")||e.hasClass("k-dropdownlist"))&&!e.hasClass("k-grid-pager"))return;if(e.is(ve)||!ti(D._activeElement())||!E.contains(s,D._activeElement()))Yr(s,true)});if(r&&!D.support.touch)e.preventDefault()}function ii(e,t){if(!t)return 0;var r=0;if(D.support.browser.webkit)r=e.width();return r}function ai(e){var t;if(typeof e==="string"){t=e.toLowerCase();if(t==="true")return{rows:true};else return{rows:t.indexOf("rows")>-1,columns:t.indexOf("columns")>-1}}else if(e===true)return{rows:true}}function li(e,t){var r;var i;if(!e)return false;t=E(t);if(t[0]&&s(e[0],t[0])){r=t.offset().top-e.offset().top;i=t.outerHeight()/2;if((r>=0||g.abs(r)<=i)&&g.floor(r+i)<=e.height())return true}return false}function oi(e){return e&&(e.hasClass("k-edit-cell")||e.parent().hasClass("k-grid-edit-row"))}function ni(e,t,r,i,a,l,o,n,s,c){var d;if(e)d=e(T({},a,{groupCells:l,colspan:i,text:o}));else d=t(r,l,o,n,s.uid,c);return d}function si(e){return'<td colspan="#=data.colspan +'+e+'#">'+'<p class="k-reset">'+'<a class="k-icon k-i-collapse" href="\\#" tabindex="-1" '+dt+'="'+nt+'"></a>#=data.text#'+"</p></td>"}function di(e){return'<td colspan="'+e+'">'+'<p class="k-reset">&nbsp;</p></td>'}function ci(e,t,r,i,a,l){return'<tr role="row"'+(l?'data-group-uid="'+a+'"':"")+'class="k-grouping-row">'+It(t)+'<td colspan="'+e+'" aria-expanded="'+!!i+'">'+'<p class="k-reset">'+'<a class="k-icon '+(i?"k-i-collapse":"k-i-expand")+'" href="#" tabindex="-1" '+dt+'="'+(i?nt:st)+'"></a>'+r+"</p></td></tr>"}function ui(e){return'<tr role="row" class="k-grouping-row">'+'<td colspan="'+e+'" aria-expanded="true">'+'<p class="k-reset">&nbsp;</p></td></tr>'}function fi(e,t){e=E(e)[0];if(t)e.style.display="";else e.style.display="none"}function pi(e,t){var r=/&/g,i=/</g,a=/"/g,l=/'/g,o=/>/g;return(""+e).replace(r,"&amp;").replace(i,"&lt;").replace(o,"&gt;").replace(a,function(e){if(t)return"\\"+e;return"&quot;"}).replace(l,"&#39;")}function hi(t,e){return e.filter(function(e){return e.field===t})[0].title||t}function gi(e,t){return this.dataSource.indexOf(this.dataSource.getByUid(e.uid))-this.dataSource.indexOf(this.dataSource.getByUid(t.uid))}function mi(e){return!(e.exportable===false||e.exportable&&e.exportable.excel===false)}return b.plugin(jr),b.plugin(Ht),window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,r){(r||t)()});
//# sourceMappingURL=kendo.grid.min.js.map
