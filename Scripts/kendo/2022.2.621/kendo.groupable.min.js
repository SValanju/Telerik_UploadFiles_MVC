/**
 * Kendo UI v2022.2.621 (http://www.telerik.com/kendo-ui)
 * Copyright 2022 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.
 *
 * Kendo UI commercial licenses may be obtained at
 * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete
 * If you do not own a commercial license, this file shall be governed by the trial license terms.
 */
!function(define){define("kendo.groupable.min",["kendo.core.min","kendo.draganddrop.min"],function(){var t={id:"groupable",name:"Groupable",category:"framework",depends:["core","draganddrop"],advanced:true},u=window.kendo.jQuery,e=void 0,c=window.kendo,d=c.ui.Widget,s=c._outerWidth,l=c.attr,k=u.extend,r=u.each,f=false,b="dir",a="field",n="title",p="asc",_="desc",h="group-sort",m=".kendoGroupable",C="change",i=c.template('<div class="k-group-indicator" data-#=data.ns#field="${data.field}" data-#=data.ns#title="${data.title || ""}" data-#=data.ns#dir="${data.dir || "asc"}">'+'<a href="\\#" class="k-link">'+'<span class="k-icon k-i-sort-${(data.dir || "asc") == "asc" ? "asc-sm" : "desc-sm"}" title="(sorted ${(data.dir || "asc") == "asc" ? "ascending": "descending"})"></span>'+"${data.title ? data.title: data.field}"+"</a>"+'<a href="\\#" data-role="button" aria-label="Remove grouping by ${data.title || data.field} field" class="k-button k-button-md k-rounded-md k-button-flat k-button-flat-base k-icon-button">'+'<span class="k-button-icon k-icon k-i-close"></span>'+"</a>"+"</div>",{useWithBlock:false}),I=function(t){var e=t.attr(c.attr("title"));if(e)e=c.htmlEncode(e);return u('<div class="k-group-clue k-drag-clue" />').html(e||t.attr(c.attr("field"))).prepend('<span class="k-icon k-drag-status k-i-cancel"></span>')},v=u('<div class="k-grouping-dropclue"/>'),o=d.extend({init:function(t,e){var g=this,r=c.guid(),i=g._intializePositions.bind(g),a,n,o=g._dropCuePositions=[];d.fn.init.call(g,t,e);f=c.support.isRtl(t);n=f?"right":"left";g.draggable=a=g.options.draggable||new c.ui.Draggable(g.element,{filter:g.options.draggableElements,hint:I,group:r});g.groupContainer=u(g.options.groupContainer,g.element).kendoDropTarget({group:a.options.group,dragenter:function(t){if(g._canDrag(t.draggable.currentTarget)){t.draggable.hint.find(".k-drag-status").removeClass("k-i-cancel").addClass("k-i-plus");v.css(n,0).appendTo(g.groupContainer)}},dragleave:function(t){t.draggable.hint.find(".k-drag-status").removeClass("k-i-plus").addClass("k-i-cancel");v.remove()},drop:function(t){var e=t.draggable.currentTarget,r=e.attr(c.attr("field")),a=e.attr(c.attr("title")),n=g.indicator(r),i=g._dropCuePositions,o=i[i.length-1],d;var s=k({},g.options.sort,e.data(h));var l=s.dir;if(!e.hasClass("k-group-indicator")&&!g._canDrag(e))return;if(o){d=g._dropCuePosition(c.getOffset(v).left+parseInt(o.element.css("marginLeft"),10)*(f?-1:1)+parseInt(o.element.css("marginRight"),10));if(d&&g._canDrop(u(n),d.element,d.left)){if(d.before)d.element.before(n||g.buildIndicator(r,a,l));else d.element.after(n||g.buildIndicator(r,a,l));g._setIndicatorSortOptions(r,s);g._change()}}else{g.groupContainer.empty();g.groupContainer.append(g.buildIndicator(r,a,l));g._setIndicatorSortOptions(r,s);g._change()}}}).kendoDraggable({filter:"div.k-group-indicator",hint:I,group:a.options.group,dragcancel:g._dragCancel.bind(g),dragstart:function(t){var e=t.currentTarget,r=parseInt(e.css("marginLeft"),10),a=e.position(),n=f?a.left-r:a.left+s(e);i();v.css("left",n).appendTo(g.groupContainer);this.hint.find(".k-drag-status").removeClass("k-i-cancel").addClass("k-i-plus")},dragend:function(){g._dragEnd(this)},drag:g._drag.bind(g)}).on("click"+m,".k-button",function(t){t.preventDefault();g._removeIndicator(u(this).parent())}).on("click"+m,".k-link",function(t){var e=u(this).parent();var r=e.attr(l(b))===p?_:p;e.attr(l(b),r);g._change();t.preventDefault()});a.bind(["dragend","dragcancel","dragstart","drag"],{dragend:function(){g._dragEnd(this)},dragcancel:g._dragCancel.bind(g),dragstart:function(t){var e,r,a;if(!g.options.allowDrag&&!g._canDrag(t.currentTarget)){t.preventDefault();return}i();if(o.length){e=o[o.length-1].element;r=parseInt(e.css("marginRight"),10);a=e.position().left+s(e)+r}else a=0},drag:g._drag.bind(g)});g.dataSource=g.options.dataSource;if(g.dataSource&&g._refreshHandler)g.dataSource.unbind(C,g._refreshHandler);else g._refreshHandler=g.refresh.bind(g);if(g.dataSource){g.dataSource.bind("change",g._refreshHandler);g.refresh()}},refresh:function(){var i=this,t=i.dataSource;var e=t.group()||[];var o=l(a);var d=l(n);var s;if(i.groupContainer){i.groupContainer.empty();r(e,function(t,e){var r=e.field;var a=e.dir;var n=i.element.find(i.options.filter).filter(function(){return u(this).attr(o)===r});s=i.buildIndicator(r,n.attr(d),a);i.groupContainer.append(s);i._setIndicatorSortOptions(r,k({},i.options.sort,{dir:a,compare:e.compare}))})}i._invalidateGroupContainer()},destroy:function(){var t=this;d.fn.destroy.call(t);t.groupContainer.off(m);if(t.groupContainer.data("kendoDropTarget"))t.groupContainer.data("kendoDropTarget").destroy();if(t.groupContainer.data("kendoDraggable"))t.groupContainer.data("kendoDraggable").destroy();if(!t.options.draggable)t.draggable.destroy();if(t.dataSource&&t._refreshHandler){t.dataSource.unbind("change",t._refreshHandler);t._refreshHandler=null}t.groupContainer=t.element=t.draggable=null},events:["change"],options:{name:"Groupable",filter:"th",draggableElements:"th",messages:{empty:"Drag a column header and drop it here to group by that column"},sort:{dir:p,compare:null}},indicator:function(e){var t=u(".k-group-indicator",this.groupContainer);return u.grep(t,function(t){return u(t).attr(c.attr("field"))===e})[0]},buildIndicator:function(t,e,r){var a=this;var n=i({ns:c.ns,field:t.replace(/"/g,"'"),title:e,dir:r||(a.options.sort||{}).dir||p});return n},_setIndicatorSortOptions:function(t,e){var r=u(this.indicator(t));r.data(h,e)},aggregates:function(){var t=this;var a;var n;var i;return t.element.find(t.options.filter).map(function(){var t=u(this),e=t.attr(c.attr("aggregates")),r=t.attr(c.attr("field"));if(e&&e!==""){a=e.split(",");e=[];for(n=0,i=a.length;n<i;n++)e.push({field:r,aggregate:a[n]})}return e}).toArray()},descriptors:function(){var a=this,t=u(".k-group-indicator",a.groupContainer),n,i=a.aggregates();return u.map(t,function(t){t=u(t);n=t.attr(c.attr("field"));var e=a.options.sort||{};var r=t.data(h)||{};return{field:n,dir:t.attr(c.attr("dir")),aggregates:i||[],compare:r.compare||e.compare}})},_removeIndicator:function(t){var e=this;t.off();t.removeData();t.remove();e._invalidateGroupContainer();e._change()},_change:function(){var t=this;if(t.dataSource){var e=t.descriptors();if(t.trigger("change",{groups:e})){t.refresh();return}t.dataSource.group(e)}},_dropCuePosition:function(e){var t=this._dropCuePositions;if(!v.is(":visible")||t.length===0)return;e=Math.ceil(e);var r=t[t.length-1],a=r.left,n=r.right,i=parseInt(r.element.css("marginLeft"),10),o=parseInt(r.element.css("marginRight"),10);if(e>=n&&!f||e<a&&f)e={left:r.element.position().left+(!f?s(r.element)+o:-i),element:r.element,before:false};else{e=u.grep(t,function(t){return t.left<=e&&e<=t.right||f&&e>t.right})[0];if(e)e={left:f?e.element.position().left+s(e.element)+o:e.element.position().left-i,element:e.element,before:true}}return e},_drag:function(t){var e=this._dropCuePosition(t.x.location);if(e)v.css({left:e.left,right:"auto"})},_canDrag:function(t){var e=t.attr(c.attr("field"));return t.attr(c.attr("groupable"))!="false"&&e&&(t.hasClass("k-group-indicator")||!this.indicator(e))},_canDrop:function(t,e,r){var a=t.next(),n=t[0]!==e[0]&&(!a[0]||e[0]!==a[0]||(!f&&r>a.position().left||f&&r<a.position().left));return n},_dragEnd:function(t){var e=this,r=t.currentTarget.attr(c.attr("field")),a=e.indicator(r);if(t!==e.options.draggable&&!t.dropped&&a)e._removeIndicator(u(a));e._dragCancel()},_dragCancel:function(){v.remove();this._dropCuePositions=[]},_intializePositions:function(){var t=this,e=u(".k-group-indicator",t.groupContainer),r;t._dropCuePositions=u.map(e,function(t){t=u(t);r=c.getOffset(t).left;return{left:parseInt(r,10),right:parseInt(r+s(t),10),element:t}})},_invalidateGroupContainer:function(){var t=this.groupContainer;if(t&&t.is(":empty"))t.html(this.options.messages.empty)}});return c.ui.plugin(o),window.kendo})}("function"==typeof define&&define.amd?define:function(t,e,r){(r||e)()});
//# sourceMappingURL=kendo.groupable.min.js.map
