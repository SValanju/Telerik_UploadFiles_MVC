{"version":3,"file":"kendo.dropdowntree.min.js","sources":["kendo.dropdowntree.js"],"sourcesContent":["(function(f, define) {\n    define('dropdowntree/treeview',[ \"kendo.treeview\" ], f);\n})(function() {\n\n(function($, undefined) {\n\n    var kendo = window.kendo,\n        ui = kendo.ui,\n        keys = kendo.keys,\n        DISABLED = \"k-disabled\",\n        SELECT = \"select\",\n        CHECKED = \"checked\",\n        DATABOUND = \"dataBound\",\n        CLICK = \"click\",\n        NS = \".kendoTreeView\",\n        INDETERMINATE = \"indeterminate\",\n        NAVIGATE = \"navigate\",\n        subGroup,\n        TreeView = ui.TreeView;\n\n        function contentChild(filter) {\n            return function(node) {\n                var result = node.children(\".k-animation-container\");\n\n                if (!result.length) {\n                    result = node;\n                }\n\n                return result.children(filter);\n            };\n        }\n\n        subGroup = contentChild(\".k-group\");\n\n    var Tree = TreeView.extend({\n        init: function(element, options, dropdowntree) {\n            var that = this;\n\n            that.dropdowntree = dropdowntree;\n\n            TreeView.fn.init.call(that, element, options);\n            if (that.dropdowntree._isMultipleSelection()) {\n                that.wrapper.on(CLICK + NS, '.k-in.k-selected', that._clickSelectedItem.bind(that));\n            }\n        },\n\n        _checkOnSelect: function(e) {\n            if (!e.isDefaultPrevented()) {\n                var dataItem = this.dataItem(e.node);\n\n                dataItem.set(\"checked\", !dataItem.checked);\n            }\n        },\n\n        _setCheckedValue: function(node, value) {\n            node.set(CHECKED, value);\n        },\n\n        _click: function(e) {\n            var that = this;\n\n            if (that.dropdowntree._isMultipleSelection()) {\n                that.one(\"select\", that._checkOnSelect);\n            }\n            TreeView.fn._click.call(that, e);\n        },\n\n        _clickSelectedItem: function(e) {\n            var that = this,\n            node = $(e.currentTarget);\n\n            that.one(\"select\", that._checkOnSelect);\n            if (!that._trigger(SELECT, node)) {\n                that.dataItem(node).set(\"selected\", false);\n            }\n        },\n\n        defaultrefresh: function(e) {\n            var that = this;\n            var node = e.node;\n            var action = e.action;\n            var items = e.items;\n            var parentNode = this.wrapper;\n            var options = this.options;\n            var loadOnDemand = options.loadOnDemand;\n            var checkChildren = options.checkboxes && options.checkboxes.checkChildren;\n            var i;\n\n            if (this._skip) {\n                return;\n            }\n\n            if (e.field) {\n                if (!items[0] || !items[0].level) {\n                    return;\n                }\n\n                return this._updateNodes(items, e.field);\n            }\n\n            if (node) {\n                parentNode = this.findByUid(node.uid);\n                this._progress(parentNode, false);\n            }\n\n            if (checkChildren && action != \"remove\") {\n                var bubble = false;\n\n                for (i = 0; i < items.length; i++) {\n                    if (\"checked\" in items[i]) {\n                        bubble = true;\n                        break;\n                    }\n                }\n\n                if (!bubble && node && node.checked) {\n                    for (i = 0; i < items.length; i++) {\n                        items[i].checked = true;\n                    }\n                }\n            }\n\n            if (action == \"add\") {\n                this._appendItems(e.index, items, parentNode);\n            } else if (action == \"remove\") {\n                this._remove(this.findByUid(items[0].uid), false);\n            } else if (action == \"itemchange\") {\n                this._updateNodes(items);\n            } else if (action == \"itemloaded\") {\n                this._refreshChildren(parentNode, items, e.index);\n            } else {\n                this._refreshRoot(items);\n            }\n\n            if (action != \"remove\") {\n                for (i = 0; i < items.length; i++) {\n                    if (!loadOnDemand || items[i].expanded) {\n                        items[i].load();\n                    }\n                }\n            }\n\n            that.wrapper.attr(\"role\", \"tree\");\n            that.wrapper.find(\">ul\").attr(\"role\", \"none\");\n            this.trigger(DATABOUND, { node: node ? parentNode : undefined });\n            this.dropdowntree._treeViewDataBound({ node: node ? parentNode : undefined, sender: this });\n            if (this.options.checkboxes.checkChildren) {\n                this.updateIndeterminate();\n            }\n        },\n\n        _previousVisible: function(node) {\n            var that = this,\n                lastChild,\n                result;\n\n            if (!node.length || node.prev().length) {\n                if (node.length) {\n                    result = node.prev();\n                } else {\n                    result = that.root.children().last();\n                }\n\n                while (that._expanded(result)) {\n                    lastChild = subGroup(result).children().last();\n\n                    if (!lastChild.length) {\n                        break;\n                    }\n\n                    result = lastChild;\n                }\n            } else {\n                result = that.parent(node) || node;\n\n                if (!result.length) {\n                    if (that.dropdowntree.checkAll && that.dropdowntree.checkAll.is(\":visible\")) {\n                        that.dropdowntree.checkAll.find(\".k-checkbox\").trigger(\"focus\");\n                    } else if (that.dropdowntree.filterInput) {\n                        that.dropdowntree.filterInput.trigger(\"focus\");\n                    } else {\n                        that.dropdowntree.wrapper.trigger(\"focus\");\n                    }\n                }\n            }\n\n            return result;\n        },\n\n        _keydown: function(e) {\n            var that = this,\n                key = e.keyCode,\n                target,\n                focused = that.current(),\n                expanded = that._expanded(focused),\n                checkbox = focused.find(\".k-checkbox-wrapper\").first().find(\":checkbox\"),\n                rtl = kendo.support.isRtl(that.element);\n\n            if (e.target != e.currentTarget) {\n                return;\n            }\n\n            if ((!rtl && key == keys.RIGHT) || (rtl && key == keys.LEFT)) {\n                if (expanded) {\n                    target = that._nextVisible(focused);\n                } else if (!focused.find(\".k-in\").first().hasClass(DISABLED)) {\n                    that.expand(focused);\n                }\n            } else if ((!rtl && key == keys.LEFT) || (rtl && key == keys.RIGHT)) {\n                if (expanded && !focused.find(\".k-in\").first().hasClass(DISABLED)) {\n                    that.collapse(focused);\n                } else {\n                    target = that.parent(focused);\n\n                    if (!that._enabled(target)) {\n                        target = undefined;\n                    }\n                }\n            } else if (key == keys.DOWN) {\n                target = that._nextVisible(focused);\n            } else if (key == keys.UP && !e.altKey) {\n                target = that._previousVisible(focused);\n            } else if (key == keys.HOME) {\n                target = that._nextVisible($());\n            } else if (key == keys.END) {\n                target = that._previousVisible($());\n            } else if (key == keys.ENTER && !focused.find(\".k-in\").first().hasClass(DISABLED)) {\n                if (!focused.find(\".k-in\").first().hasClass(\"k-selected\")) {\n                    if (!that._trigger(SELECT, focused)) {\n                        that.select(focused);\n                    }\n                }\n            } else if (key == keys.SPACEBAR && checkbox.length && !focused.find(\".k-in\").first().hasClass(DISABLED)) {\n                checkbox.prop(CHECKED, !checkbox.prop(CHECKED))\n                    .data(INDETERMINATE, false)\n                    .prop(INDETERMINATE, false);\n\n                that._checkboxChange({ target: checkbox });\n\n                target = focused;\n            } else if ((e.altKey && key === keys.UP) || key === keys.ESC) {\n                that._closePopup();\n            } else if ( key === keys.TAB) {\n                e.preventDefault();\n                that._closePopup();\n            }\n\n            if (target) {\n                e.preventDefault();\n\n                if (focused[0] != target[0]) {\n                    that._trigger(NAVIGATE, target);\n                    that.current(target);\n                }\n            }\n        },\n\n        _closePopup: function() {\n            this.dropdowntree.close();\n            this.dropdowntree.wrapper.trigger(\"focus\");\n        },\n\n        refresh: function(e) {\n            this.defaultrefresh(e);\n\n            if (this.dropdowntree.options.skipUpdateOnBind) {\n                return;\n            }\n\n            if (e.action === \"itemchange\") {\n                if (this.dropdowntree._isMultipleSelection()) {\n                    if (e.field === \"checked\") {\n                        this.dropdowntree._checkValue(e.items[0]);\n                    }\n                } else {\n                    if (e.field !== \"checked\" && e.field !== \"expanded\" && e.items[0].selected) {\n                        this.dropdowntree._selectValue(e.items[0]);\n                    }\n                }\n            } else {\n                this.dropdowntree.refresh(e);\n            }\n        }\n\n    });\n\n    kendo.ui._dropdowntree = Tree;\n\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) { (a3 || a2)(); });\n\n(function(f, define) {\n    define('kendo.dropdowntree',[ \"./dropdowntree/treeview\", \"kendo.popup\", \"kendo.binder\", \"kendo.html.chip\", \"kendo.html.chiplist\", \"kendo.html.button\", \"kendo.html.input\" ], f);\n})(function() {\n\nvar __meta__ = { // jshint ignore:line\n    id: \"dropdowntree\",\n    name: \"DropDownTree\",\n    category: \"web\",\n    description: \"The DropDownTree widget displays a hierarchy of items and allows the selection of single or multiple items.\",\n    depends: [ \"treeview\", \"popup\", \"binder\", \"html.chip\", \"html.chiplist\", \"html.button\", \"html.input\" ]\n};\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        ui = kendo.ui,\n        html = kendo.html,\n        Widget = ui.Widget,\n        TreeView = ui._dropdowntree,\n        ObservableArray = kendo.data.ObservableArray,\n        ObservableObject = kendo.data.ObservableObject,\n        extend = $.extend,\n        activeElement = kendo._activeElement,\n        ns = \".kendoDropDownTree\",\n        keys = kendo.keys,\n        support = kendo.support,\n        HIDDENCLASS = \"k-hidden\",\n        WIDTH = \"width\",\n        browser = support.browser,\n        outerWidth = kendo._outerWidth,\n        DOT = \".\",\n        DISABLED = \"disabled\",\n        READONLY = \"readonly\",\n        STATEDISABLED = \"k-disabled\",\n        ARIA_DISABLED = \"aria-disabled\",\n        HOVER = \"k-hover\",\n        FOCUSED = \"k-focus\",\n        HOVEREVENTS = \"mouseenter\" + ns + \" mouseleave\" + ns,\n        TABINDEX = \"tabindex\",\n        CLICK = \"click\",\n        OPEN = \"open\",\n        CLOSE = \"close\",\n        CHANGE = \"change\",\n        quotRegExp = /\"/g,\n\n        CHIP = \".k-chip\";\n\n    var DropDownTree = kendo.ui.Widget.extend( {\n        init: function(element, options) {\n            this.ns = ns;\n\n            kendo.ui.Widget.fn.init.call(this, element, options);\n            this._selection = this._getSelection();\n            this._focusInputHandler = this._focusInput.bind(this);\n            this._initial = this.element.val();\n\n            this._values = [];\n\n            var value = this.options.value;\n\n            if (value === null || !value.length) {\n                this._noInitialValue = true;\n            }\n\n            if (!this._isNullorUndefined(value)) {\n                this._valueMethodCalled = true;\n                this._values = Array.isArray(value) ? value.slice(0) : [value];\n            }\n\n            this._inputTemplate();\n\n            this._accessors();\n            this._setTreeViewOptions(this.options);\n            this._dataSource();\n            this._selection._initWrapper();\n            this._applyCssClasses();\n            this._placeholder(true);\n            this._tabindex();\n            this.wrapper.data(TABINDEX, this.wrapper.attr(TABINDEX));\n\n            this.tree = $('<div/>')\n            .attr({\n                tabIndex: -1,\n                \"aria-hidden\": true\n            });\n\n            this.list = $(\"<div class='k-list-container'/>\")\n                .append(this.tree);\n\n            this._header();\n            this._noData();\n            this._footer();\n            this._reset();\n            this._popup();\n            this.popup.one(\"open\", this._popupOpen.bind(this));\n            this._clearButton();\n            this._filterHeader();\n            this._treeview();\n\n            this._renderFooter();\n\n            this._checkAll();\n            this._enable();\n            this._toggleCloseVisibility();\n\n            this._aria();\n\n            if (!this.options.autoBind) {\n                var text = options.text || \"\";\n                if (!this._isNullorUndefined(options.value)) {\n                    this._preselect(options.value);\n                } else if (text) {\n                    this._textAccessor(text);\n                } else if (options.placeholder) {\n                    this._placeholder(true);\n                }\n            }\n\n            var disabled = $(this.element).parents(\"fieldset\").is(':disabled');\n\n            if (disabled) {\n                this.enable(false);\n            }\n            this._valueMethodCalled = false;\n            kendo.notify(this);\n        },\n\n        _preselect: function(data, value) {\n            this._selection._preselect(data, value);\n        },\n\n        _setTreeViewOptions: function(options) {\n            var treeviewOptions = {\n                autoBind: options.autoBind,\n                checkboxes: options.checkboxes,\n                dataImageUrlField: options.dataImageUrlField,\n                dataSpriteCssClassField: options.dataSpriteCssClassField,\n                dataTextField: options.dataTextField,\n                dataUrlField: options.dataUrlField,\n                loadOnDemand: options.loadOnDemand,\n                size: options.size\n            };\n\n            this.options.treeview = $.extend({}, treeviewOptions, this.options.treeview);\n\n            if (options.template) {\n                this.options.treeview.template = options.template;\n            }\n\n            if (options.size) {\n                this.options.treeview.size = options.size;\n            }\n        },\n\n        _dataSource: function() {\n            var rootDataSource = this.options.dataSource;\n\n            this.dataSource = kendo.data.HierarchicalDataSource.create(rootDataSource);\n            if (rootDataSource) {\n                $.extend(this.options.treeview,{\n                    dataSource: this.dataSource\n                });\n            }\n        },\n\n        _popupOpen: function() {\n            var popup = this.popup;\n            popup.wrapper = kendo.wrap(popup.element);\n        },\n\n        _getSelection: function() {\n            if (this._isMultipleSelection()) {\n                this.options._altname = \"MultiSelectDropDownTree\";\n                return new ui.DropDownTree.MultipleSelection(this);\n            } else {\n                return new ui.DropDownTree.SingleSelection(this);\n            }\n        },\n\n        setDataSource: function(dataSource) {\n            this._isDataSourceSet = true;\n            if (this._tags) {\n                this._noInitialValue = true;\n                this.setValue([]);\n                this._tags.empty();\n                this.span.show();\n                this._multipleTags.empty();\n            }\n            this.dataSource = dataSource;\n            this.treeview.setDataSource(dataSource);\n            this._isDataSourceSet = false;\n        },\n\n        _isMultipleSelection: function() {\n            return this.options && (this.options.treeview.checkboxes || this.options.checkboxes);\n        },\n\n        options: {\n            name: \"DropDownTree\",\n            animation: {},\n            autoBind: true,\n            autoClose: true,\n            autoWidth: false,\n            clearButton: true,\n            dataTextField: \"\",\n            dataValueField: \"\",\n            dataImageUrlField: \"\",\n            dataSpriteCssClassField: \"\",\n            dataUrlField: \"\",\n            delay: 500,\n            enabled: true,\n            enforceMinLength: false,\n            filter: \"none\",\n            height: 200,\n            ignoreCase: true,\n            index: 0,\n            loadOnDemand: false,\n            messages: {\n                \"singleTag\": \"item(s) selected\",\n                \"clear\": \"clear\",\n                \"deleteTag\": \"delete\",\n                \"noData\": \"No data found.\"\n            },\n            minLength: 1,\n            checkboxes: false,\n            noDataTemplate: true,\n            placeholder: \"\",\n            checkAll: false,\n            checkAllTemplate: \"Check all\",\n            tagMode: \"multiple\",\n            template: null,\n            text: null,\n            treeview: {},\n            valuePrimitive: false,\n            footerTemplate: \"\",\n            headerTemplate: \"\",\n            value: null,\n            valueTemplate: null,\n            popup: null,\n            filterLabel: null,\n            size: \"medium\",\n            fillMode: \"solid\",\n            rounded: \"medium\"\n        },\n\n        events: [\n            \"open\",\n            \"close\",\n            \"dataBound\",\n            CHANGE,\n            \"select\",\n            \"filtering\"\n        ],\n\n        focus: function() {\n            this.wrapper.trigger(\"focus\");\n        },\n\n        dataItem: function(node) {\n            return this.treeview.dataItem(node);\n        },\n\n        readonly: function(readonly) {\n            this._editable({\n                readonly: readonly === undefined ? true : readonly,\n                disable: false\n            });\n            this._toggleCloseVisibility();\n        },\n\n        enable: function(enable) {\n            this._editable({\n                readonly: false,\n                disable: !(enable = enable === undefined ? true : enable)\n            });\n            this._toggleCloseVisibility();\n        },\n\n        toggle: function(open) {\n            this._toggle(open);\n        },\n\n        open: function() {\n            var popup = this.popup;\n\n            if (!this.options.autoBind && !this.dataSource.data().length) {\n                this.treeview._progress(true);\n                if (this._isFilterEnabled()) {\n                    this._search();\n                } else {\n                    this.dataSource.fetch();\n                }\n            }\n\n            if (popup.visible() || !this._allowOpening()) {\n                return;\n            }\n\n            if (this._isMultipleSelection()) {\n                popup.element.addClass(\"k-multiple-selection\");\n            }\n            popup.element.addClass(\"k-popup-dropdowntree\");\n\n            popup.one(\"activate\", this._focusInputHandler);\n            popup._hovered = true;\n            popup.open();\n        },\n\n        close: function() {\n            this.popup.close();\n        },\n\n        search: function(word) {\n            var options = this.options;\n            var filter;\n            clearTimeout(this._typingTimeout);\n\n            if ((!options.enforceMinLength && !word.length) || word.length >= options.minLength) {\n                filter = this._getFilter(word);\n                if (this.trigger(\"filtering\", { filter: filter }) ||\n                 Array.isArray(this.options.dataTextField)) {\n                    return;\n                }\n\n                this._filtering = true;\n                this.treeview.dataSource.filter(filter);\n            }\n        },\n\n        _getFilter: function(word) {\n            return {\n                field: this.options.dataTextField,\n                operator: this.options.filter,\n                value: word,\n                ignoreCase: this.options.ignoreCase\n              };\n        },\n\n        refresh: function() {\n            var data = this.treeview.dataSource.flatView();\n            this._renderFooter();\n            this._renderNoData();\n            if (this.filterInput && this.checkAll) {\n                this.checkAll.toggle(!this.filterInput.val().length);\n            }\n\n            this.tree.toggle(!!data.length);\n            $(this.noData).toggle(!data.length);\n        },\n\n        setOptions: function(options) {\n\n            if (this.options.checkboxes != options.checkboxes) {\n                delete options.checkboxes;\n                window.console.warn('setOptions method can not be used to set the checkboxes option in DropDownTree');\n            }\n\n            Widget.fn.setOptions.call(this, options);\n\n            this._setTreeViewOptions(options);\n            this._dataSource();\n            if (this.options.treeview || options.size) {\n                this.treeview.setOptions(this.options.treeview);\n            }\n\n            if (options.height && this.tree) {\n                this.tree.css('max-height', options.height);\n            }\n\n            this._header();\n            this._noData();\n            this._footer();\n\n            this._renderFooter();\n            this._renderNoData();\n            if (this.span && (this._isMultipleSelection() || this.span.hasClass(\"k-readonly\"))) {\n                this._placeholder(true);\n            }\n            this._inputTemplate();\n            this._accessors();\n            this._filterHeader();\n            this._checkAll();\n            this._enable();\n            if (options && (options.enable || options.enabled)) {\n                this.enable(true);\n            }\n            this._clearButton();\n        },\n\n        destroy: function() {\n            kendo.ui.Widget.fn.destroy.call(this);\n            if (this.treeview) {\n                this.treeview.destroy();\n            }\n            this.popup.destroy();\n\n            this.wrapper.off(ns);\n            this._clear.off(ns);\n            if (this.filterInput) {\n                this.filterInput.off(ns);\n            }\n\n            if (this.tagList) {\n                this.tagList.off(ns);\n            }\n\n            kendo.unbind(this.tagList);\n            if (this.options.checkAll && this.checkAll) {\n                this.checkAll.off(ns);\n            }\n\n            if (this._form) {\n                this._form.off(\"reset\", this._resetHandler);\n            }\n        },\n\n        setValue: function(value) {\n            value = Array.isArray(value) || value instanceof ObservableArray ? value.slice(0) : [value];\n\n            this._values = value;\n        },\n\n        items: function() {\n            return this.treeview.items();\n        },\n\n        value: function(value) {\n            var that = this;\n\n            if (value) {\n                if (that.filterInput && that.dataSource._filter) {\n                    that._filtering = true;\n                    that.dataSource.filter({});\n                } else if (!that.dataSource.data().length || !that.treeview.dataSource.data().length) {\n                    that.dataSource.fetch(function() {\n                        if (that.options.loadOnDemand) {\n                            that._selection._setValue(value);\n                        } else {\n                            that.treeview.one('loadCompleted', function() {\n                                that._selection._setValue(value);\n                            });\n                        }\n                    });\n\n                    return;\n                }\n            }\n\n            return that._selection._setValue(value);\n        },\n\n        text: function(text) {\n            var loweredText;\n            var ignoreCase = this.options.ignoreCase;\n\n            text = text === null ? \"\" : text;\n\n            if (text !== undefined && !this._isMultipleSelection()) {\n                if (typeof text !== \"string\") {\n                    this._textAccessor(text);\n                    return;\n                }\n\n                loweredText = ignoreCase ? text : text.toLowerCase();\n\n                this._selectItemByText(loweredText);\n\n                this._textAccessor(loweredText);\n            } else {\n                return this._textAccessor();\n            }\n        },\n\n        _aria: function() {\n            var input = this.wrapper.find(\"span.k-input-inner\");\n\n            this.wrapper.attr({\n                \"aria-haspopup\": \"tree\",\n                \"aria-expanded\": false,\n                \"aria-controls\": this.treeview.element.attr(\"id\"),\n                \"role\": \"listbox\"\n            });\n\n            this._activeId = kendo.guid();\n            this._ariaLabel(this.wrapper);\n\n            if (this.filterInput && this.options.filterLabel) {\n                this.filterInput.attr(\"aria-label\", this.options.filterLabel);\n            }\n\n            if (!this.options.checkboxes && input.text().length) {\n                input.attr(\"role\", \"option\");\n                input.attr(\"aria-selected\", \"true\");\n                input.attr(\"id\", this._activeId);\n\n                this.wrapper.attr(\"aria-activedescendant\", this._activeId);\n            } else if (this.options.checkboxes) {\n                this.wrapper.attr({\n                    \"aria-multiselectable\": true,\n                    \"aria-describedby\": this.tagList[0].id\n                });\n\n                this.tagList.attr(\"role\", \"none\");\n            }\n        },\n\n        _header: function() {\n            var list = this;\n            var header = $(list.header);\n            var template = list.options.headerTemplate;\n\n            this._angularElement(header, \"cleanup\");\n            kendo.destroy(header);\n            header.remove();\n\n            if (!template) {\n                list.header = null;\n                return;\n            }\n\n            var headerTemplate = typeof template !== \"function\" ? kendo.template(template) : template;\n            header = $(headerTemplate({}));\n\n            list.header = header[0] ? header : null;\n            list.list.prepend(header);\n\n            this._angularElement(list.header, \"compile\");\n        },\n\n        _noData: function() {\n            var list = this;\n            var noData = $(list.noData);\n            var template = list.options.noDataTemplate === true ? list.options.messages.noData : list.options.noDataTemplate;\n\n            list.angular(\"cleanup\", function() { return { elements: noData }; });\n            kendo.destroy(noData);\n            noData.remove();\n\n            if (!template) {\n                list.noData = null;\n                return;\n            }\n\n            list.noData = $('<div class=\"k-no-data\" style=\"display: none;\"></div>').appendTo(list.list);\n            list.noDataTemplate = typeof template !== \"function\" ? kendo.template(template) : template;\n        },\n\n        _renderNoData: function() {\n            var list = this;\n            var noData = list.noData;\n\n            if (!noData) {\n                return;\n            }\n\n            this._angularElement(noData, \"cleanup\");\n            noData.html(list.noDataTemplate({ instance: list }));\n            this._angularElement(noData, \"compile\");\n        },\n\n        _footer: function() {\n            var list = this;\n            var footer = $(list.footer);\n            var template = list.options.footerTemplate;\n\n            this._angularElement(footer, \"cleanup\");\n            kendo.destroy(footer);\n            footer.remove();\n\n            if (!template) {\n                list.footer = null;\n                return;\n            }\n\n            list.footer = $('<div class=\"k-footer\"></div>').appendTo(list.list);\n            list.footerTemplate = typeof template !== \"function\" ? kendo.template(template) : template;\n        },\n\n        _renderFooter: function() {\n            var list = this;\n            var footer = list.footer;\n\n            if (!footer) {\n                return;\n            }\n\n            this._angularElement(footer, \"cleanup\");\n            footer.html(list.footerTemplate({ instance: list }));\n            this._angularElement(footer, \"compile\");\n        },\n\n        _enable: function() {\n            var that = this,\n                options = that.options,\n                disabled = that.element.is(\"[disabled]\");\n\n            if (options.enable !== undefined) {\n                options.enabled = options.enable;\n            }\n\n            if (!options.enabled || disabled) {\n                that.enable(false);\n            } else {\n                that.readonly(that.element.is(\"[readonly]\"));\n            }\n        },\n\n        _adjustListWidth: function() {\n            var that = this,\n                list = that.list,\n                width = list[0].style.width,\n                wrapper = that.wrapper,\n                computedStyle, computedWidth;\n\n            if (!list.data(WIDTH) && width) {\n                return;\n            }\n\n            computedStyle = window.getComputedStyle ? window.getComputedStyle(wrapper[0], null) : 0;\n            computedWidth = parseFloat(computedStyle && computedStyle.width) || outerWidth(wrapper);\n\n            if (computedStyle && browser.msie) { // getComputedStyle returns different box in IE.\n                computedWidth += parseFloat(computedStyle.paddingLeft) + parseFloat(computedStyle.paddingRight) + parseFloat(computedStyle.borderLeftWidth) + parseFloat(computedStyle.borderRightWidth);\n            }\n\n            if (list.css(\"box-sizing\") !== \"border-box\") {\n                width = computedWidth - (outerWidth(list) - list.width());\n            } else {\n                width = computedWidth;\n            }\n\n            list.css({\n                fontFamily: wrapper.css(\"font-family\"),\n                width: that.options.autoWidth ? \"auto\" : width,\n                minWidth: width,\n                whiteSpace: that.options.autoWidth ? \"nowrap\" : \"normal\"\n            })\n            .data(WIDTH, width);\n\n            return true;\n        },\n\n        _reset: function() {\n            var that = this,\n                element = that.element,\n                formId = element.attr(\"form\"),\n                form = formId ? $(\"#\" + formId) : element.closest(\"form\");\n\n            if (form[0]) {\n                that._resetHandler = function() {\n                    setTimeout(function() {\n                        that.value(that._initial);\n                    });\n                };\n\n                that._form = form.on(\"reset\", that._resetHandler);\n            }\n        },\n\n        _popup: function() {\n            var list = this;\n\n            if (list.options.checkboxes && list.options.checkAll) {\n                list.list.attr(\"role\", \"application\");\n            }\n\n            list.popup = new ui.Popup(list.list, extend({}, list.options.popup, {\n                anchor: list.wrapper,\n                open: list._openHandler.bind(list),\n                close: list._closeHandler.bind(list),\n                animation: list.options.animation,\n                isRtl: support.isRtl(list.wrapper),\n                autosize: list.options.autoWidth\n            }));\n        },\n\n        _angularElement: function(element, action) {\n            if (!element) {\n                return;\n            }\n\n            this.angular(action, function() {\n                return { elements: element };\n            });\n        },\n\n        _allowOpening: function() {\n            return this.options.noDataTemplate || this.treeview.dataSource.flatView().length;\n        },\n\n        _placeholder: function(show) {\n            if (this.span) {\n                this.span.toggleClass(\"k-readonly\", show).text(show ? this.options.placeholder : \"\");\n            }\n\n            if (this.span.text().trim().length > 0) {\n                this.span.parent().attr({\n                    role: \"option\",\n                    \"aria-selected\": true\n                });\n            } else {\n                this.span.parent().removeAttr(\"role\");\n                this.span.parent().removeAttr(\"aria-selected\");\n            }\n        },\n\n        _currentValue: function(dataItem) {\n            var currentValue = this._value(dataItem);\n            if (!currentValue && currentValue !== 0) {\n                currentValue = dataItem;\n            }\n\n            return currentValue;\n        },\n\n        _checkValue: function(dataItem) {\n            var value = \"\";\n            var indexOfValue = -1;\n            var currentValue = this.value();\n            var isMultiple = this.options.tagMode === \"multiple\";\n\n            if (dataItem || dataItem === 0) {\n                if (dataItem.level) {\n                    dataItem._level = dataItem.level();\n                }\n\n                value = this._currentValue(dataItem);\n\n                indexOfValue = currentValue.indexOf(value);\n            }\n\n            if (dataItem.checked) {\n                var alreadyAddedTag = $.grep(this._tags, function( item ) {\n                    return item.uid === dataItem._tagUid;\n                });\n\n                if (alreadyAddedTag.length) {\n                    return;\n                }\n\n                var itemToAdd = new ObservableObject(dataItem.toJSON());\n                dataItem._tagUid = itemToAdd.uid;\n                this._tags.push(itemToAdd);\n\n                if (this._tags.length === 1) {\n                    this.span.hide();\n\n                    if (!isMultiple) {\n                        this._multipleTags.push(itemToAdd);\n                    }\n                }\n\n                if (indexOfValue === -1) {\n                    currentValue.push(value);\n                    this.setValue(currentValue);\n                }\n            } else {\n                var itemToRemove = this._tags.find(function(item) {\n                    return item.uid === dataItem._tagUid;\n                });\n\n                var idx = this._tags.indexOf(itemToRemove);\n\n                if (idx !== -1) {\n                    this._tags.splice(idx, 1);\n                } else {\n                    this._treeViewCheckAllCheck(dataItem);\n                    return;\n                }\n\n                if (this._tags.length === 0) {\n                    this.span.show();\n                    if (!isMultiple) {\n                        this._multipleTags.splice(0, 1);\n                    }\n                }\n                if (indexOfValue !== -1) {\n                    currentValue.splice(indexOfValue, 1);\n                    this.setValue(currentValue);\n                }\n            }\n\n            this._treeViewCheckAllCheck(dataItem);\n            if (!this._preventChangeTrigger && !this._valueMethodCalled && !this._noInitialValue) {\n                this.trigger(CHANGE);\n            }\n\n            if (this.options.autoClose && this.popup.visible()) {\n                this.close();\n                this.wrapper.trigger(\"focus\");\n            }\n            this.popup.position();\n            this._toggleCloseVisibility();\n            this._updateSelectedOptions();\n        },\n\n        _updateSelectedOptions: function() {\n            if (this.element[0].tagName.toLowerCase() !== 'select') {\n                return;\n            }\n\n            var selectedItems = this._tags;\n            var options = '';\n            var dataItem = null;\n            var value = null;\n\n            if (selectedItems.length) {\n                for (var idx = 0; idx < selectedItems.length; idx++) {\n                    dataItem = selectedItems[idx];\n\n                    value = this._value(dataItem);\n                    options += this._option(value, this._text(dataItem), true);\n                }\n            }\n\n            this.element.html(options);\n        },\n\n        _option: function(dataValue, dataText, selected) {\n            var option = \"<option\";\n\n            if (dataValue !== undefined) {\n                dataValue += \"\";\n\n                if (dataValue.indexOf('\"') !== -1) {\n                    dataValue = dataValue.replace(quotRegExp, \"&quot;\");\n                }\n\n                option += ' value=\"' + dataValue + '\"';\n            }\n\n            if (selected) {\n                option += ' selected';\n            }\n\n            option += \">\";\n\n            if (dataText !== undefined) {\n                option += kendo.htmlEncode(dataText);\n            }\n\n            return option += \"</option>\";\n        },\n\n        _selectValue: function(dataItem) {\n            var value = \"\";\n            var text = \"\";\n\n            if (dataItem || dataItem === 0) {\n                if (dataItem.level) {\n                    dataItem._level = dataItem.level();\n                }\n                text = this._text(dataItem) || dataItem;\n                value = this._currentValue(dataItem);\n            }\n\n            if (value === null) {\n                value = \"\";\n            }\n            this.setValue(value);\n            this._textAccessor(text, dataItem);\n            this._accessor(value);\n\n            if (!this._preventChangeTrigger && !this._valueMethodCalled) {\n                this.trigger(CHANGE);\n            }\n            this._valueMethodCalled = false;\n\n            if (this.options.autoClose && this.popup.visible()) {\n                this.close();\n                this.wrapper.trigger(\"focus\");\n            }\n            this.popup.position();\n            this._toggleCloseVisibility();\n        },\n\n        _clearClick: function(e) {\n            e.stopPropagation();\n            this.wrapper.trigger(\"focus\");\n            this._clearTextAndValue();\n        },\n\n        _clearTextAndValue: function() {\n            this.setValue([]);\n            this._clearInput();\n            this._clearText();\n            this._selection._clearValue();\n            this.popup.position();\n            this._toggleCloseVisibility();\n        },\n\n        _clearText: function() {\n            if (this.options.placeholder) {\n                this._placeholder(true);\n            } else {\n                if (this.span) {\n                    this.span.html(\"\");\n                }\n            }\n        },\n\n        _inputTemplate: function() {\n            var template = this.options.valueTemplate;\n\n            if (!template) {\n                template = kendo.template('#:this._text(data)#', { useWithBlock: false }).bind(this);\n            } else {\n                template = kendo.template(template);\n            }\n\n            this.valueTemplate = template;\n        },\n\n        _assignInstance: function(text, value) {\n            var dataTextField = this.options.dataTextField;\n            var dataItem = {};\n\n            if (dataTextField) {\n                assign(dataItem, dataTextField.split(DOT), text);\n                assign(dataItem, this.options.dataValueField.split(DOT), value);\n                dataItem = new ObservableObject(dataItem);\n            } else {\n                dataItem = text;\n            }\n\n            return dataItem;\n        },\n\n        _textAccessor: function(text, dataItem) {\n            var valueTemplate = this.valueTemplate;\n            var span = this.span;\n\n            if (text === undefined) {\n                return span.text();\n            }\n\n            span.removeClass(\"k-readonly\");\n\n            if (!dataItem && ($.isPlainObject(text) || text instanceof ObservableObject)) {\n                dataItem = text;\n            }\n\n            if (!dataItem) {\n                dataItem = this._assignInstance(text, this._accessor());\n            }\n\n            var getElements = function() {\n                return {\n                    elements: span.get(),\n                    data: [ { dataItem: dataItem } ]\n                };\n            };\n\n            this.angular(\"cleanup\", getElements);\n\n            try {\n                span.html(valueTemplate(dataItem));\n            } catch (e) {\n                //dataItem has missing fields required in custom template\n                if (span) {\n                    span.html(\"\");\n                }\n            }\n\n            this.angular(\"compile\", getElements);\n        },\n\n        _accessors: function() {\n            var element = this.element;\n            var options = this.options;\n            var getter = kendo.getter;\n            var textField = element.attr(kendo.attr(\"text-field\"));\n            var valueField = element.attr(kendo.attr(\"value-field\"));\n\n            var getterFunction = function(field) {\n                if (Array.isArray(field)) {\n                    var count = field.length;\n                    var levels = $.map(field, function(x) {\n                        return function(d) { return d[x];};\n                    });\n\n                    return function(dataItem) {\n                        var level = dataItem._level;\n\n                        if (!level && level !== 0) {\n                            return;\n                        }\n\n                        return levels[Math.min(level, count - 1)](dataItem);\n                    };\n                } else {\n                    return getter(field);\n                }\n            };\n\n            if (!options.dataTextField && textField) {\n                options.dataTextField = textField;\n            }\n\n            if (!options.dataValueField && valueField) {\n                options.dataValueField = valueField;\n            }\n\n            options.dataTextField = options.dataTextField || \"text\";\n            options.dataValueField = options.dataValueField || \"value\";\n\n            this._text = getterFunction(options.dataTextField);\n            this._value = getterFunction(options.dataValueField);\n        },\n\n        _accessor: function(value, idx) {\n            return this._accessorInput(value, idx);\n        },\n\n        _accessorInput: function(value) {\n            var element = this.element[0];\n\n            if (value === undefined) {\n                return element.value;\n            } else {\n                if (value === null) {\n                    value = \"\";\n                }\n                element.value = value;\n            }\n        },\n\n        _clearInput: function() {\n            var element = this.element[0];\n            element.value = \"\";\n        },\n\n        _clearButton: function() {\n            var clearTitle = this.options.messages.clear;\n\n            if (!this._clear) {\n                this._clear = $('<span unselectable=\"on\" class=\"k-clear-value\" title=\"' + clearTitle + '\"><span class=\"k-icon k-i-x\"></span></span>').attr({\n                    \"role\": \"button\",\n                    \"tabIndex\": -1\n                });\n            }\n\n            if (this.options.clearButton) {\n                this._clear.insertAfter(this.tagList || this.span.parent());\n                this.wrapper.addClass(\"k-dropdowntree-clearable\");\n            } else {\n                if (!this.options.clearButton) {\n                    this._clear.remove();\n                }\n            }\n        },\n\n        _toggleCloseVisibility: function() {\n            var isReadOnly = this.element.attr(READONLY);\n            var hasValue = (this.value() && !this._isMultipleSelection()) || this.value().length;\n            var valueDoesNotEqualPlaceHolder = this.element.val() && this.element.val() !== this.options.placeholder;\n\n            if ((!isReadOnly && (hasValue || valueDoesNotEqualPlaceHolder))) {\n                this._showClear();\n            } else {\n                this._hideClear();\n            }\n        },\n\n        _showClear: function() {\n            if (this._clear) {\n                this._clear.removeClass(HIDDENCLASS);\n            }\n        },\n\n        _hideClear: function() {\n            if (this._clear) {\n                this._clear.addClass(HIDDENCLASS);\n            }\n        },\n\n        _openHandler: function(e) {\n            this._adjustListWidth();\n\n            if (this.trigger(OPEN)) {\n                e.preventDefault();\n            } else {\n                 this.wrapper.attr(\"aria-expanded\", true);\n                 this.tree.attr(\"aria-hidden\", false).attr(\"role\", \"tree\");\n            }\n        },\n\n        _closeHandler: function(e) {\n            if (this.trigger(CLOSE)) {\n                e.preventDefault();\n            } else {\n                 this.wrapper.attr(\"aria-expanded\", false);\n                 this.tree.attr(\"aria-hidden\", true);\n            }\n        },\n\n        _treeview: function() {\n            var that = this;\n            if (that.options.height) {\n                that.tree.css('max-height',that.options.height);\n            }\n            that.tree.attr('id', kendo.guid());\n            that.treeview = new TreeView(that.tree, extend({ size: that.options.size }, that.options.treeview), that);\n            that.dataSource = that.treeview.dataSource;\n\n            that.treeview.bind(\"select\",function(e) {\n                that.trigger(\"select\", e);\n            });\n        },\n\n        _treeViewDataBound: function(e) {\n            if (e.node && this._prev && this._prev.length) {\n                e.sender.expand(e.node);\n            }\n\n            if (this._filtering) {\n                if (!e.node) {\n                    this._filtering = false;\n                }\n\n                if (!this._isMultipleSelection()) {\n                    this._deselectItem(e);\n                }\n                return;\n            }\n\n            if (!this.treeview) {\n                this.treeview = e.sender;\n            }\n\n            if (!e.node) {\n                var rootItems = e.sender.dataSource.data();\n\n                this._checkLoadedItems(rootItems);\n                if (this._noInitialValue) {\n                    this._noInitialValue = false;\n                }\n            } else {\n                var rootItem = e.sender.dataItem(e.node);\n                if (rootItem) {\n                    var subItems = rootItem.children.data();\n                    this._checkLoadedItems(subItems);\n                }\n            }\n            this.trigger(\"dataBound\", e);\n        },\n\n        _deselectItem: function(e) {\n            var items = [];\n            if (!e.node) {\n                items = e.sender.dataSource.data();\n            } else {\n                var rootItem = e.sender.dataItem(e.node);\n                if (rootItem) {\n                    items = rootItem.children.data();\n                }\n            }\n\n            for (var i = 0; i < items.length; i++) {\n                if (items[i].selected &&\n                    !this._valueComparer(items[i], this.value())) {\n                    items[i].set(\"selected\", false);\n                }\n            }\n        },\n\n        _checkLoadedItems: function(items) {\n            var value = this.value();\n\n            if (!items) {\n                return;\n            }\n\n            for (var idx = 0; idx < items.length; idx++) {\n                this._selection._checkLoadedItem(items[idx], value);\n            }\n        },\n\n        _treeViewCheckAllCheck: function(dataItem) {\n            if (this.options.checkAll && this.checkAll) {\n                this._getAllChecked();\n\n                if (dataItem.checked) {\n                    this._checkCheckAll();\n                } else {\n                    this._uncheckCheckAll();\n                }\n            }\n        },\n\n        _checkCheckAll: function() {\n            var checkAllCheckbox = this.checkAll.find('.k-checkbox');\n\n            if (this._allItemsAreChecked) {\n                checkAllCheckbox.prop('checked', true)\n                                .prop('indeterminate', false);\n            } else {\n                checkAllCheckbox.prop('indeterminate', true);\n            }\n        },\n\n        _uncheckCheckAll: function() {\n            var checkAllCheckbox = this.checkAll.find('.k-checkbox');\n\n            if (this._allItemsAreUnchecked) {\n                checkAllCheckbox.prop('checked', false)\n                                .prop('indeterminate', false);\n            } else {\n                checkAllCheckbox.prop('indeterminate', true);\n            }\n        },\n\n        _filterHeader: function() {\n            var filterTemplate = '<div class=\"k-list-filter\">' +\n                '<span class=\"k-searchbox k-input k-input-md k-rounded-md k-input-solid\" type=\"text\" autocomplete=\"off\">' +\n                    '<span class=\"k-input-icon k-icon k-i-search\"></span>' +\n                '</span>' +\n            '</div>';\n\n            if (this.filterInput) {\n                this.filterInput\n                    .off(ns)\n                    .parent()\n                    .remove();\n\n                this.filterInput = null;\n            }\n\n            if (this._isFilterEnabled()) {\n                this._disableCheckChildren();\n\n                this.filterInput = $('<input class=\"k-input-inner\" type=\"text\" />')\n                    .attr({\n                        placeholder: this.element.attr(\"placeholder\"),\n                        title: this.element.attr(\"title\"),\n                        role: \"searchbox\",\n                        \"aria-haspopup\": \"listbox\",\n                        \"aria-autocomplete\": \"list\"\n                    });\n\n                this.filterInput.on(\"input\" , this._filterChange.bind(this));\n\n                $(filterTemplate)\n                    .insertBefore(this.tree)\n                    .find(\".k-searchbox\")\n                    .append(this.filterInput);\n            }\n        },\n\n        _filterChange: function() {\n            if (this.filterInput) {\n                this._search();\n            }\n        },\n\n        _disableCheckChildren: function() {\n            if (this._isMultipleSelection() && this.options.treeview.checkboxes && this.options.treeview.checkboxes.checkChildren) {\n                this.options.treeview.checkboxes.checkChildren = false;\n            }\n        },\n\n        _checkAll: function() {\n            if (this.checkAll) {\n                this.checkAll.find(\".k-checkbox-label, .k-checkbox\")\n                    .off(ns);\n                this.checkAll.remove();\n\n                this.checkAll = null;\n            }\n\n            if (this._isMultipleSelection() && this.options.checkAll) {\n                var checkAllCheckbox = html.renderCheckBox(extend({}, this.options, {\n                    label: \"Check All\",\n                    rounded: \"medium\"\n                }));\n                this.checkAll = $('<div class=\"k-check-all\">' + checkAllCheckbox + '</div>').insertBefore(this.tree);\n                this.checkAll.find(\".k-checkbox-label\").html(kendo.template(this.options.checkAllTemplate)({ instance: this }));\n                this.checkAll.find(\".k-checkbox\")\n                                .on(\"change\" + ns, this._changeCheckAll.bind(this))\n                                .on(\"keydown\" + ns, this._keydownCheckAll.bind(this));\n                this._disabledCheckedItems = [];\n                this._disabledUnCheckedItems = [];\n\n                this._getAllChecked();\n\n                if (!this._allItemsAreUnchecked) {\n                    this._checkCheckAll();\n                }\n            }\n        },\n\n        _changeCheckAll: function() {\n            var checkAllCheckbox = this.checkAll.find('.k-checkbox');\n            var isChecked = checkAllCheckbox.prop('checked');\n\n            this._updateCheckAll(isChecked);\n        },\n\n        _updateCheckAll: function(isChecked) {\n            var checkAllCheckbox = this.checkAll.find('.k-checkbox');\n            this._toggleCheckAllItems(isChecked);\n            checkAllCheckbox.prop('checked', isChecked);\n            if (this._disabledCheckedItems.length && this._disabledUnCheckedItems.length) {\n                checkAllCheckbox.prop('indeterminate', true);\n            } else if (this._disabledCheckedItems.length) {\n                checkAllCheckbox.prop('indeterminate', !isChecked);\n            } else if (this._disabledUnCheckedItems.length) {\n                checkAllCheckbox.prop('indeterminate', isChecked);\n            } else {\n                checkAllCheckbox.prop('indeterminate', false);\n            }\n            this._disabledCheckedItems = [];\n            this._disabledUnCheckedItems = [];\n        },\n\n        _keydownCheckAll: function(e) {\n            var key = e.keyCode;\n            var altKey = e.altKey;\n\n            if ((altKey && key === keys.UP) || key === keys.ESC || key === keys.TAB) {\n                this.close();\n                this.wrapper.trigger(\"focus\");\n                e.preventDefault();\n                return;\n            }\n\n            if (key === keys.UP) {\n                if (this.filterInput) {\n                    this.filterInput.trigger(\"focus\");\n                } else {\n                    this.wrapper.trigger(\"focus\");\n                }\n\n                e.preventDefault();\n            }\n\n            if (key === keys.DOWN) {\n                if (this.tree && this.tree.is(\":visible\")) {\n                    this.tree.focus();\n                }\n\n                e.preventDefault();\n            }\n\n            if (key === keys.SPACEBAR && (browser.msie || browser.edge)) {\n                this._clickCheckAll();\n                e.preventDefault();\n            }\n        },\n\n        _clickCheckAll: function() {\n            var checkAllCheckbox = this.checkAll.find('.k-checkbox');\n            var isChecked = checkAllCheckbox.prop('checked');\n\n            this._updateCheckAll(!isChecked);\n\n            checkAllCheckbox.trigger(\"focus\");\n\n        },\n        //treeview\n        _dfs: function(items, action, prop) {\n            for (var idx = 0; idx < items.length; idx++) {\n                if (!this[action](items[idx], prop)) {\n                    break;\n                }\n                this._traverceChildren(items[idx], action, prop);\n            }\n        },\n\n        _uncheckItemByUid: function(uid) {\n            this._dfs(this.dataSource.data(), '_uncheckItemEqualsUid', uid);\n        },\n\n        _uncheckItemEqualsUid: function(item, uid) {\n            if (item.enabled !== false && item._tagUid == uid) {\n                item.set(\"checked\", false);\n                return false;\n            }\n            return true;\n        },\n\n        _selectItemByText: function(text) {\n            this._dfs(this.dataSource.data(), '_itemEqualsText', text);\n        },\n\n        _itemEqualsText: function(item, text) {\n            if (item.enabled !== false && this._text(item) === text) {\n                this.treeview.select(this.treeview.findByUid(item.uid));\n                this._selectValue(item);\n                return false;\n            }\n            return true;\n        },\n\n        _selectItemByValue: function(value) {\n            this._dfs(this.dataSource.data(), '_itemEqualsValue', value);\n        },\n\n        _itemEqualsValue: function(item, value) {\n            if (item.enabled !== false && this._valueComparer(item, value)) {\n\n                this.treeview.select(this.treeview.findByUid(item.uid));\n\n                return false;\n            }\n            return true;\n        },\n\n        _checkItemByValue: function(value) {\n            var items = this.treeview.dataItems();\n            for (var idx = 0; idx < value.length; idx++) {\n                this._dfs(items, '_checkItemEqualsValue', value[idx]);\n            }\n        },\n\n        _checkItemEqualsValue: function(item, value) {\n            if (item.enabled !== false && this._valueComparer(item, value)) {\n                    item.set(\"checked\", true);\n                return false;\n            }\n            return true;\n        },\n\n        _valueComparer: function(item, value) {\n            var itemValue = this._value(item);\n            var itemText;\n\n            if (!this._isNullorUndefined(itemValue)) {\n                if (this._isNullorUndefined(value)) {\n                    return false;\n                }\n\n                var newValue = this._value(value);\n\n                if (newValue) {\n                    return itemValue == newValue;\n                } else {\n                    return itemValue == value;\n                }\n            }\n\n            itemText = this._text(item);\n            if (itemText) {\n                if (this._text(value)) {\n                    return itemText == this._text(value);\n                } else {\n                    return itemText == value;\n                }\n            }\n\n            return false;\n        },\n\n        _isNullorUndefined: function(value) {\n            return value === undefined || value === null;\n        },\n\n        _getAllChecked: function() {\n            this._allCheckedItems = [];\n            this._allItemsAreChecked = true;\n            this._allItemsAreUnchecked = true;\n\n            this._dfs(this.dataSource.data(), '_getAllCheckedItems');\n\n            return this._allCheckedItems;\n        },\n\n        _getAllCheckedItems: function(item) {\n            if (this._allItemsAreChecked) {\n                this._allItemsAreChecked = item.checked;\n            }\n\n            if (this._allItemsAreUnchecked) {\n                this._allItemsAreUnchecked = !item.checked;\n            }\n\n            if (item.checked) {\n                this._allCheckedItems.push(item);\n            }\n            return true;\n        },\n\n        _traverceChildren: function(item, action, prop) {\n            var childrenField = (item._childrenOptions && item._childrenOptions.schema) ? item._childrenOptions.schema.data : null;\n            var subItems = item[childrenField] || item.items || item.children;\n\n            if (!subItems) {\n                return;\n            }\n\n            this._dfs(subItems, action, prop);\n        },\n\n        _toggleCheckAllItems: function(checked) {\n            this._dfs(this.dataSource.data(), '_checkAllCheckItem', checked);\n        },\n\n        _checkAllCheckItem: function(item, checked) {\n            if (item.enabled === false) {\n                if (item.checked) {\n                    this._disabledCheckedItems.push(item);\n                } else {\n                    this._disabledUnCheckedItems.push(item);\n                }\n            } else {\n                item.set(\"checked\", checked);\n            }\n            return true;\n        },\n\n        _isFilterEnabled: function() {\n            var filter = this.options.filter;\n            return filter && filter !== \"none\";\n        },\n\n        _editable: function(options) {\n            var that = this;\n            var element = that.element;\n            var disable = options.disable;\n            var readonly = options.readonly;\n            var wrapper = that.wrapper.add(that.filterInput).off(ns);\n            var dropDownWrapper = that.wrapper.off(HOVEREVENTS);\n            if (that._isMultipleSelection()) {\n                that.tagList.off(CLICK + ns);\n            }\n            if (!readonly && !disable) {\n                element.prop(DISABLED, false).prop(READONLY, false);\n\n                dropDownWrapper\n                    .removeClass(STATEDISABLED)\n                    .on(HOVEREVENTS, that._toggleHover);\n\n                that._clear.on(\"click\" + ns, that._clearClick.bind(that));\n                wrapper\n                    .attr(TABINDEX, wrapper.data(TABINDEX))\n                    .attr(ARIA_DISABLED, false)\n                    .on(\"keydown\" + ns, that._keydown.bind(that))\n                    .on(\"focusin\" + ns, that._focusinHandler.bind(that))\n                    .on(\"focusout\" + ns, that._focusoutHandler.bind(that));\n\n                that.wrapper.on(CLICK + ns, that._wrapperClick.bind(that));\n\n                if (this._isMultipleSelection()) {\n                    that.tagList.on(CLICK + ns, \"span.k-chip\", function(e) {\n                        $(e.currentTarget).addClass(FOCUSED);\n                    });\n\n                    that.tagList.on(CLICK + ns, \".k-i-x-circle\", function(e) {\n                        that._removeTagClick(e);\n                    });\n                }\n            } else if (disable) {\n                wrapper.removeAttr(TABINDEX);\n                dropDownWrapper\n                    .addClass(STATEDISABLED);\n            } else {\n                wrapper\n                    .attr(TABINDEX, wrapper.data(TABINDEX));\n\n                dropDownWrapper\n                    .removeClass(STATEDISABLED);\n\n                wrapper\n                    .on(\"focusin\" + ns, that._focusinHandler.bind(that))\n                    .on(\"focusout\" + ns, that._focusoutHandler.bind(that));\n            }\n\n            element.attr(DISABLED, disable)\n                   .attr(READONLY, readonly);\n\n            wrapper.attr(ARIA_DISABLED, disable);\n        },\n\n        _focusinHandler: function() {\n            this.wrapper.addClass(FOCUSED);\n            this._prevent = false;\n        },\n\n        _focusoutHandler: function() {\n            var that = this;\n\n            if (this._isMultipleSelection()) {\n                this.tagList.find(DOT + FOCUSED).removeClass(FOCUSED);\n            }\n            if (!that._prevent) {\n                this.wrapper.removeClass(FOCUSED);\n                that._prevent = true;\n                that.element.trigger(\"blur\");\n            }\n        },\n\n        _toggle: function(open) {\n            open = open !== undefined ? open : !this.popup.visible();\n\n            this[open ? OPEN : CLOSE]();\n        },\n\n        _wrapperClick: function(e) {\n            e.preventDefault();\n            this.popup.unbind(\"activate\", this._focusInputHandler);\n            this._focused = this.wrapper;\n            this._prevent = false;\n            this._toggle();\n        },\n\n        _toggleHover: function(e) {\n            $(e.currentTarget).toggleClass(HOVER, e.type === \"mouseenter\");\n        },\n\n        _focusInput: function() {\n            if (this.filterInput) {\n                this.filterInput.trigger(\"focus\");\n            } else if (this.checkAll) {\n                this.checkAll.find(\".k-checkbox\").trigger(\"focus\");\n            } else if (this.tree.is(\":visible\")) {\n                this.tree[0].focus({ preventScroll: true });\n                this._ie11PreventScrollOnFocus();\n            }\n        },\n\n        _ie11PreventScrollOnFocus: function() {\n            if (browser.msie && browser.version == 11) {\n                var popup = this.popup;\n                popup._toggleResize(false);\n                setTimeout(function() {\n                    popup._toggleResize(true);\n                },50);\n            }\n        },\n\n        _keydown: function(e) {\n            var key = e.keyCode;\n            var altKey = e.altKey;\n            var isFilterInputActive;\n            var isWrapperActive;\n            var focused, tagItem;\n\n            var isPopupVisible = this.popup.visible();\n\n            if (this.filterInput) {\n                isFilterInputActive = this.filterInput[0] === activeElement();\n            }\n\n            if (this.wrapper) {\n                isWrapperActive = this.wrapper[0] === activeElement();\n            }\n\n            if (isWrapperActive) {\n                if (key === keys.ESC) {\n                    this._clearTextAndValue();\n                    e.preventDefault();\n                    return;\n                }\n\n                if (this._isMultipleSelection()) {\n                    if (key === keys.LEFT) {\n                        this._focusPrevTag();\n                        e.preventDefault();\n                        return;\n                    }\n\n                    if (key === keys.RIGHT) {\n                        this._focusNextTag();\n                          e.preventDefault();\n                        return;\n                    }\n\n                    if (key === keys.HOME) {\n                        this._focusFirstTag();\n                        e.preventDefault();\n                        return;\n                    }\n\n                    if (key === keys.END) {\n                        this._focusLastTag();\n                        e.preventDefault();\n                        return;\n                    }\n\n                    if (key === keys.DELETE) {\n                        focused = this.tagList.find(DOT + FOCUSED).first();\n                        if (focused.length) {\n                            tagItem = this._tags[focused.index()];\n                            this._removeTag(tagItem);\n                        }\n                        e.preventDefault();\n                        return;\n                    }\n\n                    if (key === keys.BACKSPACE) {\n                        focused = this.tagList.find(DOT + FOCUSED).first();\n                        if (focused.length) {\n                            tagItem = this._tags[focused.index()];\n                            this._removeTag(tagItem);\n                        } else {\n                            focused = this._focusLastTag();\n                            if (focused.length) {\n                                tagItem = this._tags[focused.index()];\n                                this._removeTag(tagItem);\n                            }\n                        }\n                        e.preventDefault();\n                        return;\n                    }\n                }\n            }\n\n\n            if (isFilterInputActive) {\n                if (key === keys.ESC) {\n                    this._clearFilter();\n                }\n\n                if ((key === keys.UP) && !altKey) {\n                    this.wrapper.trigger(\"focus\");\n                    e.preventDefault();\n                }\n\n                if (browser.msie && browser.version < 10) {\n                    if (key === keys.BACKSPACE || key === keys.DELETE) {\n                        this._search();\n                    }\n                }\n\n                if (key === keys.TAB) {\n                    this.close();\n                    this.wrapper.trigger(\"focus\");\n                    e.preventDefault();\n                    return;\n                }\n            }\n\n            if ((altKey && key === keys.UP) || key === keys.ESC) {\n                this.close();\n                this.wrapper.trigger(\"focus\");\n                e.preventDefault();\n                return;\n            }\n\n            if (key === keys.ENTER && this._typingTimeout && this.filterInput && isPopupVisible) {\n                e.preventDefault();\n                return;\n            }\n\n            if (key === keys.SPACEBAR && !isFilterInputActive) {\n                this._toggle(!isPopupVisible);\n                e.preventDefault();\n            }\n\n            if ((altKey && key === keys.DOWN) && !isPopupVisible) {\n                this.open();\n                e.preventDefault();\n            }\n\n            if ((key === keys.DOWN) && isPopupVisible) {\n                if (this.filterInput && !isFilterInputActive) {\n                    this.filterInput.trigger(\"focus\");\n                } else if (this.checkAll && this.checkAll.is(\":visible\")) {\n                    this.checkAll.find('input').trigger(\"focus\");\n                } else if (this.tree.is(\":visible\")) {\n                    this.tree[0].focus({ preventScroll: true });\n                    this._ie11PreventScrollOnFocus();\n                }\n                e.preventDefault();\n            }\n\n            if (key === keys.TAB && isPopupVisible) {\n                this.close();\n                this.wrapper.trigger(\"focus\");\n                e.preventDefault();\n            }\n        },\n\n        _focusPrevTag: function() {\n            var focused = this.tagList.find(DOT + FOCUSED);\n            if (focused.length) {\n                var activedescendant = this._activeId;\n\n                focused.first()\n                    .removeClass(FOCUSED)\n                    .removeAttr(\"id\")\n                    .prev(CHIP)\n                    .addClass(FOCUSED)\n                    .attr(\"id\", activedescendant);\n\n                this.wrapper.attr(\"aria-activedescendant\", activedescendant);\n            } else {\n                this._focusLastTag();\n            }\n        },\n\n        _focusNextTag: function() {\n            var focused = this.tagList.find(DOT + FOCUSED);\n\n            if (focused.length) {\n                var activedescendant = this._activeId;\n\n                focused.first()\n                    .removeClass(FOCUSED)\n                    .removeAttr(\"id\")\n                    .next(CHIP)\n                    .addClass(FOCUSED)\n                    .attr(\"id\", activedescendant);\n\n                this.wrapper.attr(\"aria-activedescendant\", activedescendant);\n            } else {\n                this._focusFirstTag();\n            }\n        },\n\n        _focusFirstTag: function() {\n            var activedescendant = this._activeId;\n\n            this._clearDisabledTag();\n\n            var firstTag = this.tagList.children(CHIP).first()\n                .addClass(FOCUSED)\n                .attr(\"id\", activedescendant);\n\n            this.wrapper.attr(\"aria-activedescendant\", activedescendant);\n\n            return firstTag;\n        },\n\n        _focusLastTag: function() {\n            var activedescendant = this._activeId;\n\n            this._clearDisabledTag();\n\n            var lastTag = this.tagList.children(CHIP).last()\n                .addClass(FOCUSED)\n                .attr(\"id\", activedescendant);\n\n            this.wrapper.attr(\"aria-activedescendant\", activedescendant);\n\n            return lastTag;\n        },\n\n        _clearDisabledTag: function() {\n            this.tagList.find(DOT + FOCUSED).removeClass(FOCUSED).removeAttr(\"id\");\n        },\n\n        _search: function() {\n            var that = this;\n            clearTimeout(that._typingTimeout);\n\n            that._typingTimeout = setTimeout(function() {\n                var value = that.filterInput.val();\n\n                if (that._prev !== value) {\n                    that._prev = value;\n                    that.search(value);\n                }\n\n                that._typingTimeout = null;\n            }, that.options.delay);\n        },\n\n        _clearFilter: function() {\n            if (this.filterInput.val().length) {\n                this.filterInput.val(\"\");\n                this._prev = \"\";\n                this._filtering = true;\n                this.treeview.dataSource.filter({});\n            }\n        },\n\n        _removeTagClick: function(e) {\n            e.stopPropagation();\n            var tagItem = this._tags[$(e.currentTarget.closest(CHIP)).index()];\n            this._removeTag(tagItem);\n        },\n\n        _removeTag: function(tagItem) {\n           if (!tagItem) {\n                return;\n           }\n\n           var uid = tagItem.uid;\n           this._uncheckItemByUid(uid);\n        }\n    });\n\n    function assign(instance, fields, value) {\n        var idx = 0,\n            lastIndex = fields.length - 1,\n            field;\n\n        for (; idx < lastIndex; ++idx) {\n            field = fields[idx];\n\n            if (!(field in instance)) {\n                instance[field] = {};\n            }\n\n            instance = instance[field];\n        }\n\n        instance[fields[lastIndex]] = value;\n    }\n\n    ui.plugin(DropDownTree);\n\n    kendo.cssProperties.registerPrefix(\"DropDownTree\", \"k-picker-\");\n\n    kendo.cssProperties.registerValues(\"DropDownTree\", [{\n        prop: \"rounded\",\n        values: kendo.cssProperties.roundedValues.concat([['full', 'full']])\n    }]);\n\n    kendo.cssProperties.registerPrefix(\"MultiSelectDropDownTree\", \"k-input-\");\n\n    kendo.cssProperties.registerValues(\"MultiSelectDropDownTree\", [{\n        prop: \"rounded\",\n        values: kendo.cssProperties.roundedValues.concat([['full', 'full']])\n    }]);\n\n    var SingleSelection = kendo.Class.extend({\n        init: function(view) {\n            this._dropdowntree = view;\n        },\n\n        _initWrapper: function() {\n            this._wrapper();\n            this._span();\n        },\n\n        _preselect: function(data) {\n            var dropdowntree = this._dropdowntree;\n\n            dropdowntree._selectValue(data);\n        },\n\n        _wrapper: function() {\n            var dropdowntree = this._dropdowntree,\n                element = dropdowntree.element,\n                DOMelement = element[0],\n                wrapper;\n\n            wrapper = element.parent();\n\n            if (!wrapper.is(\"span.k-dropdowntree\")) {\n                wrapper = element.wrap(\"<span />\").parent();\n                wrapper[0].style.cssText = DOMelement.style.cssText;\n                wrapper[0].title = DOMelement.title;\n            }\n\n            dropdowntree._focused = dropdowntree.wrapper = wrapper\n                .addClass(\"k-dropdowntree k-picker\")\n                .addClass(DOMelement.className)\n                .removeClass('input-validation-error')\n                .removeClass('k-invalid')\n                .css(\"display\", \"\")\n                .attr({\n                    accesskey: element.attr(\"accesskey\"),\n                    unselectable: \"on\"\n                });\n\n            element.hide().removeAttr(\"accesskey\");\n        },\n\n        _span: function() {\n            var dropdowntree = this._dropdowntree,\n                wrapper = dropdowntree.wrapper,\n                SELECTOR = \"span.k-input-value-text\",\n                span;\n\n            span = wrapper.find(SELECTOR);\n\n            if (!span[0]) {\n                wrapper.append('<span unselectable=\"on\" class=\"k-input-inner\"><span class=\"k-input-value-text\"></span></span>' +\n                                html.renderButton('<button unselectable=\"on\" class=\"k-input-button\" aria-label=\"select\" tabindex=\"-1\"></button>', extend({}, dropdowntree.options, {\n                                    icon: \"arrow-s\",\n                                    shape: \"none\",\n                                    rounded: \"none\"\n                                })))\n                       .append(dropdowntree.element);\n\n                span = wrapper.find(SELECTOR);\n            }\n\n            dropdowntree.span = span;\n            dropdowntree._arrow = wrapper.find(\".k-input-button\");\n            dropdowntree._arrowIcon = dropdowntree._arrow.find(\".k-icon\");\n        },\n\n        _setValue: function(value) {\n            var dropdowntree = this._dropdowntree;\n            var currentValue;\n\n            if (value === undefined || value === null) {\n                currentValue = dropdowntree._values.slice()[0];\n                value = (typeof currentValue === \"object\") ? currentValue : dropdowntree._accessor() || currentValue;\n                return value === undefined || value === null ? \"\" : value;\n            }\n            dropdowntree._valueMethodCalled = true;\n            if (value.length === 0) {\n                dropdowntree._clearTextAndValue();\n                dropdowntree._valueMethodCalled = false;\n                return;\n            }\n\n            dropdowntree._selectItemByValue(value);\n            dropdowntree._toggleCloseVisibility();\n        },\n\n        _clearValue: function() {\n            var dropdowntree = this._dropdowntree;\n            var selectedNode = dropdowntree.treeview.select();\n\n            if (dropdowntree.treeview.dataItem(selectedNode)) {\n                dropdowntree.treeview.dataItem(selectedNode).set('selected', false);\n                if (!dropdowntree._valueMethodCalled) {\n                    dropdowntree.trigger(CHANGE);\n                }\n            }\n        },\n\n        _checkLoadedItem: function(tempItem, value) {\n            var dropdowntree = this._dropdowntree;\n\n            if (!dropdowntree._isNullorUndefined(value) && value !== \"\") {\n                if (dropdowntree._valueComparer(tempItem, value)) {\n                    dropdowntree._preventChangeTrigger = true;\n                    tempItem.set(\"selected\", true);\n                    dropdowntree._preventChangeTrigger = false;\n                } else if (tempItem.selected) {\n                    dropdowntree.treeview.select(dropdowntree.treeview.findByUid(tempItem.uid));\n                }\n\n            } else if (!value && tempItem.selected) {\n                dropdowntree.treeview.select(dropdowntree.treeview.findByUid(tempItem.uid));\n            }\n        }\n    });\n\n    var MultipleSelection = kendo.Class.extend({\n        init: function(view) {\n            this._dropdowntree = view;\n        },\n\n        _initWrapper: function() {\n            var dropdowntree = this._dropdowntree;\n\n            this._tagTemplate();\n            dropdowntree.element.attr(\"multiple\", \"multiple\").hide();\n            this._wrapper();\n            dropdowntree._tags = new ObservableArray([]);\n            dropdowntree._multipleTags = new ObservableArray([]);\n            this._tagList();\n            dropdowntree.span = $('<span unselectable=\"on\" class=\"k-input-inner\"><span class=\"k-input-value-text\"></span></span>').appendTo(dropdowntree.tagList).find(\".k-input-value-text\");\n\n        },\n\n        _preselect: function(data, value) {\n            var dropdowntree = this._dropdowntree;\n            var valueToSelect = value || dropdowntree.options.value;\n\n            if (!Array.isArray(data) && !(data instanceof kendo.data.ObservableArray)) {\n                data = [data];\n            }\n\n            if ($.isPlainObject(data[0]) || data[0] instanceof kendo.data.ObservableObject || !dropdowntree.options.dataValueField) {\n                dropdowntree.dataSource.data(data);\n\n                dropdowntree.value(valueToSelect);\n            }\n        },\n\n        _tagTemplate: function() {\n            var dropdowntree = this._dropdowntree;\n            var options = dropdowntree.options;\n            var tagTemplate = options.valueTemplate;\n            var isMultiple = options.tagMode === \"multiple\";\n            var singleTag = options.messages.singleTag;\n\n            tagTemplate = tagTemplate ? kendo.template(tagTemplate) : dropdowntree.valueTemplate;\n\n            dropdowntree.valueTemplate = function(data) {\n                return html.renderChip('<span unselectable=\"on\" role=\"option\"' +\n                    'class=\"' + ((data.enabled === false) ? \"k-disabled\" : \"\") + '\"' +\n                    ((data.enabled === false) ? 'aria-disabled=\"true\"' : '') +\n                    '>' +\n                    '</span>', $.extend({}, options, {\n                            fillMode: \"solid\",\n                            themeColor: \"base\",\n                            rounded: \"medium\",\n                            attr: {\n                                unselectable: \"on\"\n                            },\n                            text: (isMultiple ? tagTemplate(data) : ('<span unselectable=\"on\" data-bind=\"text: tags.length\"></span>' +\n                            '<span unselectable=\"on\">&nbsp;' + singleTag + '</span>' )),\n                            removable: isMultiple,\n                            removeIcon: \"x-circle\",\n                            removableAttr: {\n                                unselectable: \"on\",\n                                \"aria-hidden\": true,\n                                \"aria-label\": dropdowntree.options.messages.deleteTag,\n                                title: dropdowntree.options.messages.deleteTag\n                            }\n                        }));\n            };\n        },\n\n        _wrapper: function() {\n            var dropdowntree = this._dropdowntree,\n                element = dropdowntree.element,\n                wrapper = element.parent(\"span.k-dropdowntree\");\n\n            if (!wrapper[0]) {\n                wrapper = element.wrap('<span class=\"k-dropdowntree k-input\" unselectable=\"on\" />').parent();\n                wrapper[0].style.cssText = element[0].style.cssText;\n                wrapper[0].title = element[0].title;\n            }\n\n            dropdowntree.wrapper = wrapper.addClass(element[0].className).css(\"display\", \"\");\n        },\n\n        _tagList: function() {\n            var dropdowntree = this._dropdowntree,\n                tagList = dropdowntree.wrapper.children(\"div.k-input-values\");\n\n            if (!tagList[0]) {\n                var isMultiple = dropdowntree.options.tagMode === \"multiple\";\n                var tagCollection = isMultiple ? \"tags\" : \"multipleTag\";\n\n                tagList = $(html.renderChipList('<div unselectable=\"on\" class=\"k-input-values\" data-template=\"tagTemplate\" data-bind=\"source: ' + tagCollection + '\" />', $.extend({}, dropdowntree.options))).appendTo(dropdowntree.wrapper);\n            }\n\n            dropdowntree.tagList = tagList;\n            dropdowntree.tagList.attr('id', kendo.guid() + \"_tagList\");\n            dropdowntree.wrapper.attr(\"aria-controls\", dropdowntree.tagList.attr('id'));\n            var viewModel = kendo.observable({\n                multipleTag: dropdowntree._multipleTags,\n                tags: dropdowntree._tags,\n                tagTemplate: dropdowntree.valueTemplate\n            });\n            kendo.bind(dropdowntree.tagList, viewModel);\n            dropdowntree.tagList.attr(\"data-stop\", true);\n        },\n\n        _setValue: function(value) {\n            var dropdowntree = this._dropdowntree;\n            var oldValues = dropdowntree._values;\n            if (value === undefined || value === null) {\n                return dropdowntree._values.slice();\n            }\n\n            dropdowntree.setValue(value);\n            dropdowntree._valueMethodCalled = true;\n            if (value.length) {\n                this._removeValues(oldValues, value);\n\n                dropdowntree._checkItemByValue(value);\n            } else {\n                dropdowntree._clearTextAndValue();\n            }\n\n            dropdowntree._valueMethodCalled = false;\n            dropdowntree._toggleCloseVisibility();\n        },\n\n        _removeValues: function(oldValues, value) {\n            var dropdowntree = this._dropdowntree;\n            var removedValues = this._getNewValues(oldValues, value);\n\n            for (var idx = 0; idx < removedValues.length; idx++) {\n                for (var j = 0; j < dropdowntree._tags.length; j++) {\n                    if (dropdowntree._valueComparer(dropdowntree._tags[j],removedValues[idx])) {\n                        dropdowntree._uncheckItemByUid(dropdowntree._tags[j].uid);\n                    }\n                }\n            }\n        },\n\n        _getNewValues: function(oldValues, value) {\n            var removedValues = [];\n\n            for (var idx = 0; idx < oldValues.length; idx++) {\n                if (value.indexOf(oldValues[idx]) === -1) {\n                    removedValues.push(oldValues[idx]);\n                }\n            }\n\n            return removedValues;\n        },\n\n        _clearValue: function() {\n            var dropdowntree = this._dropdowntree;\n            var tagsArray = dropdowntree._tags.slice();\n\n            for (var idx = 0; idx < tagsArray.length; idx++) {\n                var uid = tagsArray[idx].uid;\n                dropdowntree._preventChangeTrigger = true;\n                dropdowntree._uncheckItemByUid(uid);\n            }\n\n            if (tagsArray.length) {\n                dropdowntree._preventChangeTrigger = false;\n                if (!dropdowntree._valueMethodCalled) {\n                    dropdowntree.trigger(CHANGE);\n                }\n            }\n        },\n\n        _checkLoadedItem: function(tempItem, value) {\n            var dropdowntree = this._dropdowntree;\n\n            if (dropdowntree._noInitialValue && tempItem.checked) {\n                dropdowntree._checkValue(tempItem);\n                return;\n            }\n\n            if ((value.length || this._isDataSourceSet) &&\n                (value.indexOf(dropdowntree._currentValue(tempItem)) !== -1 || value.indexOf(tempItem)) !== -1 &&\n                !this._findTag(dropdowntree._currentValue(tempItem))) {\n                if (tempItem.checked) {\n                    dropdowntree._checkValue(tempItem);\n                } else {\n                    dropdowntree._preventChangeTrigger = true;\n                    tempItem.set(\"checked\", true);\n                    dropdowntree._preventChangeTrigger = false;\n                }\n            }\n        },\n\n        _findTag: function(tempItemValue) {\n            var dropdowntree = this._dropdowntree;\n\n            return dropdowntree._tags.find(function(item) {\n                return dropdowntree._valueComparer(item, tempItemValue);\n            });\n        }\n    });\n\n    kendo.ui.DropDownTree.SingleSelection = SingleSelection;\n    kendo.ui.DropDownTree.MultipleSelection = MultipleSelection;\n\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) { (a3 || a2)(); });\n\n"],"names":["define","$","window","kendo","jQuery","undefined","ui","keys","DISABLED","SELECT","CHECKED","DATABOUND","CLICK","NS","INDETERMINATE","NAVIGATE","subGroup","TreeView","contentChild","filter","node","result","children","length","Tree","extend","init","element","options","dropdowntree","that","this","fn","call","_isMultipleSelection","wrapper","on","_clickSelectedItem","bind","_checkOnSelect","e","isDefaultPrevented","dataItem","set","checked","_setCheckedValue","value","_click","one","currentTarget","_trigger","defaultrefresh","action","items","parentNode","loadOnDemand","checkChildren","checkboxes","i","_skip","field","level","_updateNodes","findByUid","uid","_progress","bubble","_appendItems","index","_remove","_refreshChildren","_refreshRoot","expanded","load","attr","find","trigger","_treeViewDataBound","sender","updateIndeterminate","_previousVisible","lastChild","prev","root","last","_expanded","parent","checkAll","is","filterInput","_keydown","key","keyCode","target","focused","current","checkbox","first","rtl","support","isRtl","RIGHT","LEFT","_nextVisible","hasClass","expand","collapse","_enabled","DOWN","UP","altKey","HOME","END","ENTER","select","SPACEBAR","prop","data","_checkboxChange","ESC","_closePopup","TAB","preventDefault","close","refresh","skipUpdateOnBind","_checkValue","selected","_selectValue","_dropdowntree","amd","a1","a2","a3","__meta__","id","name","category","description","depends","html","Widget","ObservableArray","ObservableObject","activeElement","_activeElement","ns","HIDDENCLASS","WIDTH","browser","outerWidth","_outerWidth","DOT","READONLY","STATEDISABLED","ARIA_DISABLED","HOVER","FOCUSED","HOVEREVENTS","TABINDEX","OPEN","CLOSE","CHANGE","quotRegExp","CHIP","DropDownTree","_selection","_getSelection","_focusInputHandler","_focusInput","_initial","val","_values","_noInitialValue","_isNullorUndefined","_valueMethodCalled","Array","isArray","slice","_inputTemplate","_accessors","_setTreeViewOptions","_dataSource","_initWrapper","_applyCssClasses","_placeholder","_tabindex","tree","tabIndex","aria-hidden","list","append","_header","_noData","_footer","_reset","_popup","popup","_popupOpen","_clearButton","_filterHeader","_treeview","_renderFooter","_checkAll","_enable","_toggleCloseVisibility","_aria","autoBind","text","_preselect","_textAccessor","placeholder","disabled","parents","enable","notify","treeviewOptions","dataImageUrlField","dataSpriteCssClassField","dataTextField","dataUrlField","size","treeview","template","rootDataSource","dataSource","HierarchicalDataSource","create","wrap","_altname","MultipleSelection","SingleSelection","setDataSource","_isDataSourceSet","_tags","setValue","empty","span","show","_multipleTags","animation","autoClose","autoWidth","clearButton","dataValueField","delay","enabled","enforceMinLength","height","ignoreCase","messages","singleTag","clear","deleteTag","noData","minLength","noDataTemplate","checkAllTemplate","tagMode","valuePrimitive","footerTemplate","headerTemplate","valueTemplate","filterLabel","fillMode","rounded","events","focus","readonly","_editable","disable","toggle","open","_toggle","_isFilterEnabled","_search","fetch","visible","_allowOpening","addClass","_hovered","search","word","clearTimeout","_typingTimeout","_getFilter","_filtering","operator","flatView","_renderNoData","setOptions","console","warn","css","destroy","off","_clear","tagList","unbind","_form","_resetHandler","_filter","_setValue","loweredText","toLowerCase","_selectItemByText","input","aria-haspopup","aria-expanded","aria-controls","role","_activeId","guid","_ariaLabel","aria-multiselectable","aria-describedby","header","_angularElement","remove","prepend","angular","elements","appendTo","instance","footer","_adjustListWidth","width","style","computedStyle","computedWidth","getComputedStyle","parseFloat","msie","paddingLeft","paddingRight","borderLeftWidth","borderRightWidth","fontFamily","minWidth","whiteSpace","formId","form","closest","setTimeout","Popup","anchor","_openHandler","_closeHandler","autosize","toggleClass","trim","aria-selected","removeAttr","_currentValue","currentValue","_value","indexOfValue","isMultiple","_level","indexOf","alreadyAddedTag","grep","item","_tagUid","itemToAdd","toJSON","push","hide","itemToRemove","idx","splice","_treeViewCheckAllCheck","_preventChangeTrigger","position","_updateSelectedOptions","tagName","selectedItems","_option","_text","dataValue","dataText","option","replace","htmlEncode","_accessor","_clearClick","stopPropagation","_clearTextAndValue","_clearInput","_clearText","_clearValue","useWithBlock","_assignInstance","assign","split","removeClass","isPlainObject","getElements","get","getter","textField","valueField","getterFunction","count","levels","map","x","d","Math","min","_accessorInput","clearTitle","insertAfter","isReadOnly","hasValue","valueDoesNotEqualPlaceHolder","_showClear","_hideClear","_prev","_deselectItem","rootItems","_checkLoadedItems","rootItem","subItems","_valueComparer","_checkLoadedItem","_getAllChecked","_checkCheckAll","_uncheckCheckAll","checkAllCheckbox","_allItemsAreChecked","_allItemsAreUnchecked","filterTemplate","_disableCheckChildren","title","aria-autocomplete","_filterChange","insertBefore","renderCheckBox","label","_changeCheckAll","_keydownCheckAll","_disabledCheckedItems","_disabledUnCheckedItems","isChecked","_updateCheckAll","_toggleCheckAllItems","edge","_clickCheckAll","_dfs","_traverceChildren","_uncheckItemByUid","_uncheckItemEqualsUid","_itemEqualsText","_selectItemByValue","_itemEqualsValue","_checkItemByValue","dataItems","_checkItemEqualsValue","itemValue","itemText","newValue","_allCheckedItems","_getAllCheckedItems","childrenField","_childrenOptions","schema","_checkAllCheckItem","add","dropDownWrapper","_toggleHover","_focusinHandler","_focusoutHandler","_wrapperClick","_removeTagClick","_prevent","_focused","type","preventScroll","_ie11PreventScrollOnFocus","version","_toggleResize","isFilterInputActive","isWrapperActive","tagItem","isPopupVisible","_focusPrevTag","_focusNextTag","_focusFirstTag","_focusLastTag","DELETE","_removeTag","BACKSPACE","_clearFilter","activedescendant","next","_clearDisabledTag","firstTag","lastTag","fields","lastIndex","plugin","cssProperties","registerPrefix","registerValues","values","roundedValues","concat","Class","view","_wrapper","_span","DOMelement","cssText","className","accesskey","unselectable","SELECTOR","renderButton","icon","shape","_arrow","_arrowIcon","selectedNode","tempItem","_tagTemplate","_tagList","valueToSelect","tagTemplate","renderChip","themeColor","removable","removeIcon","removableAttr","aria-label","tagCollection","renderChipList","viewModel","observable","multipleTag","tags","oldValues","_removeValues","removedValues","_getNewValues","j","tagsArray","_findTag","tempItemValue"],"mappings":"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"}