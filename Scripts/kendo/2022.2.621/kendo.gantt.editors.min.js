/**
 * Kendo UI v2022.2.621 (http://www.telerik.com/kendo-ui)
 * Copyright 2022 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.
 *
 * Kendo UI commercial licenses may be obtained at
 * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete
 * If you do not own a commercial license, this file shall be governed by the trial license terms.
 */
!function(define){define("kendo.gantt.editors.min",["kendo.data.min","kendo.popup.min","kendo.window.min","kendo.gantt.data.min","kendo.grid.min","kendo.datetimepicker.min","kendo.numerictextbox.min"],function(){var t={id:"gantt.editors",name:"GanttEditors",category:"web",description:"The Gantt component editors.",depends:["data","popup","window","gantt.data","grid","datetimepicker","numerictextbox"],hidden:true},u=window.kendo.jQuery,e=void 0,f=window.kendo,n,r=f.support.browser,a=f.Observable,i=f.ui.Widget,s=f._outerWidth,o=u.extend({F10:121},f.keys),h=u.extend,d=u.isPlainObject,c=".kendoGantt",l="p0",v="click",p="width",b="string",m=".",k={down:{origin:"bottom left",position:"top left"},up:{origin:"top left",position:"bottom left"}},y=f.template('<div class="#=styles.popupWrapper#">'+'<ul class="#=styles.popupList#" role="listbox" aria-label="Add dropdown">'+"#for(var i = 0, l = actions.length; i < l; i++){#"+'<li tabindex="0" class="#=styles.item#" data-action="#=actions[i].data#" role="option">'+'<span class="k-link k-menu-link">'+'<span class="k-menu-link-text">#=actions[i].text#</span>'+"</span>"+"</li>"+"#}#"+"</ul>"+"</div>"),g={buttonDelete:"k-gantt-delete",buttonCancel:"k-gantt-cancel",buttonSave:"k-gantt-update",focused:"k-focus",gridContent:"k-grid-content",hovered:"k-state-hover",item:"k-item k-menu-item",popupWrapper:"k-popup k-menu-popup",popupList:"k-menu-group k-menu-group-md k-reset",popup:{form:"k-popup-edit-form",editForm:"k-gantt-edit-form",formContainer:"k-edit-form-container",resourcesFormContainer:"k-resources-form-container",message:"k-popup-message",buttonsContainer:"k-edit-buttons",button:"k-button",buttonDefaults:"k-button-md k-rounded-md k-button-solid k-button-solid-base",editField:"k-edit-field",editLabel:"k-edit-label",resourcesField:"k-gantt-resources"},primary:"k-button-solid-primary",toolbar:{appendButton:"k-gantt-create"}},w=function(t,e){var i={name:e.field,title:e.title};var n=e.model.fields[e.field].validation;if(n&&d(n)&&n.message)i[f.attr("dateCompare-msg")]=n.message;u('<input type="text" required '+'id="'+e.field+'"'+f.attr("type")+'="date" '+f.attr("role")+'="datetimepicker" '+f.attr("bind")+'="value:'+e.field+'" '+f.attr("validate")+"='true' />").attr(i).appendTo(t);u("<span "+f.attr("for")+'="'+e.field+'" class="k-invalid-msg"/>').hide().appendTo(t)},x=function(t,e){u('<a href="#" class="'+e.styles.button+" "+e.styles.buttonDefaults+'"><span class="k-button-text">'+e.messages.assignButton+"</span></a>").on("click",e.click).appendTo(t)},_=a.extend({init:function(t,e){a.fn.init.call(this);this.element=t;this.options=h(true,{},this.options,e);this._popup()},options:{direction:"down"},destroy:function(){clearTimeout(this._focusTimeout);this.popup.destroy();this.element.off(c);this.list.off(c);this.unbind()},_adjustListWidth:function(){var t=this.list;var e=t[0].style.width;var i=this.element;var n=s(t);var o;var a;if(!t.data(p)&&e)return;o=window.getComputedStyle?window.getComputedStyle(i[0],null):0;a=o?parseFloat(o.width):s(i);if(o&&(r.mozilla||r.msie))a+=parseFloat(o.paddingLeft)+parseFloat(o.paddingRight)+parseFloat(o.borderLeftWidth)+parseFloat(o.borderRightWidth);if(t.css("box-sizing")!=="border-box")e=a-(s(t)-t.width());else e=a;if(n>e)e=n;t.css({fontFamily:i.css("font-family"),width:e}).data(p,e)},_current:function(t){var e=this.list.find(m+g.focused);var i=e[t]();if(i.length){e.removeClass(g.focused).removeAttr("id");i.addClass(g.focused).trigger("focus")}},_popup:function(){var n=this;var t="li"+m+"k-item";var e=this.options.messages.actions;this.list=u(y({styles:g,actions:[{data:"add",text:e.addChild},{data:"insert-before",text:e.insertBefore},{data:"insert-after",text:e.insertAfter}]}));this.element.append(this.list);this.popup=new f.ui.Popup(this.list,h({anchor:this.element,open:function(){n._adjustListWidth()},animation:this.options.animation},k[this.options.direction]));this.element.on(v+c,function(t){var e=u(this);var i=e.attr(f.attr("action"));t.preventDefault();if(i)n.trigger("command",{type:i});else{n.popup.open();n.list.find("li:first").addClass(g.focused).trigger("focus")}});this.list.find(t).hover(function(){u(this).addClass(g.hovered)},function(){u(this).removeClass(g.hovered)}).end().on(v+c,t,function(){n.trigger("command",{type:u(this).attr(f.attr("action"))});n.popup.close()});this.popup.bind("close",function(){n.list.find(t).removeClass(g.focused);n.element.parents("["+f.attr("role")+'="gantt"]').find(m+g.gridContent+" > table").first().trigger("focus")});this.list.find("ul").on("keydown"+c,function(t){var e=t.keyCode;switch(e){case o.UP:t.preventDefault();n._current("prev");break;case o.DOWN:t.preventDefault();n._current("next");break;case o.ENTER:n.list.find(m+g.focused).click();break;case o.ESC:t.preventDefault();n.popup.close();break}})}}),C={desktop:{dateRange:w,resources:x}},F=f.Observable.extend({init:function(t,e){f.Observable.fn.init.call(this);this.element=t;this.options=h(true,{},this.options,e);this.createButton=this.options.createButton},fields:function(t,e,i){var n=this;var o=this.options;var a=o.messages.editor;var s=o.resources;var r;var d=function(t){t.preventDefault();s.editor(n.container.find(m+g.popup.resourcesField),e)};if(o.editable.template)r=u.map(e.fields,function(t,e){return{field:e}});else{r=[{field:"title",title:a.title},{field:"start",title:a.start,editor:t.dateRange},{field:"end",title:a.end,editor:t.dateRange},{field:"percentComplete",title:a.percentComplete,format:l}];if(i)r.splice.apply(r,[1,0].concat([{field:"plannedStart",title:a.plannedStart,editor:t.dateRange},{field:"plannedEnd",title:a.plannedEnd,editor:t.dateRange}]));if(e.get(s.field))r.push({field:s.field,title:a.resources,messages:a,editor:t.resources,click:d,styles:g.popup})}return r},_buildEditTemplate:function(t,e,i){var p=this.options.resources;var n=this.options.editable.template;var o=h({},f.Template,this.options.templateSettings);var u=o.paramName;var a=g.popup;var s="";if(n){if(typeof n===b)n=f.unescape(n);s+=f.template(n,o)(t)}else for(var r=0,c=e.length;r<c;r++){var d=e[r];s+='<div class="'+a.editLabel+'"><label for="'+d.field+'">'+(d.title||d.field||"")+"</label></div>";if(d.field===p.field)s+='<div class="'+a.resourcesField+'" style="display:none"></div>';if(!t.editable||t.editable(d.field)){i.push(d);s+="<div "+f.attr("container-for")+'="'+d.field+'" class="'+a.editField+'"></div>'}else{var l="#:";if(d.field){d=f.expr(d.field,u);l+=d+"==null?'':"+d}else l+="''";l+="#";l=f.template(l,o);s+='<div class="'+a.editField+'">'+l(t)+"</div>"}}return s}}),D=F.extend({destroy:function(){this.close();this.unbind()},close:function(){var t=this;var e=function(){if(t.editable){t.editable.destroy();t.editable=null;t.container=null}if(t.popup){t.popup.destroy();t.popup=null}};if(this.editable&&this.container.is(":visible")){t.trigger("close",{window:t.container});this.container.data("kendoWindow").bind("deactivate",e).close()}else e()},editTask:function(t,e){this.editable=this._createPopupEditor(t,e)},showDialog:function(t){var i=t.buttons;var e=g.popup;var n=f.format('<div class="{0}"><div class="{1}"><p class="{2}">{3}</p><div class="{4}">',e.form,e.formContainer,e.message,t.text,e.buttonsContainer);for(var o=0,a=i.length;o<a;o++)n+=this.createButton(i[o]);n+="</div></div></div>";var s=this.element;if(this.popup)this.popup.destroy();var r=this.popup=u(n).appendTo(s).eq(0).on("click",m+e.button,function(t){t.preventDefault();r.close();var e=u(t.currentTarget).index();i[e].click()}).kendoWindow({modal:true,autoFocus:false,resizable:false,draggable:false,title:t.title,visible:false,deactivate:function(){this.destroy();s.trigger("focus")}}).getKendoWindow();r.center().open();r.element.find(".k-button-solid-primary").trigger("focus")},_createPopupEditor:function(s,r){var d=this;var t={};var e=this.options.messages;var i=g.popup;var n=f.format('<div {0}="{1}" class="{2} {3}"><div class="{4}">',f.attr("uid"),s.uid,i.form,i.editForm,i.formContainer);var o=this.fields(C.desktop,s,r);var a=[];n+=this._buildEditTemplate(s,o,a);n+='<div class="'+i.buttonsContainer+'">';n+=this.createButton({name:"update",text:e.save,className:g.primary});n+=this.createButton({name:"cancel",text:e.cancel});if(d.options.editable.destroy!==false)n+=this.createButton({name:"delete",text:e.destroy});n+="</div></div></div>";var l=this.container=u(n).appendTo(this.element).eq(0).kendoWindow(h({modal:true,resizable:false,draggable:true,title:e.editor.editorTitle,visible:false,close:function(t){if(t.userTriggered)if(d.trigger("cancel",{container:l,model:s}))t.preventDefault()}},t));var p=l.kendoEditable({fields:a,model:s,clearContainer:false,validateOnBlur:true,target:d.options.target}).data("kendoEditable");f.cycleForm(l);if(!this.trigger("edit",{container:l,model:s})){l.data("kendoWindow").center().open();l.on(v+c,m+g.buttonCancel,function(t){t.preventDefault();t.stopPropagation();d.trigger("cancel",{container:l,model:s})});l.on(v+c,m+g.buttonSave,function(t){t.preventDefault();t.stopPropagation();var e=d.fields(C.desktop,s,r);var i={};var n;for(var o=0,a=e.length;o<a;o++){n=e[o].field;i[n]=s.get(n)}d.trigger("save",{container:l,model:s,updateInfo:i})});l.on(v+c,m+g.buttonDelete,function(t){t.preventDefault();t.stopPropagation();d.trigger("remove",{container:l,model:s})})}else d.trigger("cancel",{container:l,model:s});return p}}),T=i.extend({init:function(t,e){i.fn.init.call(this,t,e);this.wrapper=this.element;this.model=this.options.model;this.resourcesField=this.options.resourcesField;this.createButton=this.options.createButton;this._initContainer();this._attachHandlers()},events:["save"],close:function(){this.window.bind("deactivate",this.destroy.bind(this)).close()},destroy:function(){this._dettachHandlers();this.grid.destroy();this.grid=null;this.window.destroy();this.window=null;i.fn.destroy.call(this);f.destroy(this.wrapper);this.element=this.wrapper=null},open:function(){this.window.center().open()},_attachHandlers:function(){var o=this.grid;var e=this._cancelProxy=this._cancel.bind(this);this.container.on(v+c,m+g.buttonCancel,this._cancelProxy);this._saveProxy=this._save.bind(this);this.container.on(v+c,m+g.buttonSave,this._saveProxy);this.window.bind("close",function(t){if(t.userTriggered)e(t)});o.wrapper.on(v+c,"input[type='checkbox']",function(){var t=u(this);var e=u(t).closest("tr");var i=o.dataSource.getByUid(e.attr(f.attr("uid")));var n=u(t).is(":checked")?1:"";i.set("value",n)})},_cancel:function(t){t.preventDefault();this.close()},_createButtons:function(){var t=this.options.buttons;var e='<div class="'+g.popup.buttonsContainer+'">';for(var i=0,n=t.length;i<n;i++)e+=this.createButton(t[i]);e+="</div>";this.container.append(e)},_dettachHandlers:function(){this._cancelProxy=null;this._saveProxy=null;this.container.off(c);this.grid.wrapper.off()},_initContainer:function(){var t=this;var e=g.popup;var i=f.format('<div class="{0} {1}"><div class="{2} {3}"></div></div>"',e.form,e.editForm,e.formContainer,e.resourcesFormContainer);i=u(i);this.container=i.find(m+e.resourcesFormContainer);this.window=i.kendoWindow({modal:true,resizable:false,draggable:true,visible:false,title:this.options.messages.resourcesEditorTitle,open:function(){t.grid.resize(true)}}).data("kendoWindow");this._resourceGrid();this._createButtons()},_resourceGrid:function(){var t=this;var e=this.options.messages;var i=u('<div id="resources-grid"/>').appendTo(this.container);this.grid=new f.ui.Grid(i,{columns:[{field:"name",title:e.resourcesHeader,template:"<label><input type='checkbox' value='#=name#'"+"# if (value > 0 && value !== null) {#"+"checked='checked'"+"# } #"+"/>#=name#</labe>"},{field:"value",title:e.unitsHeader,template:function(t){var e=t.format;var i=t.value!==null?t.value:"";return e?f.toString(i,e):i}}],height:280,sortable:true,editable:true,filterable:true,dataSource:{data:t.options.data,schema:{model:{id:"id",fields:{id:{from:"id"},name:{from:"name",type:"string",editable:false},value:{from:"value",type:"number",validation:this.options.unitsValidation},format:{from:"format",type:"string"}}}}},save:function(t){var e=!!t.values.value;t.container.parent().find("input[type='checkbox']").prop("checked",e)}})},_save:function(t){t.preventDefault();this._updateModel();if(!this.wrapper.is(m+g.popup.resourcesField))this.trigger("save",{container:this.wrapper,model:this.model});this.close()},_updateModel:function(){var t=[];var e;var i=this.grid.dataSource.data();for(var n=0,o=i.length;n<o;n++){e=i[n].get("value");if(e!==null&&e>0)t.push(i[n])}this.model[this.resourcesField]=t}});return f.gantt={TaskDropDown:_,Editor:F,PopupEditor:D,ResourceEditor:T},window.kendo})}("function"==typeof define&&define.amd?define:function(t,e,i){(i||e)()});
//# sourceMappingURL=kendo.gantt.editors.min.js.map
