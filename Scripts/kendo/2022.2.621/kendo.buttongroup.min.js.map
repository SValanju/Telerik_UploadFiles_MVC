{"version":3,"file":"kendo.buttongroup.min.js","sources":["kendo.buttongroup.js"],"sourcesContent":["(function(f, define) {\n    define('kendo.buttongroup',[ \"kendo.core\", \"kendo.badge\" ], f);\n})(function() {\n\nvar __meta__ = { // jshint ignore:line\n    id: \"buttongroup\",\n    name: \"ButtonGroup\",\n    category: \"web\",\n    description: \"The Kendo ButtonGroup widget is a linear set of grouped buttons.\",\n    depends: [ \"core\", \"badge\" ]\n};\n\n(function($, undefined) {\n    var kendo = window.kendo;\n    var ui = kendo.ui;\n    var Widget = ui.Widget;\n    var keys = kendo.keys;\n    var template = kendo.template;\n    var NS = \".kendoButtonGroup\";\n    var KWIDGET = \"k-widget\";\n    var KBUTTONGROUP = \"k-button-group\";\n    var KBUTTON = \"k-button\";\n    var KBUTTONDEFAULTS = \"k-button-md k-rounded-md k-button-solid k-button-solid-base\";\n    var KICONBUTTON = \"k-icon-button\";\n    var SELECTED = \"k-selected\";\n    var DISABLED = \"k-disabled\";\n    var SELECT = \"select\";\n    var CLICK = \"click\";\n    var KEYDOWN = \"keydown\";\n    var FOCUS = \"focus\";\n    var FOCUSOUT = \"focusout\";\n    var MOUSEDOWN = \"mousedown\";\n    var isIE = kendo.support.browser.msie;\n    var templates = {\n        item: template('<span ' +\n                        '#= item.enabled === false ? \\\"disabled\\\" : \"\" # ' +\n                        '>' +\n                        '#= icon(iconClass) #' +\n                        '#= image(item) #' +\n                        '# if(!!text) { #' +\n                            '<span class=\"k-button-text\"> #= text # </span>' +\n                        '# } #' +\n                        '</span>'),\n        image: template('<img alt=\"icon\" src=\"#=data.imageUrl#\" class=\"k-button-icon\"/>'),\n        icon: template('<span class=\"k-button-icon #=data#\"></span>'),\n        empty: template(\"\")\n    };\n\n    function createBadge(badgeOptions, item) {\n        var badgeEelement;\n\n        if (badgeOptions === null || badgeOptions === undefined) {\n            return;\n        }\n\n        if (badgeOptions.constructor !== Object) {\n            badgeOptions = { text: badgeOptions };\n        }\n\n        if (badgeOptions.position === undefined || badgeOptions.position === \"\") {\n            badgeOptions.position = \"edge\";\n\n            if (badgeOptions.align === undefined || badgeOptions.align === \"\") {\n                badgeOptions.align = \"top end\";\n            }\n        }\n\n        badgeOptions._classNames = [\"k-button-badge\"];\n\n        item.addClass(\"k-badge-container\");\n\n        badgeEelement = $('<span />').appendTo(item);\n        item.badge = new ui.Badge(badgeEelement, badgeOptions);\n    }\n\n    var ButtonGroup = Widget.extend({\n        init: function(element, options) {\n            var that = this;\n\n            Widget.fn.init.call(that, element, options);\n\n            that.wrapper = that.element;\n\n            if (that.options.items) {\n                that._renderItems(that.options.items);\n            }\n\n            that.selectedIndices = [];\n\n            that.element\n                .addClass(KWIDGET + \" \" + KBUTTONGROUP)\n                .attr(\"role\", \"group\")\n                .attr(\"tabindex\", that.element.attr(\"tabindex\") || \"0\")\n                .children().each(function() {\n                    var item = $(this);\n                    that._updateClasses.bind(that)(item);\n                });\n\n            that._enable = true;\n\n            if (!that.options.enable || !that.options.enabled) {\n                that._enable = false;\n                that.element\n                        .attr(\"aria-disabled\", true)\n                        .addClass(DISABLED);\n\n                that.element.children().addClass(DISABLED);\n            }\n\n            that.select(that.options.index);\n\n            that._attachEvents();\n        },\n\n        events: [\n            SELECT\n        ],\n\n        options: {\n            name: \"ButtonGroup\",\n            selection: \"single\",\n            index: -1,\n            enable: true,\n            enabled: true\n        },\n\n        current: function() {\n            return this.element.find(\".\" + SELECTED);\n        },\n\n        _attachEvents: function() {\n            var that = this;\n\n            that.element\n                .on(CLICK + NS, \".\" + KBUTTON, that._click.bind(that))\n                .on(FOCUS + NS, that._focus.bind(that))\n                .on(FOCUSOUT + NS, that._focusout.bind(that))\n                .on(KEYDOWN + NS, that._keyDown.bind(that))\n                .on(MOUSEDOWN + NS, that._mouseDown.bind(that));\n        },\n\n        _renderItems: function(items) {\n            var that = this;\n\n            items.forEach(function(item) {\n                var renderedItem = $(templates.item({\n                    image: item.imageUrl ? templates.image : templates.empty,\n                    icon: !item.imageUrl && (item.iconClass || item.icon) ? templates.icon : templates.empty,\n                    iconClass: item.iconClass || \"k-icon k-i-\" + item.icon,\n                    item: item,\n                    text: item.text ? item.encoded === false ? item.text : kendo.htmlEncode(item.text) : \"\"\n                }));\n\n                if (item.attributes) {\n                    renderedItem.attr(item.attributes);\n                }\n\n                if (item.selected) {\n                    renderedItem.addClass(SELECTED);\n                }\n\n                if ((item.iconClass || item.icon || item.imageUrl) && !item.text) {\n                    renderedItem.addClass(KICONBUTTON);\n                }\n\n                if (item.badge) {\n                    createBadge(item.badge, renderedItem);\n                }\n\n                renderedItem.appendTo(that.element);\n            });\n        },\n\n        _mouseDown: function(e) {\n            var x = e.clientX,\n                y = e.clientY,\n                elementMouseIsOver = document.elementFromPoint(x, y);\n            // Prevent programmatic focusing when clicking enabled button\n            if (elementMouseIsOver !== this.element[0]) {\n                this.preventFocus = true;\n                this.preventFocusOut = true;\n            }\n            // Manually trigger focus in IE\n            if (isIE) {\n                this._focus();\n            }\n        },\n\n        _focus: function() {\n            var element = $(this.element);\n\n            element.removeAttr(\"tabindex\");\n            element.find(\"[role='button']\").attr(\"tabindex\", \"0\");\n\n            if (this.preventFocus) {\n                this.preventFocus = false;\n                return;\n            }\n\n            if (element.find(\".\" + SELECTED).length) {\n                element.find(\".\" + SELECTED).first().trigger(\"focus\");\n            } else {\n                element.children().first().trigger(\"focus\");\n            }\n        },\n\n        _focusout: function() {\n            var that = this;\n            var wrapper = that.wrapper;\n\n            if (this.preventFocusOut) {\n                this.preventFocusOut = false;\n                return;\n            }\n\n            setTimeout(function() {\n                if (!wrapper[0].contains(document.activeElement)) {\n                    wrapper.attr(\"tabindex\", \"0\");\n                    wrapper.find(\"[role='button']\").removeAttr(\"tabindex\");\n                }\n            });\n        },\n\n        _keyDown: function(e) {\n            var that = this;\n            var buttonGroup = $(that.element);\n            var focusableItems = buttonGroup.find(\".\" + KBUTTON);\n            var focusedElement = buttonGroup.find(\":focus\");\n            var currentIndex = focusableItems.index(focusedElement);\n            var isRtl = kendo.support.isRtl(that.element);\n            var itemToFocus;\n\n            if ((e.keyCode === keys.LEFT && !isRtl) || (e.keyCode === keys.RIGHT && isRtl)) {\n                itemToFocus = currentIndex === 0 ? focusableItems.eq(focusableItems.length - 1) : $(focusableItems[currentIndex - 1]);\n                itemToFocus.trigger(\"focus\");\n                e.preventDefault();\n            } else if ((e.keyCode === keys.LEFT && isRtl) || (e.keyCode === keys.RIGHT && !isRtl)) {\n                itemToFocus = currentIndex + 1 === focusableItems.length ? focusableItems.eq(0) : $(focusableItems[currentIndex + 1]);\n                itemToFocus.trigger(\"focus\");\n                e.preventDefault();\n            } else if (e.keyCode === keys.ENTER || e.keyCode === keys.SPACEBAR) {\n                that._select(focusedElement);\n                e.preventDefault();\n            }\n        },\n\n        select: function(button) {\n            var that = this,\n                ariaPressed,\n                index = -1;\n\n            if (button === undefined || button === -1) {\n                return;\n            }\n\n            if (typeof button === \"number\") {\n                index = button;\n                button = that.element.children().eq(button);\n            } else if (button.nodeType) {\n                button = $(button);\n                index = button.index();\n            }\n\n            if (that.options.selection === \"multiple\") {\n                ariaPressed = button.attr(\"aria-pressed\") === \"true\";\n                button\n                    .attr(\"aria-pressed\", !ariaPressed)\n                    .toggleClass(SELECTED);\n\n                if (that.selectedIndices.indexOf(index) === -1) {\n                    that.selectedIndices.push(index);\n                } else {\n                    that.selectedIndices.splice(that.selectedIndices.indexOf(index), 1);\n                }\n\n            } else {\n                that.selectedIndices = [];\n                that.current()\n                        .attr(\"aria-pressed\", false)\n                        .removeClass(SELECTED);\n\n                button\n                    .attr(\"aria-pressed\", true)\n                    .addClass(SELECTED);\n\n                that.selectedIndices.push(index);\n            }\n        },\n\n        badge: function(item, value) {\n            var buttongroup = this.element;\n            var button = !isNaN(item) ? buttongroup.children().eq(item) : buttongroup.find(item);\n            var validValue = value || value === 0;\n            var badge;\n\n            if (!button.length) {\n                return;\n            }\n\n            badge = button.children(\".k-badge\").eq(0).data('kendoBadge');\n            if (!badge && validValue) {\n                createBadge({ text: kendo.htmlEncode(value) }, button);\n                return kendo.htmlEncode(value);\n            }\n\n            if (validValue) {\n                badge.text(kendo.htmlEncode(value));\n            } else if (value === false) {\n                badge.element.empty().remove();\n                badge.destroy();\n                return;\n            }\n\n            return badge ? badge.text() : null;\n        },\n\n        enable: function(enable) {\n            if (typeof enable == \"undefined\") {\n                enable = true;\n            }\n\n            this.element\n                    .attr(\"aria-disabled\", !enable)\n                    .toggleClass(DISABLED, !enable);\n\n            this.element.children().toggleClass(DISABLED, !enable);\n\n            this._enable = this.options.enable = enable;\n        },\n\n        destroy: function() {\n            var that = this;\n\n            that.element.off(NS);\n            that.element.find('.k-badge').each(function() {\n                $(this).data('kendoBadge').destroy();\n            });\n\n            Widget.fn.destroy.call(that);\n        },\n\n        _updateClasses: function(button) {\n            var icon = kendo.attrValue(button, \"icon\");\n            var badge = kendo.attrValue(button, \"badge\");\n            var image = button.find(\"img\").addClass(\"k-image\");\n            var isEmpty = true;\n\n            button\n                .attr(\"aria-pressed\", false)\n                .attr(\"role\", \"button\")\n                .addClass(KBUTTON)\n                .addClass(KBUTTONDEFAULTS);\n\n            if (button.is(\"[disabled]\") || button.hasClass(DISABLED)) {\n                button\n                    .addClass(DISABLED)\n                    .attr(\"aria-disabled\", true)\n                    .removeAttr(\"disabled\");\n            }\n\n            if (button.is(\".\" + SELECTED)) {\n                button.removeClass(SELECTED);\n                if ((!button.hasClass(DISABLED) && this.options.selection === \"single\") ||\n                    this.options.selection === \"multiple\") {\n                    this.select(button[0]);\n                }\n            }\n\n            if (!image[0] && icon) {\n                button.prepend($(templates.icon(\"k-icon k-i-\" + icon)));\n            }\n\n            button\n                .contents()\n                .filter(function() {\n                    return !$(this).hasClass(\"k-icon\") && !$(this).hasClass(\"k-image\");\n                }).each(function() {\n                    if (this.nodeType == 1 || this.nodeType == 3 && kendo.trim(this.nodeValue).length > 0) {\n                        isEmpty = false;\n                    }\n                });\n\n            if ((image[0] || icon) && isEmpty) {\n                button.addClass(KICONBUTTON);\n            }\n\n            if (badge || badge === 0) {\n                createBadge(badge, button);\n            }\n        },\n\n        _click: function(e) {\n            var target = $(e.target).closest(\".\" + KBUTTON);\n\n            if (e.isDefaultPrevented()) {\n                return;\n            }\n\n            e.target.focus();\n\n            this._select(target);\n        },\n\n        _select: function(target) {\n            var button = target;\n\n            if (!this._enable || button.is(\".\" + DISABLED)) {\n                return;\n            }\n\n            this.select(target[0]);\n            this.trigger(SELECT, { indices: this.selectedIndices });\n        }\n    });\n\n    ui.plugin(ButtonGroup);\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) { (a3 || a2)(); });\n"],"names":["define","__meta__","id","name","category","description","depends","$","window","kendo","jQuery","undefined","ui","Widget","keys","template","NS","KWIDGET","KBUTTONGROUP","KBUTTON","KBUTTONDEFAULTS","KICONBUTTON","SELECTED","DISABLED","SELECT","CLICK","KEYDOWN","FOCUS","FOCUSOUT","MOUSEDOWN","isIE","support","browser","msie","templates","item","image","icon","empty","createBadge","badgeOptions","badgeEelement","constructor","Object","text","position","align","_classNames","addClass","appendTo","badge","Badge","ButtonGroup","extend","init","element","options","that","this","fn","call","wrapper","items","_renderItems","selectedIndices","attr","children","each","_updateClasses","bind","_enable","enable","enabled","select","index","_attachEvents","events","selection","current","find","on","_click","_focus","_focusout","_keyDown","_mouseDown","forEach","renderedItem","imageUrl","iconClass","encoded","htmlEncode","attributes","selected","e","x","clientX","y","clientY","elementMouseIsOver","document","elementFromPoint","preventFocus","preventFocusOut","removeAttr","length","first","trigger","setTimeout","contains","activeElement","buttonGroup","focusableItems","focusedElement","currentIndex","isRtl","itemToFocus","keyCode","LEFT","RIGHT","eq","preventDefault","ENTER","SPACEBAR","_select","button","ariaPressed","nodeType","toggleClass","indexOf","push","splice","removeClass","value","buttongroup","isNaN","validValue","data","remove","destroy","off","attrValue","isEmpty","is","hasClass","prepend","contents","filter","trim","nodeValue","target","closest","isDefaultPrevented","focus","indices","plugin","amd","a1","a2","a3"],"mappings":"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"}