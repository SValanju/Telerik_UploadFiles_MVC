/**
 * Kendo UI v2022.2.621 (http://www.telerik.com/kendo-ui)
 * Copyright 2022 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.
 *
 * Kendo UI commercial licenses may be obtained at
 * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete
 * If you do not own a commercial license, this file shall be governed by the trial license terms.
 */
!function(define){define("dataviz/chart/kendo-chart.min",["kendo.core.min","kendo.color.min","kendo.drawing.min","kendo.dataviz.core.min"],function(){var x=window.kendo.jQuery,C=(window.kendo.dataviz=window.kendo.dataviz||{},kendo.dataviz),e=C.Class,d=C.isNumber,k=C.constants,u=k.MAX_VALUE,c=k.MIN_VALUE,v=k.VALUE,P=k.CENTER,R=k.TOP,V=k.BOTTOM,O=k.LEFT,n=k.WHITE,f=k.CIRCLE,m=k.X,g=k.Y,L=k.RIGHT,a=k.BLACK,w=k.DATE,s=k.DEFAULT_PRECISION,i=k.ARC,T=C.defined,h=C.getter,p=C.isArray,_=C.ChartElement,I=C.Point,E=C.Box,y=C.alignPathToPixel,t=C.setDefaultOptions,A=C.inArray,M=C.isFunction,B=C.valueOrDefault,S=C.isObject,b=C.deepExtend,z=C.last,D=C.eventElement,H=C.getTemplate,F=C.TextBox,N=C.ShapeElement,G=C.getSpacing,o=C.CurveProcessor,X=C.append,q=C.isString,Y=C.parseDate,l=C.styleValue,W=C.CategoryAxis,U=C.BoxElement,Z=C.round,j=C.limitValue,K=C.grep,Q=C.elementStyles,$=C.hasClasses,r=C.bindEvents,J=C.services,tt=C.unbindEvents,et=kendo.support,it=kendo.drawing,rt=it.Path,at=it.Animation,nt=it.AnimationFactory,st=it.Group,ot=kendo.Color,lt=kendo.geometry,ht=lt.Point,vt=lt.transform,ct=e.extend({init:function(t){this._axis=t;this.options=t.options},value:function(t){var e=this._axis;var i=e.getCategory?e.getCategory(t):e.getValue(t);return i},slot:function(t,e,i){if(i===void 0)i=true;return this._axis.slot(t,e,i)},range:function(){return this._axis.range()},valueRange:function(){return this._axis.valueRange()}});function ut(t,e){for(var i=0;i<e.length;i++)if(e[i].options.name===t){e[i].prepareUserOptions();return new ct(e[i])}}var ft=kendo.Class.extend({init:function(t){this.visual=t.visual;this.chartsVisual=t.chartContainer.visual;this._pane=t},findAxisByName:function(t){return ut(t,this._pane.axes)}}),pt=e.extend({init:function(t){this._plotArea=t;this.visual=t.visual;this.backgroundVisual=t._bgVisual}});function dt(t){var e=t.length;var i=0;for(var r=0;r<e;r++){var a=t[r];if(d(a))i++}return i}var gt={min:function(t){var e=t.length;var i=u;for(var r=0;r<e;r++){var a=t[r];if(d(a))i=Math.min(i,a)}return i===u?t[0]:i},max:function(t){var e=t.length;var i=c;for(var r=0;r<e;r++){var a=t[r];if(d(a))i=Math.max(i,a)}return i===c?t[0]:i},sum:function(t){var e=t.length;var i=0;for(var r=0;r<e;r++){var a=t[r];if(d(a))i+=a}return i},sumOrNull:function(t){var e=null;if(dt(t))e=gt.sum(t);return e},count:function(t){var e=t.length;var i=0;for(var r=0;r<e;r++){var a=t[r];if(a!==null&&T(a))i++}return i},avg:function(t){var e=dt(t);var i=t[0];if(e>0)i=gt.sum(t)/e;return i},first:function(t){var e=t.length;for(var i=0;i<e;i++){var r=t[i];if(r!==null&&T(r))return r}return t[0]}};function xt(t,e){if(e===null)return e;var i=h(t,true);return i(e)}var mt=e.extend({init:function(){this._valueFields={};this._otherFields={};this._nullValue={};this._undefinedValue={}},register:function(t,e,i){var r=this;if(e===void 0)e=[v];if(i===void 0)i={};for(var a=0;a<t.length;a++){var n=t[a];r._valueFields[n]=e;r._otherFields[n]=i;r._nullValue[n]=r._makeValue(e,null);r._undefinedValue[n]=r._makeValue(e,undefined)}},canonicalFields:function(t){return this.valueFields(t).concat(this.otherFields(t))},valueFields:function(t){return this._valueFields[t.type]||[v]},otherFields:function(t){return this._otherFields[t.type]||[v]},bindPoint:function(t,e,i){var r=t.data;var a=T(i)?i:r[e];var n={valueFields:{value:a}};var s=this.valueFields(t);var o=this._otherFields[t.type];var l,h;if(a===null)h=this._nullValue[t.type];else if(!T(a))h=this._undefinedValue[t.type];else if(Array.isArray(a)){var v=a.slice(s.length);h=this._bindFromArray(a,s);l=this._bindFromArray(v,o)}else if(typeof a==="object"){var c=this.sourceFields(t,s);var u=this.sourceFields(t,o);h=this._bindFromObject(a,s,c);l=this._bindFromObject(a,o,u)}if(T(h))if(s.length===1)n.valueFields.value=h[s[0]];else n.valueFields=h;n.fields=l||{};return n},_makeValue:function(t,e){var i={};var r=t.length;for(var a=0;a<r;a++){var n=t[a];i[n]=e}return i},_bindFromArray:function(t,e){var i={};if(e){var r=Math.min(e.length,t.length);for(var a=0;a<r;a++)i[e[a]]=t[a]}return i},_bindFromObject:function(t,e,i){if(i===void 0)i=e;var r={};if(e){var a=e.length;for(var n=0;n<a;n++){var s=e[n];var o=i[n];if(o!==null)r[s]=xt(o,t)}}return r},sourceFields:function(t,e){var i=[];if(e){var r=e.length;for(var a=0;a<r;a++){var n=e[a];var s=n===v?"field":n+"Field";i.push(t[s]!==null?t[s]||n:null)}}return i}}),yt=(mt.current=new mt,"stderr"),_t,wt=/percent(?:\w*)\((\d+)\)/,bt=new RegExp("^"+"stddev"+"(?:\\((\\d+(?:\\.\\d+)?)\\))?$"),At=e.extend({init:function(t,e,i){this.initGlobalRanges(t,e,i)},initGlobalRanges:function(t,e,i){var r=e.data;var a=bt.exec(t);if(a){this.valueGetter=this.createValueGetter(e,i);var n=this.getAverage(r);var s=this.getStandardDeviation(r,n,false);var o=a[1]?parseFloat(a[1]):1;var l={low:n.value-s*o,high:n.value+s*o};this.globalRange=function(){return l}}else if(t.indexOf&&t.indexOf(yt)>=0){this.valueGetter=this.createValueGetter(e,i);var h=this.getStandardError(r,this.getAverage(r));this.globalRange=function(t){return{low:t-h,high:t+h}}}},createValueGetter:function(t,e){var i=t.data;var r=mt.current;var a=r.valueFields(t);var n=T(i[0])?i[0]:{};var s;if(p(n)){var o=e?a.indexOf(e):0;s=h("["+o+"]")}else if(d(n))s=h();else if(typeof n===k.OBJECT){var l=r.sourceFields(t,a);s=h(l[a.indexOf(e)])}return s},getErrorRange:function(t,e){var i,r,a;if(!T(e))return null;if(this.globalRange)return this.globalRange(t);if(p(e)){i=t-e[0];r=t+e[1]}else if(d(a=parseFloat(e))){i=t-a;r=t+a}else if(a=wt.exec(e)){var n=t*(parseFloat(a[1])/100);i=t-Math.abs(n);r=t+Math.abs(n)}else throw new Error("Invalid ErrorBar value: "+e);return{low:i,high:r}},getStandardError:function(t,e){return this.getStandardDeviation(t,e,true)/Math.sqrt(e.count)},getStandardDeviation:function(t,e,i){var r=this;var a=t.length;var n=i?e.count-1:e.count;var s=0;for(var o=0;o<a;o++){var l=r.valueGetter(t[o]);if(d(l))s+=Math.pow(l-e.value,2)}return Math.sqrt(s/n)},getAverage:function(t){var e=this;var i=t.length;var r=0;var a=0;for(var n=0;n<i;n++){var s=e.valueGetter(t[n]);if(d(s)){r+=s;a++}}return{value:r/a,count:a}}}),St,Ct=600,kt="fadeIn",Pt,Tt=.8,It=5,Et=(et.browser||{}).msie?.001:0,Rt="errorLow",Vt="errorHigh",Ot="xErrorLow",Lt="xErrorHigh",Mt="yErrorLow",Bt="yErrorHigh",zt=8,Dt="zero",Ht="interpolate",Ft="gap",Nt="above",Gt="below",Xt="smooth",qt="step",Yt="area",Wt="bar",Ut="boxPlot",Zt="bubble",jt="bullet",Kt="candlestick",Qt="column",$t="donut",Jt="funnel",te="heatmap",ee="horizontalWaterfall",ie="line",re="ohlc",ae="pie",ne="polarArea",se="polarLine",oe="polarScatter",le="radarArea",he="radarColumn",ve="radarLine",ce="rangeArea",ue="rangeBar",fe="rangeColumn",pe="scatter",de="scatterLine",ge="verticalArea",xe="verticalBoxPlot",me="verticalBullet",ye="verticalLine",_e="verticalRangeArea",we="waterfall",be=[Wt,Qt,re,Kt,Ut,xe,jt,fe,ue,we,ee],Ae="legendItemClick",Se="legendItemHover",Ce="legendItemLeave",ke="seriesClick",Pe="seriesHover",Te="seriesOver",Ie="seriesLeave",Ee="plotAreaClick",Re="plotAreaHover",Ve="plotAreaLeave",Oe="drag",Le="dragEnd",Me="dragStart",Be="zoomStart",ze="zoom",De="zoomEnd",He="selectStart",Fe="select",Ne="selectEnd",Ge="render",Xe="showTooltip",qe="hideTooltip",Ye="paneRender",We="log",Ue="category",Ze="insideEnd",je="insideBase",Ke="outsideEnd",Qe="DOMMouseScroll mousewheel",$e=150,Je=.3,ti={INITIAL_ANIMATION_DURATION:Ct,FADEIN:kt,LEGEND_ITEM_CLICK:Ae,LEGEND_ITEM_HOVER:Se,LEGEND_ITEM_LEAVE:Ce,SERIES_CLICK:ke,SERIES_HOVER:Pe,SERIES_OVER:Te,SERIES_LEAVE:Ie,GLASS:"glass",BORDER_BRIGHTNESS:Tt,TOOLTIP_OFFSET:It,START_SCALE:Et,ERROR_LOW_FIELD:Rt,ERROR_HIGH_FIELD:Vt,X_ERROR_LOW_FIELD:Ot,X_ERROR_HIGH_FIELD:Lt,Y_ERROR_LOW_FIELD:Mt,Y_ERROR_HIGH_FIELD:Bt,LINE_MARKER_SIZE:zt,INTERPOLATE:Ht,ZERO:Dt,SMOOTH:Xt,STEP:qt,CATEGORY:Ue,FUNNEL:Jt,BAR:Wt,CANDLESTICK:Kt,PIE:ae,COLUMN:Qt,AREA:Yt,VERTICAL_BULLET:me,BOX_PLOT:Ut,OHLC:re,WATERFALL:we,LINE:ie,BULLET:jt,VERTICAL_LINE:ye,VERTICAL_AREA:ge,RANGE_AREA:ce,VERTICAL_RANGE_AREA:_e,RANGE_COLUMN:fe,VERTICAL_BOX_PLOT:xe,RANGE_BAR:ue,HORIZONTAL_WATERFALL:ee,SCATTER:pe,SCATTER_LINE:de,BUBBLE:Zt,RADAR_AREA:le,RADAR_LINE:ve,RADAR_COLUMN:he,POLAR_LINE:se,POLAR_AREA:ne,POLAR_SCATTER:oe,RENDER:Ge,PLOT_AREA_CLICK:Ee,PLOT_AREA_HOVER:Re,PLOT_AREA_LEAVE:Ve,LOGARITHMIC:We,DRAG:Oe,DRAG_START:Me,DRAG_END:Le,ZOOM_START:Be,ZOOM:ze,ZOOM_END:De,SELECT_START:He,SELECT:Fe,SELECT_END:Ne,PANE_RENDER:Ye,GAP:Ft,DONUT:$t,INSIDE_END:Ze,INSIDE_BASE:je,OUTSIDE_END:Ke,MOUSEWHEEL:Qe,MOUSEWHEEL_DELAY:$e,MOUSEWHEEL_ZOOM_RATE:Je,SHOW_TOOLTIP:Xe,HIDE_TOOLTIP:qe,EQUALLY_SPACED_SERIES:be,ABOVE:Nt,BELOW:Gt,HEATMAP:te},ei=4,ii=_.extend({init:function(t,e,i,r,a,n){_.fn.init.call(this,n);this.low=t;this.high=e;this.isVertical=i;this.chart=r;this.series=a},reflow:function(t){var e=this.options.endCaps;var i=this.isVertical;var v=this.getAxis();var r=v.getSlot(this.low,this.high);var a=t.center();var n=this.getCapsWidth(t,i);var s=i?a.x:a.y;var o=s-n;var l=s+n;var h;if(i){h=[new I(a.x,r.y1),new I(a.x,r.y2)];if(e)h.push(new I(o,r.y1),new I(l,r.y1),new I(o,r.y2),new I(l,r.y2));this.box=new E(o,r.y1,l,r.y2)}else{h=[new I(r.x1,a.y),new I(r.x2,a.y)];if(e)h.push(new I(r.x1,o),new I(r.x1,l),new I(r.x2,o),new I(r.x2,l));this.box=new E(r.x1,o,r.x2,l)}this.linePoints=h},getCapsWidth:function(t,e){var i=e?t.width():t.height();var r=Math.min(Math.floor(i/2),ei)||ei;return r},createVisual:function(){var e=this;var t=this.options;var i=t.visual;if(i)this.visual=i({low:this.low,high:this.high,rect:this.box.toRect(),sender:this.getSender(),options:{endCaps:t.endCaps,color:t.color,line:t.line},createVisual:function(){e.createDefaultVisual();var t=e.visual;delete e.visual;return t}});else this.createDefaultVisual()},createDefaultVisual:function(){var t=this;var e=this;var i=e.options;var r=e.linePoints;var a={stroke:{color:i.color,width:i.line.width,dashType:i.line.dashType}};_.fn.createVisual.call(this);for(var n=0;n<r.length;n+=2){var s=new rt(a).moveTo(r[n].x,r[n].y).lineTo(r[n+1].x,r[n+1].y);y(s);t.visual.append(s)}}}),ri=(t(ii,{animation:{type:kt,delay:Ct},endCaps:true,line:{width:2},zIndex:1}),ii.extend({getAxis:function(){var t=this.chart.seriesValueAxis(this.series);return t}})),ai=5;function ni(t,e,i,r){if(i===void 0)i={};if(r===void 0)r=false;var a=i.defaults=i.defaults||{};var n=i.depth=i.depth||0;var s=false;i.excluded=i.excluded||[];if(n>ai)return null;for(var o in t)if(!A(o,i.excluded)&&t.hasOwnProperty(o)){var l=t[o];if(M(l)){s=true;if(!r)t[o]=B(l(e),a[o])}else if(S(l)){if(!r)i.defaults=a[o];i.depth++;s=ni(l,e,i,r)||s;i.depth--}}return s}function si(t){var e=t.length;var i=0;for(var r=0;r<e;r++)i=Math.max(i,t[r].data.length);return i}var oi=_.extend({init:function(t,e){_.fn.init.call(this,e);this.plotArea=t;this.chartService=t.chartService;this.categoryAxis=t.seriesCategoryAxis(e.series[0]);this.valueAxisRanges={};this.points=[];this.categoryPoints=[];this.seriesPoints=[];this.seriesOptions=[];this._evalSeries=[];this.render()},render:function(){this.traverseDataPoints(this.addValue.bind(this))},pointOptions:function(t,e){var i=this.seriesOptions[e];if(!i){var r=this.pointType().prototype.defaults;this.seriesOptions[e]=i=b({},r,{vertical:!this.options.invertAxes},t)}return i},plotValue:function(t){if(!t)return 0;if(this.options.isStacked100&&d(t.value)){var e=t.categoryIx;var i=this.categoryPoints[e];var r=[];var a=0;for(var n=0;n<i.length;n++){var s=i[n];if(s){var o=t.series.stack;var l=s.series.stack;if(o&&l&&o.group!==l.group)continue;if(d(s.value)){a+=Math.abs(s.value);r.push(Math.abs(s.value))}}}if(a>0)return t.value/a}return t.value},plotRange:function(t,e){var i=this;if(e===void 0)e=0;var v=this.categoryPoints[t.categoryIx];if(this.options.isStacked){var r=this.plotValue(t);var c=r>=0;var a=e;var u=false;for(var n=0;n<v.length;n++){var s=v[n];if(t===s)break;var o=t.series.stack;var l=s.series.stack;if(o&&l){if(typeof o===k.STRING&&o!==l)continue;if(o.group&&o.group!==l.group)continue}var h=i.plotValue(s);if(h>=0&&c||h<0&&!c){a+=h;r+=h;u=true;if(i.options.isStacked100)r=Math.min(r,1)}}if(u)a-=e;return[a,r]}var f=t.series;var p=this.seriesValueAxis(f);var d=this.categoryAxisCrossingValue(p);return[d,C.convertableToNumber(t.value)?t.value:d]},stackLimits:function(t,e){var i=this;var r=u;var a=c;for(var n=0;n<this.categoryPoints.length;n++){var s=i.categoryPoints[n];if(!s)continue;for(var o=0;o<s.length;o++){var l=s[o];if(l)if(l.series.stack===e||l.series.axis===t){var h=i.plotRange(l,0)[1];if(T(h)&&isFinite(h)){a=Math.max(a,h);r=Math.min(r,h)}}}}return{min:r,max:a}},updateStackRange:function(){var t=this;var e=this.options;var v=e.isStacked;var i=e.series;var r={};if(v)for(var a=0;a<i.length;a++){var n=i[a];var s=n.axis;var o=s+n.stack;var l=r[o];if(!l){l=t.stackLimits(s,n.stack);var h=t.errorTotals;if(h){if(h.negative.length)l.min=Math.min(l.min,C.sparseArrayLimits(h.negative).min);if(h.positive.length)l.max=Math.max(l.max,C.sparseArrayLimits(h.positive).max)}if(l.min!==u||l.max!==c)r[o]=l;else l=null}if(l)t.valueAxisRanges[s]=l}},addErrorBar:function(t,e,i){var r=t.value;var a=t.series;var n=t.seriesIx;var s=t.options.errorBars;var o=e.fields[Rt];var l=e.fields[Vt];var h;if(d(o)&&d(l))h={low:o,high:l};else if(s&&T(s.value)){this.seriesErrorRanges=this.seriesErrorRanges||[];this.seriesErrorRanges[n]=this.seriesErrorRanges[n]||new At(s.value,a,v);h=this.seriesErrorRanges[n].getErrorRange(r,s.value)}if(h){t.low=h.low;t.high=h.high;this.addPointErrorBar(t,i)}},addPointErrorBar:function(t,e){var i=!this.options.invertAxes;var r=t.options.errorBars;var a=t.series;var n=t.low;var s=t.high;if(this.options.isStacked){var o=this.stackedErrorRange(t,e);n=o.low;s=o.high}else{var l={categoryIx:e,series:a};this.updateRange({value:n},l);this.updateRange({value:s},l)}var h=new ri(n,s,i,this,a,r);t.errorBars=[h];t.append(h)},stackedErrorRange:function(t,e){var i=this.plotRange(t,0)[1]-t.value;var r=t.low+i;var a=t.high+i;this.errorTotals=this.errorTotals||{positive:[],negative:[]};if(r<0)this.errorTotals.negative[e]=Math.min(this.errorTotals.negative[e]||0,r);if(a>0)this.errorTotals.positive[e]=Math.max(this.errorTotals.positive[e]||0,a);return{low:r,high:a}},addValue:function(t,e){var i=e.categoryIx;var r=e.series;var a=e.seriesIx;var n=this.categoryPoints[i];if(!n)this.categoryPoints[i]=n=[];var s=this.seriesPoints[a];if(!s)this.seriesPoints[a]=s=[];var o=this.createPoint(t,e);if(o){x.extend(o,e);o.owner=this;o.noteText=t.fields.noteText;if(!T(o.dataItem))o.dataItem=r.data[i];this.addErrorBar(o,t,i)}this.points.push(o);s.push(o);n.push(o);this.updateRange(t.valueFields,e)},evalPointOptions:function(t,e,i,r,a,n){var s={defaults:a._defaults,excluded:["data","aggregate","_events","tooltip","content","template","visual","toggle","_outOfRangeMinPoint","_outOfRangeMaxPoint"]};var o=this._evalSeries[n];if(!T(o))this._evalSeries[n]=o=ni(t,{},s,true);var l=t;if(o){l=b({},l);ni(l,{value:e,category:i,index:r,series:a,dataItem:a.data[r]},s)}return l},updateRange:function(t,e){var i=e.series.axis;var r=t.value;var a=this.valueAxisRanges[i];if(isFinite(r)&&r!==null){a=this.valueAxisRanges[i]=a||{min:u,max:c};a.min=Math.min(a.min,r);a.max=Math.max(a.max,r)}},seriesValueAxis:function(t){var e=this.plotArea;var i=t.axis;var r=i?e.namedValueAxes[i]:e.valueAxis;if(!r)throw new Error("Unable to locate value axis with name "+i);return r},reflow:function(t){var v=this;var c=this.categorySlots=[];var u=this.points;var f=this.categoryAxis;var p=0;this.traverseDataPoints(function(h,t){var e=t.categoryIx;var i=t.series;var r=v.seriesValueAxis(i);var a=u[p++];var n=c[e];if(!n)c[e]=n=v.categorySlot(f,e,r);if(a){var s=v.plotRange(a,r.startValue());var o=v.valueSlot(r,s);if(o){var l=v.pointSlot(n,o);a.aboveAxis=v.aboveAxis(a,r);a.stackValue=s[1];if(v.options.isStacked100)a.percentage=v.plotValue(a);v.reflowPoint(a,l)}else a.visible=false}});this.reflowCategories(c);if(!this.options.clip&&this.options.limitPoints&&this.points.length)this.limitPoints();this.box=t},valueSlot:function(t,e){return t.getSlot(e[0],e[1],!this.options.clip)},limitPoints:function(){var t=this;var e=this.categoryPoints;var i=e[0].concat(z(e));for(var r=0;r<i.length;r++)if(i[r])t.limitPoint(i[r])},limitPoint:function(t){var e=this.categoryAxis.limitSlot(t.box);if(!e.equals(t.box))t.reflow(e)},aboveAxis:function(t,e){var i=this.categoryAxisCrossingValue(e);var r=t.value;return e.options.reverse?r<i:r>=i},categoryAxisCrossingValue:function(t){var e=this.categoryAxis;var i=t.options;var r=[].concat(i.axisCrossingValues||i.axisCrossingValue);return r[e.axisIndex||0]||0},reflowPoint:function(t,e){t.reflow(e)},reflowCategories:function(){},pointSlot:function(t,e){var i=this.options;var r=i.invertAxes;var a=r?e:t;var n=r?t:e;return new E(a.x1,n.y1,a.x2,n.y2)},categorySlot:function(t,e){return t.getSlot(e)},traverseDataPoints:function(t){var e=this;var i=this.options.series;var r=si(i);var a=i.length;for(var n=0;n<a;n++)e._outOfRangeCallback(i[n],"_outOfRangeMinPoint",n,t);for(var s=0;s<r;s++)for(var o=0;o<a;o++){var l=i[o];var v=e.categoryAxis.categoryAt(s);var c=e._bindPoint(l,o,s);t(c,{category:v,categoryIx:s,categoriesCount:r,series:l,seriesIx:o})}for(var h=0;h<a;h++)e._outOfRangeCallback(i[h],"_outOfRangeMaxPoint",h,t)},_outOfRangeCallback:function(t,e,i,r){var a=t[e];if(a){var n=a.categoryIx;var s=this._bindPoint(t,i,n,a.item);r(s,{category:a.category,categoryIx:n,series:t,seriesIx:i,dataItem:a.item})}},_bindPoint:function(t,e,i,r){if(!this._bindCache)this._bindCache=[];var a=this._bindCache[e];if(!a)a=this._bindCache[e]=[];var n=a[i];if(!n)n=a[i]=mt.current.bindPoint(t,i,r);return n},formatPointValue:function(t,e){if(t.value===null)return"";return this.chartService.format.auto(e,t.value)},pointValue:function(t){return t.valueFields.value}}),li=(t(oi,{series:[],invertAxes:false,isStacked:false,clip:true,limitPoints:true}),{click:function(t,e){return t.trigger(ke,this.eventArgs(e))},hover:function(t,e){return t.trigger(Pe,this.eventArgs(e))},over:function(t,e){return t.trigger(Te,this.eventArgs(e))},out:function(t,e){return t.trigger(Ie,this.eventArgs(e))},eventArgs:function(t){return{value:this.value,percentage:this.percentage,stackValue:this.stackValue,category:this.category,series:this.series,dataItem:this.dataItem,runningTotal:this.runningTotal,total:this.total,element:D(t),originalEvent:t,point:this}}}),hi={createNote:function(){var t=this.options.notes;var e=this.noteText||t.label.text;if(t.visible!==false&&T(e)&&e!==null){this.note=new C.Note({value:this.value,text:e,dataItem:this.dataItem,category:this.category,series:this.series},this.options.notes,this.owner.chartService);this.append(this.note)}}},vi=_.extend({init:function(t,e){_.fn.init.call(this);this.value=t;this.options=e;this.aboveAxis=B(this.options.aboveAxis,true);this.tooltipTracking=true},render:function(){var t=this.options;var e=t.markers;var i=t.labels;if(this._rendered)return;this._rendered=true;if(e.visible&&e.size){this.marker=this.createMarker();this.append(this.marker)}if(i.visible){var r=H(i);var a=this.pointData();var n=this.value;if(r)n=r(a);else if(i.format)n=this.formatValue(i.format);this.label=new F(n,b({align:P,vAlign:P,margin:{left:5,right:5},zIndex:B(i.zIndex,this.series.zIndex)},i),a);this.append(this.label)}this.createNote();if(this.errorBar)this.append(this.errorBar)},markerBorder:function(){var t=this.options.markers;var e=t.background;var i=b({color:this.color},t.border);if(!T(i.color))i.color=new ot(e).brightness(Tt).toHex();return i},createVisual:function(){},createMarker:function(){var t=this.options.markers;var e=new N({type:t.type,width:t.size,height:t.size,rotation:t.rotation,background:t.background,border:this.markerBorder(),opacity:this.series.opacity||t.opacity,zIndex:B(t.zIndex,this.series.zIndex),animation:t.animation,visual:t.visual},{dataItem:this.dataItem,value:this.value,series:this.series,category:this.category});return e},markerBox:function(){if(!this.marker){this.marker=this.createMarker();this.marker.reflow(this._childBox)}return this.marker.box},reflow:function(t){var e=this;var i=this;var r=i.options;var a=i.aboveAxis;var n=r.vertical;this.render();this.box=t;var s=t.clone();if(n)if(a)s.y1-=s.height();else s.y2+=s.height();else if(a)s.x1+=s.width();else s.x2-=s.width();this._childBox=s;if(this.marker)this.marker.reflow(s);this.reflowLabel(s);if(this.errorBars)for(var o=0;o<this.errorBars.length;o++)e.errorBars[o].reflow(s);if(this.note){var l=this.markerBox();if(!(r.markers.visible&&r.markers.size)){var h=l.center();l=new E(h.x,h.y,h.x,h.y)}this.note.reflow(l)}},reflowLabel:function(t){var e=this;var i=e.options;var r=e.label;var a=i.labels.position;if(r){a=a===Nt?R:a;a=a===Gt?V:a;r.reflow(t);r.box.alignTo(this.markerBox(),a);r.reflow(r.box)}},createHighlight:function(){var t=this.options.highlight.markers;var e=this.markerBorder().color;var i=this.options.markers;var r=i.size+(i.border.width||0)+(t.border.width||0);var a=new N({type:i.type,width:r,height:r,rotation:i.rotation,background:t.color||e,border:{color:t.border.color,width:t.border.width,opacity:B(t.border.opacity,1)},opacity:B(t.opacity,1)});a.reflow(this._childBox);return a.getElement()},highlightVisual:function(){return(this.marker||{}).visual},highlightVisualArgs:function(){var t=this.marker;var e,i;if(t){i=t.paddingBox.toRect();e=t.visual}else{var r=this.options.markers.size;var a=r/2;var n=this.box.center();i=new lt.Rect([n.x-a,n.y-a],[r,r])}return{options:this.options,rect:i,visual:e}},tooltipAnchor:function(){var t=this.markerBox();var e=this.owner.pane.clipBox();var i=!e||e.overlaps(t);if(i){var r=t.x2+It;var a=O;var n,s;if(this.aboveAxis){n=t.y1;s=V}else{n=t.y2;s=R}return{point:new I(r,n),align:{horizontal:a,vertical:s}}}},formatValue:function(t){return this.owner.formatPointValue(this,t)},overlapsBox:function(t){var e=this.markerBox();return e.overlaps(t)},unclipElements:function(){if(this.label)this.label.options.noclip=true;if(this.note)this.note.options.noclip=true},pointData:function(){return{dataItem:this.dataItem,category:this.category,value:this.value,percentage:this.percentage,stackValue:this.stackValue,series:this.series}}}),ci=(vi.prototype.defaults={vertical:true,markers:{visible:true,background:n,size:zt,type:f,border:{width:2},opacity:1},labels:{visible:false,position:Nt,margin:G(3),padding:G(4),animation:{type:kt,delay:Ct}},notes:{label:{}},highlight:{markers:{border:{color:"#fff",width:2}},zIndex:k.HIGHLIGHT_ZINDEX},errorBars:{line:{width:1}}},b(vi.prototype,li),b(vi.prototype,hi),_.extend({init:function(t,e,i){_.fn.init.call(this);this.linePoints=t;this.series=e;this.seriesIx=i},points:function(){return this.toGeometryPoints(this.linePoints)},toGeometryPoints:function(t){var e=[];for(var i=0,r=t.length;i<r;i++)if(t[i]&&t[i].visible!==false)e.push(t[i]._childBox.toRect().center());return e},createVisual:function(){var t=this;var e=this.series.visual;if(e){this.visual=e({points:this.toGeometryPoints(this.linePoints),series:this.series,sender:this.getSender(),createVisual:function(){t.segmentVisual();return t.visual}});if(this.visual&&!T(this.visual.options.zIndex))this.visual.options.zIndex=this.series.zIndex}else this.segmentVisual()},segmentVisual:function(){var t=this;var e=t.options;var i=t.series;var r=i.color;var a=i._defaults;if(M(r)&&a)r=a.color;var n=rt.fromPoints(this.points(),{stroke:{color:r,width:i.width,opacity:i.opacity,dashType:i.dashType},zIndex:i.zIndex});if(e.closed)n.close();this.visual=n},aliasFor:function(t,e){return this.parent.getNearestPoint(e.x,e.y,this.seriesIx)}})),ui=(t(ci,{closed:false}),{calculateStepPoints:function(t){var v=this.parent.plotArea.seriesCategoryAxis(this.series);var e=v.options;var c=e.justified;var u=e.vertical;var f=e.reverse;var i=u?m:g;var r=u?g:m;var a=f?2:1;var p=a;var n=fi(t[0],i,a,r,p);var s=[n];for(var o=1;o<t.length;o++){var l=fi(t[o],i,a,r,p);if(n[i]!==l[i]){var h=new ht;h[i]=n[i];h[r]=l[r];s.push(h,l)}n=l}if(!c)s.push(fi(z(t),i,a,r,f?1:2));else if(n!==z(s))s.push(n);return s}});function fi(t,e,i,r,a){var n=t.box;var s=new ht;s[e]=n[e+i];s[r]=n[r+a];return s}var pi=ci.extend({points:function(){return this.calculateStepPoints(this.linePoints)}}),di=(b(pi.prototype,ui),ci.extend({segmentVisual:function(){var t=this.series;var e=t._defaults;var i=t.color;if(M(i)&&e)i=e.color;var r=new o(this.options.closed);var a=r.process(this.points());var n=new rt({stroke:{color:i,width:t.width,opacity:t.opacity,dashType:t.dashType},zIndex:t.zIndex});n.segments.push.apply(n.segments,a);this.visual=n}})),gi={renderSegments:function(){var t=this;var e=this;var v=e.options;var i=e.seriesPoints;var c=v.series;var u=i.length;var r;this._segments=[];for(var a=0;a<u;a++){var n=c[a];var s=t.sortPoints(i[a]);var f=s.length;var o=[];for(var l=0;l<f;l++){var h=s[l];if(h)o.push(h);else if(t.seriesMissingValues(n)!==Ht){if(o.length>1){r=t.createSegment(o,n,a,r);t._addSegment(r)}o=[]}}if(o.length>1){r=t.createSegment(o,n,a,r);t._addSegment(r)}}this.children.unshift.apply(this.children,this._segments)},_addSegment:function(t){this._segments.push(t);t.parent=this},sortPoints:function(t){return t},seriesMissingValues:function(t){var e=t.missingValues;var i=!e&&this.options.isStacked;return i?Dt:e||Ht},getNearestPoint:function(t,e,i){var r=new I(t,e);var a=this.seriesPoints[i];var n=u;var s;for(var o=0;o<a.length;o++){var l=a[o];if(l&&T(l.value)&&l.value!==null&&l.visible!==false){var v=l.box;var h=v.center().distanceTo(r);if(h<n){s=l;n=h}}}return s}},xi=at.extend({setup:function(){this._setEnd(this.options.box.x1)},step:function(t){var e=this.options.box;this._setEnd(C.interpolateValue(e.x1,e.x2,t))},_setEnd:function(t){var e=this.element;var i=e.segments;var r=i[1].anchor();var a=i[2].anchor();e.suspend();r.setX(t);e.resume();a.setX(t)}});function mi(t){for(var e=0;e<t.length;e++)if(T(t[e].zIndex))return true}t(xi,{duration:Ct}),nt.current.register("clip",xi);var yi={createAnimation:function(){var t=this.getRoot();if(t&&(t.options||{}).transitions!==false){var e=t.size();var i=rt.fromRect(e.toRect());this.visual.clip(i);this.animation=new xi(i,{box:e});if(mi(this.options.series))this._setChildrenAnimation(i)}},_setChildrenAnimation:function(t){var e=this.animationPoints();for(var i=0;i<e.length;i++){var r=e[i];if(r&&r.visual&&T(r.visual.options.zIndex))r.visual.clip(t)}}},_i=oi.extend({render:function(){oi.fn.render.call(this);this.updateStackRange();this.renderSegments()},pointType:function(){return vi},createPoint:function(t,e){var i=e.categoryIx;var r=e.category;var a=e.series;var n=e.seriesIx;var v=this.seriesMissingValues(a);var s=t.valueFields.value;if(!T(s)||s===null)if(v===Dt)s=0;else return null;var o=this.pointOptions(a,n);o=this.evalPointOptions(o,s,r,i,a,n);var l=t.fields.color||a.color;if(M(a.color))l=o.color;var h=new vi(s,o);h.color=l;this.append(h);return h},plotRange:function(t){var e=this;var i=this.plotValue(t);if(this.options.isStacked){var r=t.categoryIx;var a=this.categoryPoints[r];for(var n=0;n<a.length;n++){var s=a[n];if(t===s)break;i+=e.plotValue(s);if(e.options.isStacked100)i=Math.min(i,1)}}return[i,i]},createSegment:function(t,e,i){var r=e.style;var a;if(r===qt)a=pi;else if(r===Xt)a=di;else a=ci;return new a(t,e,i)},animationPoints:function(){var t=this.points;var e=[];for(var i=0;i<t.length;i++)e.push((t[i]||{}).marker);return e.concat(this._segments)},supportsPointInactiveOpacity:function(){return false}}),wi=(b(_i.prototype,gi,yi),ci.extend({init:function(t,e,i,r,a){ci.fn.init.call(this,t,e,i);this.prevSegment=r;this.stackPoints=a},createVisual:function(){var t=this.series;var e=t._defaults;var i=t.line||{};var r=t.color;if(M(r)&&e)r=e.color;this.visual=new st({zIndex:t.zIndex});this.createFill({fill:{color:r,opacity:t.opacity},stroke:null});if(i.width>0&&i.visible!==false)this.createStroke({stroke:b({color:r,opacity:t.opacity,lineCap:"butt"},i)})},strokeSegments:function(){var t=this._strokeSegments;if(!t)t=this._strokeSegments=this.createStrokeSegments();return t},createStrokeSegments:function(){return this.segmentsFromPoints(this.points())},stackSegments:function(){if(this.prevSegment)return this.prevSegment.createStackSegments(this.stackPoints);return this.createStackSegments(this.stackPoints)},createStackSegments:function(t){return this.segmentsFromPoints(this.toGeometryPoints(t)).reverse()},segmentsFromPoints:function(t){return t.map(function(t){return new lt.Segment(t)})},createStroke:function(t){var e=new rt(t);e.segments.push.apply(e.segments,this.strokeSegments());this.visual.append(e)},hasStackSegment:function(){return this.prevSegment||this.stackPoints&&this.stackPoints.length},createFill:function(t){var e=this.strokeSegments();var i=e.slice(0);var r=this.hasStackSegment();if(r){var a=this.stackSegments();X(i,a)}var n=new rt(t);n.segments.push.apply(n.segments,i);if(!r&&e.length>1)this.fillToAxes(n);this.visual.append(n)},fillToAxes:function(t){var e=this.parent;var i=e.options.invertAxes;var r=e.seriesValueAxis(this.series);var a=e.categoryAxisCrossingValue(r);var n=r.getSlot(a,a,true);var s=this.strokeSegments();var o=s[0].anchor();var l=z(s).anchor();var h=i?n.x1:n.y1;if(i)t.lineTo(h,l.y).lineTo(h,o.y);else t.lineTo(l.x,h).lineTo(o.x,h)}})),bi=wi.extend({createStrokeSegments:function(){return this.segmentsFromPoints(this.calculateStepPoints(this.linePoints))},createStackSegments:function(t){return this.segmentsFromPoints(this.calculateStepPoints(t)).reverse()}}),Ai=(b(bi.prototype,ui),wi.extend({createStrokeSegments:function(){var t=new o(this.options.closed);var e=this.points();return t.process(e)},createStackSegments:function(){var t=this.strokeSegments();var e=[];for(var i=t.length-1;i>=0;i--){var r=t[i];e.push(new lt.Segment(r.anchor(),r.controlOut(),r.controlIn()))}return e}})),Si=_i.extend({createSegment:function(t,e,i,r){var a=this.options.isStacked;var n=(e.line||{}).style;var s;var o;if(a&&i>0&&r){var l=this.seriesMissingValues(e);if(l!=="gap"){o=r.linePoints;s=r}else o=this._gapStackPoints(t,i,n)}var h;if(n===qt)h=bi;else if(n===Xt)h=Ai;else h=wi;return new h(t,e,i,s,o)},reflow:function(t){var e=this;_i.fn.reflow.call(this,t);var i=this._stackPoints;if(i)for(var r=0;r<i.length;r++){var a=i[r];var n=e.categoryAxis.getSlot(a.categoryIx);a.reflow(n)}},_gapStackPoints:function(t,v,e){var i=this;var r=this.seriesPoints;var a=t[0].categoryIx;var c=t.length;if(a<0){a=0;c--}var u=a+c;var f=this.seriesOptions[0]._outOfRangeMinPoint?1:0;var n=[];this._stackPoints=this._stackPoints||[];for(var s=a;s<u;s++){var o=s+f;var l=v;var h=void 0;do{l--;h=r[l][o]}while(l>0&&!h);if(h){if(e!==qt&&s>a&&!r[l][o-1])n.push(i._previousSegmentPoint(s,o,o-1,l));n.push(h);if(e!==qt&&s+1<u&&!r[l][o+1])n.push(i._previousSegmentPoint(s,o,o+1,l))}else{var p=i._createGapStackPoint(s);i._stackPoints.push(p);n.push(p)}}return n},_previousSegmentPoint:function(t,e,i,r){var a=this.seriesPoints;var n=r;var s;while(n>0&&!s){n--;s=a[n][i]}if(!s){s=this._createGapStackPoint(t);this._stackPoints.push(s)}else s=a[n][e];return s},_createGapStackPoint:function(t){var e=this.pointOptions({},0);var i=new vi(0,e);i.categoryIx=t;i.series={};return i},seriesMissingValues:function(t){return t.missingValues||Dt},supportsPointInactiveOpacity:function(){return false}}),Ci=e.extend({init:function(){this.axisRanges={}},update:function(t){var e=this.axisRanges;for(var i in t){var r=t[i];var a=e[i];e[i]=a=a||{min:u,max:c};a.min=Math.min(a.min,r.min);a.max=Math.max(a.max,r.max)}},reset:function(t){this.axisRanges[t]=undefined},query:function(t){return this.axisRanges[t]}}),ki=_.extend({init:function(t,e,i){_.fn.init.call(this,e);this.textBox=new F(t,this.options,i);this.append(this.textBox)},createVisual:function(){this.textBox.options.noclip=this.options.noclip},reflow:function(t){var e=this.options;var i=e.vertical;var r=e.aboveAxis;var a=this.children[0];var n=a.options;var s=a.box;var o=a.options.padding;var l=t;n.align=i?P:O;n.vAlign=i?R:P;if(e.position===Ze)if(i){n.vAlign=R;if(!r&&s.height()<t.height())n.vAlign=V}else n.align=r?L:O;else if(e.position===P){n.vAlign=P;n.align=P}else if(e.position===je)if(i)n.vAlign=r?V:R;else n.align=r?O:L;else if(e.position===Ke)if(i)if(r)l=new E(t.x1,t.y1-s.height(),t.x2,t.y1);else l=new E(t.x1,t.y2,t.x2,t.y2+s.height());else{n.align=P;if(r)l=new E(t.x2,t.y1,t.x2+s.width(),t.y2);else l=new E(t.x1-s.width(),t.y1,t.x1,t.y2)}if(!e.rotation)if(i)o.left=o.right=(l.width()-a.contentBox.width())/2;else o.top=o.bottom=(l.height()-a.contentBox.height())/2;a.reflow(l)},alignToClipBox:function(t){var e=this.options.vertical;var i=e?g:m;var r=i+"1";var a=i+"2";var n=this.children[0];var s=this.parent.box;if(s[r]<t[r]||t[a]<s[a]){var o=n.paddingBox.clone();o[r]=Math.max(s[r],t[r]);o[a]=Math.min(s[a],t[a]);this.reflow(o)}}});function Pi(t){var e=t.overlay;return e&&e.gradient&&e.gradient!=="none"}t(ki,{position:Ke,margin:G(3),padding:G(4),color:a,background:"",border:{width:1,color:""},aboveAxis:true,vertical:false,animation:{type:kt,delay:Ct},zIndex:2});var Ti=6,Ii=_.extend({init:function(t,e){_.fn.init.call(this);this.options=e;this.color=e.color||n;this.aboveAxis=B(this.options.aboveAxis,true);this.value=t},render:function(){if(this._rendered)return;this._rendered=true;this.createLabel();this.createNote();if(this.errorBar)this.append(this.errorBar)},createLabel:function(){var t=this.options;var e=t.labels;if(e.visible){var i=this.pointData();var r=H(e);var a;if(r)a=r(i);else a=this.formatValue(e.format);this.label=new ki(a,b({vertical:t.vertical},e),i);this.append(this.label)}},formatValue:function(t){return this.owner.formatPointValue(this,t)},reflow:function(t){var e=this;this.render();var i=this.label;this.box=t;if(i){i.options.aboveAxis=this.aboveAxis;i.reflow(t)}if(this.note)this.note.reflow(t);if(this.errorBars)for(var r=0;r<this.errorBars.length;r++)e.errorBars[r].reflow(t)},createVisual:function(){var e=this;var t=this;var i=t.box;var r=t.options;var a=r.visual;if(this.visible!==false){_.fn.createVisual.call(this);if(a){var n=this.rectVisual=a({category:this.category,dataItem:this.dataItem,value:this.value,sender:this.getSender(),series:this.series,percentage:this.percentage,stackValue:this.stackValue,runningTotal:this.runningTotal,total:this.total,rect:i.toRect(),createVisual:function(){var t=new st;e.createRect(t);return t},options:r});if(n)this.visual.append(n)}else if(i.width()>0&&i.height()>0)this.createRect(this.visual)}},createRect:function(t){var e=this.options;var i=e.border;var r=T(i.opacity)?i.opacity:e.opacity;var a=this.box.toRect();a.size.width=Math.round(a.size.width);var n=this.rectVisual=rt.fromRect(a,{fill:{color:this.color,opacity:e.opacity},stroke:{color:this.getBorderColor(),width:i.width,opacity:r,dashType:i.dashType}});var s=this.box.width();var o=this.box.height();var l=e.vertical?s:o;if(l>Ti){y(n);if(s<1||o<1)n.options.stroke.lineJoin="round"}t.append(n);if(Pi(e)){var h=this.createGradientOverlay(n,{baseColor:this.color},b({end:!e.vertical?[0,1]:undefined},e.overlay));t.append(h)}},createHighlight:function(t){var e=rt.fromRect(this.box.toRect(),t);return y(e)},highlightVisual:function(){return this.rectVisual},highlightVisualArgs:function(){return{options:this.options,rect:this.box.toRect(),visual:this.rectVisual}},getBorderColor:function(){var t=this.color;var e=this.options.border;var i=e._brightness||Tt;var r=e.color;if(!T(r))r=new ot(t).brightness(i).toHex();return r},tooltipAnchor:function(){var t=this;var e=t.options;var i=t.box;var r=t.aboveAxis;var a=this.owner.pane.clipBox()||i;var n=O;var s=R;var o,l;if(e.vertical){o=Math.min(i.x2,a.x2)+It;if(r)l=Math.max(i.y1,a.y1);else{l=Math.min(i.y2,a.y2);s=V}}else{var h=Math.max(i.x1,a.x1);var v=Math.min(i.x2,a.x2);if(e.isStacked){s=V;if(r){n=L;o=v}else o=h;l=Math.max(i.y1,a.y1)-It}else{if(r)o=v+It;else{o=h-It;n=L}l=Math.max(i.y1,a.y1)}}return{point:new I(o,l),align:{horizontal:n,vertical:s}}},overlapsBox:function(t){return this.box.overlaps(t)},pointData:function(){return{dataItem:this.dataItem,category:this.category,value:this.value,percentage:this.percentage,stackValue:this.stackValue,runningTotal:this.runningTotal,total:this.total,series:this.series}}});function Ei(t,e){t.forEach(e)}function Ri(t,e){var i=t.length;for(var r=i-1;r>=0;r--)e(t[r],r-i-1)}b(Ii.prototype,li),b(Ii.prototype,hi),Ii.prototype.defaults={border:{width:1},vertical:true,overlay:{gradient:"glass"},labels:{visible:false,format:"{0}"},opacity:1,notes:{label:{}}};var Vi=_.extend({init:function(t){_.fn.init.call(this,t);this.forEach=t.rtl?Ri:Ei},reflow:function(r){var t=this.options;var e=t.vertical;var i=t.gap;var a=t.spacing;var n=this.children;var s=n.length;var o=e?g:m;var v=s+i+a*(s-1);var l=(e?r.height():r.width())/v;var h=r[o+1]+l*(i/2);this.forEach(n,function(t,e){var i=(t.box||r).clone();i[o+1]=h;i[o+2]=h+l;t.reflow(i);if(e<s-1)h+=l*a;h+=l})}}),Oi=(t(Vi,{vertical:false,gap:0,spacing:0}),_.extend({reflow:function(t){var e=this;var i=this.options.vertical?m:g;var r=this.children;var a=r.length;var n=this.box=new E;for(var s=0;s<a;s++){var o=r[s];if(o.visible!==false){var l=o.box.clone();l.snapTo(t,i);if(s===0)n=e.box=l.clone();o.reflow(l);n.wrap(l)}}}})),Li=(t(Oi,{vertical:true}),oi.extend({render:function(){oi.fn.render.call(this);this.updateStackRange()},pointType:function(){return Ii},clusterType:function(){return Vi},stackType:function(){return Oi},stackLimits:function(t,e){var i=oi.fn.stackLimits.call(this,t,e);return i},createPoint:function(t,e){var v=e.categoryIx;var c=e.category;var i=e.series;var u=e.seriesIx;var f=this;var r=f.options;var p=f.children;var a=r.isStacked;var n=this.pointValue(t);var s=this.pointOptions(i,u);var d=s.labels;if(a)if(d.position===Ke)d.position=Ze;s.isStacked=a;var o=t.fields.color||i.color;if(n<0&&s.negativeColor)o=s.negativeColor;s=this.evalPointOptions(s,n,c,v,i,u);if(M(i.color))o=s.color;var g=this.pointType();var l=new g(n,s);l.color=o;var h=p[v];if(!h){var x=this.clusterType();h=new x({vertical:r.invertAxes,gap:r.gap,spacing:r.spacing,rtl:!r.invertAxes&&(this.chartService||{}).rtl});this.append(h)}if(a){var m=this.getStackWrap(i,h);m.append(l)}else h.append(l);return l},getStackWrap:function(t,e){var i=t.stack;var r=i?i.group||i:i;var a=e.children;var n;if(typeof r===k.STRING){for(var s=0;s<a.length;s++)if(a[s]._stackGroup===r){n=a[s];break}}else n=a[0];if(!n){var o=this.stackType();n=new o({vertical:!this.options.invertAxes});n._stackGroup=r;e.append(n)}return n},categorySlot:function(t,e,i){var r=this.options;var a=t.getSlot(e);var n=i.startValue();if(r.isStacked){var s=i.getSlot(n,n,true);var o=r.invertAxes?m:g;a[o+1]=a[o+2]=s[o+1]}return a},reflowCategories:function(t){var e=this.children;var i=e.length;for(var r=0;r<i;r++)e[r].reflow(t[r])},createAnimation:function(){this._setAnimationOptions();oi.fn.createAnimation.call(this);if(mi(this.options.series))this._setChildrenAnimation()},_setChildrenAnimation:function(){var t=this;var e=this.points;for(var i=0;i<e.length;i++){var r=e[i];var a=r.visual;if(a&&T(a.options.zIndex)){r.options.animation=t.options.animation;r.createAnimation()}}},_setAnimationOptions:function(){var t=this.options;var e=t.animation||{};var i;if(t.isStacked){var r=this.seriesValueAxis(t.series[0]);i=r.getSlot(r.startValue())}else i=this.categoryAxis.getSlot(0);e.origin=new ht(i.x1,i.y1);e.vertical=!t.invertAxes}})),Mi=(t(Li,{animation:{type:Wt}}),_.extend({init:function(t,e){_.fn.init.call(this,e);this.value=t},reflow:function(t){var e=this;var i=e.options;var r=e.value;var a=e.owner;var n=a.seriesValueAxis(i);var s=n.getSlot(r.open,r.close);var o=n.getSlot(r.low,r.high);s.x1=o.x1=t.x1;s.x2=o.x2=t.x2;this.realBody=s;var l=o.center().x;var h=[];h.push([[l,o.y1],[l,s.y1]]);h.push([[l,s.y2],[l,o.y2]]);this.lines=h;this.box=o.clone().wrap(s);if(!this._rendered){this._rendered=true;this.createNote()}this.reflowNote()},reflowNote:function(){if(this.note)this.note.reflow(this.box)},createVisual:function(){_.fn.createVisual.call(this);this._mainVisual=this.mainVisual(this.options);this.visual.append(this._mainVisual);this.createOverlay()},mainVisual:function(t){var e=new st;this.createBody(e,t);this.createLines(e,t);return e},createBody:function(t,e){var i=rt.fromRect(this.realBody.toRect(),{fill:{color:this.color,opacity:e.opacity},stroke:null});if(e.border.width>0)i.options.set("stroke",{color:this.getBorderColor(),width:e.border.width,dashType:e.border.dashType,opacity:B(e.border.opacity,e.opacity)});y(i);t.append(i);if(Pi(e))t.append(this.createGradientOverlay(i,{baseColor:this.color},b({end:!e.vertical?[0,1]:undefined},e.overlay)))},createLines:function(t,e){this.drawLines(t,e,this.lines,e.line)},drawLines:function(t,e,i,r){if(!i)return;var a={stroke:{color:r.color||this.color,opacity:B(r.opacity,e.opacity),width:r.width,dashType:r.dashType,lineCap:"butt"}};for(var n=0;n<i.length;n++){var s=rt.fromPoints(i[n],a);y(s);t.append(s)}},getBorderColor:function(){var t=this.options.border;var e=t.color;if(!T(e))e=new ot(this.color).brightness(t._brightness).toHex();return e},createOverlay:function(){var t=rt.fromRect(this.box.toRect(),{fill:{color:n,opacity:0},stroke:null});this.visual.append(t)},createHighlight:function(){var t=this.options.highlight;var e=this.color;this.color=t.color||this.color;var i=this.mainVisual(b({},this.options,{line:{color:this.getBorderColor()}},t));this.color=e;return i},highlightVisual:function(){return this._mainVisual},highlightVisualArgs:function(){return{options:this.options,rect:this.box.toRect(),visual:this._mainVisual}},tooltipAnchor:function(){var t=this.box;var e=this.owner.pane.clipBox()||t;return{point:new I(t.x2+It,Math.max(t.y1,e.y1)+It),align:{horizontal:O,vertical:R}}},formatValue:function(t){return this.owner.formatPointValue(this,t)},overlapsBox:function(t){return this.box.overlaps(t)}}));function Bi(t){return dt(t)===t.length}t(Mi,{vertical:true,border:{_brightness:.8},line:{width:2},overlay:{gradient:"glass"},tooltip:{format:"<table>"+"<tr><th colspan='2'>{4:d}</th></tr>"+"<tr><td>Open:</td><td>{0:C}</td></tr>"+"<tr><td>High:</td><td>{1:C}</td></tr>"+"<tr><td>Low:</td><td>{2:C}</td></tr>"+"<tr><td>Close:</td><td>{3:C}</td></tr>"+"</table>"},highlight:{opacity:1,border:{width:1,opacity:1},line:{width:1,opacity:1}},notes:{visible:true,label:{}}}),b(Mi.prototype,li),b(Mi.prototype,hi);var zi=oi.extend({reflowCategories:function(t){var e=this.children;var i=e.length;for(var r=0;r<i;r++)e[r].reflow(t[r])},addValue:function(t,e){var i=e.categoryIx;var v=e.category;var r=e.series;var c=e.seriesIx;var a=this;var u=a.children;var n=a.options;var s=t.valueFields;var f=this.splitValue(s);var p=Bi(f);var d=r.data[i];var o=this.categoryPoints[i];var l;if(!o)this.categoryPoints[i]=o=[];if(p)l=this.createPoint(t,e);var h=u[i];if(!h){h=new Vi({vertical:n.invertAxes,gap:n.gap,spacing:n.spacing,rtl:!n.invertAxes&&(this.chartService||{}).rtl});this.append(h)}if(l){this.updateRange(s,e);h.append(l);l.categoryIx=i;l.category=v;l.series=r;l.seriesIx=c;l.owner=this;l.dataItem=d;l.noteText=t.fields.noteText}this.points.push(l);o.push(l)},pointType:function(){return Mi},createPoint:function(t,e){var i=e.categoryIx;var r=e.category;var a=e.series;var n=e.seriesIx;var v=this.pointType();var s=t.valueFields;var o=b({},a);var l=t.fields.color||a.color;o=this.evalPointOptions(o,s,r,i,a,n);if(a.type===Kt)if(s.open>s.close)l=t.fields.downColor||a.downColor||a.color;if(M(a.color))l=o.color;o.vertical=!this.options.invertAxes;var h=new v(s,o);h.color=l;return h},splitValue:function(t){return[t.low,t.open,t.close,t.high]},updateRange:function(t,e){var i=e.series.axis;var r=this.splitValue(t);var a=this.valueAxisRanges[i];a=this.valueAxisRanges[i]=a||{min:u,max:c};a=this.valueAxisRanges[i]={min:Math.min.apply(Math,r.concat([a.min])),max:Math.max.apply(Math,r.concat([a.max]))}},formatPointValue:function(t,e){var i=t.value;return this.chartService.format.auto(e,i.open,i.high,i.low,i.close,t.category)},animationPoints:function(){return this.points}}),Di=(b(zi.prototype,yi),Mi.extend({init:function(t,e){Mi.fn.init.call(this,t,e);this.createNote()},reflow:function(t){var e=this;var i=e.options;var r=e.value;var a=e.owner;var n=a.seriesValueAxis(i);var s,o;this.boxSlot=o=n.getSlot(r.q1,r.q3);this.realBody=o;this.reflowBoxSlot(t);this.whiskerSlot=s=n.getSlot(r.lower,r.upper);this.reflowWhiskerSlot(t);var l=n.getSlot(r.median);if(r.mean){var h=n.getSlot(r.mean);this.meanPoints=this.calcMeanPoints(t,h)}this.whiskerPoints=this.calcWhiskerPoints(o,s);this.medianPoints=this.calcMedianPoints(t,l);this.box=s.clone().wrap(o);this.reflowNote()},reflowBoxSlot:function(t){this.boxSlot.x1=t.x1;this.boxSlot.x2=t.x2},reflowWhiskerSlot:function(t){this.whiskerSlot.x1=t.x1;this.whiskerSlot.x2=t.x2},calcMeanPoints:function(t,e){return[[[t.x1,e.y1],[t.x2,e.y1]]]},calcWhiskerPoints:function(t,e){var i=e.center().x;return[[[i-5,e.y1],[i+5,e.y1],[i,e.y1],[i,t.y1]],[[i-5,e.y2],[i+5,e.y2],[i,e.y2],[i,t.y2]]]},calcMedianPoints:function(t,e){return[[[t.x1,e.y1],[t.x2,e.y1]]]},renderOutliers:function(t){var e=this;var i=this.value;var r=i.outliers||[];var a=Math.abs(i.q3-i.q1)*3;var n=[];var s=t.markers||{};for(var o=0;o<r.length;o++){var l=r[o];if(l<i.q3+a&&l>i.q1-a)s=t.outliers;else s=t.extremes;var h=b({},s.border);if(!T(h.color))if(T(e.color))h.color=e.color;else h.color=new ot(s.background).brightness(Tt).toHex();var v=new N({type:s.type,width:s.size,height:s.size,rotation:s.rotation,background:s.background,border:h,opacity:s.opacity});v.value=l;n.push(v)}this.reflowOutliers(n);return n},reflowOutliers:function(t){var e=this;var i=this.owner.seriesValueAxis(this.options);var r=this.box.center();for(var a=0;a<t.length;a++){var n=t[a].value;var s=i.getSlot(n);if(e.options.vertical)s.move(r.x);else s.move(undefined,r.y);e.box=e.box.wrap(s);t[a].reflow(s)}},mainVisual:function(t){var e=Mi.fn.mainVisual.call(this,t);var i=this.renderOutliers(t);for(var r=0;r<i.length;r++){var a=i[r].getElement();if(a)e.append(a)}return e},createLines:function(t,e){this.drawLines(t,e,this.whiskerPoints,e.whiskers);this.drawLines(t,e,this.medianPoints,e.median);this.drawLines(t,e,this.meanPoints,e.mean)},getBorderColor:function(){if((this.options.border||{}).color)return this.options.border.color;if(this.color)return this.color;return Mi.fn.getBorderColor.call(this)}})),Hi=(t(Di,{border:{_brightness:.8},line:{width:2},median:{color:"#f6f6f6"},mean:{width:2,dashType:"dash",color:"#f6f6f6"},overlay:{gradient:"glass"},tooltip:{format:"<table>"+"<tr><th colspan='2'>{6:d}</th></tr>"+"<tr><td>Lower:</td><td>{0:C}</td></tr>"+"<tr><td>Q1:</td><td>{1:C}</td></tr>"+"<tr><td>Median:</td><td>{2:C}</td></tr>"+"<tr><td>Mean:</td><td>{5:C}</td></tr>"+"<tr><td>Q3:</td><td>{3:C}</td></tr>"+"<tr><td>Upper:</td><td>{4:C}</td></tr>"+"</table>"},highlight:{opacity:1,border:{width:1,opacity:1},line:{width:1,opacity:1}},notes:{visible:true,label:{}},outliers:{visible:true,size:zt,type:k.CROSS,background:n,border:{width:2,opacity:1},opacity:0},extremes:{visible:true,size:zt,type:f,background:n,border:{width:2,opacity:1},opacity:0}}),b(Di.prototype,li),Di.extend({reflowBoxSlot:function(t){this.boxSlot.y1=t.y1;this.boxSlot.y2=t.y2},reflowWhiskerSlot:function(t){this.whiskerSlot.y1=t.y1;this.whiskerSlot.y2=t.y2},calcMeanPoints:function(t,e){return[[[e.x1,t.y1],[e.x1,t.y2]]]},calcWhiskerPoints:function(t,e){var i=e.center().y;return[[[e.x1,i-5],[e.x1,i+5],[e.x1,i],[t.x1,i]],[[e.x2,i-5],[e.x2,i+5],[e.x2,i],[t.x2,i]]]},calcMedianPoints:function(t,e){return[[[e.x1,t.y1],[e.x1,t.y2]]]}})),Fi=zi.extend({addValue:function(t,e){var i=e.categoryIx;var v=e.category;var r=e.series;var c=e.seriesIx;var a=this;var u=a.children;var n=a.options;var s=t.valueFields;var f=this.splitValue(s);var p=Bi(f);var d=r.data[i];var o=this.categoryPoints[i];var l;if(!o)this.categoryPoints[i]=o=[];if(p)l=this.createPoint(t,e);var h=u[i];if(!h){h=new Vi({vertical:n.invertAxes,gap:n.gap,spacing:n.spacing,rtl:!n.invertAxes&&(this.chartService||{}).rtl});this.append(h)}if(l){this.updateRange(s,e);h.append(l);l.categoryIx=i;l.category=v;l.series=r;l.seriesIx=c;l.owner=this;l.dataItem=d}this.points.push(l);o.push(l)},pointType:function(){if(this.options.invertAxes)return Hi;return Di},splitValue:function(t){return[t.lower,t.q1,t.median,t.q3,t.upper]},updateRange:function(t,e){var i=e.series.axis;var r=this.valueAxisRanges[i];var a=this.splitValue(t).concat(this.filterOutliers(t.outliers));if(T(t.mean))a=a.concat(t.mean);r=this.valueAxisRanges[i]=r||{min:u,max:c};r=this.valueAxisRanges[i]={min:Math.min.apply(Math,a.concat([r.min])),max:Math.max.apply(Math,a.concat([r.max]))}},formatPointValue:function(t,e){var i=t.value;return this.chartService.format.auto(e,i.lower,i.q1,i.median,i.q3,i.upper,i.mean,t.category)},filterOutliers:function(t){var e=(t||[]).length;var i=[];for(var r=0;r<e;r++){var a=t[r];if(T(a)&&a!==null)i.push(a)}return i},supportsPointInactiveOpacity:function(){return false}}),Ni=ii.extend({getAxis:function(){var t=this.chart.seriesAxes(this.series);var e=this.isVertical?t.y:t.x;return e}});function Gi(t){return T(t)&&t!==null}var Xi=_.extend({init:function(t,e){_.fn.init.call(this,e);this.plotArea=t;this.chartService=t.chartService;this._initFields();this.render()},_initFields:function(){this.xAxisRanges={};this.yAxisRanges={};this.points=[];this.seriesPoints=[];this.seriesOptions=[];this._evalSeries=[]},render:function(){this.traverseDataPoints(this.addValue.bind(this))},addErrorBar:function(t,e,i){var r=t.value[e];var a=e+"Value";var v=e+"ErrorLow";var c=e+"ErrorHigh";var n=i.seriesIx;var u=i.series;var s=t.options.errorBars;var o=i[v];var l=i[c];if(d(r)){var h;if(d(o)&&d(l))h={low:o,high:l};if(s&&T(s[a])){this.seriesErrorRanges=this.seriesErrorRanges||{x:[],y:[]};this.seriesErrorRanges[e][n]=this.seriesErrorRanges[e][n]||new At(s[a],u,e);h=this.seriesErrorRanges[e][n].getErrorRange(r,s[a])}if(h)this.addPointErrorBar(h,t,e)}},addPointErrorBar:function(t,e,i){var r=t.low;var a=t.high;var n=e.series;var s=e.options.errorBars;var o=i===g;var l={};e[i+"Low"]=r;e[i+"High"]=a;e.errorBars=e.errorBars||[];var h=new Ni(r,a,o,this,n,s);e.errorBars.push(h);e.append(h);l[i]=r;this.updateRange(l,n);l[i]=a;this.updateRange(l,n)},addValue:function(t,e){var i=t.x;var r=t.y;var a=e.seriesIx;var n=this.options.series[a];var s=this.seriesMissingValues(n);var o=this.seriesPoints[a];var l=t;if(!(Gi(i)&&Gi(r)))l=this.createMissingValue(l,s);var h;if(l){h=this.createPoint(l,e);if(h){x.extend(h,e);this.addErrorBar(h,m,e);this.addErrorBar(h,g,e)}this.updateRange(l,e.series)}this.points.push(h);o.push(h)},seriesMissingValues:function(t){return t.missingValues},createMissingValue:function(){},updateRange:function(t,e){var i=this.chartService.intl;var r=e.xAxis;var a=e.yAxis;var n=t.x;var s=t.y;var o=this.xAxisRanges[r];var l=this.yAxisRanges[a];if(Gi(n)){o=this.xAxisRanges[r]=o||{min:u,max:c};if(q(n))n=Y(i,n);o.min=Math.min(o.min,n);o.max=Math.max(o.max,n)}if(Gi(s)){l=this.yAxisRanges[a]=l||{min:u,max:c};if(q(s))s=Y(i,s);l.min=Math.min(l.min,s);l.max=Math.max(l.max,s)}},evalPointOptions:function(t,e,i){var r=i.series;var a=i.seriesIx;var n={defaults:r._defaults,excluded:["data","tooltip","content","template","visual","toggle","_outOfRangeMinPoint","_outOfRangeMaxPoint"]};var s=this._evalSeries[a];if(!T(s))this._evalSeries[a]=s=ni(t,{},n,true);var o=t;if(s){o=b({},t);ni(o,{value:e,series:r,dataItem:i.dataItem},n)}return o},pointType:function(){return vi},pointOptions:function(t,e){var i=this.seriesOptions[e];if(!i){var r=this.pointType().prototype.defaults;this.seriesOptions[e]=i=b({},r,{markers:{opacity:t.opacity},tooltip:{format:this.options.tooltip.format},labels:{format:this.options.labels.format}},t)}return i},createPoint:function(t,e){var i=e.series;var r=this.pointOptions(i,e.seriesIx);var a=e.color||i.color;r=this.evalPointOptions(r,t,e);if(M(i.color))a=r.color;var n=new vi(t,r);n.color=a;this.append(n);return n},seriesAxes:function(t){var e=t.xAxis;var i=t.yAxis;var r=this.plotArea;var a=e?r.namedXAxes[e]:r.axisX;var n=i?r.namedYAxes[i]:r.axisY;if(!a)throw new Error("Unable to locate X axis with name "+e);if(!n)throw new Error("Unable to locate Y axis with name "+i);return{x:a,y:n}},reflow:function(t){var o=this;var l=this.points;var h=!this.options.clip;var v=0;this.traverseDataPoints(function(t,e){var i=l[v++];var r=o.seriesAxes(e.series);var a=r.x.getSlot(t.x,t.x,h);var n=r.y.getSlot(t.y,t.y,h);if(i)if(a&&n){var s=o.pointSlot(a,n);i.reflow(s)}else i.visible=false});this.box=t},pointSlot:function(t,e){return new E(t.x1,e.y1,t.x2,e.y2)},traverseDataPoints:function(t){var e=this;var i=this;var r=i.options.series;var a=i.seriesPoints;for(var n=0;n<r.length;n++){var s=r[n];var o=a[n];if(!o)a[n]=[];for(var l=0;l<s.data.length;l++){var h=e._bindPoint(s,n,l);var v=h.valueFields;var c=h.fields;t(v,b({pointIx:l,series:s,seriesIx:n,dataItem:s.data[l],owner:e},c))}}},formatPointValue:function(t,e){var i=t.value;return this.chartService.format.auto(e,i.x,i.y)},animationPoints:function(){var t=this.points;var e=[];for(var i=0;i<t.length;i++)e.push((t[i]||{}).marker);return e}}),qi=(t(Xi,{series:[],tooltip:{format:"{0}, {1}"},labels:{format:"{0}, {1}"},clip:true}),b(Xi.prototype,yi,{_bindPoint:oi.prototype._bindPoint}),vi.extend({init:function(t,e){vi.fn.init.call(this,t,e);this.category=t.category},createHighlight:function(){var t=this.options.highlight;var e=t.border;var i=this.options.markers;var r=this.box.center();var a=(i.size+i.border.width+e.width)/2;var n=new st;var s=new it.Circle(new lt.Circle([r.x,r.y+a/5+e.width/2],a+e.width/2),{stroke:{color:"none"},fill:this.createGradient({gradient:"bubbleShadow",color:i.background,stops:[{offset:0,color:i.background,opacity:.3},{offset:1,color:i.background,opacity:0}]})});var o=new it.Circle(new lt.Circle([r.x,r.y],a),{stroke:{color:e.color||new ot(i.background).brightness(Tt).toHex(),width:e.width,opacity:e.opacity},fill:{color:i.background,opacity:t.opacity}});n.append(s,o);return n}})),Yi=(qi.prototype.defaults=b({},qi.prototype.defaults,{labels:{position:P},highlight:{opacity:1,border:{color:"#fff",width:2,opacity:1}}}),qi.prototype.defaults.highlight.zIndex=undefined,Xi.extend({_initFields:function(){this._maxSize=c;Xi.fn._initFields.call(this)},addValue:function(t,e){if(t.size!==null&&(t.size>0||t.size<0&&e.series.negativeValues.visible)){this._maxSize=Math.max(this._maxSize,Math.abs(t.size));Xi.fn.addValue.call(this,t,e)}else{this.points.push(null);this.seriesPoints[e.seriesIx].push(null)}},reflow:function(t){this.updateBubblesSize(t);Xi.fn.reflow.call(this,t)},pointType:function(){return qi},createPoint:function(t,e){var i=e.series;var r=i.data.length;var a=e.pointIx*(Ct/r);var n={delay:a,duration:Ct-a,type:Zt};var s=e.color||i.color;if(t.size<0&&i.negativeValues.visible)s=B(i.negativeValues.color,s);var o=b({labels:{animation:{delay:a,duration:Ct-a}}},this.pointOptions(i,e.seriesIx),{markers:{type:f,border:i.border,opacity:i.opacity,animation:n}});o=this.evalPointOptions(o,t,e);if(M(i.color))s=o.color;o.markers.background=s;var l=new qi(t,o);l.color=s;this.append(l);return l},updateBubblesSize:function(t){var e=this;var v=this;var i=v.options.series;var r=Math.min(t.width(),t.height());for(var a=0;a<i.length;a++){var n=i[a];var c=e.seriesPoints[a];var u=n.minSize||Math.max(r*.02,10);var f=n.maxSize||r*.2;var p=u/2;var s=f/2;var d=Math.PI*p*p;var g=Math.PI*s*s;var x=g-d;var m=x/e._maxSize;for(var o=0;o<c.length;o++){var l=c[o];if(l){var y=Math.abs(l.value.size)*m;var _=Math.sqrt((d+y)/Math.PI);var w=B(l.options.zIndex,0);var h=w+(1-_/s);b(l.options,{zIndex:h,markers:{size:_*2,zIndex:h},labels:{zIndex:h+1}})}}}},formatPointValue:function(t,e){var i=t.value;return this.chartService.format.auto(e,i.x,i.y,i.size,t.category)},createAnimation:function(){},createVisual:function(){}})),Wi=(t(Yi,{tooltip:{format:"{3}"},labels:{format:"{3}"}}),N.extend({})),Ui=(b(Wi.prototype,li),_.extend({init:function(t,e){_.fn.init.call(this,e);this.aboveAxis=this.options.aboveAxis;this.color=e.color||n;this.value=t},render:function(){var t=this.options;if(!this._rendered){this._rendered=true;if(T(this.value.target)){this.target=new Wi({type:t.target.shape,background:t.target.color||this.color,opacity:t.opacity,zIndex:t.zIndex,border:t.target.border,vAlign:R,align:L});this.target.value=this.value;this.target.dataItem=this.dataItem;this.target.series=this.series;this.append(this.target)}this.createNote()}},reflow:function(t){this.render();var e=this;var i=e.options;var r=e.target;var a=e.owner;var n=i.invertAxes;var s=a.seriesValueAxis(this.options);var o=a.categorySlot(a.categoryAxis,i.categoryIx,s);var l=s.getSlot(this.value.target);var v=n?l:o;var c=n?o:l;if(r){var h=new E(v.x1,c.y1,v.x2,c.y2);r.options.height=n?h.height():i.target.line.width;r.options.width=n?i.target.line.width:h.width();r.reflow(h)}if(this.note)this.note.reflow(t);this.box=t},createVisual:function(){_.fn.createVisual.call(this);var t=this.options;var e=rt.fromRect(this.box.toRect(),{fill:{color:this.color,opacity:t.opacity},stroke:null});if(t.border.width>0)e.options.set("stroke",{color:t.border.color||this.color,width:t.border.width,dashType:t.border.dashType,opacity:B(t.border.opacity,t.opacity)});this.bodyVisual=e;y(e);this.visual.append(e)},createAnimation:function(){if(this.bodyVisual)this.animation=at.create(this.bodyVisual,this.options.animation)},createHighlight:function(t){return rt.fromRect(this.box.toRect(),t)},highlightVisual:function(){return this.bodyVisual},highlightVisualArgs:function(){return{rect:this.box.toRect(),visual:this.bodyVisual,options:this.options}},formatValue:function(t){return this.owner.formatPointValue(this,t)}})),Zi=(Ui.prototype.tooltipAnchor=Ii.prototype.tooltipAnchor,t(Ui,{border:{width:1},vertical:false,opacity:1,target:{shape:"",border:{width:0,color:"green"},line:{width:2}},tooltip:{format:"Current: {0}<br />Target: {1}"}}),b(Ui.prototype,li),b(Ui.prototype,hi),oi.extend({init:function(t,e){ji(e);oi.fn.init.call(this,t,e)},reflowCategories:function(t){var e=this.children;var i=e.length;for(var r=0;r<i;r++)e[r].reflow(t[r])},plotRange:function(t){var e=t.series;var i=this.seriesValueAxis(e);var r=this.categoryAxisCrossingValue(i);return[r,t.value.current||r]},createPoint:function(t,e){var i=e.categoryIx;var v=e.category;var r=e.series;var c=e.seriesIx;var a=this;var n=a.options;var u=a.children;var s=t.valueFields;var o=b({vertical:!n.invertAxes,overlay:r.overlay,categoryIx:i,invertAxes:n.invertAxes},r);var f=t.fields.color||r.color;o=this.evalPointOptions(o,s,v,i,r,c);if(M(r.color))f=o.color;var l=new Ui(s,o);l.color=f;var h=u[i];if(!h){h=new Vi({vertical:n.invertAxes,gap:n.gap,spacing:n.spacing,rtl:!n.invertAxes&&(this.chartService||{}).rtl});this.append(h)}h.append(l);return l},updateRange:function(t,e){var i=t.current;var r=t.target;var a=e.series.axis;var n=this.valueAxisRanges[a];if(T(i)&&!isNaN(i)&&T(r&&!isNaN(r))){n=this.valueAxisRanges[a]=n||{min:u,max:c};n.min=Math.min(n.min,i,r);n.max=Math.max(n.max,i,r)}},formatPointValue:function(t,e){return this.chartService.format.auto(e,t.value.current,t.value.target)},pointValue:function(t){return t.valueFields.current},aboveAxis:function(t){var e=t.value.current;return e>0},createAnimation:function(){var t=this;var e=this.points;this._setAnimationOptions();for(var i=0;i<e.length;i++){var r=e[i];r.options.animation=t.options.animation;r.createAnimation()}}}));function ji(t){var e=t.series;for(var i=0;i<e.length;i++){var r=e[i];var a=r.data;if(a&&!p(a[0])&&!S(a[0]))r.data=[a]}}Zi.prototype._setAnimationOptions=Li.prototype._setAnimationOptions,t(Zi,{animation:{type:Wt}});var Ki=e.extend({init:function(t,e){this.chartService=t;this.options=b({},this.options,e)},getStyle:function(t,e){var i=t.background;var r=t.border.color;if(e){var a=e.color||e.options.color;i=B(i,a);r=B(r,a)}var n=G(t.padding||{},"auto");return{backgroundColor:i,borderColor:r,font:t.font,color:t.color,opacity:t.opacity,borderWidth:l(t.border.width),paddingTop:l(n.top),paddingBottom:l(n.bottom),paddingLeft:l(n.left),paddingRight:l(n.right)}},show:function(t,e,i){t.format=e.format;var r=this.getStyle(e,i);t.style=r;var a=new ot(r.backgroundColor);if(!T(e.color)&&!a.isDark())t.className="k-chart-tooltip-inverse";this.chartService.notify(Xe,t);this.visible=true},hide:function(){if(this.chartService)this.chartService.notify(qe);this.visible=false},destroy:function(){delete this.chartService}}),Qi=(t(Ki,{border:{width:1},opacity:1}),Ki.extend({init:function(t,e,i){Ki.fn.init.call(this,t,i);this.crosshair=e;this.formatService=t.format;this.initAxisName()},initAxisName:function(){var t=this.crosshair.axis;var e=t.plotArea;var i;if(e.categoryAxis)i=t.getCategory?"categoryAxis":"valueAxis";else i=t.options.vertical?"yAxis":"xAxis";this.axisName=i},showAt:function(t){var e=this;var i=e.crosshair.axis;var r=e.options;var a=i[r.stickyMode?"getCategory":"getValue"](t);var n=a;if(r.format)n=this.formatService.auto(r.format,a);else if(i.options.type===w)n=this.formatService.auto(i.options.labels.dateFormats[i.options.baseUnit],a);this.show({point:t,anchor:this.getAnchor(),crosshair:this.crosshair,value:n,axisName:this.axisName,axisIndex:this.crosshair.axis.axisIndex},this.options)},hide:function(){this.chartService.notify(qe,{crosshair:this.crosshair,axisName:this.axisName,axisIndex:this.crosshair.axis.axisIndex})},getAnchor:function(){var t=this;var e=t.crosshair;var i=t.options;var r=i.position;var a=i.padding;var n=!e.axis.options.vertical;var s=e.line.bbox();var o,l,h;if(n){o=P;if(r===V){l=R;h=s.bottomLeft().translate(0,a)}else{l=V;h=s.topLeft().translate(0,-a)}}else{l=P;if(r===O){o=L;h=s.topLeft().translate(-a,0)}else{o=O;h=s.topRight().translate(a,0)}}return{point:h,align:{horizontal:o,vertical:l}}}})),$i=(t(Qi,{padding:10}),_.extend({init:function(t,e,i){_.fn.init.call(this,i);this.axis=e;this.stickyMode=e instanceof W;var r=this.options.tooltip;if(r.visible)this.tooltip=new Qi(t,this,b({},r,{stickyMode:this.stickyMode}))},showAt:function(t){this.point=t;this.moveLine();this.line.visible(true);if(this.tooltip)this.tooltip.showAt(t)},hide:function(){this.line.visible(false);if(this.tooltip)this.tooltip.hide()},moveLine:function(){var t=this;var e=t.axis;var i=t.point;var r=e.options.vertical;var a=this.getBox();var n=r?g:m;var s=new ht(a.x1,a.y1);var o;if(r)o=new ht(a.x2,a.y1);else o=new ht(a.x1,a.y2);if(i)if(this.stickyMode){var l=e.getSlot(e.pointCategoryIndex(i));s[n]=o[n]=l.center()[n]}else s[n]=o[n]=i[n];this.box=a;this.line.moveTo(s).lineTo(o)},getBox:function(){var t=this.axis;var e=t.pane.axes;var i=e.length;var r=t.options.vertical;var a=t.lineBox().clone();var n=r?m:g;var s;for(var o=0;o<i;o++){var l=e[o];if(l.options.vertical!==r)if(!s)s=l.lineBox().clone();else s.wrap(l.lineBox())}a[n+1]=s[n+1];a[n+2]=s[n+2];return a},createVisual:function(){_.fn.createVisual.call(this);var t=this.options;this.line=new rt({stroke:{color:t.color,width:t.width,opacity:t.opacity,dashType:t.dashType},visible:false});this.moveLine();this.visual.append(this.line)},destroy:function(){if(this.tooltip)this.tooltip.destroy();_.fn.destroy.call(this)}})),Ji=(t($i,{color:a,width:2,zIndex:-1,tooltip:{visible:false}}),_.extend({init:function(t,e){_.fn.init.call(this,t);this.pane=e},shouldClip:function(){var t=this.children;var e=t.length;for(var i=0;i<e;i++)if(t[i].options.clip===true)return true;return false},_clipBox:function(){return this.pane.chartsBox()},createVisual:function(){this.visual=new st({zIndex:0});if(this.shouldClip()){var t=this.clipBox=this._clipBox();var e=t.toRect();var i=rt.fromRect(e);y(i);this.visual.clip(i);this.unclipLabels()}},stackRoot:function(){return this},unclipLabels:function(){var t=this;var e=t.children;var i=t.clipBox;for(var r=0;r<e.length;r++){var a=e[r].points||{};var n=a.length;for(var s=0;s<n;s++){var o=a[s];if(o&&o.visible!==false&&o.overlapsBox&&o.overlapsBox(i))if(o.unclipElements)o.unclipElements();else{var l=o.label;var h=o.note;if(l&&l.options.visible){if(l.alignToClipBox)l.alignToClipBox(i);l.options.noclip=true}if(h&&h.options.visible)h.options.noclip=true}}}},destroy:function(){_.fn.destroy.call(this);delete this.parent}})),tr=(Ji.prototype.isStackRoot=true,U.extend({init:function(t){U.fn.init.call(this,t);this.id=ir();this.createTitle();this.content=new _;this.chartContainer=new Ji({},this);this.append(this.content);this.axes=[];this.charts=[]},createTitle:function(){var t=this.options.title;if(S(t))t=b({},t,{align:t.position,position:R});this.title=C.Title.buildTitle(t,this,tr.prototype.options.title)},appendAxis:function(t){this.content.append(t);this.axes.push(t);t.pane=this},appendAxisAt:function(t,e){this.content.append(t);this.axes.splice(e,0,t);t.pane=this},appendChart:function(t){if(this.chartContainer.parent!==this.content)this.content.append(this.chartContainer);this.charts.push(t);this.chartContainer.append(t);t.pane=this},empty:function(){var t=this;var e=this.parent;if(e){for(var i=0;i<this.axes.length;i++)e.removeAxis(t.axes[i]);for(var r=0;r<this.charts.length;r++)e.removeChart(t.charts[r])}this.axes=[];this.charts=[];this.content.destroy();this.content.children=[];this.chartContainer.children=[]},reflow:function(t){var e;if(z(this.children)===this.content)e=this.children.pop();U.fn.reflow.call(this,t);if(e)this.children.push(e);if(this.title)this.contentBox.y1+=this.title.box.height()},visualStyle:function(){var t=U.fn.visualStyle.call(this);t.zIndex=-10;return t},renderComplete:function(){if(this.options.visible)this.createGridLines()},stackRoot:function(){return this},clipRoot:function(){return this},createGridLines:function(){var t=this.axes;var e=t.concat(this.parent.axes);var i=[];var r=[];for(var a=0;a<t.length;a++){var n=t[a];var s=n.options.vertical;var o=s?i:r;for(var l=0;l<e.length;l++)if(o.length===0){var h=e[l];if(s!==h.options.vertical)X(o,n.createGridLines(h))}}},refresh:function(){this.visual.clear();this.content.parent=null;this.content.createGradient=this.createGradient.bind(this);this.content.renderVisual();this.content.parent=this;if(this.title)this.visual.append(this.title.visual);this.visual.append(this.content.visual);this.renderComplete();this.notifyRender()},chartsBox:function(){var t=this.axes;var v=t.length;var e=new E;for(var i=0;i<v;i++){var r=t[i];var a=r.options.vertical?g:m;var n=r.lineBox();e[a+1]=n[a+1];e[a+2]=n[a+2]}if(e.x2===0){var s=this.parent.axes;var c=s.length;for(var o=0;o<c;o++){var l=s[o];if(!l.options.vertical){var h=l.lineBox();e.x1=h.x1;e.x2=h.x2}}}return e},clipBox:function(){return this.chartContainer.clipBox},notifyRender:function(){var t=this.getService();if(t)t.notify(Ye,{pane:new ft(this),index:this.paneIndex,name:this.options.name})}})),er=1;function ir(){return"pane"+er++}function rr(t,e){if(e!==null)t.push(e)}function ar(t,e,i){var r=e.visible;if(T(r))return r;var a=t.pointVisibility;if(a)return a[i]}function nr(t){var e=t.data;var i=[];var r=0;var a=0;for(var n=0;n<e.length;n++){var s=mt.current.bindPoint(t,n);var o=s.valueFields.value;if(q(o))o=parseFloat(o);if(d(o)){s.visible=ar(t,s.fields,n)!==false;s.value=Math.abs(o);i.push(s);if(s.visible)r+=s.value;if(o!==0)a++}else i.push(null)}return{total:r,points:i,count:a}}function sr(t,e){if(t&&e)return t.toLowerCase()===e.toLowerCase();return t===e}function or(t,e){var i=[];var r=[].concat(e);for(var a=0;a<t.length;a++){var n=t[a];if(A(n.type,r))i.push(n)}return i}function lr(t,e,i){if(e===null)return e;var r="_date_"+t;var a=e[r];if(!a){a=Y(i,h(t,true)(e));e[r]=a}return a}function hr(t,e){var i=t.type;var r=e instanceof Date;return!i&&r||sr(i,w)}function vr(t){return t.length===1?t[0]:t}tr.prototype.isStackRoot=true,t(tr,{zIndex:-1,shrinkToFit:true,title:{align:O},visible:true});var cr=/area/i;function ur(t){if(t.missingValues)return t.missingValues;return cr.test(t.type)||t.stack?Dt:Ht}function fr(t,e){var i=mt.current.bindPoint(t,null,e);var r=i.valueFields;for(var a in r)if(C.convertableToNumber(r[a]))return true}function pr(t){var e=t.start;var i=t.dir;var r=t.min;var a=t.max;var n=t.getter;var s=t.hasItem;var v=t.series;var o,l;var h=e;do{h+=i;if(s(h)){l=n(h);o=fr(v,l.item)}}while(r<=h&&h<=a&&!o);if(o)return l}function dr(t,v,e,i,c){var r=v.min;var a=v.max;var n=r>0&&r<e;var u=a+1<e;if(n||u){var f=ur(t);var s,o;if(f!==Ht){if(n)s=i(r-1);if(u)o=i(a+1)}else{var l,h;if(n){l=i(r-1);h=fr(t,l.item);if(!h)s=pr({start:r,dir:-1,min:0,max:e-1,getter:i,hasItem:c,series:t});else s=l}if(u){l=i(a+1);h=fr(t,l.item);if(!h)o=pr({start:a,dir:1,min:0,max:e-1,getter:i,hasItem:c,series:t});else o=l}}if(s)t._outOfRangeMinPoint=s;if(o)t._outOfRangeMaxPoint=o}}var gr=_.extend({init:function(t,e,i){_.fn.init.call(this,e);this.initFields(t,e);this.series=t;this.initSeries();this.charts=[];this.options.legend=this.options.legend||{};this.options.legend.items=[];this.axes=[];this.crosshairs=[];this.chartService=i;this.originalOptions=e;this.createPanes();this.render();this.createCrosshairs()},initFields:function(){},initSeries:function(){var t=this.series;for(var e=0;e<t.length;e++)t[e].index=e},createPanes:function(){var t=this;var e=this.options.title||{};var i=this.options.paneDefaults;var r=this.options.panes||[];var a=Math.max(r.length,1);var n=[];var s=b({title:{color:e.color}},i);for(var o=0;o<a;o++){var l=b({},s,r[o]);if(q(l.title))l.title=b({text:l.title},s.title);var h=new tr(l);h.paneIndex=o;n.push(h);t.append(h)}this.panes=n},crosshairOptions:function(t){return t.options.crosshair},createCrosshairs:function(t){var e=this;if(t===void 0)t=this.panes;for(var i=0;i<t.length;i++){var r=t[i];for(var a=0;a<r.axes.length;a++){var n=r.axes[a];var s=e.crosshairOptions(n);if(s&&s.visible){var o=new $i(e.chartService,n,s);e.crosshairs.push(o);r.content.append(o)}}}},removeCrosshairs:function(t){var e=this.crosshairs;var i=t.axes;for(var r=e.length-1;r>=0;r--)for(var a=0;a<i.length;a++)if(e[r].axis===i[a]){e.splice(r,1);break}},hideCrosshairs:function(){var t=this.crosshairs;for(var e=0;e<t.length;e++)t[e].hide()},findPane:function(t){var e=this.panes;var i;for(var r=0;r<e.length;r++)if(e[r].options.name===t){i=e[r];break}return i||e[0]},findPointPane:function(t){var e=this.panes;var i;for(var r=0;r<e.length;r++)if(e[r].box.containsPoint(t)){i=e[r];break}return i},appendAxis:function(t){var e=this.findPane(t.options.pane);e.appendAxis(t);this.axes.push(t);t.plotArea=this},removeAxis:function(t){var e=this;var i=[];for(var r=0;r<this.axes.length;r++){var a=e.axes[r];if(t!==a)i.push(a);else a.destroy()}this.axes=i},appendChart:function(t,e){this.charts.push(t);if(e)e.appendChart(t);else this.append(t)},removeChart:function(t){var e=this;var i=[];for(var r=0;r<this.charts.length;r++){var a=e.charts[r];if(a!==t)i.push(a);else a.destroy()}this.charts=i},addToLegend:function(t){var v=t.length;var e=this.options.legend;var c=e.labels||{};var u=e.inactiveItems||{};var i=u.labels||{};var f=[];for(var r=0;r<v;r++){var a=t[r];var n=a.visible!==false;if(a.visibleInLegend===false)continue;var s=a.name;var p=n?H(c):H(i)||H(c);if(p)s=p({text:Gi(s)?s:"",series:a});var d=a._defaults;var o=a.color;if(M(o)&&d)o=d.color;var l=void 0,h=void 0;if(n){l={};h=o}else{l={color:i.color,font:i.font};h=u.markers.color}if(Gi(s)&&s!=="")f.push({text:s,labels:l,markerColor:h,series:a,active:n})}X(e.items,f)},groupAxes:function(t){var e=[];var i=[];for(var r=0;r<t.length;r++){var a=t[r].axes;for(var n=0;n<a.length;n++){var s=a[n];if(s.options.vertical)i.push(s);else e.push(s)}}return{x:e,y:i,any:e.concat(i)}},groupSeriesByPane:function(){var t=this;var e=this.series;var i={};for(var r=0;r<e.length;r++){var a=e[r];var n=t.seriesPaneName(a);if(i[n])i[n].push(a);else i[n]=[a]}return i},filterVisibleSeries:function(t){var e=[];for(var i=0;i<t.length;i++){var r=t[i];if(r.visible!==false)e.push(r)}return e},reflow:function(t){var e=this.options.plotArea;var i=this.panes;var r=G(e.margin);this.box=t.clone().unpad(r);this.reflowPanes();this.detachLabels();this.reflowAxes(i);this.reflowCharts(i)},redraw:function(t){var e=this;var i=[].concat(t);this.initSeries();var r=this.getRoot();if(r)r.cleanGradients();for(var a=0;a<i.length;a++){e.removeCrosshairs(i[a]);i[a].empty()}this.render(i);this.detachLabels();this.reflowAxes(this.panes);this.reflowCharts(i);this.createCrosshairs(i);for(var n=0;n<i.length;n++)i[n].refresh()},axisCrossingValues:function(t,e){var i=t.options;var r=[].concat(i.axisCrossingValues||i.axisCrossingValue);var a=e.length-r.length;var n=r[0]||0;for(var s=0;s<a;s++)r.push(n);return r},alignAxisTo:function(t,e,i,r){var a=t.getSlot(i,i,true);var n=t.options.reverse?2:1;var s=e.getSlot(r,r,true);var o=e.options.reverse?2:1;var l=t.box.translate(s[m+o]-a[m+n],s[g+o]-a[g+n]);if(t.pane!==e.pane)l.translate(0,t.pane.box.y1-e.pane.box.y1);t.reflow(l)},alignAxes:function(t,e){var i=this;var v=t[0];var c=e[0];var u=this.axisCrossingValues(v,e);var f=this.axisCrossingValues(c,t);var p={};var d={};var g={};var x={};for(var r=0;r<e.length;r++){var a=e[r];var m=a.pane;var n=m.id;var y=a.options.visible!==false;var s=yr(t,m)||v;var _=u;if(s!==v)_=i.axisCrossingValues(s,e);i.alignAxisTo(a,s,f[r],_[r]);if(a.options._overlap)continue;if(Z(a.lineBox().x1)===Z(s.lineBox().x1)){if(p[n])a.reflow(a.box.alignTo(p[n].box,O).translate(-a.options.margin,0));if(y)p[n]=a}if(Z(a.lineBox().x2)===Z(s.lineBox().x2)){if(!a._mirrored){a.options.labels.mirror=!a.options.labels.mirror;a._mirrored=true}i.alignAxisTo(a,s,f[r],_[r]);if(d[n])a.reflow(a.box.alignTo(d[n].box,L).translate(a.options.margin,0));if(y)d[n]=a}if(r!==0&&c.pane===a.pane){a.alignTo(c);a.reflow(a.box)}}for(var o=0;o<t.length;o++){var l=t[o];var w=l.pane;var h=w.id;var b=l.options.visible!==false;var A=yr(e,w)||c;var S=f;if(A!==c)S=i.axisCrossingValues(A,t);i.alignAxisTo(l,A,u[o],S[o]);if(l.options._overlap)continue;if(Z(l.lineBox().y1)===Z(A.lineBox().y1)){if(!l._mirrored){l.options.labels.mirror=!l.options.labels.mirror;l._mirrored=true}i.alignAxisTo(l,A,u[o],S[o]);if(g[h])l.reflow(l.box.alignTo(g[h].box,R).translate(0,-l.options.margin));if(b)g[h]=l}if(Z(l.lineBox().y2,k.COORD_PRECISION)===Z(A.lineBox().y2,k.COORD_PRECISION)){if(x[h])l.reflow(l.box.alignTo(x[h].box,V).translate(0,l.options.margin));if(b)x[h]=l}if(o!==0){l.alignTo(v);l.reflow(l.box)}}},shrinkAxisWidth:function(t){var e=this.groupAxes(t).any;var i=mr(e);var r=0;for(var a=0;a<t.length;a++){var n=t[a];if(n.axes.length>0)r=Math.max(r,i.width()-n.contentBox.width())}if(r!==0)for(var s=0;s<e.length;s++){var o=e[s];if(!o.options.vertical)o.reflow(o.box.shrink(r,0))}},shrinkAxisHeight:function(t){var e;for(var i=0;i<t.length;i++){var r=t[i];var a=r.axes;var n=Math.max(0,mr(a).height()-r.contentBox.height());if(n!==0){for(var s=0;s<a.length;s++){var o=a[s];if(o.options.vertical)o.reflow(o.box.shrink(0,n))}e=true}}return e},fitAxes:function(t){var e=this.groupAxes(t).any;var i=0;for(var r=0;r<t.length;r++){var a=t[r];var n=a.axes;var s=a.contentBox;if(n.length>0){var o=mr(n);var v=Math.max(s.y1-o.y1,s.y2-o.y2);i=Math.max(i,s.x1-o.x1);for(var l=0;l<n.length;l++){var c=n[l];c.reflow(c.box.translate(0,v))}}}for(var h=0;h<e.length;h++){var u=e[h];u.reflow(u.box.translate(i,0))}},reflowAxes:function(t){var e=this;var i=this.groupAxes(t);for(var r=0;r<t.length;r++)e.reflowPaneAxes(t[r]);if(i.x.length>0&&i.y.length>0){this.alignAxes(i.x,i.y);this.shrinkAxisWidth(t);this.autoRotateAxisLabels(i);this.alignAxes(i.x,i.y);if(this.shrinkAxisWidth(t))this.alignAxes(i.x,i.y);this.shrinkAxisHeight(t);this.alignAxes(i.x,i.y);if(this.shrinkAxisHeight(t))this.alignAxes(i.x,i.y);this.fitAxes(t)}},autoRotateAxisLabels:function(t){var e=this;var i=this;var r=i.panes;var a=wr(r);var n;for(var s=0;s<a.length;s++){var o=a[s];if(o.autoRotateLabels())n=true}if(n){for(var l=0;l<r.length;l++)e.reflowPaneAxes(r[l]);if(t.x.length>0&&t.y.length>0){this.alignAxes(t.x,t.y);this.shrinkAxisWidth(r)}}},reflowPaneAxes:function(t){var e=t.axes;var i=e.length;if(i>0)for(var r=0;r<i;r++)e[r].reflow(t.contentBox)},reflowCharts:function(t){var e=this.charts;var i=e.length;var r=this.box;for(var a=0;a<i;a++){var n=e[a].pane;if(!n||A(n,t))e[a].reflow(r)}},reflowPanes:function(){var t=this;var e=t.box;var i=t.panes;var r=i.length;var a=e.height();var v=r;var c=0;var u=e.y1;for(var n=0;n<r;n++){var s=i[n];var o=s.options.height;s.options.width=e.width();if(!s.options.height)c++;else{if(o.indexOf&&o.indexOf("%")){var f=parseInt(o,10)/100;s.options.height=f*e.height()}s.reflow(e.clone());a-=s.options.height}}for(var l=0;l<r;l++){var p=i[l];if(!p.options.height)p.options.height=a/c}for(var h=0;h<r;h++){var d=i[h];var g=e.clone().move(e.x1,u);d.reflow(g);v--;u+=d.options.height}},backgroundBox:function(){var t=this.axes;var e=t.length;var i;for(var r=0;r<e;r++){var a=t[r];for(var n=0;n<e;n++){var s=t[n];if(a.options.vertical!==s.options.vertical){var o=a.lineBox().clone().wrap(s.lineBox());if(!i)i=o;else i=i.wrap(o)}}}return i||this.box},chartsBoxes:function(){var t=this.panes;var e=[];for(var i=0;i<t.length;i++)e.push(t[i].chartsBox());return e},addBackgroundPaths:function(t){var e=this.chartsBoxes();for(var i=0;i<e.length;i++)t.paths.push(rt.fromRect(e[i].toRect()))},backgroundContainsPoint:function(t){var e=this.chartsBoxes();for(var i=0;i<e.length;i++)if(e[i].containsPoint(t))return true},createVisual:function(){_.fn.createVisual.call(this);var t=this.options.plotArea;var e=t.opacity;var i=t.background;var r=t.border;if(r===void 0)r={};if(_r(i)){i=n;e=0}var a=this._bgVisual=new it.MultiPath({fill:{color:i,opacity:e},stroke:{color:r.width?r.color:"",width:r.width,dashType:r.dashType},zIndex:-1});this.addBackgroundPaths(a);this.appendVisual(a)},pointsByCategoryIndex:function(t){var e=this.charts;var i=[];if(t!==null)for(var r=0;r<e.length;r++){var a=e[r];if(a.pane.options.name==="_navigator")continue;var n=e[r].categoryPoints[t];if(n&&n.length)for(var s=0;s<n.length;s++){var o=n[s];if(o&&T(o.value)&&o.value!==null)i.push(o)}}return i},pointsBySeriesIndex:function(e){return this.filterPoints(function(t){return t.series.index===e})},pointsBySeriesName:function(e){return this.filterPoints(function(t){return t.series.name===e})},filterPoints:function(t){var e=this.charts;var i=[];for(var r=0;r<e.length;r++){var a=e[r];var n=a.points;for(var s=0;s<n.length;s++){var o=n[s];if(o&&o.visible!==false&&t(o))i.push(o)}}return i},findPoint:function(t){var e=this.charts;for(var i=0;i<e.length;i++){var r=e[i];var a=r.points;for(var n=0;n<a.length;n++){var s=a[n];if(s&&s.visible!==false&&t(s))return s}}},paneByPoint:function(t){var e=this.panes;for(var i=0;i<e.length;i++){var r=e[i];if(r.box.containsPoint(t))return r}},detachLabels:function(){var t=this.groupAxes(this.panes);var e=t.x;var i=t.y;this.detachAxisGroupLabels(i,e);this.detachAxisGroupLabels(e,i)},detachAxisGroupLabels:function(t,e){var i=this;var r=0;for(var a=0;a<t.length;a++){var n=t[a];var s=n.pane;var o=yr(e,s)||e[0];var l=a+r;var h=i.createLabelAxis(n,l,o);if(h){r++;var v=s.axes.indexOf(n)+r;s.appendAxisAt(h,v)}}},createLabelAxis:function(t,e,i){var r=t.options.labels;var a=r.position;var v=a!==k.END&&a!==k.START;var c=r.visible;if(v||c===false)return null;var n=this.groupAxes(this.panes);var u=i.options.vertical?n.x:n.y;var s=this.axisCrossingValues(i,u);var f=a===k.END;var o=i.range();var l=f?o.max:o.min;var p=j(s[e],o.min,o.max);if(p-l===0)return null;s.splice(e+1,0,l);i.options.axisCrossingValues=s;var h=t.clone();t.clear();h.options.name=undefined;h.options.line.visible=false;h.options.crosshair=undefined;h.options.notes=undefined;h.options.plotBands=undefined;return h}});function xr(e){return!e.pane.axes.some(function(t){return t.options.vertical===e.options.vertical&&t!==e&&t.options.visible!==false})}function mr(t){var e=t.length;var i;for(var r=0;r<e;r++){var a=t[r];var n=a.options.visible!==false;if(n||xr(a)){var s=n?a.contentBox():a.lineBox();if(!i)i=s.clone();else i.wrap(s)}}return i||new E}function yr(t,e){for(var i=0;i<t.length;i++){var r=t[i];if(r&&r.pane===e)return r}}function _r(t){return t===""||t===null||t==="none"||t==="transparent"||!T(t)}var wr=function(t){return t.reduce(function(t,e){return t.concat(e.axes)},[])},br=(t(gr,{series:[],plotArea:{margin:{}},background:"",border:{color:a,width:0},paneDefaults:{title:{}},legend:{inactiveItems:{labels:{color:"#919191"},markers:{color:"#919191"}}}}),{hover:function(t,e){this._dispatchEvent(t,e,Re)},click:function(t,e){this._dispatchEvent(t,e,Ee)}}),Ar=e.extend({init:function(t,e,i){var r=e.canonicalFields(t);var a=e.valueFields(t);var n=e.sourceFields(t,r);var v=this._seriesFields=[];var c=i.query(t.type);var s=t.aggregate||c;this._series=t;this._binder=e;for(var o=0;o<r.length;o++){var l=r[o];var h=void 0;if(S(s))h=s[l];else if(o===0||A(l,a))h=s;else break;if(h)v.push({canonicalName:l,name:n[o],transform:M(h)?h:gt[h]})}},aggregatePoints:function(t,v){var c=this;var e=this;var u=e._series;var i=e._seriesFields;var r=this._bindPoints(t||[]);var a=r.dataItems[0];var n={};if(a&&!d(a)&&!p(a)){var s=function(){};s.prototype=a;n=new s}for(var o=0;o<i.length;o++){var l=i[o];var f=c._bindField(r.values,l.canonicalName);var h=l.transform(f,u,r.dataItems,v);if(h!==null&&S(h)&&!T(h.length)&&!(h instanceof Date)){n=h;break}else if(T(h))Sr(l.name,n,h)}return n},_bindPoints:function(t){var e=this;var i=e._binder;var r=e._series;var a=[];var n=[];for(var s=0;s<t.length;s++){var o=t[s];a.push(i.bindPoint(r,o));n.push(r.data[o])}return{values:a,dataItems:n}},_bindField:function(t,e){var i=[];var r=t.length;for(var a=0;a<r;a++){var n=t[a];var s=n.valueFields;var o=void 0;if(T(s[e]))o=s[e];else o=n.fields[e];i.push(o)}return i}});function Sr(t,e,i){var r=e;var a=t;if(t.indexOf(".")>-1){var n=t.split(".");while(n.length>1){a=n.shift();if(!T(r[a]))r[a]={};r=r[a]}a=n.shift()}r[a]=i}var Cr=e.extend({init:function(){this._defaults={}},register:function(t,e){var i=this;for(var r=0;r<t.length;r++)i._defaults[t[r]]=e},query:function(t){return this._defaults[t]}}),kr=(Cr.current=new Cr,Ii.extend({createLabel:function(){var t=this.options.labels;var e=b({},t,t.from);var i=b({},t,t.to);if(e.visible){this.labelFrom=this._createLabel(e);this.append(this.labelFrom)}if(i.visible){this.labelTo=this._createLabel(i);this.append(this.labelTo)}},_createLabel:function(t){var e=H(t);var i=this.pointData();var r;if(e)r=e(i);else r=this.formatValue(t.format);return new ki(r,b({vertical:this.options.vertical},t),i)},reflow:function(t){this.render();var e=this;var i=e.labelFrom;var r=e.labelTo;var a=e.value;this.box=t;if(i){i.options.aboveAxis=a.from>a.to;i.reflow(t)}if(r){r.options.aboveAxis=a.to>a.from;r.reflow(t)}if(this.note)this.note.reflow(t)}})),Pr=(kr.prototype.defaults=b({},kr.prototype.defaults,{labels:{format:"{0} - {1}"},tooltip:{format:"{1}"}}),Li.extend({pointType:function(){return kr},pointValue:function(t){return t.valueFields},formatPointValue:function(t,e){if(t.value.from===null&&t.value.to===null)return"";return this.chartService.format.auto(e,t.value.from,t.value.to)},plotRange:function(t){if(!t)return 0;return[t.value.from,t.value.to]},updateRange:function(t,e){var i=e.series.axis;var r=t.from;var a=t.to;var n=this.valueAxisRanges[i];if(t!==null&&d(r)&&d(a)){n=this.valueAxisRanges[i]=n||{min:u,max:c};n.min=Math.min(n.min,r);n.max=Math.max(n.max,r);n.min=Math.min(n.min,a);n.max=Math.max(n.max,a)}},aboveAxis:function(t){var e=t.value;return e.from<e.to}})),Tr=(Pr.prototype.plotLimits=oi.prototype.plotLimits,vi.extend({aliasFor:function(){return this.parent}})),Ir="auto",Er="{0}",Rr="{1}",Vr=_.extend({init:function(t,e){_.fn.init.call(this);this.value=t;this.options=e;this.aboveAxis=B(this.options.aboveAxis,true);this.tooltipTracking=true;this.initLabelsFormat()},render:function(){if(this._rendered)return;this._rendered=true;var t=this.options;var e=t.markers;var i=t.labels;var r=this.value;var a=this.fromPoint=new Tr(r,b({},this.options,{labels:i.from,markers:e.from}));var n=this.toPoint=new Tr(r,b({},this.options,{labels:i.to,markers:e.to}));this.copyFields(a);this.copyFields(n);this.append(a);this.append(n)},reflow:function(t){this.render();var e=t.from;var i=t.to;this.positionLabels(e,i);this.fromPoint.reflow(e);this.toPoint.reflow(i);this.box=this.fromPoint.markerBox().clone().wrap(this.toPoint.markerBox())},createHighlight:function(){var t=new st;t.append(this.fromPoint.createHighlight());t.append(this.toPoint.createHighlight());return t},highlightVisual:function(){return this.visual},highlightVisualArgs:function(){return{options:this.options,from:this.fromPoint.highlightVisualArgs(),to:this.toPoint.highlightVisualArgs()}},tooltipAnchor:function(){var t=this.owner.pane.clipBox();var e=!t||t.overlaps(this.box);if(e){var i=this.box;var r=i.center();var a=O;var n,s,o;if(this.options.vertical){n=r.x;s=i.y1-It;o=V}else{n=i.x2+It;s=r.y;o=P}return{point:new I(n,s),align:{horizontal:a,vertical:o}}}},formatValue:function(t){return this.owner.formatPointValue(this,t)},overlapsBox:function(t){return this.box.overlaps(t)},unclipElements:function(){this.fromPoint.unclipElements();this.toPoint.unclipElements()},initLabelsFormat:function(){var t=this.options.labels;if(!t.format){if(!t.from||!t.from.format)t.from=x.extend({},t.from,{format:Er});if(!t.to||!t.to.format)t.to=x.extend({},t.to,{format:Rr})}},positionLabels:function(t,e){var i=this.options;var r=i.labels;var a=i.vertical;if(r.position===Ir){var n,s;if(a)if(e.y1<=t.y1){s=Nt;n=Gt}else{s=Gt;n=Nt}else if(e.x1<=t.x1){s=O;n=L}else{s=L;n=O}if(!r.from||!r.from.position)this.fromPoint.options.labels.position=n;if(!r.to||!r.to.position)this.toPoint.options.labels.position=s}},copyFields:function(t){t.dataItem=this.dataItem;t.category=this.category;t.series=this.series;t.color=this.color;t.owner=this.owner}}),Or=(b(Vr.prototype,li),b(Vr.prototype,hi),Vr.prototype.defaults={markers:{visible:false,background:n,size:zt,type:f,border:{width:2},opacity:1},labels:{visible:false,margin:G(3),padding:G(4),animation:{type:kt,delay:Ct},position:Ir},notes:{label:{}},highlight:{markers:{border:{color:n,width:2}},zIndex:k.HIGHLIGHT_ZINDEX},tooltip:{format:"{0} - {1}"}},wi.extend({createStrokeSegments:function(){return this.segmentsFromPoints(this.toGeometryPoints(this.toPoints()))},stackSegments:function(){var t=this.fromSegments;if(!this.fromSegments)t=this.fromSegments=this.segmentsFromPoints(this.toGeometryPoints(this.fromPoints().reverse()));return t},createStroke:function(t){var e=new rt(t);var i=new rt(t);e.segments.push.apply(e.segments,this.strokeSegments());i.segments.push.apply(i.segments,this.stackSegments());this.visual.append(e);this.visual.append(i)},hasStackSegment:function(){return true},fromPoints:function(){return this.linePoints.map(function(t){return t.fromPoint})},toPoints:function(){return this.linePoints.map(function(t){return t.toPoint})}})),Lr=Or.extend({createStrokeSegments:function(){return this.createCurveSegments(this.toPoints())},stackSegments:function(){var t=this.fromSegments;if(!this.fromSegments)t=this.fromSegments=this.createCurveSegments(this.fromPoints().reverse());return t},createCurveSegments:function(t){var e=new o;return e.process(this.toGeometryPoints(t))}}),Mr=Or.extend({createStrokeSegments:function(){return this.segmentsFromPoints(this.calculateStepPoints(this.toPoints()))},stackSegments:function(){var t=this.fromSegments;if(!this.fromSegments){t=this.fromSegments=this.segmentsFromPoints(this.calculateStepPoints(this.fromPoints()));t.reverse()}return t}}),Br=(b(Mr.prototype,ui),oi.extend({render:function(){oi.fn.render.call(this);this.renderSegments()},pointType:function(){return Vr},createPoint:function(t,e){var i=e.categoryIx;var r=e.category;var a=e.series;var n=e.seriesIx;var s=t.valueFields;if(!Gi(s.from)&&!Gi(s.to))if(this.seriesMissingValues(a)===Dt)s={from:0,to:0};else return null;var o=this.pointOptions(a,n);o=this.evalPointOptions(o,s,r,i,a,n);var l=t.fields.color||a.color;if(M(a.color))l=o.color;var h=new Vr(s,o);h.color=l;this.append(h);return h},createSegment:function(t,e,i){var r=(e.line||{}).style;var a;if(r==="smooth")a=Lr;else if(r==="step")a=Mr;else a=Or;return new a(t,e,i)},plotRange:function(t,e){if(!t)return[e,e];return[t.value.from,t.value.to]},valueSlot:function(t,e){var i=t.getSlot(e[0],e[0],!this.options.clip);var r=t.getSlot(e[1],e[1],!this.options.clip);if(i&&r)return{from:i,to:r}},pointSlot:function(t,e){var i=e.from;var r=e.to;var a,n;if(this.options.invertAxes){a=new E(i.x1,t.y1,i.x2,t.y2);n=new E(r.x1,t.y1,r.x2,t.y2)}else{a=new E(t.x1,i.y1,t.x2,i.y2);n=new E(t.x1,r.y1,t.x2,r.y2)}return{from:a,to:n}},addValue:function(t,e){var i=t.valueFields;if(!d(i.from))i.from=i.to;if(!d(i.to))i.to=i.from;oi.fn.addValue.call(this,t,e)},updateRange:function(t,e){if(t!==null&&d(t.from)&&d(t.to)){var i=e.series.axis;var r=this.valueAxisRanges[i]=this.valueAxisRanges[i]||{min:u,max:c};var a=t.from;var n=t.to;r.min=Math.min(r.min,a,n);r.max=Math.max(r.max,a,n)}},formatPointValue:function(t,e){var i=t.value;return this.chartService.format.auto(e,i.from,i.to)},animationPoints:function(){var t=this.points;var e=[];for(var i=0;i<t.length;i++){var r=t[i];if(r){e.push((r.fromPoint||{}).marker);e.push((r.toPoint||{}).marker)}}return e.concat(this._segments)}})),zr=(b(Br.prototype,gi,yi),Mi.extend({reflow:function(v){var t=this;var c=t.options;var e=t.value;var u=t.owner;var i=u.seriesValueAxis(c);var r=[];var a=[];var n=[];var s=i.getSlot(e.low,e.high);var o=i.getSlot(e.open,e.open);var l=i.getSlot(e.close,e.close);o.x1=l.x1=s.x1=v.x1;o.x2=l.x2=s.x2=v.x2;var h=s.center().x;r.push([o.x1,o.y1]);r.push([h,o.y1]);a.push([h,l.y1]);a.push([l.x2,l.y1]);n.push([h,s.y1]);n.push([h,s.y2]);this.lines=[r,a,n];this.box=s.clone().wrap(o.clone().wrap(l));this.reflowNote()},createBody:function(){}})),Dr=zi.extend({pointType:function(){return zr}}),Hr=_.extend({init:function(t,e,i){_.fn.init.call(this);this.from=t;this.to=e;this.series=i},linePoints:function(){var t=this.from;var e=this;var i=e.from.box;var r=e.to.box;var a=[];if(t.isVertical){var n=t.aboveAxis?i.y1:i.y2;a.push([i.x1,n],[r.x2,n])}else{var s=t.aboveAxis?i.x2:i.x1;a.push([s,i.y1],[s,r.y2])}return a},createVisual:function(){_.fn.createVisual.call(this);var t=this.series.line||{};var e=rt.fromPoints(this.linePoints(),{stroke:{color:t.color,width:t.width,opacity:t.opacity,dashType:t.dashType}});y(e);this.visual.append(e)}}),Fr=(t(Hr,{animation:{type:kt,delay:Ct}}),Li.extend({render:function(){Li.fn.render.call(this);this.createSegments()},traverseDataPoints:function(v){var c=this;var t=this.options.series;var u=si(t);var f=!this.options.invertAxes;for(var e=0;e<t.length;e++){var i=t[e];var r=0;var a=0;for(var n=0;n<u;n++){var s=mt.current.bindPoint(i,n);var o=s.valueFields.value;var p=s.fields.summary;var l=r;var h=void 0;if(p)if(p.toLowerCase()==="total"){s.valueFields.value=r;l=0;h=r}else{s.valueFields.value=a;h=l-a;a=0}else if(d(o)){a+=o;r+=o;h=r}v(s,{category:c.categoryAxis.categoryAt(n),categoryIx:n,series:i,seriesIx:e,total:r,runningTotal:a,from:l,to:h,isVertical:f})}}},updateRange:function(t,e){Li.fn.updateRange.call(this,{value:e.to},e)},aboveAxis:function(t){return t.value>=0},plotRange:function(t){return[t.from,t.to]},createSegments:function(){var t=this;var e=this.options.series;var i=this.seriesPoints;var r=this.segments=[];for(var a=0;a<e.length;a++){var v=e[a];var n=i[a];if(n){var s=void 0;for(var o=0;o<n.length;o++){var l=n[o];if(l&&s){var h=new Hr(s,l,v);r.push(h);t.append(h)}s=l}}}}})),Nr=[Yt,ge,ce,_e],Gr=[ie,ye].concat(Nr),Xr=gr.extend({initFields:function(t){var e=this;this.namedCategoryAxes={};this.namedValueAxes={};this.valueAxisRangeTracker=new Ci;if(t.length>0){this.invertAxes=A(t[0].type,[Wt,jt,ye,ge,_e,ue,ee,xe]);for(var i=0;i<t.length;i++){var r=t[i].stack;if(r&&r.type==="100%"){e.stack100=true;break}}}},render:function(t){if(t===void 0)t=this.panes;this.createCategoryAxes(t);this.aggregateCategories(t);this.createCategoryAxesLabels(t);this.createCharts(t);this.createValueAxes(t)},removeAxis:function(t){var e=t.options.name;gr.fn.removeAxis.call(this,t);if(t instanceof W)delete this.namedCategoryAxes[e];else{this.valueAxisRangeTracker.reset(e);delete this.namedValueAxes[e]}if(t===this.categoryAxis)delete this.categoryAxis;if(t===this.valueAxis)delete this.valueAxis},createCharts:function(t){var e=this;var i=this.groupSeriesByPane();for(var r=0;r<t.length;r++){var a=t[r];var n=i[a.options.name||"default"]||[];e.addToLegend(n);var s=e.filterVisibleSeries(n);if(!s)continue;var o=e.groupSeriesByCategoryAxis(s);for(var l=0;l<o.length;l++)e.createChartGroup(o[l],a)}},createChartGroup:function(t,e){this.createAreaChart(or(t,[Yt,ge]),e);this.createRangeAreaChart(or(t,[ce,_e]),e);this.createBarChart(or(t,[Qt,Wt]),e);this.createRangeBarChart(or(t,[fe,ue]),e);this.createBulletChart(or(t,[jt,me]),e);this.createCandlestickChart(or(t,Kt),e);this.createBoxPlotChart(or(t,[Ut,xe]),e);this.createOHLCChart(or(t,re),e);this.createWaterfallChart(or(t,[we,ee]),e);this.createLineChart(or(t,[ie,ye]),e)},aggregateCategories:function(t){var e=this;var i=this.srcSeries||this.series;var r=[];this._currentPointsCache={};this._seriesPointsCache=this._seriesPointsCache||{};for(var a=0;a<i.length;a++){var n=i[a];var s=e.seriesCategoryAxis(n);var o=e.findPane(s.options.pane);var l=sr(s.options.type,w);if((l||n.categoryField)&&A(o,t))n=e.aggregateSeries(n,s);else n=e.filterSeries(n,s);r.push(n)}this._seriesPointsCache=this._currentPointsCache;this._currentPointsCache=null;this.srcSeries=i;this.series=r},filterSeries:function(e,i){var t=(e.data||{}).length;i._seriesMax=Math.max(i._seriesMax||0,t);if(!(d(i.options.min)||d(i.options.max)))return e;var r=i.currentRangeIndices();var a=A(e.type,Gr);var n=b({},e);n.data=(n.data||[]).slice(r.min,r.max+1);if(a)dr(n,r,t,function(t){return{item:e.data[t],category:i.categoryAt(t,true),categoryIx:t-r.min}},function(t){return T(e.data[t])});return n},clearSeriesPointsCache:function(){this._seriesPointsCache={}},seriesSourcePoints:function(t,e){var v=this;var i=t.index+";"+e.categoriesHash();if(this._seriesPointsCache[i]){this._currentPointsCache[i]=this._seriesPointsCache[i];return this._seriesPointsCache[i]}var r=e.options;var c=r.srcCategories;var a=sr(r.type,w);var n=t.data;var u=a?lr:xt;var s=[];if(!a)e.mapCategories();for(var o=0;o<n.length;o++){var l=void 0;if(t.categoryField)l=u(t.categoryField,n[o],v.chartService.intl);else l=c[o];if(T(l)&&l!==null){var h=e.totalIndex(l);s[h]=s[h]||{items:[],category:l};s[h].items.push(o)}}this._currentPointsCache[i]=s;return s},aggregateSeries:function(t,a){var e=t.data;if(!e.length)return t;var n=this.seriesSourcePoints(t,a);var i=b({},t);var v=new Ar(b({},t),mt.current,Cr.current);var c=i.data=[];var r=a.options.dataItems||[];var s=a.currentRangeIndices();var o=function(t){var e=t-s.min;var i=n[t];if(!i)i=n[t]={};i.categoryIx=e;if(!i.item){var r=a.categoryAt(t,true);i.category=r;i.item=v.aggregatePoints(i.items,r)}return i};for(var l=s.min;l<=s.max;l++){var h=o(l);c[h.categoryIx]=h.item;if(h.items&&h.items.length)r[h.categoryIx]=h.item}if(A(i.type,Gr))dr(i,s,a.totalCount(),o,function(t){return n[t]});a.options.dataItems=r;return i},appendChart:function(t,e){var i=t.options.series;var r=this.seriesCategoryAxis(i[0]);var a=r.options.categories;var n=Math.max(0,si(i)-a.length);if(n>0){a=r.options.categories=r.options.categories.slice(0);while(n--)a.push("")}this.valueAxisRangeTracker.update(t.valueAxisRanges);gr.fn.appendChart.call(this,t,e)},seriesPaneName:function(t){var e=this.options;var i=t.axis;var r=[].concat(e.valueAxis);var a=K(r,function(t){return t.name===i})[0];var n=e.panes||[{}];var s=(n[0]||{}).name||"default";var o=(a||{}).pane||s;return o},seriesCategoryAxis:function(t){var e=t.categoryAxis;var i=e?this.namedCategoryAxes[e]:this.categoryAxis;if(!i)throw new Error("Unable to locate category axis with name "+e);return i},stackableChartOptions:function(t,e){var i=t.stack;var r=i&&i.type==="100%";var a=e.options.clip;return{isStacked:i,isStacked100:r,clip:a}},groupSeriesByCategoryAxis:function(t){var e=[];var i={};for(var r=0;r<t.length;r++){var a=t[r].categoryAxis||"$$default$$";if(!i.hasOwnProperty(a)){i[a]=true;e.push(a)}}var n=[];for(var s=0;s<e.length;s++){var o=e[s];var l=Yr(t,o,s);if(l.length===0)continue;n.push(l)}return n},createBarChart:function(t,e){if(t.length===0)return;var i=t[0];var r=new Li(this,x.extend({series:t,invertAxes:this.invertAxes,gap:i.gap,spacing:i.spacing},this.stackableChartOptions(i,e)));this.appendChart(r,e)},createRangeBarChart:function(t,e){if(t.length===0)return;var i=t[0];var r=new Pr(this,{series:t,invertAxes:this.invertAxes,gap:i.gap,spacing:i.spacing});this.appendChart(r,e)},createBulletChart:function(t,e){if(t.length===0)return;var i=t[0];var r=new Zi(this,{series:t,invertAxes:this.invertAxes,gap:i.gap,spacing:i.spacing,clip:e.options.clip});this.appendChart(r,e)},createLineChart:function(t,e){if(t.length===0)return;var i=t[0];var r=new _i(this,x.extend({invertAxes:this.invertAxes,series:t},this.stackableChartOptions(i,e)));this.appendChart(r,e)},createAreaChart:function(t,e){if(t.length===0)return;var i=t[0];var r=new Si(this,x.extend({invertAxes:this.invertAxes,series:t},this.stackableChartOptions(i,e)));this.appendChart(r,e)},createRangeAreaChart:function(t,e){if(t.length===0)return;var i=new Br(this,{invertAxes:this.invertAxes,series:t,clip:e.options.clip});this.appendChart(i,e)},createOHLCChart:function(t,e){if(t.length===0)return;var i=t[0];var r=new Dr(this,{invertAxes:this.invertAxes,gap:i.gap,series:t,spacing:i.spacing,clip:e.options.clip});this.appendChart(r,e)},createCandlestickChart:function(t,e){if(t.length===0)return;var i=t[0];var r=new zi(this,{invertAxes:this.invertAxes,gap:i.gap,series:t,spacing:i.spacing,clip:e.options.clip});this.appendChart(r,e)},createBoxPlotChart:function(t,e){if(t.length===0)return;var i=t[0];var r=new Fi(this,{invertAxes:this.invertAxes,gap:i.gap,series:t,spacing:i.spacing,clip:e.options.clip});this.appendChart(r,e)},createWaterfallChart:function(t,e){if(t.length===0)return;var i=t[0];var r=new Fr(this,{series:t,invertAxes:this.invertAxes,gap:i.gap,spacing:i.spacing});this.appendChart(r,e)},axisRequiresRounding:function(t,e){var i=this;var r=or(this.series,be);for(var a=0;a<this.series.length;a++){var n=i.series[a];if(A(n.type,Nr)){var s=n.line;if(s&&s.style===qt)r.push(n)}}for(var o=0;o<r.length;o++){var l=r[o].categoryAxis||"";if(l===t||!l&&e===0)return true}},aggregatedAxis:function(t,e){var i=this.series;for(var r=0;r<i.length;r++){var a=i[r].categoryAxis||"";if((a===t||!a&&e===0)&&i[r].categoryField)return true}},createCategoryAxesLabels:function(){var t=this.axes;for(var e=0;e<t.length;e++)if(t[e]instanceof W)t[e].createLabels()},createCategoryAxes:function(v){var t=this;var e=this.invertAxes;var i=[].concat(this.options.categoryAxis);var r=[];for(var a=0;a<i.length;a++){var n=i[a];var c=t.findPane(n.pane);if(A(c,v)){var s=n.name;var o=n.categories;if(o===void 0)o=[];n=b({vertical:e,reverse:!e&&t.chartService.rtl,axisCrossingValue:e?u:0},n);if(!T(n.justified))n.justified=t.isJustified();if(t.axisRequiresRounding(s,a))n.justified=false;var l=void 0;if(hr(n,o[0]))l=new C.DateCategoryAxis(n,t.chartService);else l=new W(n,t.chartService);i[a].categories=l.options.srcCategories;if(s){if(t.namedCategoryAxes[s])throw new Error("Category axis with name "+s+" is already defined");t.namedCategoryAxes[s]=l}l.axisIndex=a;r.push(l);t.appendAxis(l)}}var h=this.categoryAxis||r[0];this.categoryAxis=h;if(e)this.axisY=h;else this.axisX=h},isJustified:function(){var t=this.series;for(var e=0;e<t.length;e++){var i=t[e];if(!A(i.type,Nr))return false}return true},createValueAxes:function(v){var t=this;var c=this.valueAxisRangeTracker;var e=c.query();var u=[].concat(this.options.valueAxis);var i=this.invertAxes;var r={vertical:!i,reverse:i&&this.chartService.rtl};var f=[];if(this.stack100){r.roundToMajorUnit=false;r.labels={format:"P0"}}for(var a=0;a<u.length;a++){var n=u[a];var p=t.findPane(n.pane);if(A(p,v)){var s=n.name;var d=sr(n.type,We)?{min:.1,max:1}:{min:0,max:1};var o=c.query(s)||e||d;if(a===0&&o&&e){o.min=Math.min(o.min,e.min);o.max=Math.max(o.max,e.max)}var l=void 0;if(sr(n.type,We))l=C.LogarithmicAxis;else l=C.NumericAxis;var h=new l(o.min,o.max,b({},r,n),t.chartService);if(s){if(t.namedValueAxes[s])throw new Error("Value axis with name "+s+" is already defined");t.namedValueAxes[s]=h}h.axisIndex=a;f.push(h);t.appendAxis(h)}}var g=this.valueAxis||f[0];this.valueAxis=g;if(i)this.axisX=g;else this.axisY=g},_dispatchEvent:function(t,e,v){var i=t._eventCoordinates(e);var r=new I(i.x,i.y);var a=this.pointPane(r);var n=[];var s=[];if(!a)return;var o=a.axes;for(var l=0;l<o.length;l++){var h=o[l];if(h.getValue)rr(s,h.getValue(r));else rr(n,h.getCategory(r))}if(n.length===0)rr(n,this.categoryAxis.getCategory(r));if(n.length>0&&s.length>0)t.trigger(v,{element:D(e),originalEvent:e,category:vr(n),value:vr(s)})},pointPane:function(t){var e=this.panes;for(var i=0;i<e.length;i++){var r=e[i];if(r.contentBox.containsPoint(t))return r}},updateAxisOptions:function(t,e){qr(this.options,t,e);qr(this.originalOptions,t,e)}});function qr(t,e,i){var r=e instanceof W?[].concat(t.categoryAxis):[].concat(t.valueAxis);b(r[e.axisIndex],i)}function Yr(t,e,i){return K(t,function(t){return i===0&&!t.categoryAxis||t.categoryAxis===e})}t(Xr,{categoryAxis:{},valueAxis:{}}),b(Xr.prototype,br);var Wr=e.extend({init:function(){this._points=[]},destroy:function(){this._points=[]},show:function(t,e){var i=this;var r=[].concat(t);this.hide();for(var a=0;a<r.length;a++){var n=r[a];if(n&&n.toggleHighlight&&n.hasHighlight()){i.togglePointHighlight(n,true,e);i._points.push(n)}}},togglePointHighlight:function(t,e,i){var r=(t.options.highlight||{}).toggle;if(r){var a={category:t.category,series:t.series,dataItem:t.dataItem,value:t.value,stackValue:t.stackValue,preventDefault:Ur,visual:t.highlightVisual(),show:e};r(a);if(!a._defaultPrevented)t.toggleHighlight(e,i)}else t.toggleHighlight(e,i)},hide:function(){var t=this;var e=this._points;while(e.length)t.togglePointHighlight(e.pop(),false)},isHighlighted:function(t){var e=this._points;for(var i=0;i<e.length;i++){var r=e[i];if(t===r)return true}return false}});function Ur(){this._defaultPrevented=true}function Zr(t,e){var i=(e||"").toLowerCase();var r=t.event;var a=i==="none"&&!(r.ctrlKey||r.shiftKey||r.altKey)||r[i+"Key"];return a}function jr(t){var e={};for(var i=0;i<t.length;i++){var r=t[i];if(r.axis.options.name)e[r.axis.options.name]={min:r.range.min,max:r.range.max}}return e}var Kr=e.extend({init:function(t,e){this.plotArea=t;this.options=b({},this.options,e)},start:function(t){this._active=Zr(t,this.options.key);return this._active},move:function(t){if(this._active){var e=this.axisRanges=this._panAxes(t,m).concat(this._panAxes(t,g));if(e.length){this.axisRanges=e;return jr(e)}}},end:function(){var t=this._active;this._active=false;return t},pan:function(){var t=this;var e=t.plotArea;var i=t.axisRanges;if(i.length){for(var r=0;r<i.length;r++){var a=i[r];e.updateAxisOptions(a.axis,a.range)}e.redraw(e.panes)}},destroy:function(){delete this.plotArea},_panAxes:function(t,e){var i=this.plotArea;var r=-t[e].delta;var a=(this.options.lock||"").toLowerCase();var n=[];if(r!==0&&(a||"").toLowerCase()!==e){var s=i.axes;for(var o=0;o<s.length;o++){var l=s[o];if(e===m&&!l.options.vertical||e===g&&l.options.vertical){var h=l.pan(r);if(h){h.limitRange=true;n.push({axis:l,range:h})}}}}return n}}),Qr=(Kr.prototype.options={key:"none",lock:"none"},e.extend({init:function(t,e){this.chart=t;this.options=b({},this.options,e);this.createElement()},createElement:function(){var t=this._marquee=document.createElement("div");t.className="k-marquee";var e=document.createElement("div");e.className="k-marquee-color";t.appendChild(e)},removeElement:function(){if(this._marquee.parentNode)this._marquee.parentNode.removeChild(this._marquee)},setStyles:function(t){Q(this._marquee,t)},start:function(t){if(Zr(t,this.options.key)){var e=this.chart;var i=e._eventCoordinates(t);var r=this._zoomPane=e._plotArea.paneByPoint(i);var a=r?r.chartsBox().clone():null;if(r&&a){var n=this._elementOffset();a.translate(n.left,n.top);this._zoomPaneClipBox=a;document.body.appendChild(this._marquee);this.setStyles({left:t.pageX+1,top:t.pageY+1,width:0,height:0});return true}}return false},_elementOffset:function(){var t=this.chart.element;var e=Q(t,["paddingLeft","paddingTop"]);var i=e.paddingLeft;var r=e.paddingTop;var a=C.elementOffset(t);return{left:i+a.left,top:r+a.top}},move:function(t){var e=this._zoomPane;if(e)this.setStyles(this._selectionPosition(t))},end:function(t){var e=this._zoomPane;if(e){var i=this._elementOffset();var r=this._selectionPosition(t);r.left-=i.left;r.top-=i.top;var a={x:r.left,y:r.top};var n={x:r.left+r.width,y:r.top+r.height};this._updateAxisRanges(a,n);this.removeElement();delete this._zoomPane;return jr(this.axisRanges)}},zoom:function(){var t=this.axisRanges;if(t&&t.length){var e=this.chart._plotArea;for(var i=0;i<t.length;i++){var r=t[i];e.updateAxisOptions(r.axis,r.range)}e.redraw(e.panes)}},destroy:function(){this.removeElement();delete this._marquee;delete this.chart},_updateAxisRanges:function(t,e){var i=(this.options.lock||"").toLowerCase();var r=[];var a=this._zoomPane.axes;for(var n=0;n<a.length;n++){var s=a[n];var o=s.options.vertical;if(!(i===m&&!o)&&!(i===g&&o)&&T(s.axisIndex)){var l=s.pointsRange(t,e);if(l)r.push({axis:s,range:l})}}this.axisRanges=r},_selectionPosition:function(t){var e=this._zoomPaneClipBox;var i={x:t.x.startLocation,y:t.y.startLocation};var r=t.x.location;var a=t.y.location;var n=(this.options.lock||"").toLowerCase();var s=Math.min(i.x,r);var o=Math.min(i.y,a);var l=Math.abs(i.x-r);var h=Math.abs(i.y-a);if(n===m){s=e.x1;l=e.width()}if(n===g){o=e.y1;h=e.height()}if(r>e.x2)l=e.x2-i.x;if(r<e.x1)l=i.x-e.x1;if(a>e.y2)h=e.y2-i.y;if(a<e.y1)h=i.y-e.y1;return{left:Math.max(s,e.x1),top:Math.max(o,e.y1),width:l,height:h}}}));Qr.prototype.options={key:"shift",lock:"none"};var $r,Jr=it.util.limitValue,ta=.01,ea=.9,ia=.3,ra=e.extend({init:function(t,e){this.chart=t;this.options=b({rate:ia},this.options,e)},updateRanges:function(t,e){var i=this;var r=(this.options.lock||"").toLowerCase();var a=[];var n=this.chart._plotArea.axes;for(var s=0;s<n.length;s++){var o=n[s];var l=o.options.vertical;if(!(r===m&&!l)&&!(r===g&&l)&&o.zoomRange){var v=Jr(i.options.rate,ta,ea);var h=o.zoomRange(-t*v,e);if(h)a.push({axis:o,range:h})}}this.axisRanges=a;return jr(a)},zoom:function(){var t=this.axisRanges;var e=this.chart._plotArea;if(t&&t.length&&e.updateAxisOptions){for(var i=0;i<t.length;i++){var r=t[i];e.updateAxisOptions(r.axis,r.range)}e.redraw(e.panes)}},destroy:function(){delete this.chart}}),aa=_.extend({init:function(t,e){_.fn.init.call(this,t);this.chartService=e},render:function(){var t=this;var e=t.children;var i=t.options;var r=i.vertical;this.visual=new it.Layout(null,{spacing:r?0:i.spacing,lineSpacing:r?i.spacing:0,orientation:r?"vertical":"horizontal",reverse:i.rtl,alignItems:r?"start":"center"});for(var a=0;a<e.length;a++){var n=e[a];n.reflow(new E);n.renderVisual()}},reflow:function(t){this.visual.rect(t.toRect());this.visual.reflow();var e=this.visual.clippedBBox();if(e)this.box=C.rectToBox(e);else this.box=new E},renderVisual:function(){this.addVisual()},createVisual:function(){}}),na=U.extend({init:function(t){U.fn.init.call(this,t);this.createContainer();if(!t.rtl){this.createMarker();this.createLabel()}else{this.createLabel();this.createMarker()}},createContainer:function(){this.container=new C.FloatElement({vertical:false,wrap:false,align:P,spacing:this.options.spacing});this.append(this.container)},createMarker:function(){this.container.append(new N(this.markerOptions()))},markerOptions:function(){var t=this.options;var e=t.markerColor;return b({},t.markers,{background:e,border:{color:e}})},createLabel:function(){var t=this.options;var e=b({},t.labels);this.container.append(new F(t.text,e))},renderComplete:function(){U.fn.renderComplete.call(this);var t=this.options.cursor||{};var e=this._itemOverlay=rt.fromRect(this.container.box.toRect(),{fill:{color:n,opacity:0},stroke:null,cursor:t.style||t});this.appendVisual(e)},click:function(t,e){var i=this.eventArgs(e);if(!t.trigger(Ae,i)&&e&&e.type==="contextmenu")e.preventDefault()},over:function(t,e){var i=this.eventArgs(e);if(!t.trigger(Se,i))t._legendItemHover(i.seriesIndex,i.pointIndex);return true},out:function(t,e){t._unsetActivePoint();t.trigger(Ce,this.eventArgs(e))},eventArgs:function(t){var e=this.options;return{element:D(t),text:e.text,series:e.series,seriesIndex:e.series.index,pointIndex:e.pointIndex}},renderVisual:function(){var e=this;var t=this.options;var i=t.visual;if(i){this.visual=i({active:t.active,series:t.series,sender:this.getSender(),pointIndex:t.pointIndex,options:{markers:this.markerOptions(),labels:t.labels},createVisual:function(){e.createVisual();e.renderChildren();e.renderComplete();var t=e.visual;delete e.visual;return t}});this.addVisual()}else U.fn.renderVisual.call(this)}}),sa="horizontal",oa="pointer",la="custom",ha=_.extend({init:function(t,e){if(e===void 0)e={};_.fn.init.call(this,t);this.chartService=e;if(!A(this.options.position,[R,L,V,O,la]))this.options.position=L;this.createContainers();this.createLegendTitle(t.title);this.createItems()},createContainers:function(){var t=this.options;var e=t.position;var i=t.align;var r=e;var a=P;if(e===la)r=O;else if(A(e,[R,V])){if(i==="start")r=O;else if(i==="end")r=L;else r=P;a=e}else if(i)if(i==="start")a=R;else if(i==="end")a=V;this.container=new U({margin:t.margin,padding:t.padding,background:t.background,border:t.border,vAlign:a,align:r,zIndex:t.zIndex,shrinkToFit:true});if(this.hasTitle())this.itemsContainer=new U({vAlign:a,align:r,zIndex:t.zIndex,shrinkToFit:true});else this.itemsContainer=this.container;this.append(this.container)},createItems:function(){var t=this.getService();var e=this.options;var i=this.isVertical();var r=new aa({vertical:i,spacing:e.spacing,rtl:t.rtl},t);var a=e.items;if(e.reverse)a=a.slice(0).reverse();var n=a.length;for(var s=0;s<n;s++){var o=a[s];r.append(new na(b({},{markers:e.markers,labels:e.labels,rtl:t.rtl},e.item,o)))}r.render();this.itemsContainer.append(r)},isVertical:function(){var t=this.options;var e=t.orientation;var i=t.position;var r=i===la&&e!==sa||(T(e)?e!==sa:A(i,[O,L]));return r},hasItems:function(){return this.container.children[0].children.length>0},reflow:function(t){var e=this.options;var i=t.clone();if(!this.hasItems()){this.box=i;return}if(e.position===la){this.containerCustomReflow(i);this.box=i}else this.containerReflow(i);if(this.hasTitle())this.title.reflow(new E(this.container.box.x1,this.title.box.y1,this.container.box.x2,this.title.box.y2))},containerReflow:function(t){var e=this;var i=e.options;var r=e.container;var a=i.position;var n=i.width;var v=i.height;var s=a===R||a===V?m:g;var c=this.isVertical();var o=t.clone();var l=t.clone();if(a===O||a===L)l.y1=o.y1=0;if(c&&v){l.y2=l.y1+v;l.align(o,g,r.options.vAlign)}else if(!c&&n){l.x2=l.x1+n;l.align(o,m,r.options.align)}r.reflow(l);l=r.box;var h=l.clone();if(i.offsetX||i.offsetY){l.translate(i.offsetX,i.offsetY);r.reflow(l)}h[s+1]=t[s+1];h[s+2]=t[s+2];this.box=h},containerCustomReflow:function(t){var e=this;var i=e.options;var r=e.container;var a=i.offsetX;var n=i.offsetY;var s=i.width;var o=i.height;var l=this.isVertical();var h=t.clone();if(l&&o)h.y2=h.y1+o;else if(!l&&s)h.x2=h.x1+s;r.reflow(h);h=r.box;r.reflow(new E(a,n,a+h.width(),n+h.height()))},renderVisual:function(){if(this.hasItems())_.fn.renderVisual.call(this)},createLegendTitle:function(t){var e=b({},{color:a,position:R,align:P},t);var i=e.text;if(!t||t.visible===false)return;if(T(e)&&e.visible){var r=H(e);if(r)i=r({text:i});else if(e.format)i=this.chartService.format.auto(e.format,i)}this.title=new F(i,e);this.createTitleLayout();this.appendTitleLayoutContent()},createTitleLayout:function(){this.layout=new C.FloatElement({vertical:true,wrap:false});this.container.append(this.layout)},hasTitle:function(){return Boolean(this.options.title&&this.options.title.visible!==false)},appendTitleLayoutContent:function(){var t=this.options;if(t.title.position===V){this.layout.append(this.itemsContainer);this.layout.append(this.title)}else{this.layout.append(this.title);this.layout.append(this.itemsContainer)}}}),va=(t(ha,{position:L,items:[],offsetX:0,offsetY:0,margin:G(5),padding:G(5),border:{color:a,width:0},item:{cursor:oa,spacing:6},spacing:6,background:"",zIndex:1,markers:{border:{width:0},width:15,height:3,type:"rect",align:O,vAlign:P}}),e.extend({init:function(){this._registry=[]},register:function(t,e){this._registry.push({type:t,seriesTypes:e})},create:function(t,e,i){var r=this._registry;var a=r[0];var n;for(var s=0;s<r.length;s++){var o=r[s];n=or(t,o.seriesTypes);if(n.length>0){a=o;break}}return new a.type(n,e,i)}})),ca=(va.current=new va,3),ua=.1;function fa(t){var e=document.createElement("div");if(t)e.className=t;return e}function pa(t){var e=t;while(e&&!$(e,"k-handle"))e=e.parentNode;return e}var da=e.extend({init:function(t,e,i,r){var a=t.element;this.options=b({},this.options,i);this.chart=t;this.observer=r;this.chartElement=a;this.categoryAxis=e;this._dateAxis=this.categoryAxis instanceof C.DateCategoryAxis;this.initOptions();this.visible=this.options.visible&&a.offsetHeight;if(this.visible){this.createElements();this.set(this._index(this.options.from),this._index(this.options.to));this.bindEvents()}},onPane:function(t){return this.categoryAxis.pane===t},createElements:function(){var t=this.options;var e=this.wrapper=fa("k-selector");Q(e,{top:t.offset.top,left:t.offset.left,width:t.width,height:t.height,direction:"ltr"});var i=this.selection=fa("k-selection");this.leftMask=fa("k-mask");this.rightMask=fa("k-mask");e.appendChild(this.leftMask);e.appendChild(this.rightMask);e.appendChild(i);i.appendChild(fa("k-selection-bg"));var r=this.leftHandle=fa("k-handle k-left-handle");var a=this.rightHandle=fa("k-handle k-right-handle");r.appendChild(fa());a.appendChild(fa());i.appendChild(r);i.appendChild(a);this.chartElement.appendChild(e);var n=Q(i,["borderLeftWidth","borderRightWidth","height"]);var s=Q(r,"height").height;var o=Q(a,"height").height;t.selection={border:{left:n.borderLeftWidth,right:n.borderRightWidth}};Q(r,{top:(n.height-s)/2});Q(a,{top:(n.height-o)/2});e.style.cssText=e.style.cssText},bindEvents:function(){if(this.options.mousewheel!==false){this._mousewheelHandler=this._mousewheel.bind(this);var t;r(this.wrapper,(t={},t[Qe]=this._mousewheelHandler,t))}this._domEvents=J.DomEventsBuilder.create(this.wrapper,{stopPropagation:true,start:this._start.bind(this),move:this._move.bind(this),end:this._end.bind(this),tap:this._tap.bind(this),press:this._press.bind(this),gesturestart:this._gesturestart.bind(this),gesturechange:this._gesturechange.bind(this),gestureend:this._gestureend.bind(this)})},initOptions:function(){var t=this;var e=t.options;var i=t.categoryAxis;var r=i.pane.chartsBox();var a=this.chart.chartService.intl;if(this._dateAxis)b(e,{min:Y(a,e.min),max:Y(a,e.max),from:Y(a,e.from),to:Y(a,e.to)});var n=Q(this.chartElement,["paddingLeft","paddingTop"]);var s=n.paddingLeft;var o=n.paddingTop;this.options=b({},{width:r.width(),height:r.height()+ua,padding:{left:s,top:o},offset:{left:r.x1+s,top:r.y1+o},from:e.min,to:e.max},e)},destroy:function(){if(this._domEvents){this._domEvents.destroy();delete this._domEvents}clearTimeout(this._mwTimeout);this._state=null;if(this.wrapper){if(this._mousewheelHandler){var t;tt(this.wrapper,(t={},t[Qe]=this._mousewheelHandler,t));this._mousewheelHandler=null}this.chartElement.removeChild(this.wrapper);this.wrapper=null}},_rangeEventArgs:function(t){return{axis:this.categoryAxis.options,from:this._value(t.from),to:this._value(t.to)}},_start:function(t){var e=this.options;var i=D(t);if(this._state||!i)return;this.chart._unsetActivePoint();this._state={moveTarget:pa(i)||i,startLocation:t.x?t.x.location:0,range:{from:this._index(e.from),to:this._index(e.to)}};var r=this._rangeEventArgs({from:this._index(e.from),to:this._index(e.to)});if(this.trigger(He,r))this._state=null},_press:function(t){var e;if(this._state)e=this._state.moveTarget;else e=pa(D(t));if(e)C.addClass(e,"k-handle-active")},_move:function(v){if(!this._state)return;var t=this;var e=t._state;var i=t.options;var r=t.categoryAxis;var a=e.range;var n=e.moveTarget;var s=r.options.reverse;var c=this._index(i.from);var u=this._index(i.to);var o=this._index(i.min);var l=this._index(i.max);var f=e.startLocation-v.x.location;var p={from:a.from,to:a.to};var d=a.to-a.from;var g=Q(this.wrapper,"width").width/(r.categoriesCount()-1);var h=Math.round(f/g)*(s?-1:1);if(!n)return;var x=$(n,"k-left-handle");var m=$(n,"k-right-handle");if($(n,"k-selection k-selection-bg")){a.from=Math.min(Math.max(o,c-h),l-d);a.to=Math.min(a.from+d,l)}else if(x&&!s||m&&s){a.from=Math.min(Math.max(o,c-h),l-1);a.to=Math.max(a.from+1,a.to)}else if(x&&s||m&&!s){a.to=Math.min(Math.max(o+1,u-h),l);a.from=Math.min(a.to-1,a.from)}if(a.from!==p.from||a.to!==p.to){this.move(a.from,a.to);this.trigger(Fe,this._rangeEventArgs(a))}},_end:function(){if(this._state){var t=this._state.moveTarget;if(t)C.removeClass(t,"k-handle-active");var e=this._state.range;this.set(e.from,e.to);this.trigger(Ne,this._rangeEventArgs(e));delete this._state}},_tap:function(t){var e=this;var i=e.options;var r=e.categoryAxis;var a=this.chart._eventCoordinates(t);var v=r.pointCategoryIndex(new I(a.x,r.box.y1));var n=this._index(i.from);var c=this._index(i.to);var u=this._index(i.min);var s=this._index(i.max);var o=c-n;var f=n+o/2;var l={};var p=t.event.which===3;var h=Math.round(f-v);if(this._state||p)return;this.chart._unsetActivePoint();if(!r.options.justified)h--;l.from=Math.min(Math.max(u,n-h),s-o);l.to=Math.min(l.from+o,s);this._start(t);if(this._state){this._state.range=l;this.trigger(Fe,this._rangeEventArgs(l));this._end()}},_mousewheel:function(t){var e=this;var i=C.mousewheelDelta(t);this._start({target:this.selection});if(this._state){var r=this._state.range;t.preventDefault();t.stopPropagation();if(Math.abs(i)>1)i*=ca;if(this.options.mousewheel.reverse)i*=-1;if(this.expand(i))this.trigger(Fe,{axis:this.categoryAxis.options,delta:i,originalEvent:t,from:this._value(r.from),to:this._value(r.to)});if(this._mwTimeout)clearTimeout(this._mwTimeout);this._mwTimeout=setTimeout(function(){e._end()},$e)}},_gesturestart:function(t){var e=this.options;this._state={range:{from:this._index(e.from),to:this._index(e.to)}};var i=this._rangeEventArgs(this._state.range);if(this.trigger(He,i))this._state=null;else t.preventDefault()},_gestureend:function(){if(this._state){this.trigger(Ne,this._rangeEventArgs(this._state.range));delete this._state}},_gesturechange:function(t){var e=this;var i=e.chart;var r=e._state;var a=e.options;var n=e.categoryAxis;var s=r.range;var o=i._toModelCoordinates(t.touches[0].x.location).x;var l=i._toModelCoordinates(t.touches[1].x.location).x;var h=Math.min(o,l);var v=Math.max(o,l);t.preventDefault();s.from=n.pointCategoryIndex(new I(h))||a.min;s.to=n.pointCategoryIndex(new I(v))||a.max;this.move(s.from,s.to);this.trigger(Fe,this._rangeEventArgs(s))},_index:function(t){var e=t;if(t instanceof Date)e=this.categoryAxis.categoryIndex(t);return e},_value:function(t){var e=t;if(this._dateAxis){e=this.categoryAxis.categoryAt(t);if(e>this.options.max)e=this.options.max}return e},_slot:function(t){var e=this.categoryAxis;var i=this._index(t);return e.getSlot(i,i,true)},move:function(t,e){var i=this.options;var r=this.categoryAxis.options.reverse;var a=i.offset;var n=i.padding;var v=i.selection.border;var c=r?e:t;var u=r?t:e;var f="x"+(r?2:1);var s=this._slot(c);var o=Z(s[f]-a.left+n.left);Q(this.leftMask,{width:o});Q(this.selection,{left:o});s=this._slot(u);var l=Z(i.width-(s[f]-a.left+n.left));Q(this.rightMask,{width:l});var h=i.width-l;if(h!==i.width)h+=v.right;Q(this.rightMask,{left:h});Q(this.selection,{width:Math.max(i.width-(o+l)-v.right,0)})},set:function(t,e){var i=this.options;var r=this._index(i.min);var a=this._index(i.max);var n=j(this._index(t),r,a);var s=j(this._index(e),n+1,a);if(i.visible)this.move(n,s);i.from=this._value(n);i.to=this._value(s)},expand:function(t){var e=this.options;var i=this._index(e.min);var r=this._index(e.max);var a=e.mousewheel.zoom;var n=this._index(e.from);var s=this._index(e.to);var o={from:n,to:s};var l=b({},o);if(this._state)o=this._state.range;if(a!==L)o.from=j(j(n-t,0,s-1),i,r);if(a!==O)o.to=j(j(s+t,o.from+1,r),i,r);if(o.from!==l.from||o.to!==l.to){this.set(o.from,o.to);return true}},zoom:function(t,v){var e=this.options;var i=this._index(e.min);var r=this._index(e.max);var a=this._index(e.from);var n=this._index(e.to);var s={from:a,to:n};var o=b({},s);var c=this.categoryAxis.options;var u=c.reverse;var f=m+(u?"2":"1");var l=this.categoryAxis.lineBox();var p=Math.abs(l[f]-v[m]);var d=l.width();var h=Z(p/d,2);var g=Z(h*t);var x=Z((1-h)*t);if(this._state)s=this._state.range;s.from=j(j(a-g,0,n-1),i,r);s.to=j(j(n+x,s.from+1,r),i,r);if(s.from!==o.from||s.to!==o.to){this.set(s.from,s.to);return true}},trigger:function(t,e){return(this.observer||this.chart).trigger(t,e)}}),ga=(t(da,{visible:true,mousewheel:{zoom:"both"},min:c,max:u}),Ki.extend({show:function(t){if(!t||!t.tooltipAnchor||this._current&&this._current===t)return;var e=b({},this.options,t.options.tooltip);var i=t.tooltipAnchor();if(i){this._current=t;Ki.fn.show.call(this,{point:t,anchor:i},e,t)}else this.hide()},hide:function(){delete this._current;Ki.fn.hide.call(this)}})),xa=Ki.extend({init:function(t,e){Ki.fn.init.call(this,t.chartService,e);this.plotArea=t;this.formatService=t.chartService.format},showAt:function(t,e){var i=K(t,function(t){var e=t.series.tooltip;var i=e&&e.visible===false;return!i});if(i.length>0){var r=i[0];var a=this.plotArea.categoryAxis.getSlot(r.categoryIx);var n=e?this._slotAnchor(e,a):this._defaultAnchor(r,a);this.show({anchor:n,shared:true,points:t,category:r.category,categoryText:this.formatService.auto(this.options.categoryFormat,r.category),series:this.plotArea.series},this.options)}},_slotAnchor:function(t,e){var i=this.plotArea.categoryAxis;var r={horizontal:"left",vertical:"center"};if(!i.options.vertical)t.x=e.center().x;return{point:t,align:r}},_defaultAnchor:function(t,e){var i=t.owner.pane.chartsBox();var r=this.plotArea.categoryAxis.options.vertical;var a=i.center();var n=e.center();var s={horizontal:"center",vertical:"center"};var o;if(r)o=new I(a.x,n.y);else o=new I(n.x,a.y);return{point:o,align:s}}}),ma=(t(xa,{categoryFormat:"{0:d}"}),at.extend({setup:function(){var t=this;var e=t.element;var i=t.options;var r=e.bbox();if(r){this.origin=i.origin;var a=i.vertical?g:m;var n=this.fromScale=new ht(1,1);n[a]=Et;e.transform(vt().scale(n.x,n.y))}else this.abort()},step:function(t){var e=C.interpolateValue(this.fromScale.x,1,t);var i=C.interpolateValue(this.fromScale.y,1,t);this.element.transform(vt().scale(e,i,this.origin))},abort:function(){at.fn.abort.call(this);this.element.transform(null)}})),ya=(t(ma,{duration:Ct}),nt.current.register(Wt,ma),at.extend({setup:function(){var t=this.center=this.element.bbox().center();this.element.transform(vt().scale(Et,Et,t))},step:function(t){this.element.transform(vt().scale(t,t,this.center))}})),_a=(t(ya,{easing:"easeOutElastic"}),nt.current.register(Zt,ya),at.extend({setup:function(){this.fadeTo=this.element.opacity();this.element.opacity(0)},step:function(t){this.element.opacity(t*this.fadeTo)}})),wa=(t(_a,{duration:200,easing:"linear"}),nt.current.register(kt,_a),at.extend({setup:function(){this.element.transform(vt().scale(Et,Et,this.options.center))},step:function(t){this.element.transform(vt().scale(t,t,this.options.center))}})),ba=(t(wa,{easing:"easeOutElastic",duration:Ct}),nt.current.register(ae,wa),Xi.extend({render:function(){Xi.fn.render.call(this);this.renderSegments()},createSegment:function(t,e,i){var r=e.style;var a;if(r===Xt)a=di;else a=ci;return new a(t,e,i)},animationPoints:function(){var t=Xi.fn.animationPoints.call(this);return t.concat(this._segments)},createMissingValue:function(t,e){if(e===Dt){var i={x:t.x,y:t.y};if(!Gi(i.x))i.x=0;if(!Gi(i.y))i.y=0;return i}}})),Aa=(b(ba.prototype,gi),gr.extend({initFields:function(){this.namedXAxes={};this.namedYAxes={};this.xAxisRangeTracker=new Ci;this.yAxisRangeTracker=new Ci},render:function(t){var e=this;if(t===void 0)t=this.panes;var i=this.groupSeriesByPane();for(var r=0;r<t.length;r++){var a=t[r];var n=i[a.options.name||"default"]||[];e.addToLegend(n);var s=e.filterVisibleSeries(n);if(!s)continue;e.createScatterChart(or(s,pe),a);e.createScatterLineChart(or(s,de),a);e.createBubbleChart(or(s,Zt),a)}this.createAxes(t)},appendChart:function(t,e){this.xAxisRangeTracker.update(t.xAxisRanges);this.yAxisRangeTracker.update(t.yAxisRanges);gr.fn.appendChart.call(this,t,e)},removeAxis:function(t){var e=t.options.name;gr.fn.removeAxis.call(this,t);if(t.options.vertical){this.yAxisRangeTracker.reset(e);delete this.namedYAxes[e]}else{this.xAxisRangeTracker.reset(e);delete this.namedXAxes[e]}if(t===this.axisX)delete this.axisX;if(t===this.axisY)delete this.axisY},seriesPaneName:function(t){var e=this.options;var i=t.xAxis;var r=[].concat(e.xAxis);var a=K(r,function(t){return t.name===i})[0];var n=t.yAxis;var s=[].concat(e.yAxis);var o=K(s,function(t){return t.name===n})[0];var l=e.panes||[{}];var h=l[0].name||"default";var v=(a||{}).pane||(o||{}).pane||h;return v},createScatterChart:function(t,e){if(t.length>0)this.appendChart(new Xi(this,{series:t,clip:e.options.clip}),e)},createScatterLineChart:function(t,e){if(t.length>0)this.appendChart(new ba(this,{series:t,clip:e.options.clip}),e)},createBubbleChart:function(t,e){if(t.length>0)this.appendChart(new Yi(this,{series:t,clip:e.options.clip}),e)},createXYAxis:function(v,t,e){var i=v.name;var c=t?this.namedYAxes:this.namedXAxes;var u=t?this.yAxisRangeTracker:this.xAxisRangeTracker;var r=b({reverse:!t&&this.chartService.rtl},v,{vertical:t});var f=sr(r.type,We);var a=u.query();var p=f?{min:.1,max:1}:{min:0,max:1};var n=u.query(i)||a||p;var s=[r.min,r.max];var d=this.series;for(var o=0;o<d.length;o++){var g=d[o];var x=g[t?"yAxis":"xAxis"];if(x===r.name||e===0&&!x){var m=mt.current.bindPoint(g,0).valueFields;s.push(m[t?"y":"x"]);break}}if(e===0&&a){n.min=Math.min(n.min,a.min);n.max=Math.max(n.max,a.max)}var y;for(var _=0;_<s.length;_++)if(s[_]instanceof Date){y=true;break}var l;if(sr(r.type,w)||!r.type&&y)l=C.DateValueAxis;else if(f)l=C.LogarithmicAxis;else l=C.NumericAxis;var h=new l(n.min,n.max,r,this.chartService);h.axisIndex=e;if(i){if(c[i])throw new Error((t?"Y":"X")+" axis with name "+i+" is already defined");c[i]=h}this.appendAxis(h);return h},createAxes:function(t){var e=this;var i=this.options;var r=[].concat(i.xAxis);var a=[];var n=[].concat(i.yAxis);var s=[];for(var o=0;o<r.length;o++){var l=e.findPane(r[o].pane);if(A(l,t))a.push(e.createXYAxis(r[o],false,o))}for(var h=0;h<n.length;h++){var v=e.findPane(n[h].pane);if(A(v,t))s.push(e.createXYAxis(n[h],true,h))}this.axisX=this.axisX||a[0];this.axisY=this.axisY||s[0]},_dispatchEvent:function(t,e,i){var r=t._eventCoordinates(e);var v=new I(r.x,r.y);var a=this.axes;var c=a.length;var n=[];var s=[];for(var o=0;o<c;o++){var l=a[o];var u=l.options.vertical?s:n;var h=l.getValue(v);if(h!==null)u.push(h)}if(n.length>0&&s.length>0)t.trigger(i,{element:D(e),originalEvent:e,x:vr(n),y:vr(s)})},updateAxisOptions:function(t,e){var i=t.options.vertical;var r=this.groupAxes(this.panes);var a=(i?r.y:r.x).indexOf(t);Sa(this.options,a,i,e);Sa(this.originalOptions,a,i,e)}}));function Sa(t,e,i,r){var a=[].concat(i?t.yAxis:t.xAxis)[e];b(a,r)}t(Aa,{xAxis:{},yAxis:{}}),b(Aa.prototype,br);var Ca=_.extend({init:function(t,e,i){_.fn.init.call(this,i);this.value=t;this.sector=e},render:function(){var t=this.options.labels;var e=this.owner.chartService;var i=this.value;if(this._rendered||this.visible===false)return;this._rendered=true;var r=H(t);var a=this.pointData();if(r)i=r(a);else if(t.format)i=e.format.auto(t.format,i);if(t.visible&&(i||i===0)){if(t.position===P||t.position===Ze){if(!t.color)t.color=C.autoTextColor(this.options.color);if(!t.background)t.background=this.options.color}else{var n=e.theme.seriesDefaults.labels;t.color=t.color||n.color;t.background=t.background||n.background}this.label=new F(i,b({},t,{align:P,vAlign:"",animation:{type:kt,delay:this.animationDelay}}),a);this.append(this.label)}},reflow:function(t){this.render();this.box=t;this.reflowLabel()},reflowLabel:function(){var t=this;var e=t.options.labels;var i=t.label;var r=this.sector.clone();var a=e.distance;var n=r.middle();if(i){var s=i.box.height();var o=i.box.width();var l;if(e.position===P){r.radius=Math.abs((r.radius-s)/2)+s;l=r.point(n);i.reflow(new E(l.x,l.y-s/2,l.x,l.y))}else if(e.position===Ze){r.radius=r.radius-s/2;l=r.point(n);i.reflow(new E(l.x,l.y-s/2,l.x,l.y))}else{var h;l=r.clone().expand(a).point(n);if(l.x>=r.center.x){h=l.x+o;i.orientation=L}else{h=l.x-o;i.orientation=O}i.reflow(new E(h,l.y-s,l.x,l.y))}}},createVisual:function(){var e=this;var t=this;var i=t.sector;var r=t.options;_.fn.createVisual.call(this);if(this.value)if(r.visual){var a=(i.startAngle+180)%360;var n=r.visual({category:this.category,dataItem:this.dataItem,value:this.value,series:this.series,percentage:this.percentage,center:new ht(i.center.x,i.center.y),radius:i.radius,innerRadius:i.innerRadius,startAngle:a,endAngle:a+i.angle,options:r,sender:this.getSender(),createVisual:function(){var t=new st;e.createSegmentVisual(t);return t}});if(n)this.visual.append(n)}else this.createSegmentVisual(this.visual)},createSegmentVisual:function(t){var e=this;var i=e.sector;var r=e.options;var a=r.border||{};var n=a.width>0?{stroke:{color:a.color,width:a.width,opacity:a.opacity,dashType:a.dashType}}:{};var s=r.color;var o={color:s,opacity:r.opacity};var l=this.createSegment(i,b({fill:o,stroke:{opacity:r.opacity},zIndex:r.zIndex},n));t.append(l);if(Pi(r))t.append(this.createGradientOverlay(l,{baseColor:s,fallbackFill:o},b({center:[i.center.x,i.center.y],innerRadius:i.innerRadius,radius:i.radius,userSpace:true},r.overlay)))},createSegment:function(t,e){if(e.singleSegment)return new it.Circle(new lt.Circle(new ht(t.center.x,t.center.y),t.radius),e);return C.ShapeBuilder.current.createRing(t,e)},createAnimation:function(){var t=this;var e=t.options;var i=t.sector.center;b(e,{animation:{center:[i.x,i.y],delay:this.animationDelay}});_.fn.createAnimation.call(this)},createHighlight:function(t){var e=this.options.highlight||{};var i=e.border||{};return this.createSegment(this.sector,b({},t,{fill:{color:e.color,opacity:e.opacity},stroke:{opacity:i.opacity,width:i.width,color:i.color}}))},highlightVisual:function(){return this.visual.children[0]},highlightVisualArgs:function(){var t=this.sector;return{options:this.options,radius:t.radius,innerRadius:t.innerRadius,center:new ht(t.center.x,t.center.y),startAngle:t.startAngle,endAngle:t.angle+t.startAngle,visual:this.visual}},tooltipAnchor:function(){var t=this.sector.clone().expand(It);var e=t.middle();var i=t.point(e);return{point:i,align:Ta(e+180)}},formatValue:function(t){return this.owner.formatPointValue(this,t)},pointData:function(){return{dataItem:this.dataItem,category:this.category,value:this.value,series:this.series,percentage:this.percentage}}}),ka=Z(C.rad(30),s),Pa=Z(C.rad(60),s);function Ta(t){var e=C.rad(t);var i=Z(Math.sin(e),s);var r=Z(Math.cos(e),s);var a;if(Math.abs(i)>Pa)a=P;else if(r<0)a=L;else a=O;var n;if(Math.abs(i)<ka)n=P;else if(i<0)n=V;else n=R;return{horizontal:a,vertical:n}}t(Ca,{color:n,overlay:{gradient:"roundedBevel"},border:{width:.5},labels:{visible:false,distance:35,font:k.DEFAULT_FONT,margin:G(.5),align:f,zIndex:1,position:Ke},animation:{type:ae},highlight:{visible:true,border:{width:1}},visible:true}),b(Ca.prototype,li);var Ia={createLegendItem:function(v,c,t){var e=this.options.legend||{};var i=e.labels||{};var r=e.inactiveItems||{};var a=r.labels||{};if(t&&t.visibleInLegend!==false){var n=t.visible!==false;var s=n?H(i):H(a)||H(i);var o=t.category;if(s)o=s({text:o,series:t.series,dataItem:t.dataItem,percentage:t.percentage,value:v});var l,h;if(n){l={};h=c.color}else{l={color:a.color,font:a.font};h=(r.markers||{}).color}if(Gi(o)&&o!=="")this.legendItems.push({active:n,pointIndex:t.index,text:o,series:t.series,markerColor:h,labels:l})}}},Ea=70,Ra=_.extend({init:function(t,e){_.fn.init.call(this,e);this.plotArea=t;this.chartService=t.chartService;this.points=[];this.legendItems=[];this.render()},render:function(){this.traverseDataPoints(this.addValue.bind(this))},traverseDataPoints:function(v){var c=this;var u=this;var f=u.options;var t=u.plotArea.options.seriesColors;if(t===void 0)t=[];var p=t.length;var d=f.series;var e=d.length;for(var i=0;i<e;i++){var r=d[i];var g=r.data;var a=nr(r);var n=a.total;var x=a.points;var m=a.count;var y=360/n;var _=void 0;if(!isFinite(y))_=360/m;var s=void 0;if(T(r.startAngle))s=r.startAngle;else s=f.startAngle;if(i!==e-1)if(r.labels.position===Ke)r.labels.position=P;for(var o=0;o<x.length;o++){var l=x[o];if(!l)continue;var h=l.fields;var w=l.value;var b=l.visible;var A=w!==0?_||w*y:0;var S=g.length!==1&&Boolean(h.explode);if(!M(r.color))r.color=h.color||t[o%p];v(l.valueFields.value,new C.Ring(null,0,0,s,A),{owner:c,category:T(h.category)?h.category:"",index:o,series:r,seriesIx:i,dataItem:g[o],percentage:n!==0?w/n:0,explode:S,visibleInLegend:h.visibleInLegend,visible:b,zIndex:e-i,animationDelay:c.animationDelay(o,i,e)});if(b!==false)s+=A}}},evalSegmentOptions:function(t,e,i){var r=i.series;ni(t,{value:e,series:r,dataItem:i.dataItem,category:i.category,percentage:i.percentage},{defaults:r._defaults,excluded:["data","content","template","visual","toggle"]})},addValue:function(t,e,i){var r=b({},i.series,{index:i.index});this.evalSegmentOptions(r,t,i);this.createLegendItem(t,r,i);if(i.visible===false)return;var a=new Ca(t,e,r);x.extend(a,i);this.append(a);this.points.push(a)},reflow:function(v){var c=this;var u=c.options;var f=c.points;var t=c.seriesConfigs;if(t===void 0)t=[];var p=f.length;var e=v.clone();var d=5;var i=Math.min(e.width(),e.height());var g=i/2;var x=i-i*.85;var r=new E(e.x1,e.y1,e.x1+i,e.y1+i);var m=r.center();var y=e.center();var _=u.series.length;var a=[];var n=[];var s=B(u.padding,x);this.targetBox=v;s=s>g-d?g-d:s;r.translate(y.x-m.x,y.y-m.y);var w=g-s;var b=new I(w+r.x1+s,w+r.y1+s);for(var A=0;A<p;A++){var o=f[A];var l=o.sector;var S=o.seriesIx;l.radius=w;l.center=b;if(t.length){var C=t[S];l.innerRadius=C.innerRadius;l.radius=C.radius}if(S===_-1&&o.explode)l.center=l.clone().setRadius(l.radius*.15).point(l.middle());o.reflow(r);var h=o.label;if(h)if(h.options.position===Ke)if(S===_-1)if(h.orientation===L)n.push(h);else a.push(h)}if(a.length>0){a.sort(this.labelComparator(true));this.leftLabelsReflow(a)}if(n.length>0){n.sort(this.labelComparator(false));this.rightLabelsReflow(n)}this.box=r},leftLabelsReflow:function(t){var e=this.distanceBetweenLabels(t);this.distributeLabels(e,t)},rightLabelsReflow:function(t){var e=this.distanceBetweenLabels(t);this.distributeLabels(e,t)},distanceBetweenLabels:function(t){var e=z(this.points);var i=e.sector;var r=t.length-1;var a=i.radius+e.options.labels.distance;var n=[];var s=t[0].box;var o=Z(s.y1-(i.center.y-a-s.height()-s.height()/2));n.push(o);for(var l=0;l<r;l++){var h=t[l+1].box;s=t[l].box;o=Z(h.y1-s.y2);n.push(o)}o=Z(i.center.y+a-t[r].box.y2-t[r].box.height()/2);n.push(o);return n},distributeLabels:function(t,e){var i=this;var r=t.length;var a,n,s;for(var o=0;o<r;o++){s=-t[o];a=n=o;while(s>0&&(a>=0||n<r)){s=i._takeDistance(t,o,--a,s);s=i._takeDistance(t,o,++n,s)}}this.reflowLabels(t,e)},_takeDistance:function(t,e,i,r){var a=r;if(t[i]>0){var n=Math.min(t[i],a);a-=n;t[i]-=n;t[e]+=n}return a},reflowLabels:function(t,e){var v=this;var c=z(this.points);var i=c.sector;var r=c.options.labels;var u=e.length;var a=r.distance;var n=i.center.y-(i.radius+a)-e[0].box.height();var s;t[0]+=2;for(var o=0;o<u;o++){var l=e[o];var h=l.box;n+=t[o];s=v.hAlignLabel(h.x2,i.clone().expand(a),n,n+h.height(),l.orientation===L);if(l.orientation===L){if(r.align!==f)s=i.radius+i.center.x+a;l.reflow(new E(s+h.width(),n,s,n))}else{if(r.align!==f)s=i.center.x-i.radius-a;l.reflow(new E(s-h.width(),n,s,n))}n+=h.height()}},createVisual:function(){var v=this;var c=this;var u=c.options.connectors;var f=c.points;var p=f.length;var t=4;_.fn.createVisual.call(this);this._connectorLines=[];for(var d=0;d<p;d++){var e=f[d];var i=e.sector;var g=e.label;var x=i.middle();var m=(e.options.connectors||{}).color||u.color;if(g){var r=new rt({stroke:{color:m,width:u.width},animation:{type:kt,delay:e.animationDelay}});if(g.options.position===Ke){var a=g.box;var y=i.center;var n=i.point(x);var s=new I(a.x1,a.center().y);var o=void 0,l=void 0,h=void 0;n=i.clone().expand(u.padding).point(x);r.moveTo(n.x,n.y);if(g.orientation===L){l=new I(a.x1-u.padding,a.center().y);h=Va(y,n,s,l);s=new I(l.x-t,l.y);h=h||s;h.x=Math.min(h.x,s.x);if(v.pointInCircle(h,i.center,i.radius+t)||h.x<i.center.x){o=i.center.x+i.radius+t;if(e.options.labels.align!==Qt)if(o<s.x)r.lineTo(o,n.y);else r.lineTo(n.x+t*2,n.y);else r.lineTo(o,n.y);r.lineTo(s.x,l.y)}else{h.y=l.y;r.lineTo(h.x,h.y)}}else{l=new I(a.x2+u.padding,a.center().y);h=Va(y,n,s,l);s=new I(l.x+t,l.y);h=h||s;h.x=Math.max(h.x,s.x);if(v.pointInCircle(h,i.center,i.radius+t)||h.x>i.center.x){o=i.center.x-i.radius-t;if(e.options.labels.align!==Qt)if(o>s.x)r.lineTo(o,n.y);else r.lineTo(n.x-t*2,n.y);else r.lineTo(o,n.y);r.lineTo(s.x,l.y)}else{h.y=l.y;r.lineTo(h.x,h.y)}}r.lineTo(l.x,l.y);v._connectorLines.push(r);v.visual.append(r)}}}},renderVisual:function(){_.fn.renderVisual.call(this);if(C.find(this.options.series,function(t){return t.autoFit})){var t=this.targetBox;var e=this.box.center();var i=this.visual.bbox();if(!i)return;var r=i.bottomRight();var a=Math.min((e.y-t.y1)/(e.y-i.origin.y),(t.y2-e.y)/(r.y-e.y),(e.x-t.x1)/(e.x-i.origin.x),(t.x2-e.x)/(r.x-e.x));if(a<1)this.visual.transform(vt().scale(a,a,[e.x,e.y]))}},labelComparator:function(t){var a=t?-1:1;return function(t,e){var i=(t.parent.sector.middle()+270)%360;var r=(e.parent.sector.middle()+270)%360;return(i-r)*a}},hAlignLabel:function(t,e,i,r,a){var n=e.radius;var s=e.center;var o=s.x;var l=s.y;var h=Math.min(Math.abs(l-i),Math.abs(l-r));if(h>n)return t;return o+Math.sqrt(n*n-h*h)*(a?1:-1)},pointInCircle:function(t,e,i){return Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)<Math.pow(i,2)},formatPointValue:function(t,e){return this.chartService.format.auto(e,t.value)},animationDelay:function(t){return t*Ea},stackRoot:function(){return this}});function Va(t,e,i,r){var a=(r.x-i.x)*(t.y-i.y)-(r.y-i.y)*(t.x-i.x);var n=(r.y-i.y)*(e.x-t.x)-(r.x-i.x)*(e.y-t.y);var s;if(n!==0){var o=a/n;s=new I(t.x+o*(e.x-t.x),t.y+o*(e.y-t.y))}return s}t(Ra,{startAngle:90,connectors:{width:2,color:"#939393",padding:8},inactiveItems:{markers:{},labels:{}}}),b(Ra.prototype,Ia),Ra.prototype.isStackRoot=true;var Oa=gr.extend({render:function(){this.createPieChart(this.series)},createPieChart:function(t){var e=t[0];var i=new Ra(this,{series:t,padding:e.padding,startAngle:e.startAngle,connectors:e.connectors,legend:this.options.legend});this.appendChart(i)},appendChart:function(t,e){gr.fn.appendChart.call(this,t,e);X(this.options.legend.items,t.legendItems)}}),La=Ca.extend({reflowLabel:function(){var t=this;var e=t.options.labels;var i=t.label;var r=this.sector.clone();var a=r.middle();if(i){var n=i.box.height();if(e.position===P){r.radius-=(r.radius-r.innerRadius)/2;var s=r.point(a);i.reflow(new E(s.x,s.y-n/2,s.x,s.y))}else Ca.fn.reflowLabel.call(this)}},createSegment:function(t,e){return C.ShapeBuilder.current.createRing(t,e)}}),Ma=(t(La,{overlay:{gradient:"roundedGlass"},labels:{position:P},animation:{type:ae}}),b(La.prototype,li),50),Ba=Ra.extend({addValue:function(t,e,i){var r=b({},i.series,{index:i.index});this.evalSegmentOptions(r,t,i);this.createLegendItem(t,r,i);if(!t||i.visible===false)return;var a=new La(t,e,r);x.extend(a,i);this.append(a);this.points.push(a)},reflow:function(v){var c=this;var u=this.options;var f=v.clone();var p=5;var t=Math.min(f.width(),f.height());var e=t/2;var d=t-t*.85;var i=u.series;var r=i.length;var a=B(u.padding,d);a=a>e-p?e-p:a;var n=e-a;var g=0;var s;for(var o=0;o<r;o++){var l=i[o];if(o===0)if(T(l.holeSize)){s=l.holeSize;n-=l.holeSize}if(T(l.size))n-=l.size;else g++;if(T(l.margin)&&o!==r-1)n-=l.margin}if(!T(s)){var x=(e-a)/(r+.75);s=x*.75;n-=s}var h=s;var m=0;var y,_;this.seriesConfigs=[];for(var w=0;w<r;w++){var b=i[w];y=B(b.size,n/g);h+=m;_=h+y;c.seriesConfigs.push({innerRadius:h,radius:_});m=b.margin||0;h=_}Ra.fn.reflow.call(this,v)},animationDelay:function(t,e,i){return t*Ma+Ct*(e+1)/(i+1)}}),za=(t(Ba,{startAngle:90,connectors:{width:2,color:"#939393",padding:8}}),Oa.extend({render:function(){this.createDonutChart(this.series)},createDonutChart:function(t){var e=t[0];var i=new Ba(this,{series:t,padding:e.padding,connectors:e.connectors,legend:this.options.legend});this.appendChart(i)}})),Da=.15,Ha=gr.extend({initFields:function(){this.valueAxisRangeTracker=new Ci},render:function(){this.addToLegend(this.series);this.createPolarAxis();this.createCharts();this.createValueAxis()},alignAxes:function(){var t=this.valueAxis;var e=t.range();var i=t.options.reverse?e.max:e.min;var r=t.getSlot(i);var a=this.polarAxis.getSlot(0).center;var n=t.box.translate(a.x-r.x1,a.y-r.y1);t.reflow(n)},createValueAxis:function(){var t=this.valueAxisRangeTracker;var e=t.query();var i=this.valueAxisOptions({roundToMajorUnit:false,zIndex:-1});var r,a;if(i.type===We){r=C.RadarLogarithmicAxis;a={min:.1,max:1}}else{r=C.RadarNumericAxis;a={min:0,max:1}}var n=t.query(name)||e||a;if(n&&e){n.min=Math.min(n.min,e.min);n.max=Math.max(n.max,e.max)}var s=new r(n.min,n.max,i,this.chartService);this.valueAxis=s;this.appendAxis(s)},reflowAxes:function(){var t=this;var e=t.options.plotArea;var i=t.valueAxis;var r=t.polarAxis;var a=t.box;var n=Math.min(a.width(),a.height())*Da;var s=G(e.padding||{},n);var o=a.clone().unpad(s);var l=o.clone();l.y2=l.y1+Math.min(l.width(),l.height());l.align(o,g,P);var h=l.clone().shrink(0,l.height()/2);r.reflow(l);i.reflow(h);var v=i.lineBox().height()-i.box.height();i.reflow(i.box.unpad({top:v}));this.axisBox=l;this.alignAxes(l)},backgroundBox:function(){return this.box},detachLabels:function(){}}),Fa=Xi.extend({pointSlot:function(t,e){var i=t.center.y-e.y1;var r=I.onCircle(t.center,t.startAngle,i);return new E(r.x,r.y,r.x,r.y)}}),Na=(t(Fa,{clip:false}),ba.extend({})),Ga=(Na.prototype.pointSlot=Fa.prototype.pointSlot,t(Na,{clip:false}),Ai.extend({fillToAxes:function(t){var e=this._polarAxisCenter();t.lineTo(e.x,e.y)},_polarAxisCenter:function(){var t=this.parent.plotArea.polarAxis;var e=t.box.center();return e},strokeSegments:function(){var t=this._strokeSegments;if(!t){var e=this._polarAxisCenter();var i=new o(false);var r=this.points();r.push(e);t=this._strokeSegments=i.process(r);t.pop()}return t}})),Xa=wi.extend({fillToAxes:function(t){var e=this.parent.plotArea.polarAxis;var i=e.box.center();var r=new lt.Segment([i.x,i.y]);t.segments.unshift(r);t.segments.push(r)}}),qa=Na.extend({createSegment:function(t,e,i){var r=(e.line||{}).style;var a;if(r===Xt)a=new Ga(t,e,i);else a=new Xa(t,e,i);return a},createMissingValue:function(t,e){var i;if(Gi(t.x)&&e!==Ht){i={x:t.x,y:t.y};if(e===Dt)i.y=0}return i},seriesMissingValues:function(t){return t.missingValues||Dt},_hasMissingValuesGap:function(){var t=this;var e=this.options.series;for(var i=0;i<e.length;i++)if(t.seriesMissingValues(e[i])===Ft)return true},sortPoints:function(t){var e=this;t.sort(Ya);if(this._hasMissingValuesGap())for(var i=0;i<t.length;i++){var r=t[i];if(r){var a=r.value;if(!Gi(a.y)&&e.seriesMissingValues(r.series)===Ft)delete t[i]}}return t}});function Ya(t,e){return t.value.x-e.value.x}var Wa=Ha.extend({createPolarAxis:function(){var t=new C.PolarAxis(this.options.xAxis,this.chartService);this.polarAxis=t;this.axisX=t;this.appendAxis(t)},valueAxisOptions:function(t){return b(t,{majorGridLines:{type:i},minorGridLines:{type:i}},this.options.yAxis)},createValueAxis:function(){Ha.fn.createValueAxis.call(this);this.axisY=this.valueAxis},appendChart:function(t,e){this.valueAxisRangeTracker.update(t.yAxisRanges);gr.prototype.appendChart.call(this,t,e)},createCharts:function(){var t=this.filterVisibleSeries(this.series);var e=this.panes[0];this.createLineChart(or(t,[se]),e);this.createScatterChart(or(t,[oe]),e);this.createAreaChart(or(t,[ne]),e)},createLineChart:function(t,e){if(t.length===0)return;var i=new Na(this,{series:t});this.appendChart(i,e)},createScatterChart:function(t,e){if(t.length===0)return;var i=new Fa(this,{series:t});this.appendChart(i,e)},createAreaChart:function(t,e){if(t.length===0)return;var i=new qa(this,{series:t});this.appendChart(i,e)},_dispatchEvent:function(t,e,i){var r=t._eventCoordinates(e);var a=new I(r.x,r.y);var n=this.axisX.getValue(a);var s=this.axisY.getValue(a);if(n!==null&&s!==null)t.trigger(i,{element:D(e),x:n,y:s})},createCrosshairs:function(){}});function Ua(t){var e=[];for(var i=0;i<t.length;i++){var r=t[i];e[r.seriesIx]=e[r.seriesIx]||[];e[r.seriesIx].push(r)}return e}t(Wa,{xAxis:{},yAxis:{}}),b(Wa.prototype,br);var Za=_i.extend({pointSlot:function(t,e){var i=t.center.y-e.y1;var r=I.onCircle(t.center,t.middle(),i);return new E(r.x,r.y,r.x,r.y)},renderSegments:function(){_i.fn.renderSegments.call(this);if(this._segments&&this._segments.length>1){var t=Ua(this._segments);for(var e=0;e<t.length;e++){var i=t[e];if(i&&i.length>1){var r=i[0].linePoints[0];var a=z(i);var n=z(a.linePoints);var s=r.categoryIx===0;var o=n.categoryIx===n.categoriesCount-1;if(s&&o)z(i).linePoints.push(r)}}}},createSegment:function(t,e,i){var r=e.style;var a;if(r===Xt)a=di;else a=ci;var n=new a(t,e,i);var s=this.seriesMissingValues(e);if(t.length===e.data.length||s===Ht)n.options.closed=true;return n}}),ja=(t(Za,{clip:false,limitPoints:false}),Ai.extend({fillToAxes:function(){}})),Ka=wi.extend({fillToAxes:function(){}}),Qa=Za.extend({createSegment:function(t,e,i,r){var a=this.options.isStacked;var n=(e.line||{}).style;var s;var o;var l;if(a&&i>0&&r){o=r.linePoints.slice(0);s=r}if(n===Xt){l=new ja(t,e,i,s,o);l.options.closed=true}else{t.push(t[0]);l=new Ka(t,e,i,s,o)}return l},seriesMissingValues:function(t){return t.missingValues||Dt}}),$a=La.extend({init:function(t,e){La.fn.init.call(this,t,null,e)}}),Ja=(t($a,{overlay:{gradient:"none"},labels:{distance:10}}),_.extend({init:function(t){_.fn.init.call(this,t);this.forEach=t.rtl?Ri:Ei},reflow:function(i){var t=this;var e=t.options;var r=t.children;var a=e.gap;var n=e.spacing;var s=r.length;var o=s+a+n*(s-1);var l=i.angle/o;var h=i.startAngle+l*(a/2);this.forEach(r,function(t){var e=i.clone();e.startAngle=h;e.angle=l;if(t.sector)e.radius=t.sector.radius;t.reflow(e);t.sector=e;h+=l+l*n})}})),tn=(t(Ja,{gap:1,spacing:0}),_.extend({reflow:function(t){var e=this;var i=e.options.reverse;var r=e.children;var a=r.length;var n=i?a-1:0;var s=i?-1:1;this.box=new E;for(var o=n;o>=0&&o<a;o+=s){var l=r[o].sector;l.startAngle=t.startAngle;l.angle=t.angle}}})),en=Li.extend({pointType:function(){return $a},clusterType:function(){return Ja},stackType:function(){return tn},categorySlot:function(t,e){return t.getSlot(e)},pointSlot:function(t,e){var i=t.clone();var r=t.center.y;i.radius=r-e.y1;i.innerRadius=r-e.y2;return i},reflowPoint:function(t,e){t.sector=e;t.reflow()},createAnimation:function(){this.options.animation.center=this.box.toRect().center();Li.fn.createAnimation.call(this)}}),rn=(en.prototype.reflow=oi.prototype.reflow,t(en,{clip:false,limitPoints:false,animation:{type:"pie"}}),Ha.extend({createPolarAxis:function(){var t=new C.RadarCategoryAxis(this.options.categoryAxis,this.chartService);this.polarAxis=t;this.categoryAxis=t;this.appendAxis(t);this.aggregateCategories();this.createCategoryAxesLabels()},valueAxisOptions:function(t){if(this._hasBarCharts)b(t,{majorGridLines:{type:i},minorGridLines:{type:i}});if(this._isStacked100)b(t,{roundToMajorUnit:false,labels:{format:"P0"}});return b(t,this.options.valueAxis)},aggregateCategories:function(){Xr.prototype.aggregateCategories.call(this,this.panes)},createCategoryAxesLabels:function(){Xr.prototype.createCategoryAxesLabels.call(this,this.panes)},filterSeries:function(t){return t},createCharts:function(){var t=this.filterVisibleSeries(this.series);var e=this.panes[0];this.createAreaChart(or(t,[le]),e);this.createLineChart(or(t,[ve]),e);this.createBarChart(or(t,[he]),e)},chartOptions:function(t){var e={series:t};var i=t[0];if(i){var r=this.filterVisibleSeries(t);var a=i.stack;e.isStacked=a&&r.length>1;e.isStacked100=a&&a.type==="100%"&&r.length>1;if(e.isStacked100)this._isStacked100=true}return e},createAreaChart:function(t,e){if(t.length===0)return;var i=new Qa(this,this.chartOptions(t));this.appendChart(i,e)},createLineChart:function(t,e){if(t.length===0)return;var i=new Za(this,this.chartOptions(t));this.appendChart(i,e)},createBarChart:function(t,e){if(t.length===0)return;var i=t[0];var r=this.chartOptions(t);r.gap=i.gap;r.spacing=i.spacing;var a=new en(this,r);this.appendChart(a,e);this._hasBarCharts=true},seriesCategoryAxis:function(){return this.categoryAxis},_dispatchEvent:function(t,e,i){var r=t._eventCoordinates(e);var a=new I(r.x,r.y);var n=this.categoryAxis.getCategory(a);var s=this.valueAxis.getValue(a);if(n!==null&&s!==null)t.trigger(i,{element:D(e),category:n,value:s})},createCrosshairs:function(){}})),an=(b(rn.prototype,br,{appendChart:Xr.prototype.appendChart,aggregateSeries:Xr.prototype.aggregateSeries,seriesSourcePoints:Xr.prototype.seriesSourcePoints}),t(rn,{categoryAxis:{categories:[]},valueAxis:{}}),_.extend({init:function(t,e,i){_.fn.init.call(this,e);this.value=t;this.options.index=i.index},reflow:function(t){var e=this.points;var i=this.children[0];this.box=new E(e[0].x,e[0].y,e[1].x,e[2].y);if(i)i.reflow(new E(t.x1,e[0].y,t.x2,e[2].y))},createVisual:function(){var t=this;var e=this.options;var i;_.fn.createVisual.call(this);if(e.visual)i=e.visual({category:this.category,dataItem:this.dataItem,value:this.value,series:this.series,percentage:this.percentage,points:this.points,options:e,sender:this.getSender(),createVisual:function(){return t.createPath()}});else i=this.createPath();if(i)this.visual.append(i)},createPath:function(){var t=this.options;var e=t.border;var i=rt.fromPoints(this.points,{fill:{color:t.color,opacity:t.opacity},stroke:{color:e.color,opacity:e.opacity,width:e.width}}).close();return i},createHighlight:function(t){return rt.fromPoints(this.points,t)},highlightVisual:function(){return this.visual.children[0]},highlightVisualArgs:function(){var t=rt.fromPoints(this.points).close();return{options:this.options,path:t}},tooltipAnchor:function(){var t=this.box;return{point:new I(t.center().x,t.y1),align:{horizontal:"center",vertical:"top"}}},formatValue:function(t){var e=this;return e.owner.formatPointValue(e,t)}})),nn=(t(an,{color:n,border:{width:1}}),b(an.prototype,li),_.extend({init:function(t,e){_.fn.init.call(this,e);this.plotArea=t;this.points=[];this.labels=[];this.legendItems=[];this.render()},formatPointValue:function(t,e){return this.chartService.format.auto(e,t.value)},render:function(){var t=this;var e=this;var v=e.options;var i=e.plotArea.options.seriesColors;if(i===void 0)i=[];var r=v.series[0];var a=r.data;if(!a)return;var n=nr(r);var c=n.total;var s=n.points;for(var o=0;o<s.length;o++){var l=s[o];if(!l)continue;var h=l.fields;if(!M(r.color))r.color=h.color||i[o%i.length];h=b({index:o,owner:t,series:r,dataItem:a[o],percentage:l.value/c},h,{visible:l.visible});var u=l.valueFields.value;var f=t.createSegment(u,h);var p=t.createLabel(u,h);if(f&&p)f.append(p)}},evalSegmentOptions:function(t,e,i){var r=i.series;ni(t,{value:e,series:r,dataItem:i.dataItem,index:i.index},{defaults:r._defaults,excluded:["data","content","template","toggle","visual"]})},createSegment:function(t,e){var i=b({},e.series);this.evalSegmentOptions(i,t,e);this.createLegendItem(t,i,e);if(e.visible!==false){var r=new an(t,i,e);x.extend(r,e);this.append(r);this.points.push(r);return r}},createLabel:function(t,e){var i=e.series;var r=e.dataItem;var a=b({},this.options.labels,i.labels);var n=t;if(a.visible){var s=H(a);var o={dataItem:r,value:t,percentage:e.percentage,category:e.category,series:i};if(s)n=s(o);else if(a.format)n=this.plotArea.chartService.format.auto(a.format,n);if(!a.color){a.color=C.autoTextColor(i.color);if(!a.background)a.background=i.color}this.evalSegmentOptions(a,t,e);var l=new F(n,b({vAlign:a.position},a),o);this.labels.push(l);return l}},labelPadding:function(){var t=this.labels;var e={left:0,right:0};for(var i=0;i<t.length;i++){var r=t[i];var a=r.options.align;if(a!==P){var n=t[i].box.width();if(a===O)e.left=Math.max(e.left,n);else e.right=Math.max(e.right,n)}}return e},dynamicSlopeReflow:function(t,e,v){var c=this;var u=c.options;var i=c.points;var f=i.length;var p=i[0];var r=p;for(var a=0;a<i.length;a++)if(i[a].percentage>r.percentage)r=i[a];var d=p.percentage/r.percentage*e;var g=(e-d)/2;var n=0;for(var s=0;s<f;s++){var o=i[s].percentage;var x=i[s+1];var m=x?x.percentage:o;var l=i[s].points=[];var y=u.dynamicHeight?v*o:v/f;var h=void 0;if(!o)h=m?0:e/2;else h=(e-d*(m/o))/2;h=j(h,0,e);l.push(new ht(t.x1+g,t.y1+n));l.push(new ht(t.x1+e-g,t.y1+n));l.push(new ht(t.x1+e-h,t.y1+y+n));l.push(new ht(t.x1+h,t.y1+y+n));g=h;n+=y+u.segmentSpacing;d=j(e-2*h,0,e)}},constantSlopeReflow:function(t,e,v){var c=this;var i=c.options;var r=c.points;var a=r.length;var n=i.neckRatio<=1;var u=n?i.neckRatio*e:e;var s=n?0:(e-e/i.neckRatio)/2;var f=n?e:e-s*2;var p=(f-u)/2;var o=0;for(var l=0;l<a;l++){var h=r[l].points=[];var d=r[l].percentage;var g=i.dynamicHeight?p*d:p/a;var x=i.dynamicHeight?v*d:v/a;h.push(new ht(t.x1+s,t.y1+o));h.push(new ht(t.x1+e-s,t.y1+o));h.push(new ht(t.x1+e-s-g,t.y1+x+o));h.push(new ht(t.x1+s+g,t.y1+x+o));s+=g;o+=x+i.segmentSpacing}},reflow:function(t){var e=this.points;var i=e.length;if(!i)return;var r=this.options;var a=t.clone().unpad(this.labelPadding());var n=a.height()-r.segmentSpacing*(i-1);var s=a.width();if(r.dynamicSlope)this.dynamicSlopeReflow(a,s,n);else this.constantSlopeReflow(a,s,n);for(var o=0;o<i;o++)e[o].reflow(t)}})),sn=(t(nn,{neckRatio:.3,width:300,dynamicSlope:false,dynamicHeight:true,segmentSpacing:0,labels:{visible:false,align:P,position:P,zIndex:1}}),b(nn.prototype,Ia),gr.extend({render:function(){this.createFunnelChart(this.series)},createFunnelChart:function(t){var e=t[0];var i=new nn(this,{series:t,legend:this.options.legend,neckRatio:e.neckRatio,dynamicHeight:e.dynamicHeight,dynamicSlope:e.dynamicSlope,segmentSpacing:e.segmentSpacing,highlight:e.highlight});this.appendChart(i)},appendChart:function(t,e){gr.fn.appendChart.call(this,t,e);X(this.options.legend.items,t.legendItems)}})),on=function(t,e){if(e===void 0)e=.05;var a=kendo.parseColor(t);var n=1-e;return function(t){var e=a.toHSL();var i=100-e.l;var r=n-t;e.l+=Math.min(r*i,i);return e.toCss()}},ln=_.extend({init:function(t,e){_.fn.init.call(this);this.options=e;this.color=e.color||n;this.value=t},render:function(){if(this._rendered)return;this._rendered=true;this.createMarker();this.createLabel();this.createNote()},createLabel:function(){var t=this.options;var e=t.labels;if(e.visible){var i=this.pointData();var r=H(e);var a;var n=e.color;if(r)a=r(i);else a=this.formatValue(e.format);if(!n)n=C.autoTextColor(this.color);this.label=new F(a,b({align:P,vAlign:P,margin:{left:5,right:5},zIndex:B(e.zIndex,this.series.zIndex)},e,{color:n}),i);this.append(this.label)}},formatValue:function(t){return this.owner.formatPointValue(this,t)},reflow:function(t){this.render();var e=this.label;this.box=t;if(e)e.reflow(this.markerBox());if(this.note)this.note.reflow(t);this.marker.reflow(this.markerBox())},markerBox:function(){var t=this.options;var e=t.markers;var i=e.border;var r=this.box.toRect();var a=B(e.type,"rect");var n=a===k.ROUNDED_RECT;var s=B(i.width,n?1:0);var o=Math.round(s/2);if(e.size){var l=r.center();r.size.width=r.size.height=e.size;r.origin.x=Math.round(l.x-r.size.width/2);r.origin.y=Math.round(l.y-r.size.height/2)}r.size.width-=s;r.size.height-=s;r.origin.y+=o+.5;r.origin.x+=o+.5;return C.rectToBox(r)},markerBorder:function(){var t=this.options;var e=t.markers;var i=e.border;var r=B(i.opacity,t.opacity);return{color:i.color||this.color,width:i.width,opacity:r,dashType:i.dashType}},createMarker:function(){var t=this.options;var e=t.markers;var i=new N({type:B(e.type,"rect"),width:e.size,height:e.size,rotation:e.rotation,background:this.color,border:this.markerBorder(),borderRadius:e.borderRadius,opacity:this.series.opacity||t.opacity,zIndex:B(t.zIndex,this.series.zIndex),animation:t.animation,visual:t.visual},{dataItem:this.dataItem,value:this.value,series:this.series,category:this.category});this.marker=i;this.append(i)},createHighlight:function(t){var e=this.options;var i=this.options.highlight.markers||this.options.markers;var r=new N({type:B(i.type,"rect"),width:i.size,height:i.size,rotation:i.rotation,background:i.color||this.color,border:this.markerBorder(),borderRadius:i.borderRadius,opacity:this.series.opacity||e.opacity,zIndex:B(e.zIndex,this.series.zIndex)});r.reflow(this.markerBox());var a=r.getElement();a.options.fill=t.fill;a.options.stroke=t.stroke;return a},highlightVisual:function(){return this.rectVisual},highlightVisualArgs:function(){return{options:this.options,rect:this.box.toRect(),visual:this.rectVisual}},tooltipAnchor:function(){var t=this.box.center().x;var e=this.box.y1-It;return{point:new I(t,e),align:{horizontal:P,vertical:V}}},overlapsBox:function(t){return this.box.overlaps(t)},unclipElements:function(){},pointData:function(){return{x:this.value.x,y:this.value.y,value:this.value.value,dataItem:this.dataItem,series:this.series}}}),hn=(b(ln.prototype,li),b(ln.prototype,hi),ln.prototype.defaults={markers:{type:"rect",borderRadius:4,border:{color:"transparent"}},padding:{top:1},labels:{visible:false,padding:3},opacity:1,notes:{label:{}}},_.extend({init:function(t,e){_.fn.init.call(this,e);this.plotArea=t;this.chartService=t.chartService;this._initFields();this.render()},_initFields:function(){this.points=[];this.seriesOptions=[];this.valueRange={min:u,max:c};this._evalSeries=[]},render:function(){this.setRange();this.traverseDataPoints(this.addValue.bind(this))},setRange:function(){var t=this;var e=this;var i=e.options.series;for(var r=0;r<i.length;r++){var a=i[r];for(var n=0;n<a.data.length;n++){var s=t._bindPoint(a,r,n);var o=s.valueFields;if(T(o.value)&&o.value!==null){t.valueRange.min=Math.min(t.valueRange.min,o.value);t.valueRange.max=Math.max(t.valueRange.max,o.value)}}}},addValue:function(t,e){var i;if(t&&T(t.value)&&t.value!==null){i=this.createPoint(t,e);if(i)x.extend(i,e)}this.points.push(i)},evalPointOptions:function(t,e,i){var r=i.series;var a=i.seriesIx;var n={defaults:r._defaults,excluded:["data","tooltip","content","template","visual","toggle"]};var s=this._evalSeries[a];if(!T(s))this._evalSeries[a]=s=ni(t,{},n,true);var o=t;if(s){o=b({},t);ni(o,{value:e,series:r,dataItem:i.dataItem,min:this.valueRange.min,max:this.valueRange.max},n)}return o},pointType:function(){return ln},pointOptions:function(t,e){var i=this.seriesOptions[e];if(!i){var r=this.pointType().prototype.defaults;this.seriesOptions[e]=i=b({},r,{markers:{opacity:t.opacity},tooltip:{format:this.options.tooltip.format},labels:{format:this.options.labels.format}},t)}return i},createPoint:function(t,e){var i=e.series;var r=this.pointOptions(i,e.seriesIx);var a=e.color||i.color;r=this.evalPointOptions(r,t,e);if(M(i.color))a=r.color;else if(this.valueRange.max!==0){var n=on(a);a=n(t.value/this.valueRange.max)}var s=new ln(t,r);s.color=a;this.append(s);return s},seriesAxes:function(t){var e=t.xAxis;var i=t.yAxis;var r=this.plotArea;var a=e?r.namedXAxes[e]:r.axisX;var n=i?r.namedYAxes[i]:r.axisY;if(!a)throw new Error("Unable to locate X axis with name "+e);if(!n)throw new Error("Unable to locate Y axis with name "+i);return{xAxis:a,yAxis:n}},reflow:function(t){var c=this;var u=this.points;var f=!this.options.clip;var p=0;this.traverseDataPoints(function(t,e){var i=u[p++];var r=c.seriesAxes(e.series);var a=r.xAxis;var n=r.yAxis;var s=a.categoryIndex(t.x);var o=n.categoryIndex(t.y);var l=a.getSlot(s,s,f);var h=n.getSlot(o,o,f);if(i)if(l&&h){var v=c.pointSlot(l,h);i.reflow(v)}else i.visible=false});this.box=t},pointSlot:function(t,e){return new E(t.x1,e.y1,t.x2,e.y2)},traverseDataPoints:function(v){var t=this;var c=this;var e=c.options.series;for(var i=0;i<e.length;i++){var r=e[i];var a=t.seriesAxes(r);var n=a.xAxis;var s=a.yAxis;var o=n.currentRangeIndices();var u=s.currentRangeIndices();for(var l=0;l<r.data.length;l++){var f=t._bindPoint(r,i,l);var h=f.valueFields;var p=f.fields;var d=n.totalIndex(h.x);var g=s.totalIndex(h.y);var x=o.min<=d&&d<=o.max;var m=u.min<=g&&g<=u.max;if(x&&m)v(h,b({pointIx:l,series:r,seriesIx:i,dataItem:r.data[l],owner:t},p))}}},formatPointValue:function(t,e){var i=t.value;return this.chartService.format.auto(e,i.x,i.y,i.value)},animationPoints:function(){var t=this.points;var e=[];for(var i=0;i<t.length;i++)e.push((t[i]||{}).marker);return e}})),vn=(t(hn,{series:[],tooltip:{format:"{0}, {1}: {2}"},labels:{format:"{2}"},clip:true}),b(hn.prototype,{_bindPoint:oi.prototype._bindPoint}),gr.extend({initFields:function(){this.namedXAxes={};this.namedYAxes={}},render:function(t){if(t===void 0)t=this.panes;this.bindCategories();this.createAxes(t);this.createCharts(t);this.createAxisLabels()},bindCategories:function(){var v=this;var t=this.srcSeries||this.series;for(var e=0;e<t.length;e++){var i=t[e];var c=i.data||[];var r=v.seriesAxes(i);var a=r.xAxis;var n=r.yAxis;var s=C.createHashSet(a.categories||[]);var o=C.createHashSet(n.categories||[]);for(var l=0;l<c.length;l++){var h=mt.current.bindPoint(i,l).valueFields;var u=h.x;var f=h.y;if(!s.has(u))s.add(u);if(!o.has(f))o.add(f)}a.categories=s.values();n.categories=o.values()}},createCharts:function(t){var e=this;var i=this.groupSeriesByPane();for(var r=0;r<t.length;r++){var a=t[r];var n=i[a.options.name||"default"]||[];e.addToLegend(n);var s=e.filterVisibleSeries(n);if(!s)continue;e.createHeatmapChart(or(s,[te]),a)}},createHeatmapChart:function(t,e){var i=new hn(this,{series:t});this.appendChart(i,e)},seriesPaneName:function(t){var e=this.options;var i=t.xAxis;var r=[].concat(e.xAxis);var a=K(r,function(t){return t.name===i})[0];var n=t.yAxis;var s=[].concat(e.yAxis);var o=K(s,function(t){return t.name===n})[0];var l=e.panes||[{}];var h=l[0].name||"default";var v=(a||{}).pane||(o||{}).pane||h;return v},seriesAxes:function(t){var e;var i;var r=this.options;var a=[].concat(r.xAxis);var n=t.xAxis;if(n)e=a.find(function(t){return t.name===n});else e=a[0];var s=[].concat(r.yAxis);var o=t.yAxis;if(o)i=s.find(function(t){return t.name===o});else i=s[0];if(!e)throw new Error("Unable to locate X axis with name "+n);if(!i)throw new Error("Unable to locate Y axis with name "+o);return{xAxis:e,yAxis:i}},createAxisLabels:function(){var t=this.axes;for(var e=0;e<t.length;e++)t[e].createLabels()},createXYAxis:function(t,e,i){var r=t.name;var v=e?this.namedYAxes:this.namedXAxes;var a=x.extend({axisCrossingValue:0},t,{vertical:e,reverse:e||this.chartService.rtl?!t.reverse:t.reverse,justified:false});var c=a.categories?a.categories[0]:null;var n=[a.min,a.max,c];var u=this.series;for(var s=0;s<u.length;s++){var f=u[s];var p=f[e?"yAxis":"xAxis"];if(p===a.name||i===0&&!p){var d=mt.current.bindPoint(f,0).valueFields;n.push(d[e?"y":"x"]);break}}var g;for(var o=0;o<n.length;o++)if(n[o]instanceof Date){g=true;break}var l;if(sr(a.type,w)||!a.type&&g)l=C.DateCategoryAxis;else l=W;var h=new l(a,this.chartService);h.axisIndex=i;if(r){if(v[r])throw new Error((e?"Y":"X")+" axis with name "+r+" is already defined");v[r]=h}this.appendAxis(h);h.mapCategories();return h},createAxes:function(t){var e=this;var i=this.options;var r=[].concat(i.xAxis);var a=[];var n=[].concat(i.yAxis);var s=[];for(var o=0;o<r.length;o++){var l=e.findPane(r[o].pane);if(A(l,t))a.push(e.createXYAxis(r[o],false,o))}for(var h=0;h<n.length;h++){var v=e.findPane(n[h].pane);if(A(v,t))s.push(e.createXYAxis(n[h],true,h))}this.axisX=this.axisX||a[0];this.axisY=this.axisY||s[0]},removeAxis:function(t){var e=t.options.name;gr.fn.removeAxis.call(this,t);if(t.options.vertical)delete this.namedYAxes[e];else delete this.namedXAxes[e];if(t===this.axisX)delete this.axisX;if(t===this.axisY)delete this.axisY},_dispatchEvent:function(t,e,i){var r=t._eventCoordinates(e);var a=new I(r.x,r.y);var n=this.axes;var v=n.length;var s=[];var o=[];for(var l=0;l<v;l++){var h=n[l];var c=h.options.vertical?o:s;rr(c,h.getCategory(a))}if(s.length>0&&o.length>0)t.trigger(i,{element:D(e),originalEvent:e,x:vr(s),y:vr(o)})},updateAxisOptions:function(t,e){var i=t.options.vertical;var r=this.groupAxes(this.panes);var a=(i?r.y:r.x).indexOf(t);cn(this.options,a,i,e);cn(this.originalOptions,a,i,e)},crosshairOptions:function(t){return x.extend({},t.options.crosshair,{zIndex:0})}}));function cn(t,e,i,r){var a=[].concat(i?t.yAxis:t.xAxis)[e];b(a,r)}t(vn,{xAxis:{},yAxis:{}}),b(vn.prototype,br);var un="color",fn="first",pn="from",dn="max",gn="min",xn="noteText",mn="summary",yn="to",_n=(va.current.register(Xr,[Wt,Qt,ie,ye,Yt,ge,Kt,re,jt,me,Ut,xe,fe,ue,we,ee,ce,_e]),va.current.register(Aa,[pe,de,Zt]),va.current.register(Oa,[ae]),va.current.register(za,[$t]),va.current.register(sn,[Jt]),va.current.register(Wa,[ne,se,oe]),va.current.register(rn,[le,he,ve]),va.current.register(vn,[te]),mt.current.register([Wt,Qt,ie,ye,Yt,ge],[v],[Ue,un,xn,Rt,Vt]),mt.current.register([fe,ue,ce,_e],[pn,yn],[Ue,un,xn]),mt.current.register([we,ee],[v],[Ue,un,xn,mn]),mt.current.register([ne,se,oe],[m,g],[un]),mt.current.register([le,he,ve],[v],[un]),mt.current.register([Jt],[v],[Ue,un,"visibleInLegend","visible"]),Cr.current.register([Wt,Qt,ie,ye,Yt,ge,we,ee],{value:dn,color:fn,noteText:fn,errorLow:gn,errorHigh:dn}),Cr.current.register([fe,ue,ce,_e],{from:gn,to:dn,color:fn,noteText:fn}),Cr.current.register([le,he,ve],{value:dn,color:fn}),mt.current.register([pe,de,Zt],[m,g],[un,xn,Ot,Lt,Mt,Bt]),mt.current.register([Zt],[m,g,"size"],[un,Ue,xn]),mt.current.register([te],[m,g,v],[un,xn]),mt.current.register([Kt,re],["open","high","low","close"],[Ue,un,"downColor",xn]),Cr.current.register([Kt,re],{open:dn,high:dn,low:gn,close:dn,color:fn,downColor:fn,noteText:fn}),mt.current.register([Ut,xe],["lower","q1","median","q3","upper","mean","outliers"],[Ue,un,xn]),Cr.current.register([Ut,xe],{lower:dn,q1:dn,median:dn,q3:dn,upper:dn,mean:dn,outliers:fn,color:fn,noteText:fn}),mt.current.register([jt,me],["current","target"],[Ue,un,"visibleInLegend",xn]),Cr.current.register([jt,me],{current:dn,target:dn,color:fn,noteText:fn}),mt.current.register([ae,$t],[v],[Ue,un,"explode","visibleInLegend","visible"]),[Ue,v,m,g]),wn="mousemove",bn="contextmenu",An="mouseleave",Sn=20,Cn=e.extend({init:function(t,e,i,r){var a=this;if(r===void 0)r={};this.observers=[];this.addObserver(r.observer);this.chartService=new J.ChartService(this,r);this.chartService.theme=i;this._initElement(t);var n=b({},this.options,e);this._originalOptions=b({},n);this._theme=i;this._initTheme(n,i);this._initHandlers();this._initSurface();this.bindCategories();C.FontLoader.preloadFonts(e,function(){a.fontLoaded=true;if(!a._destroyed){a.trigger("init");a._redraw();a._attachEvents()}})},_initElement:function(t){this._setElementClass(t);t.style.position="relative";while(t.firstChild)t.removeChild(t.firstChild);this.element=t},_setElementClass:function(t){C.addClass(t,"k-chart")},_initTheme:function(t,e){var i=[];var r=t.series||[];for(var a=0;a<r.length;a++)i.push(x.extend({},r[a]));t.series=i;kn(t);this.applyDefaults(t,e);if(t.seriesColors===null)delete t.seriesColors;this.options=b({},e,t);this.applySeriesColors()},getSize:function(){var t=this.options.chartArea||{};var e=t.width?parseInt(t.width,10):Math.floor(this.element.offsetWidth);var i=t.height?parseInt(t.height,10):Math.floor(this.element.offsetHeight);return{width:e,height:i}},resize:function(t){var e=this.getSize();var i=this._size;var r=e.width>0||e.height>0;if(t||r&&(!i||e.width!==i.width||e.height!==i.height)){this._size=e;this._resize(e,t);this.trigger("resize",e)}else if(r&&this._selections&&C.find(this._selections,function(t){return!t.visible})){this._destroySelections();this._setupSelection()}},_resize:function(){this._noTransitionsRedraw()},redraw:function(t){this.applyDefaults(this.options);this.applySeriesColors();if(t){var e=this._model._plotArea;var i=e.findPane(t);e.redraw(i)}else this._redraw()},getAxis:function(t){return ut(t,this._plotArea.axes)},findAxisByName:function(t){return this.getAxis(t)},findPaneByName:function(t){var e=this._plotArea.panes;for(var i=0;i<e.length;i++)if(e[i].options.name===t)return new ft(e[i])},findPaneByIndex:function(t){var e=this._plotArea.panes;if(e[t])return new ft(e[t])},plotArea:function(){return new pt(this._plotArea)},toggleHighlight:function(t,e){var i=this._plotArea;var r=(i.srcSeries||i.series||[])[0];var a;if(M(e))a=i.filterPoints(e);else{var n,s;if(S(e)){n=e.series;s=e.category}else n=s=e;if(r.type===$t)a=Pn(i.pointsBySeriesName(n),s);else if(r.type===ae||r.type===Jt)a=Pn((i.charts[0]||{}).points,s);else a=i.pointsBySeriesName(n)}if(a)this.togglePointsHighlight(t,a)},togglePointsHighlight:function(t,e){var i=this._highlight;for(var r=0;r<e.length;r++)i.togglePointHighlight(e[r],t)},showTooltip:function(t){var e=this._sharedTooltip();var i=this;var r=i._tooltip;var a=i._plotArea;var n,s;if(M(t)){n=a.findPoint(t);if(n&&e)s=n.categoryIx}else if(e&&T(t))s=a.categoryAxis.categoryIndex(t);if(e){if(s>=0){var o=this._plotArea.pointsByCategoryIndex(s);r.showAt(o)}}else if(n)r.show(n)},hideTooltip:function(){this._tooltip.hide()},_initSurface:function(){var t=this.surface;var e=this._surfaceWrap();var i=this.options.chartArea||{};if(i.width)C.elementSize(e,{width:i.width});if(i.height)C.elementSize(e,{height:i.height});if(!t||t.options.type!==this.options.renderAs){this._destroySurface();this.surface=it.Surface.create(e,{type:this.options.renderAs});this.surface.bind("mouseenter",this._surfaceMouseenterHandler);this.surface.bind("mouseleave",this._surfaceMouseleaveHandler)}else{this.surface.clear();this.surface.resize()}},_surfaceWrap:function(){return this.element},_redraw:function(){var t=this._getModel();this._size={width:t.options.width,height:t.options.height};this._destroyView();this._model=t;this._plotArea=t._plotArea;t.renderVisual();if(this.options.transitions!==false)t.traverse(function(t){if(t.animation)t.animation.setup()});this._initSurface();this.surface.draw(t.visual);if(this.options.transitions!==false)t.traverse(function(t){if(t.animation)t.animation.play()});this._tooltip=this._createTooltip();this._highlight=new Wr;this._setupSelection();this._createPannable();this._createZoomSelection();this._createMousewheelZoom();this.trigger(Ge);zn(this._plotArea.panes);if(!this._navState)this._cancelDomEvents()},exportVisual:function(t){var e;if(t&&(t.width||t.height||t.options)){var i=this.options;var r=b({},t.options,{chartArea:{width:t.width,height:t.height}});Bn(this._originalOptions,r);this.options=b({},this._originalOptions,r);this._initTheme(this.options,this._theme);this.bindCategories();var a=this._getModel();a.renderVisual();zn(a._plotArea.panes);e=a.visual;this.options=i}else e=this.surface.exportVisual();return e},_sharedTooltip:function(){return this._plotArea instanceof Xr&&this.options.tooltip&&this.options.tooltip.shared},_createPannable:function(){var t=this.options;if(t.pannable!==false)this._pannable=new Kr(this._plotArea,t.pannable)},_createZoomSelection:function(){var t=this.options.zoomable;var e=(t||{}).selection;if(t!==false&&e!==false)this._zoomSelection=new Qr(this,e)},_createMousewheelZoom:function(){var t=this.options.zoomable;var e=(t||{}).mousewheel;if(t!==false&&e!==false)this._mousewheelZoom=new ra(this,e)},_toggleDragZoomEvents:function(){var t=this.options.pannable;var e=this.options.zoomable;var i=(e||{}).selection;var r=(e||{}).mousewheel;var a=!t&&(e===false||i===false)&&!this.requiresHandlers([Me,Oe,Le]);var n=(e===false||r===false)&&!this.requiresHandlers([Be,ze,De]);var s=this.element;if(this._dragZoomEnabled&&a&&n){s.style.touchAction=this._touchAction||"";this._dragZoomEnabled=false}else if(!this._dragZoomEnabled&&!(a&&n)){s.style.touchAction="none";this._dragZoomEnabled=true}this._toggleDomEvents(!a,!n)},_toggleDomEvents:function(t,e){var i=this.domEvents;if(!i)return;if(i.toggleDrag)i.toggleDrag(t);if(i.toggleZoom)i.toggleZoom(e)},_createTooltip:function(){var t=this;var e=t.options.tooltip;var i;if(this._sharedTooltip())i=this._createSharedTooltip(e);else i=new ga(this.chartService,e);return i},_createSharedTooltip:function(t){return new xa(this._plotArea,t)},applyDefaults:function(t,e){Tn(t,e);In(t,e)},applySeriesColors:function(){var t=this.options;var e=t.series;var i=t.seriesColors||[];for(var r=0;r<e.length;r++){var a=e[r];var n=i[r%i.length];var s=a._defaults;a.color=a.color||n;if(s)s.color=s.color||n}},_getModel:function(){var t=this.options;var e=this._createPlotArea();var i=new C.RootElement(this._modelOptions());i.chart=this;i._plotArea=e;C.Title.buildTitle(t.title,i);if(t.legend&&t.legend.visible)i.append(new ha(e.options.legend,this.chartService));i.append(e);i.reflow();return i},_modelOptions:function(){var t=this.options;var e=this.getSize();return b({transitions:t.transitions,width:e.width||k.DEFAULT_WIDTH,height:e.height||k.DEFAULT_HEIGHT},t.chartArea)},_createPlotArea:function(t){var e=this.options;var i=va.current.create(t?[]:e.series,e,this.chartService);return i},_setupSelection:function(){var t=this;var e=this;var i=e._plotArea.axes;var r=this._selections=[];for(var a=0;a<i.length;a++){var n=i[a];var s=n.options;if(n instanceof W&&s.select&&!s.vertical){var o=n.range();var l=new da(t,n,b({min:o.min,max:o.max},s.select));r.push(l)}}},_selectStart:function(t){return this.trigger(He,t)},_select:function(t){return this.trigger(Fe,t)},_selectEnd:function(t){return this.trigger(Ne,t)},_initHandlers:function(){this._clickHandler=this._click.bind(this);this._mousewheelHandler=this._mousewheel.bind(this);this._mouseleaveHandler=this._mouseleave.bind(this);this._surfaceMouseenterHandler=this._mouseover.bind(this);this._surfaceMouseleaveHandler=this._mouseout.bind(this);this._mousemove=kendo.throttle(this._mousemove.bind(this),Sn)},addObserver:function(t){if(t)this.observers.push(t)},removeObserver:function(t){var e=this.observers.indexOf(t);if(e>=0)this.observers.splice(e,1)},requiresHandlers:function(t){var e=this.observers;for(var i=0;i<e.length;i++)if(e[i].requiresHandlers(t))return true},trigger:function(t,e){if(e===void 0)e={};if(t===Xe)e.anchor.point=this._toDocumentCoordinates(e.anchor.point);e.sender=this;var i=this.observers;var r=false;for(var a=0;a<i.length;a++)if(i[a].trigger(t,e))r=true;return r},_attachEvents:function(){var t=this.element;this._touchAction=t.style.touchAction;var e;r(t,(e={},e[bn]=this._clickHandler,e[Qe]=this._mousewheelHandler,e[An]=this._mouseleaveHandler,e));if(this._shouldAttachMouseMove()){var i;r(t,(i={},i[wn]=this._mousemove,i))}this.domEvents=J.DomEventsBuilder.create(this.element,{start:this._start.bind(this),move:this._move.bind(this),end:this._end.bind(this),tap:this._tap.bind(this),gesturestart:this._gesturestart.bind(this),gesturechange:this._gesturechange.bind(this),gestureend:this._gestureend.bind(this)});this._toggleDragZoomEvents()},_mouseleave:function(t){if(this._hoveredPoint){this._hoveredPoint.out(this,t);this._hoveredPoint=null}if(this._plotArea.hovered){this.trigger(Ve);this._plotArea.hovered=false}},_cancelDomEvents:function(){if(this.domEvents&&this.domEvents.cancel)this.domEvents.cancel()},_gesturestart:function(t){if(this._mousewheelZoom&&!this._stopChartHandlers(t)){this._gestureDistance=t.distance;this._unsetActivePoint();this.surface.suspendTracking()}},_gestureend:function(t){if(this._zooming&&!this._stopChartHandlers(t)){if(this.surface)this.surface.resumeTracking();this._zooming=false;this.trigger(De,{})}},_gesturechange:function(t){var e=this._mousewheelZoom;if(e&&!this._stopChartHandlers(t)){t.preventDefault();var i=this._gestureDistance;var r=-t.distance/i+1;if(Math.abs(r)>=.1){r=Math.round(r*10);this._gestureDistance=t.distance;var a={delta:r,axisRanges:Rn(this._plotArea.axes),originalEvent:t};if(this._zooming||!this.trigger(Be,a)){var n=this._eventCoordinates(t);if(!this._zooming)this._zooming=true;var s=a.axisRanges=e.updateRanges(r,n);if(s&&!this.trigger(ze,a))e.zoom()}}}},_mouseout:function(t){if(t.element){var e=this._drawingChartElement(t.element,t);if(e&&e.leave)e.leave(this,t.originalEvent)}},_start:function(t){var e=this._eventCoordinates(t);if(this._stopChartHandlers(t)||!this._plotArea.backgroundContainsPoint(e))return;if(this.requiresHandlers([Me,Oe,Le]))this._startNavigation(t,e,Me);if(this._pannable&&this._pannable.start(t)){this.surface.suspendTracking();this._unsetActivePoint();this._suppressHover=true;this.chartService.panning=true}if(this._zoomSelection)if(this._zoomSelection.start(t))this.trigger(Be,{axisRanges:Rn(this._plotArea.axes),originalEvent:t})},_move:function(t){var e=this;var i=e._navState;var r=e._pannable;if(this._stopChartHandlers(t))return;if(r){var a=r.move(t);if(a&&!this.trigger(Oe,{axisRanges:a,originalEvent:t}))r.pan()}else if(i){var n={};var s=i.axes;for(var o=0;o<s.length;o++){var l=s[o];var v=l.options.name;if(v){var h=l.options.vertical?t.y:t.x;var c=h.startLocation-h.location;if(c!==0)n[l.options.name]=l.translateRange(c)}}i.axisRanges=n;this.trigger(Oe,{axisRanges:n,originalEvent:t})}if(this._zoomSelection)this._zoomSelection.move(t)},_end:function(t){if(this._stopChartHandlers(t))return;var e=this._pannable;if(e&&e.end(t)){this.surface.resumeTracking();this.trigger(Le,{axisRanges:Rn(this._plotArea.axes),originalEvent:t});this._suppressHover=false;this.chartService.panning=false}else this._endNavigation(t,Le);if(this._zoomSelection){var i=this._zoomSelection.end(t);if(i&&!this.trigger(ze,{axisRanges:i,originalEvent:t})){this._zoomSelection.zoom();this.trigger(De,{axisRanges:i,originalEvent:t})}}},_stopChartHandlers:function(t){var e=this._selections||[];if(!e.length)return false;var i=this._eventCoordinates(t);var r=this._plotArea.paneByPoint(i);if(r)for(var a=0;a<e.length;a++)if(e[a].onPane(r))return true},_mousewheelZoomRate:function(){var t=this.options.zoomable;var e=(t||{}).mousewheel||{};return B(e.rate,Je)},_mousewheel:function(t){var e=this;var i=C.mousewheelDelta(t);var r=this._mousewheelZoom;var a=this._eventCoordinates(t);if(this._stopChartHandlers(t)||!this._plotArea.backgroundContainsPoint(a))return;if(r){var n={delta:i,axisRanges:Rn(this._plotArea.axes),originalEvent:t};if(this._zooming||!this.trigger(Be,n)){t.preventDefault();if(!this._zooming){this._unsetActivePoint();this.surface.suspendTracking();this._zooming=true}if(this._mwTimeout)clearTimeout(this._mwTimeout);n.axisRanges=r.updateRanges(i,a);if(n.axisRanges&&!this.trigger(ze,n))r.zoom();this._mwTimeout=setTimeout(function(){e.trigger(De,n);e._zooming=false;if(e.surface)e.surface.resumeTracking()},$e)}}else{var s=this._navState;if(!s){var v=this._startNavigation(t,a,Be);if(!v)s=this._navState}if(s){var o=s.totalDelta||i;s.totalDelta=o+i;var l=this._navState.axes;var c={};for(var h=0;h<l.length;h++){var u=l[h];var f=u.options.name;if(f)c[f]=u.scaleRange(-o*e._mousewheelZoomRate(),a)}this.trigger(ze,{delta:i,axisRanges:c,originalEvent:t});if(this._mwTimeout)clearTimeout(this._mwTimeout);this._mwTimeout=setTimeout(function(){e._endNavigation(t,De)},$e)}}},_startNavigation:function(t,e,i){var r=this._model._plotArea;var a=r.findPointPane(e);var n=r.axes.slice(0);if(!a)return;var s=Rn(n);var o=this.trigger(i,{axisRanges:s,originalEvent:t});if(o)this._cancelDomEvents();else{this._suppressHover=true;this._unsetActivePoint();this._navState={axisRanges:s,pane:a,axes:n}}},_endNavigation:function(t,e){if(this._navState){this.trigger(e,{axisRanges:this._navState.axisRanges,originalEvent:t});this._suppressHover=false;this._navState=null}},_getChartElement:function(t,e){var i=this.surface.eventTarget(t);if(i)return this._drawingChartElement(i,t,e)},_drawingChartElement:function(t,e,i){var r=t;var a;while(r&&!a){a=r.chartElement;r=r.parent}if(a){if(a.aliasFor)a=a.aliasFor(e,this._eventCoordinates(e));if(i){a=a.closest(i);if(a&&a.aliasFor)a=a.aliasFor()}return a}},_eventCoordinates:function(t){var e=C.eventCoordinates(t);return this._toModelCoordinates(e.x,e.y)},_elementPadding:function(){if(!this._padding){var t=Q(this.element,["paddingLeft","paddingTop"]);var e=t.paddingLeft;var i=t.paddingTop;this._padding={top:i,left:e}}return this._padding},_toDocumentCoordinates:function(t){var e=this._elementPadding();var i=C.elementOffset(this.element);return{left:Z(t.x+e.left+i.left),top:Z(t.y+e.top+i.top)}},_toModelCoordinates:function(t,e){var i=this.element;var r=C.elementOffset(i);var a=this._elementPadding();var n=C.elementScale(i).invert();var s=new ht(t-r.left-a.left,e-r.top-a.top).transform(n);return new I(s.x,s.y)},_tap:function(t){var e=this;var i=this.surface.eventTarget(t);var r=this._drawingChartElement(i,t);var a=this._sharedTooltip();if(!this._startHover(i,t)&&!a)this._unsetActivePoint();if(a)this._trackSharedTooltip(this._eventCoordinates(t),t,true);this._propagateClick(r,t);this.handlingTap=true;setTimeout(function(){e.handlingTap=false},0)},_click:function(t){var e=this._getChartElement(t);this._propagateClick(e,t)},_propagateClick:function(t,e){var i=this;var r=t;while(r){if(r.click)r.click(i,e);r=r.parent}},_startHover:function(t,e){if(this._suppressHover)return false;var i=this._drawingChartElement(t,e,function(t){return(t.hover||t.over)&&!(t instanceof gr)});var r=this._activePoint;var a=this._plotArea.series.length>1;var n=this._hasInactiveOpacity();this._updateHoveredPoint(i,e);if(i&&r!==i&&i.hover){this._activePoint=i;if(!this._sharedTooltip()&&!i.hover(this,e)){this._displayTooltip(i);if(n)this._displayInactiveOpacity(i,a);else this._highlight.show(i)}}else if(!i&&n){if(a&&this._activeChartInstance){this._updateSeriesOpacity(i,true);this._applySeriesOpacity(this._activeChartInstance.children,null,true);this._activeChartInstance=null}this._highlight&&this._highlight.hide();this._activePoint=null}return i},_displayTooltip:function(t){var e=b({},this.options.tooltip,t.options.tooltip);if(e.visible)this._tooltip.show(t)},_displayInactiveOpacity:function(t,e,i){var r=this._activeChartInstance=this._chartInstanceFromPoint(t);if(!r)return;if(e){this._updateSeriesOpacity(t);this._applySeriesOpacity(r.children,null,true);this._applySeriesOpacity(r.children,t.series);this._highlight.show(i||t)}else{var a;if(!r.supportsPointInactiveOpacity()){this._highlight.show(t);return}a=this._getInactivePoints(t,r);if(a&&a.length)this._highlight.show(a,1-this._getInactiveOpacityForSeries(t.series))}},_getInactivePoints:function(e,t){var i=this._getAllPointsOfType(t,e.constructor);return i.filter(function(t){return t!==e})},_getAllPointsOfType:function(t,e){var i=this;var r=[];for(var a=0;a<t.children.length;a++){var n=t.children[a];if(n.constructor===e)r.push(n);else if(n.children&&n.children.length)r=r.concat(i._getAllPointsOfType(n,e))}return r},_updateHoveredPoint:function(t,e){var i=this._hoveredPoint;if(i&&i!==t){i.out(this,e);this._hoveredPoint=null}if(t&&i!==t&&t.over){this._hoveredPoint=t;t.over(this,e)}},_updateSeriesOpacity:function(t,e){var i=this;var r=this._plotArea;var a=r.series.length;for(var n=0;n<a;n++){var s=r.series[n];var o=i._getDefaultOpacityForSeries(s);var l=i._getInactiveOpacityForSeries(s);if(!e&&s!==t.series){s.defaultOpacity=o;s.opacity=l;if(s.line)s.line.opacity=l}else{s.opacity=o;if(s.line)s.line.opacity=o}}},_applySeriesOpacity:function(t,e,i,r){var a=this;for(var n=0;n<t.length;n++){var s=t[n];var o=s.series||r;var l=o&&(o.highlight||{}).visible;if(l&&s.visual){var h=r?r.opacity:s.series.opacity;if(o!==e||i)s.visual.opacity(i?1:h)}if(s.children&&s.children.length)a._applySeriesOpacity(s.children,e,i,s.series)}},_chartInstanceFromPoint:function(t){var e=t.parent;while(e&&!e.plotArea)e=e.parent;return e},_hasInactiveOpacity:function(){var t=this.options.seriesDefaults.highlight.inactiveOpacity!==undefined;var e=this.options.series.filter(function(t){return t.highlight.inactiveOpacity!==undefined}).length>0;return t||e},_getInactiveOpacityForSeries:function(t){var e=this.options.seriesDefaults.highlight.inactiveOpacity;var i=t.highlight.inactiveOpacity;return i||e||t.opacity||k.DEFAULT_SERIES_OPACITY},_getDefaultOpacityForSeries:function(t){return t.defaultOpacity||t.opacity||k.DEFAULT_SERIES_OPACITY},_mouseover:function(t){var e=this._startHover(t.element,t.originalEvent);if(e&&e.tooltipTracking&&!this._mouseMoveTrackHandler&&!this._sharedTooltip()){this._mouseMoveTrackHandler=this._mouseMoveTracking.bind(this);var i;r(document,(i={},i[wn]=this._mouseMoveTrackHandler,i))}},_mouseMoveTracking:function(t){var e=this;var i=e.options;var r=e._tooltip;var a=e._highlight;var n=e._activePoint;var s=this._eventCoordinates(t);if(this._plotArea.box.containsPoint(s)){if(n&&n.tooltipTracking&&n.series&&n.parent.getNearestPoint){var o=n.parent.getNearestPoint(s.x,s.y,n.seriesIx);if(o&&o!==n){this._activePoint=o;if(!o.hover(this,t)){var l=b({},i.tooltip,o.options.tooltip);if(l.visible)r.show(o);a.show(o)}}}}else{var h;tt(document,(h={},h[wn]=this._mouseMoveTrackHandler,h));this._unsetActivePoint();this._mouseMoveTrackHandler=null}},_mousemove:function(t){var e=this._eventCoordinates(t);var i=this._plotArea;this._trackCrosshairs(e);if(i.hover){var r=i.backgroundContainsPoint(e);if(r){i.hovered=true;this._plotArea.hover(this,t)}else if(i.hovered&&!r){this.trigger(Ve);i.hovered=false}}if(this._sharedTooltip())this._trackSharedTooltip(e,t)},_trackCrosshairs:function(t){var e=this._plotArea.crosshairs;for(var i=0;i<e.length;i++){var r=e[i];if(r.box.containsPoint(t))r.showAt(t);else r.hide()}},_trackSharedTooltip:function(t,v,e){if(this._suppressHover)return;var i=this;var c=i.options.tooltip;var r=i._plotArea;var u=i._plotArea.categoryAxis;var a=i._tooltip;var n=i._highlight;if(r.backgroundContainsPoint(t)){var s=u.pointCategoryIndex(t);if(s!==this._tooltipCategoryIx||!this._sharedHighlight&&e){var o=r.pointsByCategoryIndex(s);var l=o.map(function(t){return t.eventArgs(v)});var h=l[0]||{};h.categoryPoints=l;if(o.length>0&&!this.trigger(Pe,h)){if(c.visible)a.showAt(o,t);n.show(o);this._sharedHighlight=true}else a.hide();this._tooltipCategoryIx=s}else if(e&&this._sharedHighlight){n.hide();a.hide();this._sharedHighlight=false}}else if(this._sharedHighlight){n.hide();a.hide();this._tooltipCategoryIx=null;this._sharedHighlight=false}},hideElements:function(t){var e=this._plotArea;this._mousemove.cancel();e.hideCrosshairs();this._unsetActivePoint(t)},_unsetActivePoint:function(t){var e=this;var i=e._tooltip;var r=e._highlight;this._activePoint=null;this._hoveredPoint=null;if(i&&!(t&&t.keepTooltipOpen))i.hide();this._tooltipCategoryIx=null;this._sharedHighlight=false;if(r)r.hide()},_deferRedraw:function(){this._redraw()},_clearRedrawTimeout:function(){if(this._redrawTimeout){clearInterval(this._redrawTimeout);this._redrawTimeout=null}},bindCategories:function(){var t=this;var e=this.options;var i=[].concat(e.categoryAxis);for(var r=0;r<i.length;r++){var a=i[r];if(a.autoBind!==false)t.bindCategoryAxisFromSeries(a,r)}},bindCategoryAxisFromSeries:function(t,v){var c=this;var e=this.options.series;var u=e.length;var f=new C.HashMap;var i=[];var r=false;var a;for(var n=0;n<u;n++){var s=e[n];var p=s.categoryAxis===t.name||!s.categoryAxis&&v===0;var o=s.data;var d=o.length;var g=s.categoryField&&p;r=g||r;if(g&&d>0){a=hr(t,xt(s.categoryField,o[0]));var x=a?lr:xt;for(var l=0;l<d;l++){var m=o[l];var h=x(s.categoryField,m,c.chartService.intl);if(a||!f.get(h)){i.push([h,m]);if(!a)f.set(h,true)}}}}if(i.length>0){if(a)i=On(i,function(t,e){return C.dateComparer(t[0],e[0])});var y=Ln(i);t.categories=y[0]}else if(r)t.categories=[]},_isBindable:function(t){var e=mt.current.valueFields(t);var i=true;for(var r=0;r<e.length;r++){var a=e[r];if(a===v)a="field";else a=a+"Field";if(!T(t[a])){i=false;break}}return i},_noTransitionsRedraw:function(){var t=this.options;var e;if(t.transitions!==false){t.transitions=false;e=true}this._redraw();if(e)t.transitions=true},_legendItemHover:function(e,i){var t=this;var r=t._plotArea;var a=t._highlight;var n=(r.srcSeries||r.series)[e];var s;if(A(n.type,[ae,$t,Jt]))s=r.findPoint(function(t){return t.series.index===e&&t.index===i});else s=r.pointsBySeriesIndex(e);if(this._hasInactiveOpacity()&&n.visible&&s){var o=r.series.length>1;var l=s.length?s[0]:s;this._displayInactiveOpacity(l,o,s)}else a.show(s)},_shouldAttachMouseMove:function(){return this._plotArea.crosshairs.length||this._tooltip&&this._sharedTooltip()||this.requiresHandlers([Re,Ve])},updateMouseMoveHandler:function(){var t;tt(this.element,(t={},t[wn]=this._mousemove,t));if(this._shouldAttachMouseMove()){var e;r(this.element,(e={},e[wn]=this._mousemove,e))}},applyOptions:function(t,e){Bn(this._originalOptions,t);this._originalOptions=b(this._originalOptions,t);this.options=b({},this._originalOptions);if(e){this._theme=e;this.chartService.theme=e}this._initTheme(this.options,this._theme);this._toggleDragZoomEvents()},setOptions:function(t,e){this.applyOptions(t,e);this.bindCategories();this.redraw();this.updateMouseMoveHandler()},setDirection:function(t){this.chartService.rtl=Boolean(t);if(this.surface&&this.surface.type==="svg")this._destroySurface()},setIntlService:function(t){this.chartService.intl=t},noTransitionsRedraw:function(){this._noTransitionsRedraw()},destroy:function(){this._destroyed=true;var t;tt(this.element,(t={},t[bn]=this._clickHandler,t[Qe]=this._mousewheelHandler,t[wn]=this._mousemove,t[An]=this._mouseleaveHandler,t));if(this.domEvents){this.domEvents.destroy();delete this.domEvents}if(this._mouseMoveTrackHandler){var e;tt(document,(e={},e[wn]=this._mouseMoveTrackHandler,e))}this._destroyView();this._destroySurface();this._clearRedrawTimeout()},_destroySurface:function(){var t=this.surface;if(t){t.unbind("mouseenter",this._surfaceMouseenterHandler);t.unbind("mouseleave",this._surfaceMouseleaveHandler);t.destroy();this.surface=null}},_destroySelections:function(){var t=this._selections;if(t)while(t.length>0)t.shift().destroy()},_destroyView:function(){var t=this._model;if(t){t.destroy();this._model=null}this._unsetActivePoint();this._destroySelections();if(this._tooltip)this._tooltip.destroy();if(this._highlight)this._highlight.destroy();if(this._zoomSelection){this._zoomSelection.destroy();delete this._zoomSelection}if(this._pannable){this._pannable.destroy();delete this._pannable}if(this._mousewheelZoom){this._mousewheelZoom.destroy();delete this._mousewheelZoom}}});function kn(t){var e=_n;for(var i=0;i<e.length;i++){var r=e[i]+"Axes";if(t[r]){t[e[i]+"Axis"]=t[r];delete t[r]}}}function Pn(t,e){if(t)for(var i=0;i<t.length;i++)if(t[i].category===e)return[t[i]]}function Tn(t,e){var r=(e||{}).axisDefaults||{};var a,n,i;function s(t){var e=(t||{}).color||n.color;var i=b({},r,r[a],n,n[a],{line:{color:e},labels:{color:e},title:{color:e}},t);delete i[a];return i}for(var o=0;o<_n.length;o++){a=_n[o]+"Axis";n=t.axisDefaults||{};i=[].concat(t[a]);i=i.map(s);t[a]=i.length>1?i:i[0]}}function In(t,e){var i=t.series;var r=i.length;var v=t.seriesDefaults;var a=b({},t.seriesDefaults);var n=e?b({},e.seriesDefaults):{};var s=b({},n);En(a);En(s);for(var o=0;o<r;o++){var l=i[o].type||t.seriesDefaults.type;var h=b({data:[]},s,n[l],{tooltip:t.tooltip},a,v[l]);i[o]._defaults=h;i[o]=b({},h,i[o]);i[o].data=i[o].data||[]}}function En(t){delete t.bar;delete t.column;delete t.rangeColumn;delete t.line;delete t.verticalLine;delete t.pie;delete t.donut;delete t.area;delete t.verticalArea;delete t.scatter;delete t.scatterLine;delete t.bubble;delete t.candlestick;delete t.ohlc;delete t.boxPlot;delete t.bullet;delete t.verticalBullet;delete t.polarArea;delete t.polarLine;delete t.radarArea;delete t.radarLine;delete t.waterfall}function Rn(t){var e={};for(var i=0;i<t.length;i++){var r=t[i];var a=r.options.name;if(a)e[a]=r.range()}return e}function Vn(t,e){if(e===void 0)e=C.dateComparer;for(var i=1,r=t.length;i<r;i++)if(e(t[i],t[i-1])<0){t.sort(e);break}return t}function On(t,e){if(e===void 0)e=C.dateComparer;var i=Vn(t,e);var r=i.length;var a=r>0?[i[0]]:[];for(var n=1;n<r;n++)if(e(i[n],z(a))!==0)a.push(i[n]);return a}function Ln(t){var e=t.length;var i=[];for(var r=0;r<e;r++){var a=t[r];var n=a.length;for(var s=0;s<n;s++){i[s]=i[s]||[];i[s].push(a[s])}}return i}var Mn=["data","categories"];function Bn(t,e){for(var i in e)if(!A(i,Mn)&&e.hasOwnProperty(i)){var r=e[i];var a=t[i];if(T(a)){var n=r===null;if(n||!T(r)){delete t[i];if(n)delete e[i]}else if(a&&S(r))if(S(a))Bn(a,r)}}}function zn(t){for(var e=0;e<t.length;e++)t[e].notifyRender()}t(Cn,{renderAs:"",chartArea:{},legend:{visible:true,labels:{}},categoryAxis:{},seriesDefaults:{type:Qt,data:[],highlight:{visible:true},labels:{},negativeValues:{visible:false}},series:[],seriesColors:null,tooltip:{visible:false},transitions:true,valueAxis:{},plotArea:{},title:{},xAxis:{},yAxis:{},panes:[{}],pannable:false,zoomable:false}),kendo.deepExtend(kendo.dataviz,{constants:ti,Aggregates:gt,AreaChart:Si,AreaSegment:wi,AxisGroupRangeTracker:Ci,Bar:Ii,BarChart:Li,BarLabel:ki,BoxPlotChart:Fi,BoxPlot:Di,BubbleChart:Yi,Bullet:Ui,BulletChart:Zi,CandlestickChart:zi,Candlestick:Mi,CategoricalChart:oi,CategoricalErrorBar:ri,CategoricalPlotArea:Xr,Chart:Cn,ChartContainer:Ji,ClipAnimation:xi,ClusterLayout:Vi,Crosshair:$i,CrosshairTooltip:Qi,DefaultAggregates:Cr,DonutChart:Ba,DonutPlotArea:za,DonutSegment:La,ErrorBarBase:ii,ErrorRangeCalculator:At,Highlight:Wr,SharedTooltip:xa,Legend:ha,LegendItem:na,LegendLayout:aa,LineChart:_i,LinePoint:vi,LineSegment:ci,Pane:tr,PieAnimation:wa,PieChart:Ra,PieChartMixin:Ia,PiePlotArea:Oa,PieSegment:Ca,PlotAreaBase:gr,PlotAreaEventsMixin:br,PlotAreaFactory:va,PointEventsMixin:li,RangeBar:kr,RangeBarChart:Pr,RangeAreaPoint:Vr,RangeAreaChart:Br,ScatterChart:Xi,ScatterErrorBar:Ni,ScatterLineChart:ba,Selection:da,SeriesAggregator:Ar,SeriesBinder:mt,SplineSegment:di,SplineAreaSegment:Ai,StackWrap:Oi,Tooltip:ga,OHLCChart:Dr,OHLCPoint:zr,WaterfallChart:Fr,WaterfallSegment:Hr,XYPlotArea:Aa,MousewheelZoom:ra,ZoomSelection:Qr,Pannable:Kr,ChartAxis:ct,ChartPane:ft,ChartPlotArea:pt,findAxisByName:ut,anyHasZIndex:mi,appendIfNotNull:rr,areNumbers:Bi,bindSegments:nr,categoriesCount:si,countNumbers:dt,equalsIgnoreCase:sr,evalOptions:ni,filterSeriesByType:or,getDateField:lr,getField:xt,hasGradientOverlay:Pi,hasValue:Gi,isDateAxis:hr,segmentVisible:ar,singleItemOrArray:vr,createOutOfRangePoints:dr})})}("function"==typeof define&&define.amd?define:function(t,e,i){(i||e)()}),function(define){define("dataviz/chart/chart.min",["./kendo-chart.min","kendo.data.min","kendo.dataviz.core.min","kendo.dataviz.themes.min","kendo.drawing.min","kendo.userevents.min"],function(){var u=window.kendo.jQuery,c=void 0,r=".kendoChart",f=window.kendo,e=f.Class,p=f._outerWidth,d=f._outerHeight,o=f.dataviz,t=o.constants,i=o.Chart,s=o.SeriesBinder,a=f.ui.Widget,g=f.data.DataSource,l=f.deepExtend,h=o.defined,x=o.getField,m=o.InstanceObserver,y=o.inArray,_=o.services,w=Array.isArray,b=u.extend,v=f.template,A="mouseleave"+r,S=t.AXIS_LABEL_CLICK,C=t.LEGEND_ITEM_CLICK,k=t.LEGEND_ITEM_HOVER,P=t.LEGEND_ITEM_LEAVE,T=t.SERIES_CLICK,I=t.SERIES_HOVER,E=t.SERIES_OVER,R=t.SERIES_LEAVE,V=t.PANE_RENDER,O=t.PLOT_AREA_CLICK,L=t.PLOT_AREA_HOVER,M=t.PLOT_AREA_LEAVE,B=t.DRAG,z=t.DRAG_END,D=t.DRAG_START,H=t.ZOOM_START,F=t.ZOOM,N=t.ZOOM_END,G=t.SELECT_START,X=t.SELECT,q=t.SELECT_END,Y=t.RENDER,W=t.NOTE_CLICK,U=t.NOTE_HOVER,Z=t.NOTE_LEAVE,j=u(document.documentElement),K="change",Q="dataBound",$="leave",J="down",tt=t.VALUE,et=t.PIE,it=t.DONUT,rt=t.FUNNEL,at=f.Observable,nt=150,st=100,ot="k-chart-tooltip-inverse",lt="k-chart-shared-tooltip",ht="rtl",vt=(_.DomEventsBuilder.register({create:function(t,e){return new f.UserEvents(t,l({global:true,multiTouch:true,fastTap:true},e))}}),m.extend({handlerMap:{showTooltip:"_showTooltip",hideTooltip:"_hideTooltip",legendItemClick:"_onLegendItemClick",render:"_onRender",init:"_onInit"}})),ct=a.extend({init:function(t,e){var i;f.destroy(t);a.fn.init.call(this,t);if(e){i=e.dataSource;delete e.dataSource}this.options=l({},this.options,e);this.wrapper=this.element;this._attachEvents();if(e)e.dataSource=i;this._seriesVisibility=new gt;this.bind(this.events,this.options);this._initDataSource(e);f.notify(this,o.ui)},events:[Q,T,I,E,R,S,C,k,P,V,O,L,M,D,B,z,H,F,N,G,X,q,W,U,Z,Y],options:{name:"Chart",renderAs:"",theme:"default",axisDefaults:{},chartArea:{},legend:{},categoryAxis:{},autoBind:true,seriesDefaults:{},series:[],seriesColors:null,tooltip:{},transitions:true,valueAxis:{},plotArea:{},title:{},xAxis:{},yAxis:{},panes:[{}],pannable:false,zoomable:false},items:function(){return u()},refresh:function(){var t=this;var e=t._instance;e.applyDefaults(t.options);e.applySeriesColors();t._bindSeries();t._bindCategories();t.trigger(Q);t._redraw()},getSize:function(){return f.dimensions(this.element)},redraw:function(t){this._size=null;this._instance.redraw(t)},setOptions:function(t){var e=this,i=t.dataSource;delete t.dataSource;a.fn._setEvents.call(e,t);this._instance.applyOptions(t,this._getThemeOptions(t));this.options=this._instance.options;this._tooltip.setOptions(this.options.tooltip);this._seriesVisibility.setOptions(this.options);this._sourceSeries=null;if(i)e.setDataSource(i);if(e._hasDataSource)e._onDataChanged();else{e._bindCategories();e.redraw()}e._instance.updateMouseMoveHandler()},setDataSource:function(t){var e=this;e.dataSource.unbind(K,e._dataChangeHandler);e.dataSource=t=g.create(t);e._hasDataSource=true;e._hasData=false;t.bind(K,e._dataChangeHandler);if(e.options.autoBind)t.fetch()},destroy:function(){var t=this,e=t.dataSource;t.element.off(r);if(e)e.unbind(K,t._dataChangeHandler);if(t._instance){t._instance.destroy();delete this._instance}if(this._tooltip){this._tooltip.destroy();delete this._tooltip}this._destroyCrosshairTooltips();a.fn.destroy.call(t)},findPaneByName:function(t){var e=this._plotArea.panes;for(var i=0;i<e.length;i++)if(e[i].options.name===t)return new _t(this,e[i])},findPaneByIndex:function(t){var e=this._plotArea.panes;if(e[t])return new _t(this,e[t])},findSeries:function(t){var e=this._plotArea;var i=e.srcSeries||e.series;for(var r=0;r<i.length;r++)if(t(i[r]))return new wt(this,i[r])},findSeriesByName:function(t){return this._createSeries({name:t})},findSeriesByIndex:function(t){return this._createSeries({index:t})},exportVisual:function(t){var e=this._instance;if(!e)return;var i;if(t&&(t.width||t.height)){var r=e.options.chartArea;var a=e._originalOptions.chartArea;l(r,t);var n=e._getModel();r.width=a.width;r.height=a.height;n.renderVisual();bt(n._plotArea.panes);i=n.visual}else i=e.exportVisual();return i},_createSeries:function(t){var e=this._seriesOptions(t);if(e)return new wt(this,e)},_seriesOptions:function(t){var e=this._plotArea;var i=e.srcSeries||e.series;var r;if(h(t.index))r=i[t.index];else if(h(t.name))for(var a=0;a<i.length;a++)if(i[a].name===t.name){r=i[a];break}return r},_attachEvents:function(){this.element.on(A,this._mouseleave.bind(this))},_mouseleave:function(t){var e=this._instance;var i=this._tooltip;var r=t.relatedTarget;if(!(r&&u(r).closest(i.element).length)&&e&&!e.handlingTap)e.hideElements({keepTooltipOpen:!i.options.autoHide})},_getThemeOptions:function(t){var e=(t||{}).theme;if(e&&o.SASS_THEMES.indexOf(e.toLowerCase())!==-1)return o.autoTheme().chart;if(h(e)){var i=o.ui.themes||{};var r=i[e]||i[e.toLowerCase()]||{};return r.chart||{}}},_initChart:function(){this._createChart(this.options,this._getThemeOptions(this.options));this.options=this._instance.options;this._seriesVisibility.setOptions(this.options)},_createChart:function(t,e){this._instance=new i(this.element[0],t,e,{observer:new vt(this),sender:this,rtl:this._isRtl()})},_onInit:function(t){this._instance=t.sender},_initDataSource:function(t){var e=this,i=(t||{}).dataSource;e._dataChangeHandler=e._onDataChanged.bind(e);e.dataSource=g.create(i).bind("change",e._dataChangeHandler);e._bindCategories();if(i)e._hasDataSource=true;this._initChart();this._initTooltip();if(i)if(e.options.autoBind)e.dataSource.fetch()},_destroyCrosshairTooltips:function(){var t=this._crosshairTooltips;if(t)for(var e in t)t[e].destroy();this._crosshairTooltips={}},_getCrosshairTooltip:function(t,e){var i=this._crosshairTooltips=this._crosshairTooltips||{};var r=t+e;var a=i[r];if(!a)a=i[r]=new yt(this.element);return a},_showTooltip:function(t){if(t.crosshair){var e=this._getCrosshairTooltip(t.axisName,t.axisIndex);e.show(t)}else if(this._tooltip)this._tooltip.show(t)},_hideTooltip:function(t){if(t.crosshair){var e=this._getCrosshairTooltip(t.axisName,t.axisIndex);e.hide()}else if(this._tooltip)this._tooltip.hide()},_onRender:function(t){this._destroyCrosshairTooltips();this._copyMembers(t.sender);if(!this._hasDataSource||this._hasData||!this.options.autoBind)this.trigger(Y)},_copyMembers:function(t){this.options=t.options;this._originalOptions=t._originalOptions;this.surface=t.surface;this._plotArea=t._plotArea;this._model=t._model;this._highlight=t._highlight;this._selections=t._selections;this._pannable=t._pannable;this._zoomSelection=t._zoomSelection;this._mousewheelZoom=t._mousewheelZoom},requiresHandlers:function(t){var e=this._events;for(var i=0;i<t.length;i++)if(h(e[t[i]]))return true},_initTooltip:function(){this._tooltip=this._createTooltip();this._tooltip.bind($,this._tooltipleave.bind(this))},_onLegendItemClick:function(t){if(!this.trigger(C,t))this._legendItemClick(t.seriesIndex,t.pointIndex)},_legendItemClick:function(t,e){var i=this._instance,r=i._plotArea,a=(r.srcSeries||r.series)[t];if(i._hasInactiveOpacity()&&i._activeChartInstance){i._updateSeriesOpacity(null,true);i._applySeriesOpacity(i._activeChartInstance.children,null,true);i._activeChartInstance=null}if(u.inArray(a.type,[et,it,rt])>=0){var n=a.data[e];if(n&&h(n.visible))n.visible=!n.visible;else{var s=a.pointVisibility=a.pointVisibility||{};var o=s[e];s[e]=h(o)?!o:false}}else{a.visible=!a.visible;this._seriesVisibility.save(a)}i._noTransitionsRedraw()},_createTooltip:function(){return new n(this.element,b({},this.options.tooltip,{rtl:this._isRtl()}))},_tooltipleave:function(){if(this._instance)this._instance.hideElements()},_bindData:function(t){var e=this,i=e.options,r=e._sourceSeries||i.series,a,n=r.length,v=e.dataSource.view(),c=(e.dataSource.group()||[]).length>0,s=[],o=this._seriesVisibility,l,h;o.read();for(a=0;a<n;a++){l=r[a];if(e._isBindable(l)&&c){h=dt(l,v);s=s.concat(h);o.applyByGroup(h,t)}else{l=b({},l);s.push(l);o.applyByIndex(l,t)}}e._sourceSeries=r;i.series=s;this._instance.applySeriesColors();e._bindSeries();e._bindCategories();this._hasData=true},_onDataChanged:function(t){this._bindData(t);this.trigger(Q);if(this._instance&&this._instance.fontLoaded)this._redraw()},_bindSeries:function(){var t=this,e=t.dataSource.view(),i=t.options.series,r,a=i.length,n,s,o;for(r=0;r<a;r++){n=i[r];if(t._isBindable(n)){s=n._groupIx;o=h(s)?(e[s]||{}).items:e;if(n.autoBind!==false)n.data=o}}},_bindCategories:function(){var t=this,e=t.dataSource.view()||[],i=(t.dataSource.group()||[]).length>0,r=e,a=t.options,n=[].concat(a.categoryAxis),s,o;if(i)if(e.length)r=e[0].items;for(s=0;s<n.length;s++){o=n[s];if(o.autoBind!==false)t._bindCategoryAxis(o,r,s)}},_bindCategoryAxis:function(t,e,i){var r=(e||[]).length,a,n,s;if(t.field){t.categories=[];for(a=0;a<r;a++){s=e[a];n=x(t.field,s);if(a===0){t.categories=[n];t.dataItems=[s]}else{t.categories.push(n);t.dataItems.push(s)}}}else if(this._instance)this._instance.bindCategoryAxisFromSeries(t,i)},_isBindable:function(t){var e=s.current.valueFields(t),i=true,r,a;for(a=0;a<e.length;a++){r=e[a];if(r===tt)r="field";else r=r+"Field";if(!h(t[r])){i=false;break}}return i},_isRtl:function(){return f.support.isRtl(this.element)&&this.element.css("direction")===ht}}),ut=["getAxis","findAxisByName","plotArea","toggleHighlight","showTooltip","hideTooltip","_resize","_redraw","_noTransitionsRedraw","_legendItemHover","_eventCoordinates"];function ft(e){ct.fn[e]=function(){var t=this._instance;if(t)return t[e].apply(t,arguments)}}for(var pt=0;pt<ut.length;pt++)ft(ut[pt]);function dt(t,e){var i=[],r,a=t.groupNameTemplate,n,s=e.length,o;if(s===0){o=l({},t);o.visibleInLegend=false;return[o]}if(h(a)){f.logToConsole("'groupNameTemplate' is obsolete and will be removed in future versions. "+"Specify the group name template as 'series.name'");if(a)r=v(a)}else{r=v(t.name||"");if(r._slotCount===0)r=v(h(t.name)?"#= group.value #: #= series.name #":"#= group.value #")}for(n=0;n<s;n++){o=l({},t);if(!f.isFunction(o.color))o.color=c;o._groupIx=n;o._groupValue=e[n].value;i.push(o);if(r)o.name=r({series:o,group:e[n]})}return i}if(o.ExportMixin.extend(ct.fn),f.PDFMixin)f.PDFMixin.extend(ct.fn);o.ui.plugin(ct);var gt=e.extend({init:function(){this.groups={};this.index={};this.options={}},applyByGroup:function(t,e){if(e&&e.action||this.options.persistSeriesVisibility){for(var i=0;i<t.length;i++)if(this.groups[t[i]._groupValue]===false)t[i].visible=false}else this.groups={}},applyByIndex:function(t,e){if(e&&e.action||this.options.persistSeriesVisibility){if(this.index[t.index]===false)t.visible=false}else this.index={}},save:function(t){if(!t)return;if(this.options.persistSeriesVisibility)this.options.series[t.index].visible=t.visible;else this.saveState(t)},setOptions:function(t){this.options=t;this.groups={};this.index={}},read:function(){var t=this.options;if(t.persistSeriesVisibility){var e=t.series;for(var i=0;i<e.length;i++)this.saveState(e[i])}},saveState:function(t){if(h(t._groupValue))this.groups[t._groupValue]=t.visible;else this.index[t.index]=t.visible}}),xt=f.geometry;function mt(t){for(var e in t)if(t[e]===c)t[e]="";return t}var n=at.extend({init:function(t,e){var i=this;at.fn.init.call(i);this.setOptions(e);i.chartElement=t;i.template=n.template;if(!i.template)i.template=n.template=f.template('<div class=\'k-tooltip #if (!d.autoHide) {# k-tooltip-closable#}# k-chart-tooltip#= d.rtl ? " k-rtl" : ""#\' '+"style='display:none; position: absolute; font: #= d.font #;"+"#if (d.border) {# border: #= d.border.width #px solid; #}#"+"opacity: #= d.opacity #;'>"+'<div class="k-tooltip-content"></div>'+'#if (!d.autoHide) {# <div class="k-tooltip-button"><a href="\\#" class="k-icon k-i-close" title="Close"></a></div> #}#'+"</div>",{useWithBlock:false,paramName:"d"});i.element=u(i.template(i.options));i.move=i.move.bind(i);i._mouseleave=i._mouseleave.bind(i);var r=f.format("[{0}='content'],[{0}='scroller']",f.attr("role"));i._mobileScroller=t.closest(r).data("kendoMobileScroller");i.downEvent=f.applyEventMap(J,f.guid());i._closeTooltipHandler=i._closeTooltip.bind(i)},destroy:function(){var t=this;this._clearShowTimeout();j.off(t.downEvent,t._closeTooltipHandler);if(this.element){this.element.off(A).remove();this.element=null}},setOptions:function(t){this.options=l({},this.options,t)},options:{opacity:1,animation:{duration:nt},sharedTemplate:"<table>"+"<th colspan='#= colspan #'>#= categoryText #</th>"+"# for(var i = 0; i < points.length; i++) { #"+"# var point = points[i]; #"+"<tr>"+"# if(colorMarker) { # "+"<td><span class='k-chart-shared-tooltip-marker' style='background-color:#:point.series.color#'></span></td>"+"# } #"+"# if(nameColumn) { # "+"<td> #if (point.series.name) {# #: point.series.name #: #} else {# &nbsp; #}#</td>"+"# } #"+"<td>#= content(point) #</td>"+"</tr>"+"# } #"+"</table>",categoryFormat:"{0:d}",autoHide:true},move:function(){var t=this,e=t.options,i=t.element,r;if(!t.anchor||!t.element)return;r=t._offset();if(!t.visible)i.css({top:r.top,left:r.left});t.visible=true;t._ensureElement(document.body);i.stop(true,true).show().animate({left:r.left,top:r.top},e.animation.duration)},_clearShowTimeout:function(){if(this.showTimeout){clearTimeout(this.showTimeout);this.showTimeout=null}},getAnchor:function(t){var e=this.anchor;var i=e.point;var r=e.align;var a=i.left;var n=i.top;if(r.horizontal==="center")a-=t.width/2;else if(r.horizontal==="right")a-=t.width;if(r.vertical==="center")n-=t.height/2;else if(r.vertical==="bottom")n-=t.height;return{x:a,y:n}},_offset:function(){var t=this,e=t._measure(),i=t.getAnchor(e),r=i.y,a=i.x,n=f.support.zoomLevel(),s=u(window),o=window.pageYOffset||document.documentElement.scrollTop||0,v=window.pageXOffset||document.documentElement.scrollLeft||0,l=(this._mobileScroller||{}).movable;if(!l||l.scale===1){r+=t._fit(r-o,e.height,d(s)/n);a+=t._fit(a-v,e.width,p(s)/n)}else{var c=xt.transform().scale(l.scale,l.scale,[l.x,l.y]);var h=new xt.Point(a,r).transform(c);a=h.x;r=h.y}return{top:r,left:a}},show:function(t){var e=this;this.anchor=t.anchor;this.element.css(mt(t.style));this.element.toggleClass(ot,!!t.className);this.element.toggleClass(lt,!!t.shared);var i=t.shared?this._sharedContent(t):this._pointContent(t.point);this.element.find(".k-tooltip-content").html(i);if(!e.options.autoHide){e.element.off("click"+r).on("click"+r,".k-tooltip-button",e._closeTooltipHandler);j.off(e.downEvent,e._closeTooltipHandler).on(e.downEvent,e._closeTooltipHandler)}this._clearShowTimeout();this.showTimeout=setTimeout(this.move,st)},hide:function(t){var e=this;if(!e.options.autoHide&&!t)return;clearTimeout(e.showTimeout);e._hideElement();if(e.visible){e.point=null;e.visible=false;e.index=null;j.off(e.downEvent,e._closeTooltipHandler)}},_closeTooltip:function(t){var e=u(t.target);if(!e.is(".k-chart-tooltip, .k-tooltip-content")){t.preventDefault();this.chartElement.data("kendoChart")._instance.hideElements();this.hide(true)}},_sharedContent:function(t){var e=t.points;var i=o.grep(e,function(t){return h(t.series.name)}).length;var r=t.series.length>1;var a=1;if(i)a++;if(r)a++;var n=f.template(this.options.sharedTemplate);var s=n({points:e,category:t.category,categoryText:t.categoryText,content:this._pointContent,colorMarker:r,nameColumn:i,colspan:a});return s},_measure:function(){this._ensureElement();var t={width:p(this.element),height:d(this.element)};return t},_ensureElement:function(){if(this.element)this.element.appendTo(document.body).on(A,this._mouseleave)},_mouseleave:function(t){var e=t.relatedTarget;var i=this.chartElement[0];if(e&&e!==i&&!u.contains(i,e))this.trigger($)},_hideElement:function(){var t=this;var e=this.element;if(e)e.fadeOut({always:function(){if(!t.visible)e.off(A).remove()}})},_pointContent:function(t){var e=this,i=l({},e.options,t.options.tooltip),r,a;if(h(t.value))r=t.value.toString();if(i.template){a=v(i.template);r=a({value:t.value,category:t.category,series:t.series,dataItem:t.dataItem,percentage:t.percentage,runningTotal:t.runningTotal,total:t.total,low:t.low,high:t.high,xLow:t.xLow,xHigh:t.xHigh,yLow:t.yLow,yHigh:t.yHigh})}else if(i.format)r=t.formatValue(i.format);return r},_fit:function(t,e,i){var r=0;if(t+e>i)r=i-(t+e);if(t<0)r=-t;return r}}),yt=n.extend({init:function(t,e){n.fn.init.call(this,t,e);this.element.addClass("k-chart-crosshair-tooltip")},show:function(t){var e=this.element;if(e){this.anchor=t.anchor;this.element.css(t.style);this.element.html(this.content(t));this.move()}},move:function(){var t=this,e=t.element,i=t._offset();t._ensureElement();e.css({top:i.top,left:i.left}).show()},content:function(t){var e=t.value,i=t.crosshair.options.tooltip;if(i.template)e=v(i.template)({value:e});return e},hide:function(){this.element.hide()}}),_t=e.extend({init:function(t,e){this._chart=t;this._pane=e;this.visual=e.visual;this.chartsVisual=e.chartContainer.visual;this.name=e.options.name},series:function(){var t=this._chart;var e=t._plotArea.groupSeriesByPane();var i=e[this.name||"default"];var r=[];if(i)for(var a=0;a<i.length;a++)r.push(new wt(t,i[a]));return r}}),wt=e.extend({init:function(t,e){this._chart=t;this._options=e},points:function(t){var e=this._points;if(!e){var i=this._seriesOptions();var r=this._chart._plotArea;this._points=e=r.pointsBySeriesIndex(i.index)}if(f.isFunction(t))e=this._filterPoints(e,t);return e},data:function(t){var e=this._seriesOptions();if(t){var i=this._chart;var r=i._plotArea;e.data=t;if(e.categoryField){var a=r.seriesCategoryAxis(e);var n=[].concat(i.options.categoryAxis);i._instance.bindCategoryAxisFromSeries(n[a.axisIndex],a.axisIndex)}i._noTransitionsRedraw();this._clearFields()}return e.data},findPoint:function(t){var e=this.points();for(var i=0;i<e.length;i++)if(t(e[i]))return e[i]},toggleHighlight:function(t,e){if(!e)e=this.points();else if(f.isFunction(e))e=this.points(e);else e=w(e)?e:[e];this._chart._instance.togglePointsHighlight(t,e)},toggleVisibility:function(e,i){var t=this._chart;var r=this._seriesOptions();var a=f.isFunction(i);if(!a){r.visible=e;t._seriesVisibility.save(r)}else if(y(r.type,[et,it,rt])){var n=this._filterData(i);for(var s=0;s<n.length;s++)n[s].visible=e}else r.visible=function(t){return i(t.dataItem)?e:true};t._noTransitionsRedraw();this._clearFields()},_filterData:function(t){var e=this._seriesOptions().data;var i=e.length;var r=[];for(var a=0;a<i;a++)if(t(e[a]))r.push(e[a]);return r},_filterPoints:function(t,e){var i=[];var r=t.length;for(var a=0;a<r;a++)if(e(t[a]))i.push(t[a]);return i},_seriesOptions:function(){var t=this._series;if(!t)t=this._series=this._chart._seriesOptions(this._options);return t},_clearFields:function(){delete this._points;delete this._series}});function bt(t){for(var e=0;e<t.length;e++)t[e].notifyRender()}return o.Tooltip=n,o.CrosshairTooltip=yt,o.ChartInstanceObserver=vt,o.ChartPane=_t,o.ChartSeries=wt,window.kendo})}("function"==typeof define&&define.amd?define:function(t,e,i){(i||e)()}),function(define){define("kendo.dataviz.chart.min",["./dataviz/chart/kendo-chart.min","./dataviz/chart/chart.min"],function(){var t={id:"dataviz.chart",name:"Chart",category:"dataviz",description:"The Chart widget uses modern browser technologies to render high-quality data visualizations in the browser.",depends:["data","userevents","drawing","dataviz.core","dataviz.themes"],features:[{id:"dataviz.chart-pdf-export",name:"PDF export",description:"Export Chart as PDF",depends:["pdf"]}]};return window.kendo})}("function"==typeof define&&define.amd?define:function(t,e,i){(i||e)()});
//# sourceMappingURL=kendo.dataviz.chart.min.js.map
