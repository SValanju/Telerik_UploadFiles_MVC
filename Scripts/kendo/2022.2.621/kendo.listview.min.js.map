{"version":3,"file":"kendo.listview.min.js","sources":["kendo.listview.js"],"sourcesContent":["(function(f, define) {\n    define('kendo.listview',[ \"kendo.data\", \"kendo.editable\", \"kendo.selectable\", \"kendo.pager\" ], f);\n})(function() {\n\nvar __meta__ = { // jshint ignore:line\n    id: \"listview\",\n    name: \"ListView\",\n    category: \"web\",\n    description: \"The ListView widget offers rich support for interacting with data.\",\n    depends: [ \"data\" ],\n    features: [ {\n        id: \"listview-editing\",\n        name: \"Editing\",\n        description: \"Support for record editing\",\n        depends: [ \"editable\" ]\n    }, {\n        id: \"listview-selection\",\n        name: \"Selection\",\n        description: \"Support for selection\",\n        depends: [ \"selectable\" ]\n    }, {\n        id: \"listview-paging\",\n        name: \"Paging\",\n        description: \"Support for paging\",\n        depends: [ \"pager\" ]\n    } ]\n};\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        CHANGE = \"change\",\n        KENDO_KEYDOWN = \"kendoKeydown\",\n        CANCEL = \"cancel\",\n        DATABOUND = \"dataBound\",\n        DATABINDING = \"dataBinding\",\n        Widget = kendo.ui.Widget,\n        keys = kendo.keys,\n        EMPTY_STRING = \"\",\n        DOT = \".\",\n        FOCUSSELECTOR = \"> *:not(.k-loading-mask)\",\n        PROGRESS = \"progress\",\n        ERROR = \"error\",\n        FOCUSED = \"k-state-focused\",\n        SELECTED = \"k-state-selected\",\n        KEDITITEM = \"k-edit-item\",\n        PAGER_CLASS = \"k-listview-pager\",\n        ITEM_CLASS = \"k-listview-item\",\n        ARIA_SETSIZE = \"aria-setsize\",\n        ARIA_POSINSET = \"aria-posinset\",\n        ARIA_ROLE = \"role\",\n        ARIA_LABEL = \"aria-label\",\n        ARIA_MULTISELECTABLE = \"aria-multiselectable\",\n        ARIA_ACTIVEDESCENDANT = \"aria-activedescendant\",\n        EDIT = \"edit\",\n        REMOVE = \"remove\",\n        SAVE = \"save\",\n        MOUSEDOWN = \"mousedown\",\n        CLICK = \"click\",\n        TOUCHSTART = \"touchstart\",\n        NS = \".kendoListView\",\n        activeElement = kendo._activeElement,\n        progress = kendo.ui.progress,\n        DataSource = kendo.data.DataSource;\n\n    var ListView = kendo.ui.DataBoundWidget.extend( {\n        init: function(element, options) {\n            var that = this;\n\n            options = Array.isArray(options) ? { dataSource: options } : options;\n\n            Widget.fn.init.call(that, element, options);\n\n            options = that.options;\n\n            that.wrapper = element = that.element;\n\n            if (element[0].id) {\n                that._itemId = element[0].id + \"_lv_active\";\n            } else {\n                that._itemId = kendo.guid() + \"_lv_active\";\n            }\n\n            that._element();\n\n            that._layout();\n\n            that._dataSource();\n\n            that._setContentHeight();\n\n            that._templates();\n\n            that._navigatable();\n\n            that._selectable();\n\n            that._pageable();\n\n            that._crudHandlers();\n\n            that._scrollable();\n\n            if (that.options.autoBind) {\n                that.dataSource.fetch();\n            }\n\n            kendo.notify(that);\n        },\n\n        events: [\n            CHANGE,\n            CANCEL,\n            DATABINDING,\n            DATABOUND,\n            EDIT,\n            REMOVE,\n            SAVE,\n            KENDO_KEYDOWN\n        ],\n\n        options: {\n            name: \"ListView\",\n            autoBind: true,\n            selectable: false,\n            navigatable: false,\n            pageable: false,\n            height: null,\n            template: EMPTY_STRING,\n            altTemplate: EMPTY_STRING,\n            editTemplate: EMPTY_STRING,\n            contentTemplate: \"<div data-content='true' />\",\n            contentElement: \"div\",\n            bordered: true,\n            borders: \"\",\n            layout: \"\",\n            flex: {\n                direction: \"row\",\n                wrap: \"nowrap\"\n            },\n            grid: {},\n            scrollable: false\n        },\n\n        setOptions: function(options) {\n            Widget.fn.setOptions.call(this, options);\n\n            this._layout();\n\n            this._templates();\n\n            if (this.selectable) {\n                this.selectable.destroy();\n                this.selectable = null;\n            }\n\n            this._selectable();\n        },\n\n        _templates: function() {\n            var options = this.options;\n\n            this.template = kendo.template(options.template || EMPTY_STRING);\n            this.altTemplate = kendo.template(options.altTemplate || options.template);\n            this.editTemplate = kendo.template(options.editTemplate || EMPTY_STRING);\n        },\n\n        _item: function(action) {\n            return this.content.children()[action]();\n        },\n\n        items: function() {\n            return this.content.children(\":not(.k-loading-mask)\");\n        },\n\n        dataItem: function(element) {\n            var attr = kendo.attr(\"uid\");\n            var uid = $(element).closest(\"[\" + attr + \"]\").attr(attr);\n\n            return this.dataSource.getByUid(uid);\n        },\n\n        setDataSource: function(dataSource) {\n            this.options.dataSource = dataSource;\n            this._dataSource();\n\n            if (this.options.autoBind) {\n                dataSource.fetch();\n            }\n\n            if (this.options.scrollable === \"endless\") {\n                this._bindScrollable();\n            }\n        },\n\n        _unbindDataSource: function() {\n            var that = this;\n\n            that.dataSource.unbind(CHANGE, that._refreshHandler)\n                            .unbind(PROGRESS, that._progressHandler)\n                            .unbind(ERROR, that._errorHandler);\n        },\n\n        _dataSource: function() {\n            var that = this,\n                pageable = that.options.pageable,\n                dataSource = that.options.dataSource;\n\n            if ($.isPlainObject(pageable) && pageable.pageSize !== undefined) {\n                dataSource.pageSize = pageable.pageSize;\n            }\n\n            if (that.dataSource && that._refreshHandler) {\n                that._unbindDataSource();\n            } else {\n                that._refreshHandler = that.refresh.bind(that);\n                that._progressHandler = that._progress.bind(that);\n                that._errorHandler = that._error.bind(that);\n            }\n\n            that.dataSource = DataSource.create(dataSource)\n                                .bind(CHANGE, that._refreshHandler)\n                                .bind(PROGRESS, that._progressHandler)\n                                .bind(ERROR, that._errorHandler);\n        },\n\n        _progress: function(toggle) {\n            var element = this.wrapper;\n            if (toggle && this.content.height()) {\n                element = this.content;\n            }\n            progress(element, toggle, { opacity: true });\n        },\n\n        _error: function() {\n            progress(this.content, false);\n        },\n\n        _element: function() {\n            var options = this.options;\n            var height = options.height;\n\n            this.element.addClass(\"k-widget k-listview\");\n\n\n            if (options.contentElement) {\n                this.content = $(document.createElement(options.contentElement)).appendTo(this.element);\n            } else {\n                this.content = this.element;\n            }\n\n            if (height) {\n                this.element.css(\"height\", height);\n            }\n        },\n\n        _layout: function() {\n            var that = this;\n            var options = that.options;\n            var flex = options.flex;\n            var grid = options.grid;\n            var element = that.element;\n            var elementClassNames = [\"k-widget\", \"k-listview\"];\n            var content = that.content;\n            var contentClassNames = [\"k-listview-content\"];\n\n            element.add(content).removeClass(function(index, className) {\n                if (className.indexOf(\"k-\") >= 0) {\n                    return true;\n                }\n            });\n\n            // Element class names\n            if (options.bordered === true) {\n                elementClassNames.push(\"k-listview-bordered\");\n            }\n\n            if (typeof options.borders === \"string\" && options.borders !== EMPTY_STRING) {\n                elementClassNames.push(\"k-listview-borders-\" + options.borders);\n            }\n\n\n            // Content class names\n            if (typeof options.contentPadding === \"string\" && options.contentPadding !== EMPTY_STRING) {\n                contentClassNames.push(\"k-listview-content-padding-\" + options.contentPadding);\n            }\n\n            if (typeof options.layout === \"string\" && options.layout !== EMPTY_STRING) {\n                contentClassNames.push(\"k-d-\" + options.layout);\n            }\n\n            if (options.layout === \"flex\" && typeof flex === \"object\") {\n                if (typeof flex.direction === \"string\" && flex.direction !== \"\") {\n                    contentClassNames.push(\"k-flex-\" + flex.direction);\n                }\n\n                if (typeof flex.wrap === \"string\" && flex.wrap !== \"\") {\n                    contentClassNames.push(\"k-flex-\" + flex.wrap);\n                }\n            }\n\n            if (options.layout === \"grid\" && typeof grid === \"object\") {\n                if (typeof grid.cols === \"number\") {\n                    content.css(\"grid-template-columns\", \"repeat(\" + grid.cols + \", 1fr)\");\n                } else if (typeof grid.cols === \"string\") {\n                    content.css(\"grid-template-columns\", grid.cols);\n                }\n\n                if (typeof grid.rows === \"number\") {\n                    content.css(\"grid-template-rows\", \"repeat(\" + grid.rows + \", \" + (grid.rowHeight !== undefined ? grid.rowHeight : \"1fr\") + \")\");\n                } else if (typeof grid.rows === \"string\") {\n                    content.css(\"grid-template-rows\", grid.rows);\n                }\n\n                if (typeof grid.gutter === \"number\") {\n                    content.css(\"grid-gap\", grid.gutter);\n                } else if (typeof grid.gutter === \"string\") {\n                    content.css(\"grid-gap\", grid.gutter);\n                }\n            }\n\n            that.element.addClass(elementClassNames.join(\" \"));\n            that.content.addClass(contentClassNames.join(\" \"));\n\n        },\n\n        _setContentHeight: function() {\n            var that = this,\n                options = that.options,\n                height;\n\n            if (options.scrollable && that.wrapper.is(\":visible\")) {\n\n                height = that.wrapper.innerHeight();\n                that.content.height(height);\n            }\n        },\n\n        refresh: function(e) {\n            var that = this,\n                view = that.dataSource.view(),\n                data,\n                items,\n                item,\n                html = \"\",\n                idx,\n                length,\n                template = that.template,\n                altTemplate = that.altTemplate,\n                options = that.options,\n                role = (options.selectable || options.navigatable) ? \"option\" : \"listitem\",\n                active = activeElement(),\n                endlessAppend = that._endlessFetchInProgress,\n                index = endlessAppend ? that._skipRerenderItemsCount : 0,\n                scrollable = that.options.scrollable;\n\n            e = e || {};\n\n            if (e.action === \"itemchange\") {\n                if (!that._hasBindingTarget() && !that.editable) {\n                    data = e.items[0];\n                    item = that.items().filter(\"[\" + kendo.attr(\"uid\") + \"=\" + data.uid + \"]\");\n\n                    if (item.length > 0) {\n                        idx = item.index();\n\n                        that.angular(\"cleanup\", function() {\n                            return { elements: [ item ] };\n                        });\n\n                        item.replaceWith(template(data));\n                        item = that.items().eq(idx);\n                        item.attr(kendo.attr(\"uid\"), data.uid);\n\n                        that.angular(\"compile\", function() {\n                            return { elements: [ item ], data: [ { dataItem: data } ] };\n                        });\n\n                        that.trigger(\"itemChange\", {\n                            item: item,\n                            data: data\n                        });\n                    }\n                }\n\n                return;\n            }\n\n            if (that.trigger(DATABINDING, { action: e.action || \"rebind\", items: e.items, index: e.index })) {\n                return;\n            }\n\n            that._angularItems(\"cleanup\");\n\n            if (!endlessAppend) {\n                that._destroyEditable();\n            }\n\n            for (idx = index, length = view.length; idx < length; idx++) {\n                if (idx % 2) {\n                    html += altTemplate(view[idx]);\n                } else {\n                    html += template(view[idx]);\n                }\n            }\n\n            if (endlessAppend) {\n                that.content.append(html);\n            } else {\n                that.content.html(html);\n            }\n\n            items = that.items().not(\".k-loading-mask\");\n\n            that._ariaAttributes(view.length);\n\n            for (idx = index, length = view.length; idx < length; idx++) {\n                item = items.eq(idx);\n\n                item.addClass(ITEM_CLASS);\n\n                item.attr(kendo.attr(\"uid\"), view[idx].uid)\n                    .attr(ARIA_ROLE, role);\n\n                if (that.options.selectable) {\n                    item.attr(\"aria-selected\", \"false\");\n                }\n\n                if (that.options.pageable) {\n                    item.attr(ARIA_SETSIZE, that.dataSource.total());\n                    item.attr(ARIA_POSINSET, that.dataSource.indexOf(that.dataItem(item)) + 1);\n                }\n            }\n\n            if (that.content[0] === active && that.options.navigatable) {\n                if (that._focusNext) {\n                    that.current(that.current().next());\n                } else {\n                    if (!scrollable) {\n                        that.current(items.eq(0));\n                    }\n                }\n            }\n\n            if (that.element.attr(ARIA_ACTIVEDESCENDANT) &&\n                that.element.find(\"#\" + that.element.attr(ARIA_ACTIVEDESCENDANT)).length === 0) {\n                    that.element.removeAttr(ARIA_ACTIVEDESCENDANT);\n            }\n\n            that._setContentHeight();\n            that._angularItems(\"compile\");\n\n            that._progress(false);\n            that._endlessFetchInProgress = null;\n\n            that.trigger(DATABOUND, { action: e.action || \"rebind\", items: e.items, index: e.index });\n        },\n\n        _ariaAttributes: function(length) {\n            var el = this.element,\n                options = this.options,\n                selectable = options.selectable;\n\n            if (length === 0) {\n                el.removeAttr(ARIA_ROLE);\n                el.removeAttr(ARIA_MULTISELECTABLE);\n\n                if (el.attr(ARIA_LABEL)) {\n                    this._ariaLabelValue = el.attr(ARIA_LABEL);\n                    el.removeAttr(ARIA_LABEL);\n                }\n            } else {\n                el.attr(ARIA_ROLE, (selectable || options.navigatable) ? \"listbox\" : \"list\");\n\n                if (selectable && kendo.ui.Selectable.parseOptions(selectable).multiple) {\n                    el.attr(ARIA_MULTISELECTABLE, true);\n                }\n\n                if (this._ariaLabelValue) {\n                    el.attr(ARIA_LABEL, this._ariaLabelValue);\n                }\n            }\n        },\n\n        _pageable: function() {\n            var that = this,\n                pageable = that.options.pageable,\n                navigatable = that.options.navigatable,\n                pagerWrap,\n                settings;\n\n            if (!pageable) {\n                return;\n            }\n\n            pagerWrap = that.wrapper.find(DOT + PAGER_CLASS);\n\n            if (!pagerWrap.length) {\n                pagerWrap = $('<div />').addClass(PAGER_CLASS);\n            }\n\n            if (pageable.position === \"top\") {\n                pagerWrap\n                    .addClass(kendo.format(\"{0}-{1}\", PAGER_CLASS, pageable.position))\n                    .prependTo(that.wrapper);\n            } else {\n                pagerWrap.appendTo(that.wrapper);\n            }\n\n            if (that.pager) {\n                that.pager.destroy();\n            }\n\n            if (typeof pageable === \"object\" && pageable instanceof kendo.ui.Pager) {\n                that.pager = pageable;\n            } else {\n                pagerWrap = pageable.pagerId ? $(\"#\" + pageable.pagerId) : pagerWrap;\n\n                settings = $.extend({}, pageable, {\n                    dataSource: that.dataSource,\n                    navigatable: navigatable,\n                    pagerId: null\n                });\n\n                that.pager = new kendo.ui.Pager(pagerWrap, settings);\n            }\n        },\n\n        _selectable: function() {\n            var that = this,\n                multi,\n                current,\n                selectable = that.options.selectable,\n                navigatable = that.options.navigatable;\n\n            if (selectable) {\n                multi = kendo.ui.Selectable.parseOptions(selectable).multiple;\n\n                that.selectable = new kendo.ui.Selectable(that.element, {\n                    aria: true,\n                    multiple: multi,\n                    filter: that.options.contentElement ? \".k-listview-content \" + FOCUSSELECTOR : FOCUSSELECTOR,\n                    change: function() {\n                        that.trigger(CHANGE);\n                    }\n                });\n\n                if (navigatable) {\n                    that.element.on(\"keydown\" + NS, function(e) {\n\n                        if (!$(e.target).is(that.element)) { return; }\n\n                        if (e.keyCode === keys.SPACEBAR) {\n                            current = that.current();\n\n                            if (e.target == e.currentTarget) {\n                                e.preventDefault();\n                            }\n\n                            if (multi) {\n                                if (!e.ctrlKey) {\n                                    that.selectable.clear();\n                                } else {\n                                    if (current && current.hasClass(SELECTED)) {\n                                        current.removeClass(SELECTED);\n                                        that.trigger(CHANGE);\n                                        return;\n                                    }\n                                }\n                            } else {\n                                that.selectable.clear();\n                            }\n\n                            that.selectable.value(current);\n                        }\n                    });\n                }\n            }\n        },\n\n        _scrollable: function() {\n            var that = this;\n            var scrollable = that.options.scrollable;\n\n            if (scrollable) {\n\n                that.content.css({\n                    \"overflow-y\": \"scroll\",\n                    \"position\": \"relative\",\n                    \"-webkit-overflow-scrolling\": \"touch\"\n                });\n\n                if (scrollable === \"endless\") {\n                    that._bindScrollable();\n                }\n            }\n        },\n\n        _bindScrollable: function() {\n            var that = this;\n            var originalPageSize = that._endlessPageSize = that.dataSource.options.pageSize;\n\n            that.content\n                .off(\"scroll\" + NS)\n                .on(\"scroll\" + NS, function() {\n                    if (this.scrollTop + this.clientHeight - this.scrollHeight >= -15 &&\n                    !that._endlessFetchInProgress &&\n                    that._endlessPageSize < that.dataSource.total()) {\n                        that._skipRerenderItemsCount = that._endlessPageSize;\n                        that._endlessPageSize = that._skipRerenderItemsCount + originalPageSize;\n                        that.dataSource.options.endless = true;\n                        that._endlessFetchInProgress = true;\n                        that.dataSource.pageSize(that._endlessPageSize);\n                    }\n                });\n        },\n\n        current: function(candidate) {\n            var that = this,\n                element = that.element,\n                current = that._current,\n                id = that._itemId;\n\n            if (candidate === undefined) {\n                return current;\n            }\n\n            if (current && current[0]) {\n                if (current[0].id === id) {\n                    current.removeAttr(\"id\");\n                }\n\n                current.removeClass(FOCUSED);\n                element.removeAttr(ARIA_ACTIVEDESCENDANT);\n            }\n\n            if (candidate && candidate[0]) {\n                id = candidate[0].id || id;\n\n                that._scrollTo(candidate[0]);\n\n                element.attr(ARIA_ACTIVEDESCENDANT, id);\n                candidate.addClass(FOCUSED).attr(\"id\", id);\n            }\n\n            that._current = candidate;\n        },\n\n        _scrollTo: function(element) {\n            var that = this,\n                content = that.content,\n                container,\n                UseJQueryoffset = false,\n                SCROLL = \"scroll\";\n\n            if (content.css(\"overflow\") === \"auto\" || content.css(\"overflow\") === SCROLL || content.css(\"overflow-y\") === SCROLL) {\n                container = content[0];\n            } else {\n                container = window;\n                UseJQueryoffset = true;\n            }\n\n            var scrollDirectionFunc = function(direction, dimension) {\n\n                var elementOffset = UseJQueryoffset ? $(element).offset()[direction.toLowerCase()] : element[\"offset\" + direction],\n                    elementDimension = element[\"client\" + dimension],\n                    containerScrollAmount = $(container)[SCROLL + direction](),\n                    containerDimension = $(container)[dimension.toLowerCase()]();\n\n                if (elementOffset + elementDimension > containerScrollAmount + containerDimension) {\n                    $(container)[SCROLL + direction](elementOffset + elementDimension - containerDimension);\n                } else if (elementOffset < containerScrollAmount) {\n                    $(container)[SCROLL + direction](elementOffset);\n                }\n            };\n\n            scrollDirectionFunc(\"Top\", \"Height\");\n            scrollDirectionFunc(\"Left\", \"Width\");\n        },\n\n        _navigatable: function() {\n            var that = this,\n                navigatable = that.options.navigatable,\n                element = that.element,\n                content = that.content,\n                clickCallback = function(e) {\n                    that.current($(e.currentTarget));\n                    if (!$(e.target).is(\":button, a, :input, a > .k-icon, textarea\")) {\n                        kendo.focusElement(element);\n                    }\n                };\n\n            if (navigatable) {\n                that._tabindex();\n\n                element\n                    .on(\"focus\" + NS, function() {\n                        var current = that._current;\n\n                        if (!current || !current.is(\":visible\")) {\n                            current = that._item(\"first\");\n                        }\n\n                        that.current(current);\n                    })\n                    .on(\"focusout\" + NS, function() {\n                        if (that._current) {\n                            that._current.removeClass(FOCUSED);\n                        }\n                    })\n                    .on(\"keydown\" + NS, that, function(e) {\n                        var key = e.keyCode,\n                            current = that.current(),\n                            target = $(e.target),\n                            canHandle = !target.is(\":button, textarea, a, a > .t-icon, input\"),\n                            isTextBox = target.is(\":text, :password\"),\n                            preventDefault = kendo.preventDefault,\n                            editItem = content.find(\".\" + KEDITITEM),\n                            active = activeElement(), idx,\n                            scrollable = that.options.scrollable;\n\n                        if (target.hasClass(PAGER_CLASS) || (!canHandle && !isTextBox && key !== keys.ESC) || (isTextBox && key !== keys.ESC && key !== keys.ENTER)) {\n                            return;\n                        }\n\n                        if (key === keys.UP || key === keys.LEFT) {\n                            if (current && current[0]) {\n                                current = current.prev();\n                            }\n\n                            if (current && current[0]) {\n                                that.current(current);\n                            }\n                            else if (!scrollable) {\n                                that.current(that._item(\"last\"));\n                            }\n                            preventDefault(e);\n                        }\n\n                        if (key === keys.DOWN || key === keys.RIGHT) {\n                            if (scrollable) {\n                                if (that.options.scrollable === \"endless\" && !current.next().length) {\n                                    that.content[0].scrollTop = that.content[0].scrollHeight;\n                                    that._focusNext = true;\n                                } else {\n                                    current = current.next();\n\n                                    if (current && current[0]) {\n                                        that.current(current);\n                                    }\n                                }\n                            }\n                            else {\n                                current = current.next();\n                                that.current(!current || !current[0] ? that._item(\"first\") : current);\n                            }\n                            preventDefault(e);\n                        }\n\n                        if (key === keys.PAGEUP) {\n                            that.current(null);\n                            that.dataSource.page(that.dataSource.page() - 1);\n                            preventDefault(e);\n                        }\n\n                        if (key === keys.PAGEDOWN) {\n                            that.current(null);\n                            that.dataSource.page(that.dataSource.page() + 1);\n                            preventDefault(e);\n                        }\n\n                        if (key === keys.HOME) {\n                            that.current(that._item(\"first\"));\n                            preventDefault(e);\n                        }\n\n                        if (key === keys.END) {\n                            that.current(that._item(\"last\"));\n                            preventDefault(e);\n                        }\n\n                        if (key === keys.ENTER) {\n                            if (editItem.length !== 0 && (canHandle || isTextBox)) {\n                                idx = that.items().index(editItem);\n\n                                if (active) {\n                                    active.blur();\n                                }\n\n                                that.save();\n\n                                var focusAgain = function() {\n                                    that.element.trigger(\"focus\");\n                                    that.current(that.items().eq(idx));\n                                };\n\n                                that.one(\"dataBound\", focusAgain);\n                            } else if (that.options.editTemplate !== \"\") {\n                                that.edit(current);\n                            }\n                        }\n\n                        if (key === keys.ESC) {\n                            editItem = content.find(\".\" + KEDITITEM);\n\n                            if (editItem.length === 0) {\n                                return;\n                            }\n\n                            idx = that.items().index(editItem);\n                            that.cancel();\n                            that.element.trigger(\"focus\");\n                            that.current(that.items().eq(idx));\n                        }\n                    });\n\n                element.on(MOUSEDOWN + NS + \" \" + TOUCHSTART + NS, that.options.contentElement ? \".k-listview-content \" + FOCUSSELECTOR : FOCUSSELECTOR, clickCallback.bind(that));\n            }\n        },\n\n        clearSelection: function() {\n            var that = this;\n            that.selectable.clear();\n            that.trigger(CHANGE);\n        },\n\n        select: function(items) {\n            var that = this,\n                selectable = that.selectable;\n\n            items = $(items);\n\n            if (items.length) {\n                if (!selectable.options.multiple) {\n                    selectable.clear();\n                    items = items.first();\n                }\n                selectable.value(items);\n                return;\n            }\n\n            return selectable.value();\n        },\n\n        _destroyEditable: function() {\n            var that = this;\n            if (that.editable) {\n                that.editable.destroy();\n                delete that.editable;\n            }\n        },\n\n        _modelFromElement: function(element) {\n            var uid = element.attr(kendo.attr(\"uid\"));\n\n            return this.dataSource.getByUid(uid);\n        },\n\n        _closeEditable: function() {\n            var that = this,\n                editable = that.editable,\n                options = that.options,\n                role = (options.selectable || options.navigatable) ? \"option\" : \"listitem\",\n                data,\n                item,\n                index,\n                template = that.template;\n\n            if (editable) {\n                if (editable.element.index() % 2) {\n                    template = that.altTemplate;\n                }\n\n                that.angular(\"cleanup\", function() {\n                    return { elements: [ editable.element ] };\n                });\n\n                data = that._modelFromElement(editable.element);\n                that._destroyEditable();\n\n                index = editable.element.index();\n                editable.element.replaceWith(template(data));\n                item = that.items().eq(index);\n                item.addClass(ITEM_CLASS);\n                item.attr(kendo.attr(\"uid\"), data.uid);\n                item.attr(ARIA_ROLE, role);\n\n                if (that._hasBindingTarget()) {\n                    kendo.bind(item, data);\n                }\n\n                that.angular(\"compile\", function() {\n                    return { elements: [ item ], data: [ { dataItem: data } ] };\n                });\n            }\n            return true;\n        },\n\n        edit: function(item) {\n            var that = this,\n                data = that._modelFromElement(item),\n                container,\n                uid = data.uid,\n                index;\n\n            that.cancel();\n\n            item = that.items().filter(\"[\" + kendo.attr(\"uid\") + \"=\" + uid + \"]\");\n            index = item.index();\n            item.replaceWith(that.editTemplate(data));\n            container = that.items().eq(index).addClass(KEDITITEM).attr(kendo.attr(\"uid\"), data.uid);\n            that.editable = container.kendoEditable({\n                model: data,\n                clearContainer: false,\n                errorTemplate: false,\n                target: that\n            }).data(\"kendoEditable\");\n\n            that.trigger(EDIT, { model: data, item: container });\n        },\n\n        save: function() {\n            var that = this,\n                editable = that.editable,\n                model;\n\n            if (!editable) {\n                return;\n            }\n\n            var container = editable.element;\n            model = that._modelFromElement(container);\n\n            if (editable.end() && !that.trigger(SAVE, { model: model, item: container })) {\n                that._closeEditable();\n                that.dataSource.sync();\n            }\n        },\n\n        remove: function(item) {\n            var that = this,\n                dataSource = that.dataSource,\n                data = that._modelFromElement(item);\n\n            if (that.editable) {\n                dataSource.cancelChanges(that._modelFromElement(that.editable.element));\n                that._closeEditable();\n            }\n\n            if (!that.trigger(REMOVE, { model: data, item: item })) {\n                if (item.attr(\"id\") === that.element.attr(ARIA_ACTIVEDESCENDANT)) {\n                    that.element.removeAttr(ARIA_ACTIVEDESCENDANT);\n                }\n\n                item.hide();\n                dataSource.remove(data);\n                dataSource.sync();\n            }\n        },\n\n        add: function() {\n            var that = this,\n                dataItem,\n                dataSource = that.dataSource,\n                index = dataSource.indexOf((dataSource.view() || [])[0]);\n\n            if (index < 0) {\n                index = 0;\n            }\n\n            that.cancel();\n            dataItem = dataSource.insert(index, {});\n            that.edit(that.element.find(\"[data-uid='\" + dataItem.uid + \"']\"));\n        },\n\n        cancel: function() {\n            var that = this,\n                dataSource = that.dataSource;\n\n            if (that.editable) {\n                var container = that.editable.element;\n                var model = that._modelFromElement(container);\n\n                if (!that.trigger(CANCEL, { model: model, container: container })) {\n                    dataSource.cancelChanges(model);\n                    that._closeEditable();\n                }\n            }\n        },\n\n        _crudHandlers: function() {\n            var that = this,\n                touchstartNs = TOUCHSTART + NS,\n                clickNs = CLICK + NS;\n\n            that.content.on(touchstartNs + \" \" + clickNs, \".k-edit-button\", function(e) {\n                e.preventDefault();\n                var item = $(this).closest(\"[\" + kendo.attr(\"uid\") + \"]\");\n                setTimeout(function() {\n                    that.edit(item);\n                });\n            });\n\n\n            that.content.on(touchstartNs + \" \" + clickNs, \".k-delete-button\", function(e) {\n                e.preventDefault();\n                var item = $(this).closest(\"[\" + kendo.attr(\"uid\") + \"]\");\n                 setTimeout(function() {\n                    that.remove(item);\n                 });\n            });\n\n            that.content.on(clickNs, \".k-update-button\", function(e) {\n                that.save();\n                e.preventDefault();\n            });\n\n            that.content.on(clickNs, \".k-cancel-button\", function(e) {\n                that.cancel();\n                e.preventDefault();\n            });\n        },\n\n        destroy: function() {\n            var that = this;\n\n            Widget.fn.destroy.call(that);\n\n            that._unbindDataSource();\n\n            that._destroyEditable();\n\n            that.element.off(NS);\n            that.content.off(NS);\n\n            that._endlessFetchInProgress = that._endlessPageSize = that._skipRerenderItemsCount = that._focusNext = null;\n\n            if (that.pager) {\n                that.pager.destroy();\n            }\n\n            kendo.destroy(that.element);\n        }\n    });\n\n    kendo.ui.plugin(ListView);\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) { (a3 || a2)(); });\n\n"],"names":["define","__meta__","id","name","category","description","depends","features","$","window","kendo","jQuery","undefined","CHANGE","KENDO_KEYDOWN","CANCEL","DATABOUND","DATABINDING","Widget","ui","keys","EMPTY_STRING","DOT","FOCUSSELECTOR","PROGRESS","ERROR","FOCUSED","SELECTED","KEDITITEM","PAGER_CLASS","ITEM_CLASS","ARIA_SETSIZE","ARIA_POSINSET","ARIA_ROLE","ARIA_LABEL","ARIA_MULTISELECTABLE","ARIA_ACTIVEDESCENDANT","EDIT","REMOVE","SAVE","MOUSEDOWN","CLICK","TOUCHSTART","NS","activeElement","_activeElement","progress","DataSource","data","ListView","DataBoundWidget","extend","init","element","options","that","this","Array","isArray","dataSource","fn","call","wrapper","_itemId","guid","_element","_layout","_dataSource","_setContentHeight","_templates","_navigatable","_selectable","_pageable","_crudHandlers","_scrollable","autoBind","fetch","notify","events","selectable","navigatable","pageable","height","template","altTemplate","editTemplate","contentTemplate","contentElement","bordered","borders","layout","flex","direction","wrap","grid","scrollable","setOptions","destroy","_item","action","content","children","items","dataItem","attr","uid","closest","getByUid","setDataSource","_bindScrollable","_unbindDataSource","unbind","_refreshHandler","_progressHandler","_errorHandler","isPlainObject","pageSize","refresh","bind","_progress","_error","create","toggle","opacity","addClass","document","createElement","appendTo","css","elementClassNames","contentClassNames","add","removeClass","index","className","indexOf","push","contentPadding","cols","rows","rowHeight","gutter","join","is","innerHeight","e","view","item","html","idx","length","role","active","endlessAppend","_endlessFetchInProgress","_skipRerenderItemsCount","_hasBindingTarget","editable","filter","angular","elements","replaceWith","eq","trigger","_angularItems","_destroyEditable","append","not","_ariaAttributes","total","_focusNext","current","next","find","removeAttr","el","_ariaLabelValue","Selectable","parseOptions","multiple","pagerWrap","settings","position","format","prependTo","pager","Pager","pagerId","multi","aria","change","on","target","keyCode","SPACEBAR","currentTarget","preventDefault","ctrlKey","clear","hasClass","value","overflow-y","-webkit-overflow-scrolling","originalPageSize","_endlessPageSize","off","scrollTop","clientHeight","scrollHeight","endless","candidate","_current","_scrollTo","container","UseJQueryoffset","SCROLL","scrollDirectionFunc","dimension","elementOffset","offset","toLowerCase","elementDimension","containerScrollAmount","containerDimension","clickCallback","focusElement","_tabindex","key","canHandle","isTextBox","editItem","ESC","ENTER","UP","LEFT","prev","DOWN","RIGHT","PAGEUP","page","PAGEDOWN","HOME","END","blur","save","focusAgain","one","edit","cancel","clearSelection","select","first","_modelFromElement","_closeEditable","kendoEditable","model","clearContainer","errorTemplate","end","sync","remove","cancelChanges","hide","insert","touchstartNs","clickNs","setTimeout","plugin","amd","a1","a2","a3"],"mappings":"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"}